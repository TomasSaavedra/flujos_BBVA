!function(){function r(a,b,d){"addEventListener"in window?a.addEventListener(b,d,!1):"attachEvent"in window&&a.attachEvent("on"+b,d)}function c(a){y&&"object"==typeof window.console&&console.log(k+"["+l+"] "+a)}function t(a){"object"==typeof window.console&&console.warn(k+"["+l+"] "+a)}function Z(){var a=z.substr(K).split(":");l=a[0];A=void 0!==a[1]?Number(a[1]):A;B=void 0!==a[2]?"true"===a[2]?!0:!1:B;y=void 0!==a[3]?"true"===a[3]?!0:!1:y;g=void 0!==a[4]?Number(a[4]):g;C=void 0!==a[5]?"true"===a[5]?
!0:!1:C;D=void 0!==a[6]?"true"===a[6]?!0:!1:D;m=a[7];e=void 0!==a[8]?a[8]:e;L=a[9];M=a[10];u=void 0!==a[11]?Number(a[11]):u}function E(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+' set to "'+b+'"'))}function aa(){r(window,"resize",function(){h("resize","Window resized")})}function ba(){r(window,"click",function(){h("click","Window clicked")})}function N(){F!==e&&(e in G||(t(e+" is not a valid option for heightCalculationMethod."),e="bodyScroll"),c('Height calculation method set to "'+
e+'"'))}function ca(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function da(){C&&(c("Enable public methods"),window.parentIFrame={close:function(){h("close","parentIFrame.close()",0,0)},getId:function(){return l},reset:function(){O("parentIFrame.size")},scrollTo:function(a,b){v(b,a,"scrollTo")},sendMessage:function(a,b){v(0,0,"message",a,b)},setHeightCalculationMethod:function(a){e=a;N()},setTargetOrigin:function(a){c("Set targetOrigin: "+
a);P=a},size:function(a,b){var d=""+(a?a:"")+(b?","+b:"");H();h("size","parentIFrame.size("+d+")",a,b)}})}function Q(){0!==g&&(c("setInterval: "+g+"ms"),setInterval(function(){h("interval","setInterval: "+g)},Math.abs(g)))}function ea(a){function b(a){void 0!==a.height&&void 0!==a.width&&0!==a.height&&0!==a.width||(c("Attach listerner to "+a.src),r(a,"load",function(){h("imageLoad","Image loaded")}))}a.forEach(function(a){"attributes"===a.type&&"src"===a.attributeName?b(a.target):"childList"===a.type&&
(a=a.target.querySelectorAll("img"),Array.prototype.forEach.call(a,function(a){b(a)}))})}function ga(){function a(){var a=document.querySelector("body"),fa=new b(function(a){h("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type);ea(a)});c("Enable MutationObserver");fa.observe(a,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var b=window.MutationObserver||window.WebKitMutationObserver;b?0>g?Q():a():(t("MutationObserver not supported in this browser!"),
Q())}function n(){function a(a){var d=document.body,c=0;if("defaultView"in document&&"getComputedStyle"in document.defaultView)c=document.defaultView.getComputedStyle(d,null),c=null!==c?c[a]:0;else{a=d.currentStyle[a];if(/^\d+(px)?$/i.test(a))d=parseInt(a,R);else var c=d.style.left,e=d.runtimeStyle.left,d=(d.runtimeStyle.left=d.currentStyle.left,d.style.left=a||0,a=d.style.pixelLeft,d.style.left=c,d.runtimeStyle.left=e,a);c=d}return parseInt(c,R)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}
function I(){return document.body.scrollHeight}function J(){return document.documentElement.offsetHeight}function w(){return document.documentElement.scrollHeight}function ha(){for(var a=document.querySelectorAll("body *"),b=a.length,d=0,e=(new Date).getTime(),f=0;b>f;f++)a[f].getBoundingClientRect().bottom>d&&(d=a[f].getBoundingClientRect().bottom);return e=(new Date).getTime()-e,c("Parsed "+b+" HTML elements"),c("LowestElement bottom position calculated in "+e+"ms"),d}function S(){return Math.max.apply(null,
[n(),I(),J(),w()])}function h(a,b,d,h){function f(){a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+b)}var g,k;x&&a in ia?c("Trigger event cancelled: "+a):(g=void 0!==d?d:G[e](),k=void 0!==h?h:Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),Math.abs(p-g)<=u&&(!B||Math.abs(q-k)<=u))?!(a in{init:1,interval:1,size:1})&&e in ja?O(b):a in{interval:1}||(f(),c("No change in size detected")):(f(),H(),p=g,q=k,v(p,q,a))}function H(){x||(x=!0,c("Trigger event lock on"));clearTimeout(T);
T=setTimeout(function(){x=!1;c("Trigger event lock off");c("--")},U)}function V(a){p=G[e]();q=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);v(p,q,a)}function O(a){var b=e;e=F;c("Reset trigger event: "+a);H();V("reset");e=b}function v(a,b,d,e,f){void 0===f?f=P:c("Message targetOrigin: "+f);a=l+":"+(a+":"+b)+":"+d+(void 0!==e?":"+e:"");c("Sending message to host page ("+a+")");W.postMessage(k+a,f)}var D=!0,R=10,L="",A=0,m="",M="",B=!1,ia={resize:1,click:1},U=128,p=1,X=!0,
F="offset",e=F,Y=!0,z="",g=32,y=!1,k="[iFrameSizer]",K=k.length,l="",C=!1,ja={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},P="*",W=window.parent,u=0,x=!1,T=null,q=1,G={offset:n,bodyOffset:n,bodyScroll:I,documentElementOffset:J,scroll:w,documentElementScroll:w,max:S,min:function(){return Math.min.apply(null,[n(),I(),J(),w()])},grow:S,lowestElement:function(){return Math.max(n(),ha())}};r(window,"message",function(a){function b(){z=a.data;W=a.source;c("Initialising iFrame");Z();void 0===m&&
(m=A+"px");-1!==m.indexOf("-")&&t("Negative CSS value ignored for margin");E("margin",m);E("background",L);E("padding",M);ca();N();document.documentElement.style.height="";document.body.style.height="";c('HTML & body height set to "auto"');da();!0===D?(aa(),ba(),ga()):c("Auto Resize disabled");h("init","Init message from host page");X=!1;setTimeout(function(){Y=!1},U)}k===(""+a.data).substr(0,K)&&(X&&a.data.split(":")[2]in{"true":1,"false":1}?b():"reset"===a.data.split("]")[1]?Y?c("Page reset ignored by init"):
(c("Page size reset by host page"),V("resetPage")):a.data===z||"iFrameResize"in window||t("Unexpected message ("+a.data+")"))})}();
