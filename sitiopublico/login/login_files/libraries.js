window.Modernizr = (function(window, document, undefined) {
    var version = "2.6.2", Modernizr = {}, enableClasses = true, docElement = document.documentElement, mod = "modernizr", modElem = document.createElement(mod), mStyle = modElem.style, inputElem = document.createElement("input"), smile = ":)", toString = {}.toString, prefixes = " -webkit- -moz- -o- -ms- ".split(" "), omPrefixes = "Webkit Moz O ms", cssomPrefixes = omPrefixes.split(" "), domPrefixes = omPrefixes.toLowerCase().split(" "), ns = {svg: "http://www.w3.org/2000/svg"}, tests = {}, inputs = {}, attrs = {}, classes = [], slice = classes.slice, featureName, injectElementWithStyles = function(rule, callback, nodes, testnames) {
        var style, ret, node, docOverflow, div = document.createElement("div"), body = document.body, fakeBody = body || document.createElement("body");
        if (parseInt(nodes, 10)) {
            while (nodes--) {
                node = document.createElement("div");
                node.id = testnames ? testnames[nodes] : mod + (nodes + 1);
                div.appendChild(node);
            }
        }
        style = ["&#173;", '<style id="s', mod, '">', rule, "</style>"].join("");
        div.id = mod;
        (body ? div : fakeBody).innerHTML += style;
        fakeBody.appendChild(div);
        if (!body) {
            fakeBody.style.background = "";
            fakeBody.style.overflow = "hidden";
            docOverflow = docElement.style.overflow;
            docElement.style.overflow = "hidden";
            docElement.appendChild(fakeBody);
        }
        ret = callback(div, rule);
        if (!body) {
            fakeBody.parentNode.removeChild(fakeBody);
            docElement.style.overflow = docOverflow;
        } else {
            div.parentNode.removeChild(div);
        }
        return !!ret;
    }, testMediaQuery = function(mq) {
        var matchMedia = window.matchMedia || window.msMatchMedia;
        if (matchMedia) {
            return matchMedia(mq).matches;
        }
        var bool;
        injectElementWithStyles("@media " + mq + " { #" + mod + " { position: absolute; } }", function(node) {
            bool = (window.getComputedStyle ? getComputedStyle(node, null) : node.currentStyle)["position"] == "absolute";
        });
        return bool;
    }, isEventSupported = (function() {
        var TAGNAMES = {select: "input",change: "input",submit: "form",reset: "form",error: "img",load: "img",abort: "img"};
        function isEventSupported(eventName, element) {
            element = element || document.createElement(TAGNAMES[eventName] || "div");
            eventName = "on" + eventName;
            var isSupported = eventName in element;
            if (!isSupported) {
                if (!element.setAttribute) {
                    element = document.createElement("div");
                }
                if (element.setAttribute && element.removeAttribute) {
                    element.setAttribute(eventName, "");
                    isSupported = is(element[eventName], "function");
                    if (!is(element[eventName], "undefined")) {
                        element[eventName] = undefined;
                    }
                    element.removeAttribute(eventName);
                }
            }
            element = null;
            return isSupported;
        }
        return isEventSupported;
    })(), _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;
    if (!is(_hasOwnProperty, "undefined") && !is(_hasOwnProperty.call, "undefined")) {
        hasOwnProp = function(object, property) {
            return _hasOwnProperty.call(object, property);
        };
    } else {
        hasOwnProp = function(object, property) {
            return ((property in object) && is(object.constructor.prototype[property], "undefined"));
        };
    }
    if (!Function.prototype.bind) {
        Function.prototype.bind = function bind(that) {
            var target = this;
            if (typeof target != "function") {
                throw new TypeError();
            }
            var args = slice.call(arguments, 1), bound = function() {
                if (this instanceof bound) {
                    var F = function() {
                    };
                    F.prototype = target.prototype;
                    var self = new F();
                    var result = target.apply(self, args.concat(slice.call(arguments)));
                    if (Object(result) === result) {
                        return result;
                    }
                    return self;
                } else {
                    return target.apply(that, args.concat(slice.call(arguments)));
                }
            };
            return bound;
        };
    }
    function setCss(str) {
        mStyle.cssText = str;
    }
    function setCssAll(str1, str2) {
        return setCss(prefixes.join(str1 + ";") + (str2 || ""));
    }
    function is(obj, type) {
        return typeof obj === type;
    }
    function contains(str, substr) {
        return !!~("" + str).indexOf(substr);
    }
    function testProps(props, prefixed) {
        for (var i in props) {
            var prop = props[i];
            if (!contains(prop, "-") && mStyle[prop] !== undefined) {
                return prefixed == "pfx" ? prop : true;
            }
        }
        return false;
    }
    function testDOMProps(props, obj, elem) {
        for (var i in props) {
            var item = obj[props[i]];
            if (item !== undefined) {
                if (elem === false) {
                    return props[i];
                }
                if (is(item, "function")) {
                    return item.bind(elem || obj);
                }
                return item;
            }
        }
        return false;
    }
    function testPropsAll(prop, prefixed, elem) {
        var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1), props = (prop + " " + cssomPrefixes.join(ucProp + " ") + ucProp).split(" ");
        if (is(prefixed, "string") || is(prefixed, "undefined")) {
            return testProps(props, prefixed);
        } else {
            props = (prop + " " + (domPrefixes).join(ucProp + " ") + ucProp).split(" ");
            return testDOMProps(props, prefixed, elem);
        }
    }
    tests.flexbox = function() {
        return testPropsAll("flexWrap");
    };
    tests.flexboxlegacy = function() {
        return testPropsAll("boxDirection");
    };
    tests.canvas = function() {
        var elem = document.createElement("canvas");
        return !!(elem.getContext && elem.getContext("2d"));
    };
    tests.canvastext = function() {
        return !!(Modernizr.canvas && is(document.createElement("canvas").getContext("2d").fillText, "function"));
    };
    tests.webgl = function() {
        return !!window.WebGLRenderingContext;
    };
    tests.touch = function() {
        var bool;
        if (("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch) {
            bool = true;
        } else {
            injectElementWithStyles(["@media (", prefixes.join("touch-enabled),("), mod, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(node) {
                bool = node.offsetTop === 9;
            });
        }
        return bool;
    };
    tests.geolocation = function() {
        return "geolocation" in navigator;
    };
    tests.postmessage = function() {
        return !!window.postMessage;
    };
    tests.websqldatabase = function() {
        return !!window.openDatabase;
    };
    tests.indexedDB = function() {
        return !!testPropsAll("indexedDB", window);
    };
    tests.hashchange = function() {
        return isEventSupported("hashchange", window) && (document.documentMode === undefined || document.documentMode > 7);
    };
    tests.history = function() {
        return !!(window.history && history.pushState);
    };
    tests.draganddrop = function() {
        var div = document.createElement("div");
        return ("draggable" in div) || ("ondragstart" in div && "ondrop" in div);
    };
    tests.websockets = function() {
        return "WebSocket" in window || "MozWebSocket" in window;
    };
    tests.rgba = function() {
        setCss("background-color:rgba(150,255,150,.5)");
        return contains(mStyle.backgroundColor, "rgba");
    };
    tests.hsla = function() {
        setCss("background-color:hsla(120,40%,100%,.5)");
        return contains(mStyle.backgroundColor, "rgba") || contains(mStyle.backgroundColor, "hsla");
    };
    tests.multiplebgs = function() {
        setCss("background:url(https://),url(https://),red url(https://)");
        return (/(url\s*\(.*?){3}/).test(mStyle.background);
    };
    tests.backgroundsize = function() {
        return testPropsAll("backgroundSize");
    };
    tests.borderimage = function() {
        return testPropsAll("borderImage");
    };
    tests.borderradius = function() {
        return testPropsAll("borderRadius");
    };
    tests.boxshadow = function() {
        return testPropsAll("boxShadow");
    };
    tests.textshadow = function() {
        return document.createElement("div").style.textShadow === "";
    };
    tests.opacity = function() {
        setCssAll("opacity:.55");
        return (/^0.55$/).test(mStyle.opacity);
    };
    tests.cssanimations = function() {
        return testPropsAll("animationName");
    };
    tests.csscolumns = function() {
        return testPropsAll("columnCount");
    };
    tests.cssgradients = function() {
        var str1 = "background-image:", str2 = "gradient(linear,left top,right bottom,from(#9f9),to(white));", str3 = "linear-gradient(left top,#9f9, white);";
        setCss((str1 + "-webkit- ".split(" ").join(str2 + str1) + prefixes.join(str3 + str1)).slice(0, -str1.length));
        return contains(mStyle.backgroundImage, "gradient");
    };
    tests.cssreflections = function() {
        return testPropsAll("boxReflect");
    };
    tests.csstransforms = function() {
        return !!testPropsAll("transform");
    };
    tests.csstransforms3d = function() {
        var ret = !!testPropsAll("perspective");
        if (ret && "webkitPerspective" in docElement.style) {
            injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(node, rule) {
                ret = node.offsetLeft === 9 && node.offsetHeight === 3;
            });
        }
        return ret;
    };
    tests.csstransitions = function() {
        return testPropsAll("transition");
    };
    tests.fontface = function() {
        var bool;
        injectElementWithStyles('@font-face {font-family:"font";src:url("https://")}', function(node, rule) {
            var style = document.getElementById("smodernizr"), sheet = style.sheet || style.styleSheet, cssText = sheet ? (sheet.cssRules && sheet.cssRules[0] ? sheet.cssRules[0].cssText : sheet.cssText || "") : "";
            bool = /src/i.test(cssText) && cssText.indexOf(rule.split(" ")[0]) === 0;
        });
        return bool;
    };
    tests.generatedcontent = function() {
        var bool;
        injectElementWithStyles(["#", mod, "{font:0/0 a}#", mod, ':after{content:"', smile, '";visibility:hidden;font:3px/1 a}'].join(""), function(node) {
            bool = node.offsetHeight >= 3;
        });
        return bool;
    };
    tests.video = function() {
        var elem = document.createElement("video"), bool = false;
        try {
            if (bool = !!elem.canPlayType) {
                bool = new Boolean(bool);
                bool.ogg = elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, "");
                bool.h264 = elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, "");
                bool.webm = elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "");
            }
        } catch (e) {
        }
        return bool;
    };
    tests.audio = function() {
        var elem = document.createElement("audio"), bool = false;
        try {
            if (bool = !!elem.canPlayType) {
                bool = new Boolean(bool);
                bool.ogg = elem.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "");
                bool.mp3 = elem.canPlayType("audio/mpeg;").replace(/^no$/, "");
                bool.wav = elem.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "");
                bool.m4a = (elem.canPlayType("audio/x-m4a;") || elem.canPlayType("audio/aac;")).replace(/^no$/, "");
            }
        } catch (e) {
        }
        return bool;
    };
    tests.localstorage = function() {
        try {
            localStorage.setItem(mod, mod);
            localStorage.removeItem(mod);
            return true;
        } catch (e) {
            return false;
        }
    };
    tests.sessionstorage = function() {
        try {
            sessionStorage.setItem(mod, mod);
            sessionStorage.removeItem(mod);
            return true;
        } catch (e) {
            return false;
        }
    };
    tests.webworkers = function() {
        return !!window.Worker;
    };
    tests.applicationcache = function() {
        return !!window.applicationCache;
    };
    tests.svg = function() {
        return !!document.createElementNS && !!document.createElementNS(ns.svg, "svg").createSVGRect;
    };
    tests.inlinesvg = function() {
        var div = document.createElement("div");
        div.innerHTML = "<svg/>";
        return (div.firstChild && div.firstChild.namespaceURI) == ns.svg;
    };
    tests.smil = function() {
        return !!document.createElementNS && /SVGAnimate/.test(toString.call(document.createElementNS(ns.svg, "animate")));
    };
    tests.svgclippaths = function() {
        return !!document.createElementNS && /SVGClipPath/.test(toString.call(document.createElementNS(ns.svg, "clipPath")));
    };
    function webforms() {
        Modernizr.input = (function(props) {
            for (var i = 0, len = props.length; i < len; i++) {
                attrs[props[i]] = !!(props[i] in inputElem);
            }
            if (attrs.list) {
                attrs.list = !!(document.createElement("datalist") && window.HTMLDataListElement);
            }
            return attrs;
        })("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));
        Modernizr.inputtypes = (function(props) {
            for (var i = 0, bool, inputElemType, defaultView, len = props.length; i < len; i++) {
                inputElem.setAttribute("type", inputElemType = props[i]);
                bool = inputElem.type !== "text";
                if (bool) {
                    inputElem.value = smile;
                    inputElem.style.cssText = "position:absolute;visibility:hidden;";
                    if (/^range$/.test(inputElemType) && inputElem.style.WebkitAppearance !== undefined) {
                        docElement.appendChild(inputElem);
                        defaultView = document.defaultView;
                        bool = defaultView.getComputedStyle && defaultView.getComputedStyle(inputElem, null).WebkitAppearance !== "textfield" && (inputElem.offsetHeight !== 0);
                        docElement.removeChild(inputElem);
                    } else {
                        if (/^(search|tel)$/.test(inputElemType)) {
                        } else {
                            if (/^(url|email)$/.test(inputElemType)) {
                                bool = inputElem.checkValidity && inputElem.checkValidity() === false;
                            } else {
                                bool = inputElem.value != smile;
                            }
                        }
                    }
                }
                inputs[props[i]] = !!bool;
            }
            return inputs;
        })("search tel url email datetime date month week time datetime-local number range color".split(" "));
    }
    for (var feature in tests) {
        if (hasOwnProp(tests, feature)) {
            featureName = feature.toLowerCase();
            Modernizr[featureName] = tests[feature]();
            classes.push((Modernizr[featureName] ? "" : "no-") + featureName);
        }
    }
    Modernizr.input || webforms();
    Modernizr.addTest = function(feature, test) {
        if (typeof feature == "object") {
            for (var key in feature) {
                if (hasOwnProp(feature, key)) {
                    Modernizr.addTest(key, feature[key]);
                }
            }
        } else {
            feature = feature.toLowerCase();
            if (Modernizr[feature] !== undefined) {
                return Modernizr;
            }
            test = typeof test == "function" ? test() : test;
            if (typeof enableClasses !== "undefined" && enableClasses) {
                docElement.className += " " + (test ? "" : "no-") + feature;
            }
            Modernizr[feature] = test;
        }
        return Modernizr;
    };
    setCss("");
    modElem = inputElem = null;
    (function(window, document) {
        var options = window.html5 || {};
        var reSkip = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;
        var saveClones = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;
        var supportsHtml5Styles;
        var expando = "_html5shiv";
        var expanID = 0;
        var expandoData = {};
        var supportsUnknownElements;
        (function() {
            try {
                var a = document.createElement("a");
                a.innerHTML = "<xyz></xyz>";
                supportsHtml5Styles = ("hidden" in a);
                supportsUnknownElements = a.childNodes.length == 1 || (function() {
                    (document.createElement)("a");
                    var frag = document.createDocumentFragment();
                    return (typeof frag.cloneNode == "undefined" || typeof frag.createDocumentFragment == "undefined" || typeof frag.createElement == "undefined");
                }());
            } catch (e) {
                supportsHtml5Styles = true;
                supportsUnknownElements = true;
            }
        }());
        function addStyleSheet(ownerDocument, cssText) {
            var p = ownerDocument.createElement("p"), parent = ownerDocument.getElementsByTagName("head")[0] || ownerDocument.documentElement;
            p.innerHTML = "x<style>" + cssText + "</style>";
            return parent.insertBefore(p.lastChild, parent.firstChild);
        }
        function getElements() {
            var elements = html5.elements;
            return typeof elements == "string" ? elements.split(" ") : elements;
        }
        function getExpandoData(ownerDocument) {
            var data = expandoData[ownerDocument[expando]];
            if (!data) {
                data = {};
                expanID++;
                ownerDocument[expando] = expanID;
                expandoData[expanID] = data;
            }
            return data;
        }
        function createElement(nodeName, ownerDocument, data) {
            if (!ownerDocument) {
                ownerDocument = document;
            }
            if (supportsUnknownElements) {
                return ownerDocument.createElement(nodeName);
            }
            if (!data) {
                data = getExpandoData(ownerDocument);
            }
            var node;
            if (data.cache[nodeName]) {
                node = data.cache[nodeName].cloneNode();
            } else {
                if (saveClones.test(nodeName)) {
                    node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode();
                } else {
                    node = data.createElem(nodeName);
                }
            }
            return node.canHaveChildren && !reSkip.test(nodeName) ? data.frag.appendChild(node) : node;
        }
        function createDocumentFragment(ownerDocument, data) {
            if (!ownerDocument) {
                ownerDocument = document;
            }
            if (supportsUnknownElements) {
                return ownerDocument.createDocumentFragment();
            }
            data = data || getExpandoData(ownerDocument);
            var clone = data.frag.cloneNode(), i = 0, elems = getElements(), l = elems.length;
            for (; i < l; i++) {
                clone.createElement(elems[i]);
            }
            return clone;
        }
        function shivMethods(ownerDocument, data) {
            if (!data.cache) {
                data.cache = {};
                data.createElem = ownerDocument.createElement;
                data.createFrag = ownerDocument.createDocumentFragment;
                data.frag = data.createFrag();
            }
            ownerDocument.createElement = function(nodeName) {
                if (!html5.shivMethods) {
                    return data.createElem(nodeName);
                }
                return createElement(nodeName, ownerDocument, data);
            };
            ownerDocument.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + getElements().join().replace(/\w+/g, function(nodeName) {
                data.createElem(nodeName);
                data.frag.createElement(nodeName);
                return 'c("' + nodeName + '")';
            }) + ");return n}")(html5, data.frag);
        }
        function shivDocument(ownerDocument) {
            if (!ownerDocument) {
                ownerDocument = document;
            }
            var data = getExpandoData(ownerDocument);
            if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {
                data.hasCSS = !!addStyleSheet(ownerDocument, "article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}");
            }
            if (!supportsUnknownElements) {
                shivMethods(ownerDocument, data);
            }
            return ownerDocument;
        }
        var html5 = {elements: options.elements || "abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS: (options.shivCSS !== false),supportsUnknownElements: supportsUnknownElements,shivMethods: (options.shivMethods !== false),type: "default",shivDocument: shivDocument,createElement: createElement,createDocumentFragment: createDocumentFragment};
        window.html5 = html5;
        shivDocument(document);
    }(this, document));
    Modernizr._version = version;
    Modernizr._prefixes = prefixes;
    Modernizr._domPrefixes = domPrefixes;
    Modernizr._cssomPrefixes = cssomPrefixes;
    Modernizr.mq = testMediaQuery;
    Modernizr.hasEvent = isEventSupported;
    Modernizr.testProp = function(prop) {
        return testProps([prop]);
    };
    Modernizr.testAllProps = testPropsAll;
    Modernizr.testStyles = injectElementWithStyles;
    Modernizr.prefixed = function(prop, obj, elem) {
        if (!obj) {
            return testPropsAll(prop, "pfx");
        } else {
            return testPropsAll(prop, obj, elem);
        }
    };
    docElement.className = docElement.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (enableClasses ? " js " + classes.join(" ") : "");
    return Modernizr;
})(this, this.document);
(function(win) {
    if (true) {
        return;
    }
    var doc = document;
    var root = doc.documentElement;
    var xhr = getXHRObject();
    var ieVersion = /MSIE (\d+)/.exec(navigator.userAgent)[1];
    if (doc.compatMode != "CSS1Compat" || ieVersion < 6 || ieVersion > 8 || !xhr) {
        return;
    }
    var selectorEngines = {NW: "*.Dom.select",MooTools: "$$",DOMAssistant: "*.$",Prototype: "$$",YAHOO: "*.util.Selector.query",Sizzle: "*",jQuery: "*",dojo: "*.query"};
    var selectorMethod;
    var enabledWatchers = [];
    var ie6PatchID = 0;
    var patchIE6MultipleClasses = true;
    var namespace = "slvzr";
    var RE_COMMENT = /(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*/g;
    var RE_IMPORT = /@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))[^;]*;/g;
    var RE_ASSET_URL = /\burl\(\s*(["']?)(?!data:)([^"')]+)\1\s*\)/g;
    var RE_PSEUDO_STRUCTURAL = /^:(empty|(first|last|only|nth(-last)?)-(child|of-type))$/;
    var RE_PSEUDO_ELEMENTS = /:(:first-(?:line|letter))/g;
    var RE_SELECTOR_GROUP = /(^|})\s*([^\{]*?[\[:][^{]+)/g;
    var RE_SELECTOR_PARSE = /([ +~>])|(:[a-z-]+(?:\(.*?\)+)?)|(\[.*?\])/g;
    var RE_LIBRARY_INCOMPATIBLE_PSEUDOS = /(:not\()?:(hover|enabled|disabled|focus|checked|target|active|visited|first-line|first-letter)\)?/g;
    var RE_PATCH_CLASS_NAME_REPLACE = /[^\w-]/g;
    var RE_INPUT_ELEMENTS = /^(INPUT|SELECT|TEXTAREA|BUTTON)$/;
    var RE_INPUT_CHECKABLE_TYPES = /^(checkbox|radio)$/;
    var BROKEN_ATTR_IMPLEMENTATIONS = ieVersion > 6 ? /[\$\^*]=(['"])\1/ : null;
    var RE_TIDY_TRAILING_WHITESPACE = /([(\[+~])\s+/g;
    var RE_TIDY_LEADING_WHITESPACE = /\s+([)\]+~])/g;
    var RE_TIDY_CONSECUTIVE_WHITESPACE = /\s+/g;
    var RE_TIDY_TRIM_WHITESPACE = /^\s*((?:[\S\s]*\S)?)\s*$/;
    var EMPTY_STRING = "";
    var SPACE_STRING = " ";
    var PLACEHOLDER_STRING = "$1";
    function patchStyleSheet(cssText) {
        return cssText.replace(RE_PSEUDO_ELEMENTS, PLACEHOLDER_STRING).replace(RE_SELECTOR_GROUP, function(m, prefix, selectorText) {
            var selectorGroups = selectorText.split(",");
            for (var c = 0, cs = selectorGroups.length; c < cs; c++) {
                var selector = normalizeSelectorWhitespace(selectorGroups[c]) + SPACE_STRING;
                var patches = [];
                selectorGroups[c] = selector.replace(RE_SELECTOR_PARSE, function(match, combinator, pseudo, attribute, index) {
                    if (combinator) {
                        if (patches.length > 0) {
                            applyPatches(selector.substring(0, index), patches);
                            patches = [];
                        }
                        return combinator;
                    } else {
                        var patch = (pseudo) ? patchPseudoClass(pseudo) : patchAttribute(attribute);
                        if (patch) {
                            patches.push(patch);
                            return "." + patch.className;
                        }
                        return match;
                    }
                });
            }
            return prefix + selectorGroups.join(",");
        });
    }
    function patchAttribute(attr) {
        return (!BROKEN_ATTR_IMPLEMENTATIONS || BROKEN_ATTR_IMPLEMENTATIONS.test(attr)) ? {className: createClassName(attr),applyClass: true} : null;
    }
    function patchPseudoClass(pseudo) {
        var applyClass = true;
        var className = createClassName(pseudo.slice(1));
        var isNegated = pseudo.substring(0, 5) == ":not(";
        var activateEventName;
        var deactivateEventName;
        if (isNegated) {
            pseudo = pseudo.slice(5, -1);
        }
        var bracketIndex = pseudo.indexOf("(");
        if (bracketIndex > -1) {
            pseudo = pseudo.substring(0, bracketIndex);
        }
        if (pseudo.charAt(0) == ":") {
            switch (pseudo.slice(1)) {
                case "root":
                    applyClass = function(e) {
                        return isNegated ? e != root : e == root;
                    };
                    break;
                case "target":
                    if (ieVersion == 8) {
                        applyClass = function(e) {
                            var handler = function() {
                                var hash = location.hash;
                                var hashID = hash.slice(1);
                                return isNegated ? (hash == EMPTY_STRING || e.id != hashID) : (hash != EMPTY_STRING && e.id == hashID);
                            };
                            addEvent(win, "hashchange", function() {
                                toggleElementClass(e, className, handler());
                            });
                            return handler();
                        };
                        break;
                    }
                    return false;
                case "checked":
                    applyClass = function(e) {
                        if (RE_INPUT_CHECKABLE_TYPES.test(e.type)) {
                            addEvent(e, "propertychange", function() {
                                if (event.propertyName == "checked") {
                                    toggleElementClass(e, className, e.checked !== isNegated);
                                }
                            });
                        }
                        return e.checked !== isNegated;
                    };
                    break;
                case "disabled":
                    isNegated = !isNegated;
                case "enabled":
                    applyClass = function(e) {
                        if (RE_INPUT_ELEMENTS.test(e.tagName)) {
                            addEvent(e, "propertychange", function() {
                                if (event.propertyName == "$disabled") {
                                    toggleElementClass(e, className, e.$disabled === isNegated);
                                }
                            });
                            enabledWatchers.push(e);
                            e.$disabled = e.disabled;
                            return e.disabled === isNegated;
                        }
                        return pseudo == ":enabled" ? isNegated : !isNegated;
                    };
                    break;
                case "focus":
                    activateEventName = "focus";
                    deactivateEventName = "blur";
                case "hover":
                    if (!activateEventName) {
                        activateEventName = "mouseenter";
                        deactivateEventName = "mouseleave";
                    }
                    applyClass = function(e) {
                        addEvent(e, isNegated ? deactivateEventName : activateEventName, function() {
                            toggleElementClass(e, className, true);
                        });
                        addEvent(e, isNegated ? activateEventName : deactivateEventName, function() {
                            toggleElementClass(e, className, false);
                        });
                        return isNegated;
                    };
                    break;
                default:
                    if (!RE_PSEUDO_STRUCTURAL.test(pseudo)) {
                        return false;
                    }
                    break;
            }
        }
        return {className: className,applyClass: applyClass};
    }
    function applyPatches(selectorText, patches) {
        var elms;
        var domSelectorText = selectorText.replace(RE_LIBRARY_INCOMPATIBLE_PSEUDOS, EMPTY_STRING);
        if (domSelectorText == EMPTY_STRING || domSelectorText.charAt(domSelectorText.length - 1) == SPACE_STRING) {
            domSelectorText += "*";
        }
        try {
            elms = selectorMethod(domSelectorText);
        } catch (ex) {
            log("Selector '" + selectorText + "' threw exception '" + ex + "'");
        }
        if (elms) {
            for (var d = 0, dl = elms.length; d < dl; d++) {
                var elm = elms[d];
                var cssClasses = elm.className;
                for (var f = 0, fl = patches.length; f < fl; f++) {
                    var patch = patches[f];
                    if (!hasPatch(elm, patch)) {
                        if (patch.applyClass && (patch.applyClass === true || patch.applyClass(elm) === true)) {
                            cssClasses = toggleClass(cssClasses, patch.className, true);
                        }
                    }
                }
                elm.className = cssClasses;
            }
        }
    }
    function hasPatch(elm, patch) {
        return new RegExp("(^|\\s)" + patch.className + "(\\s|$)").test(elm.className);
    }
    function createClassName(className) {
        return namespace + "-" + ((ieVersion == 6 && patchIE6MultipleClasses) ? ie6PatchID++ : className.replace(RE_PATCH_CLASS_NAME_REPLACE, function(a) {
            return a.charCodeAt(0);
        }));
    }
    function log(message) {
        if (win.console) {
            win.console.log(message);
        }
    }
    function trim(text) {
        return text.replace(RE_TIDY_TRIM_WHITESPACE, PLACEHOLDER_STRING);
    }
    function normalizeWhitespace(text) {
        return trim(text).replace(RE_TIDY_CONSECUTIVE_WHITESPACE, SPACE_STRING);
    }
    function normalizeSelectorWhitespace(selectorText) {
        return normalizeWhitespace(selectorText.replace(RE_TIDY_TRAILING_WHITESPACE, PLACEHOLDER_STRING).replace(RE_TIDY_LEADING_WHITESPACE, PLACEHOLDER_STRING));
    }
    function toggleElementClass(elm, className, on) {
        var oldClassName = elm.className;
        var newClassName = toggleClass(oldClassName, className, on);
        if (newClassName != oldClassName) {
            elm.className = newClassName;
            elm.parentNode.className += EMPTY_STRING;
        }
    }
    function toggleClass(classList, className, on) {
        var re = RegExp("(^|\\s)" + className + "(\\s|$)");
        var classExists = re.test(classList);
        if (on) {
            return classExists ? classList : classList + SPACE_STRING + className;
        } else {
            return classExists ? trim(classList.replace(re, PLACEHOLDER_STRING)) : classList;
        }
    }
    function addEvent(elm, eventName, eventHandler) {
        elm.attachEvent("on" + eventName, eventHandler);
    }
    function getXHRObject() {
        if (win.XMLHttpRequest) {
            return new XMLHttpRequest;
        }
        try {
            return new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
            return null;
        }
    }
    function loadStyleSheet(url) {
        xhr.open("GET", url, false);
        xhr.send();
        return (xhr.status == 200) ? xhr.responseText : EMPTY_STRING;
    }
    function resolveUrl(url, contextUrl) {
        function getProtocolAndHost(url) {
            return url.substring(0, url.indexOf("/", 8));
        }
        if (/^https?:\/\//i.test(url)) {
            return getProtocolAndHost(contextUrl) == getProtocolAndHost(url) ? url : null;
        }
        if (url.charAt(0) == "/") {
            return getProtocolAndHost(contextUrl) + url;
        }
        var contextUrlPath = contextUrl.split(/[?#]/)[0];
        if (url.charAt(0) != "?" && contextUrlPath.charAt(contextUrlPath.length - 1) != "/") {
            contextUrlPath = contextUrlPath.substring(0, contextUrlPath.lastIndexOf("/") + 1);
        }
        return contextUrlPath + url;
    }
    function parseStyleSheet(url) {
        if (url) {
            return loadStyleSheet(url).replace(RE_COMMENT, EMPTY_STRING).replace(RE_IMPORT, function(match, quoteChar, importUrl, quoteChar2, importUrl2) {
                return parseStyleSheet(resolveUrl(importUrl || importUrl2, url));
            }).replace(RE_ASSET_URL, function(match, quoteChar, assetUrl) {
                quoteChar = quoteChar || EMPTY_STRING;
                return " url(" + quoteChar + resolveUrl(assetUrl, url) + quoteChar + ") ";
            });
        }
        return EMPTY_STRING;
    }
    function init() {
        var url, stylesheet;
        var baseTags = doc.getElementsByTagName("BASE");
        var baseUrl = (baseTags.length > 0) ? baseTags[0].href : doc.location.href;
        for (var c = 0; c < doc.styleSheets.length; c++) {
            stylesheet = doc.styleSheets[c];
            if (stylesheet.href != EMPTY_STRING) {
                url = resolveUrl(stylesheet.href, baseUrl);
                if (url) {
                    stylesheet.cssText = patchStyleSheet(parseStyleSheet(url));
                }
            }
        }
        if (enabledWatchers.length > 0) {
            setInterval(function() {
                for (var c = 0, cl = enabledWatchers.length; c < cl; c++) {
                    var e = enabledWatchers[c];
                    if (e.disabled !== e.$disabled) {
                        if (e.disabled) {
                            e.disabled = false;
                            e.$disabled = true;
                            e.disabled = true;
                        } else {
                            e.$disabled = e.disabled;
                        }
                    }
                }
            }, 250);
        }
    }
    ContentLoaded(win, function() {
        for (var engine in selectorEngines) {
            var members, member, context = win;
            if (win[engine]) {
                members = selectorEngines[engine].replace("*", engine).split(".");
                while ((member = members.shift()) && (context = context[member])) {
                }
                if (typeof context == "function") {
                    selectorMethod = context;
                    init();
                    return;
                }
            }
        }
    });
    function ContentLoaded(win, fn) {
        var done = false, top = true, init = function(e) {
            if (e.type == "readystatechange" && doc.readyState != "complete") {
                return;
            }
            (e.type == "load" ? win : doc).detachEvent("on" + e.type, init, false);
            if (!done && (done = true)) {
                fn.call(win, e.type || e);
            }
        }, poll = function() {
            try {
                root.doScroll("left");
            } catch (e) {
                setTimeout(poll, 50);
                return;
            }
            init("poll");
        };
        if (doc.readyState == "complete") {
            fn.call(win, EMPTY_STRING);
        } else {
            if (doc.createEventObject && root.doScroll) {
                try {
                    top = !win.frameElement;
                } catch (e) {
                }
                if (top) {
                    poll();
                }
            }
            addEvent(doc, "readystatechange", init);
            addEvent(win, "load", init);
        }
    }
})(this);
(function(global, factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        module.exports = global.document ? factory(global, true) : function(w) {
            if (!w.document) {
                throw new Error("jQuery requires a window with a document");
            }
            return factory(w);
        };
    } else {
        factory(global);
    }
}(typeof window !== "undefined" ? window : this, function(window, noGlobal) {
    var deletedIds = [];
    var slice = deletedIds.slice;
    var concat = deletedIds.concat;
    var push = deletedIds.push;
    var indexOf = deletedIds.indexOf;
    var class2type = {};
    var toString = class2type.toString;
    var hasOwn = class2type.hasOwnProperty;
    var trim = "".trim;
    var support = {};
    var version = "1.11.0", jQuery = function(selector, context) {
        return new jQuery.fn.init(selector, context);
    }, rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, rmsPrefix = /^-ms-/, rdashAlpha = /-([\da-z])/gi, fcamelCase = function(all, letter) {
        return letter.toUpperCase();
    };
    jQuery.fn = jQuery.prototype = {jquery: version,constructor: jQuery,selector: "",length: 0,toArray: function() {
            return slice.call(this);
        },get: function(num) {
            return num != null ? (num < 0 ? this[num + this.length] : this[num]) : slice.call(this);
        },pushStack: function(elems) {
            var ret = jQuery.merge(this.constructor(), elems);
            ret.prevObject = this;
            ret.context = this.context;
            return ret;
        },each: function(callback, args) {
            return jQuery.each(this, callback, args);
        },map: function(callback) {
            return this.pushStack(jQuery.map(this, function(elem, i) {
                return callback.call(elem, i, elem);
            }));
        },slice: function() {
            return this.pushStack(slice.apply(this, arguments));
        },first: function() {
            return this.eq(0);
        },last: function() {
            return this.eq(-1);
        },eq: function(i) {
            var len = this.length, j = +i + (i < 0 ? len : 0);
            return this.pushStack(j >= 0 && j < len ? [this[j]] : []);
        },end: function() {
            return this.prevObject || this.constructor(null);
        },push: push,sort: deletedIds.sort,splice: deletedIds.splice};
    jQuery.extend = jQuery.fn.extend = function() {
        var src, copyIsArray, copy, name, options, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;
        if (typeof target === "boolean") {
            deep = target;
            target = arguments[i] || {};
            i++;
        }
        if (typeof target !== "object" && !jQuery.isFunction(target)) {
            target = {};
        }
        if (i === length) {
            target = this;
            i--;
        }
        for (; i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name];
                    copy = options[name];
                    if (target === copy) {
                        continue;
                    }
                    if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {
                        if (copyIsArray) {
                            copyIsArray = false;
                            clone = src && jQuery.isArray(src) ? src : [];
                        } else {
                            clone = src && jQuery.isPlainObject(src) ? src : {};
                        }
                        target[name] = jQuery.extend(deep, clone, copy);
                    } else {
                        if (copy !== undefined) {
                            target[name] = copy;
                        }
                    }
                }
            }
        }
        return target;
    };
    jQuery.extend({expando: "jQuery" + (version + Math.random()).replace(/\D/g, ""),isReady: true,error: function(msg) {
            throw new Error(msg);
        },noop: function() {
        },isFunction: function(obj) {
            return jQuery.type(obj) === "function";
        },isArray: Array.isArray || function(obj) {
            return jQuery.type(obj) === "array";
        },isWindow: function(obj) {
            return obj != null && obj == obj.window;
        },isNumeric: function(obj) {
            return obj - parseFloat(obj) >= 0;
        },isEmptyObject: function(obj) {
            var name;
            for (name in obj) {
                return false;
            }
            return true;
        },isPlainObject: function(obj) {
            var key;
            if (!obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow(obj)) {
                return false;
            }
            try {
                if (obj.constructor && !hasOwn.call(obj, "constructor") && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                    return false;
                }
            } catch (e) {
                return false;
            }
            if (support.ownLast) {
                for (key in obj) {
                    return hasOwn.call(obj, key);
                }
            }
            for (key in obj) {
            }
            return key === undefined || hasOwn.call(obj, key);
        },type: function(obj) {
            if (obj == null) {
                return obj + "";
            }
            return typeof obj === "object" || typeof obj === "function" ? class2type[toString.call(obj)] || "object" : typeof obj;
        },globalEval: function(data) {
            if (data && jQuery.trim(data)) {
                (window.execScript || function(data) {
                    window["eval"].call(window, data);
                })(data);
            }
        },camelCase: function(string) {
            return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase);
        },nodeName: function(elem, name) {
            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
        },each: function(obj, callback, args) {
            var value, i = 0, length = obj.length, isArray = isArraylike(obj);
            if (args) {
                if (isArray) {
                    for (; i < length; i++) {
                        value = callback.apply(obj[i], args);
                        if (value === false) {
                            break;
                        }
                    }
                } else {
                    for (i in obj) {
                        value = callback.apply(obj[i], args);
                        if (value === false) {
                            break;
                        }
                    }
                }
            } else {
                if (isArray) {
                    for (; i < length; i++) {
                        value = callback.call(obj[i], i, obj[i]);
                        if (value === false) {
                            break;
                        }
                    }
                } else {
                    for (i in obj) {
                        value = callback.call(obj[i], i, obj[i]);
                        if (value === false) {
                            break;
                        }
                    }
                }
            }
            return obj;
        },trim: trim && !trim.call("\uFEFF\xA0") ? function(text) {
            return text == null ? "" : trim.call(text);
        } : function(text) {
            return text == null ? "" : (text + "").replace(rtrim, "");
        },makeArray: function(arr, results) {
            var ret = results || [];
            if (arr != null) {
                if (isArraylike(Object(arr))) {
                    jQuery.merge(ret, typeof arr === "string" ? [arr] : arr);
                } else {
                    push.call(ret, arr);
                }
            }
            return ret;
        },inArray: function(elem, arr, i) {
            var len;
            if (arr) {
                if (indexOf) {
                    return indexOf.call(arr, elem, i);
                }
                len = arr.length;
                i = i ? i < 0 ? Math.max(0, len + i) : i : 0;
                for (; i < len; i++) {
                    if (i in arr && arr[i] === elem) {
                        return i;
                    }
                }
            }
            return -1;
        },merge: function(first, second) {
            var len = +second.length, j = 0, i = first.length;
            while (j < len) {
                first[i++] = second[j++];
            }
            if (len !== len) {
                while (second[j] !== undefined) {
                    first[i++] = second[j++];
                }
            }
            first.length = i;
            return first;
        },grep: function(elems, callback, invert) {
            var callbackInverse, matches = [], i = 0, length = elems.length, callbackExpect = !invert;
            for (; i < length; i++) {
                callbackInverse = !callback(elems[i], i);
                if (callbackInverse !== callbackExpect) {
                    matches.push(elems[i]);
                }
            }
            return matches;
        },map: function(elems, callback, arg) {
            var value, i = 0, length = elems.length, isArray = isArraylike(elems), ret = [];
            if (isArray) {
                for (; i < length; i++) {
                    value = callback(elems[i], i, arg);
                    if (value != null) {
                        ret.push(value);
                    }
                }
            } else {
                for (i in elems) {
                    value = callback(elems[i], i, arg);
                    if (value != null) {
                        ret.push(value);
                    }
                }
            }
            return concat.apply([], ret);
        },guid: 1,proxy: function(fn, context) {
            var args, proxy, tmp;
            if (typeof context === "string") {
                tmp = fn[context];
                context = fn;
                fn = tmp;
            }
            if (!jQuery.isFunction(fn)) {
                return undefined;
            }
            args = slice.call(arguments, 2);
            proxy = function() {
                return fn.apply(context || this, args.concat(slice.call(arguments)));
            };
            proxy.guid = fn.guid = fn.guid || jQuery.guid++;
            return proxy;
        },now: function() {
            return +(new Date());
        },support: support});
    jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
        class2type["[object " + name + "]"] = name.toLowerCase();
    });
    function isArraylike(obj) {
        var length = obj.length, type = jQuery.type(obj);
        if (type === "function" || jQuery.isWindow(obj)) {
            return false;
        }
        if (obj.nodeType === 1 && length) {
            return true;
        }
        return type === "array" || length === 0 || typeof length === "number" && length > 0 && (length - 1) in obj;
    }
    var Sizzle = (function(window) {
        var i, support, Expr, getText, isXML, compile, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = "sizzle" + -(new Date()), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function(a, b) {
            if (a === b) {
                hasDuplicate = true;
            }
            return 0;
        }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = ({}).hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf = arr.indexOf || function(elem) {
            var i = 0, len = this.length;
            for (; i < len; i++) {
                if (this[i] === elem) {
                    return i;
                }
            }
            return -1;
        }, booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", whitespace = "[\\x20\\t\\r\\n\\f]", characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", identifier = characterEncoding.replace("w", "w#"), attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace + "*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]", pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace(3, 8) + ")*)|.*)\\)|)", rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"), rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"), rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"), rattributeQuotes = new RegExp("=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g"), rpseudo = new RegExp(pseudos), ridentifier = new RegExp("^" + identifier + "$"), matchExpr = {ID: new RegExp("^#(" + characterEncoding + ")"),CLASS: new RegExp("^\\.(" + characterEncoding + ")"),TAG: new RegExp("^(" + characterEncoding.replace("w", "w*") + ")"),ATTR: new RegExp("^" + attributes),PSEUDO: new RegExp("^" + pseudos),CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i"),bool: new RegExp("^(?:" + booleans + ")$", "i"),needsContext: new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")}, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\d$/i, rnative = /^[^{]+\{\s*\[native \w/, rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\/g, runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig"), funescape = function(_, escaped, escapedWhitespace) {
            var high = "0x" + escaped - 65536;
            return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);
        };
        try {
            push.apply((arr = slice.call(preferredDoc.childNodes)), preferredDoc.childNodes);
            arr[preferredDoc.childNodes.length].nodeType;
        } catch (e) {
            push = {apply: arr.length ? function(target, els) {
                    push_native.apply(target, slice.call(els));
                } : function(target, els) {
                    var j = target.length, i = 0;
                    while ((target[j++] = els[i++])) {
                    }
                    target.length = j - 1;
                }};
        }
        function Sizzle(selector, context, results, seed) {
            var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;
            if ((context ? context.ownerDocument || context : preferredDoc) !== document) {
                setDocument(context);
            }
            context = context || document;
            results = results || [];
            if (!selector || typeof selector !== "string") {
                return results;
            }
            if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {
                return [];
            }
            if (documentIsHTML && !seed) {
                if ((match = rquickExpr.exec(selector))) {
                    if ((m = match[1])) {
                        if (nodeType === 9) {
                            elem = context.getElementById(m);
                            if (elem && elem.parentNode) {
                                if (elem.id === m) {
                                    results.push(elem);
                                    return results;
                                }
                            } else {
                                return results;
                            }
                        } else {
                            if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {
                                results.push(elem);
                                return results;
                            }
                        }
                    } else {
                        if (match[2]) {
                            push.apply(results, context.getElementsByTagName(selector));
                            return results;
                        } else {
                            if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName) {
                                push.apply(results, context.getElementsByClassName(m));
                                return results;
                            }
                        }
                    }
                }
                if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {
                    nid = old = expando;
                    newContext = context;
                    newSelector = nodeType === 9 && selector;
                    if (nodeType === 1 && context.nodeName.toLowerCase() !== "object") {
                        groups = tokenize(selector);
                        if ((old = context.getAttribute("id"))) {
                            nid = old.replace(rescape, "\\$&");
                        } else {
                            context.setAttribute("id", nid);
                        }
                        nid = "[id='" + nid + "'] ";
                        i = groups.length;
                        while (i--) {
                            groups[i] = nid + toSelector(groups[i]);
                        }
                        newContext = rsibling.test(selector) && testContext(context.parentNode) || context;
                        newSelector = groups.join(",");
                    }
                    if (newSelector) {
                        try {
                            push.apply(results, newContext.querySelectorAll(newSelector));
                            return results;
                        } catch (qsaError) {
                        }finally {
                            if (!old) {
                                context.removeAttribute("id");
                            }
                        }
                    }
                }
            }
            return select(selector.replace(rtrim, "$1"), context, results, seed);
        }
        function createCache() {
            var keys = [];
            function cache(key, value) {
                if (keys.push(key + " ") > Expr.cacheLength) {
                    delete cache[keys.shift()];
                }
                return (cache[key + " "] = value);
            }
            return cache;
        }
        function markFunction(fn) {
            fn[expando] = true;
            return fn;
        }
        function assert(fn) {
            var div = document.createElement("div");
            try {
                return !!fn(div);
            } catch (e) {
                return false;
            }finally {
                if (div.parentNode) {
                    div.parentNode.removeChild(div);
                }
                div = null;
            }
        }
        function addHandle(attrs, handler) {
            var arr = attrs.split("|"), i = attrs.length;
            while (i--) {
                Expr.attrHandle[arr[i]] = handler;
            }
        }
        function siblingCheck(a, b) {
            var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);
            if (diff) {
                return diff;
            }
            if (cur) {
                while ((cur = cur.nextSibling)) {
                    if (cur === b) {
                        return -1;
                    }
                }
            }
            return a ? 1 : -1;
        }
        function createInputPseudo(type) {
            return function(elem) {
                var name = elem.nodeName.toLowerCase();
                return name === "input" && elem.type === type;
            };
        }
        function createButtonPseudo(type) {
            return function(elem) {
                var name = elem.nodeName.toLowerCase();
                return (name === "input" || name === "button") && elem.type === type;
            };
        }
        function createPositionalPseudo(fn) {
            return markFunction(function(argument) {
                argument = +argument;
                return markFunction(function(seed, matches) {
                    var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;
                    while (i--) {
                        if (seed[(j = matchIndexes[i])]) {
                            seed[j] = !(matches[j] = seed[j]);
                        }
                    }
                });
            });
        }
        function testContext(context) {
            return context && typeof context.getElementsByTagName !== strundefined && context;
        }
        support = Sizzle.support = {};
        isXML = Sizzle.isXML = function(elem) {
            var documentElement = elem && (elem.ownerDocument || elem).documentElement;
            return documentElement ? documentElement.nodeName !== "HTML" : false;
        };
        setDocument = Sizzle.setDocument = function(node) {
            var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;
            if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {
                return document;
            }
            document = doc;
            docElem = doc.documentElement;
            documentIsHTML = !isXML(doc);
            if (parent && parent !== parent.top) {
                if (parent.addEventListener) {
                    parent.addEventListener("unload", function() {
                        setDocument();
                    }, false);
                } else {
                    if (parent.attachEvent) {
                        parent.attachEvent("onunload", function() {
                            setDocument();
                        });
                    }
                }
            }
            support.attributes = assert(function(div) {
                div.className = "i";
                return !div.getAttribute("className");
            });
            support.getElementsByTagName = assert(function(div) {
                div.appendChild(doc.createComment(""));
                return !div.getElementsByTagName("*").length;
            });
            support.getElementsByClassName = rnative.test(doc.getElementsByClassName) && assert(function(div) {
                div.innerHTML = "<div class='a'></div><div class='a i'></div>";
                div.firstChild.className = "i";
                return div.getElementsByClassName("i").length === 2;
            });
            support.getById = assert(function(div) {
                docElem.appendChild(div).id = expando;
                return !doc.getElementsByName || !doc.getElementsByName(expando).length;
            });
            if (support.getById) {
                Expr.find.ID = function(id, context) {
                    if (typeof context.getElementById !== strundefined && documentIsHTML) {
                        var m = context.getElementById(id);
                        return m && m.parentNode ? [m] : [];
                    }
                };
                Expr.filter.ID = function(id) {
                    var attrId = id.replace(runescape, funescape);
                    return function(elem) {
                        return elem.getAttribute("id") === attrId;
                    };
                };
            } else {
                delete Expr.find.ID;
                Expr.filter.ID = function(id) {
                    var attrId = id.replace(runescape, funescape);
                    return function(elem) {
                        var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
                        return node && node.value === attrId;
                    };
                };
            }
            Expr.find.TAG = support.getElementsByTagName ? function(tag, context) {
                if (typeof context.getElementsByTagName !== strundefined) {
                    return context.getElementsByTagName(tag);
                }
            } : function(tag, context) {
                var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);
                if (tag === "*") {
                    while ((elem = results[i++])) {
                        if (elem.nodeType === 1) {
                            tmp.push(elem);
                        }
                    }
                    return tmp;
                }
                return results;
            };
            Expr.find.CLASS = support.getElementsByClassName && function(className, context) {
                if (typeof context.getElementsByClassName !== strundefined && documentIsHTML) {
                    return context.getElementsByClassName(className);
                }
            };
            rbuggyMatches = [];
            rbuggyQSA = [];
            if ((support.qsa = rnative.test(doc.querySelectorAll))) {
                assert(function(div) {
                    div.innerHTML = "<select t=''><option selected=''></option></select>";
                    if (div.querySelectorAll("[t^='']").length) {
                        rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")");
                    }
                    if (!div.querySelectorAll("[selected]").length) {
                        rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")");
                    }
                    if (!div.querySelectorAll(":checked").length) {
                        rbuggyQSA.push(":checked");
                    }
                });
                assert(function(div) {
                    var input = doc.createElement("input");
                    input.setAttribute("type", "hidden");
                    div.appendChild(input).setAttribute("name", "D");
                    if (div.querySelectorAll("[name=d]").length) {
                        rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?=");
                    }
                    if (!div.querySelectorAll(":enabled").length) {
                        rbuggyQSA.push(":enabled", ":disabled");
                    }
                    div.querySelectorAll("*,:x");
                    rbuggyQSA.push(",.*:");
                });
            }
            if ((support.matchesSelector = rnative.test((matches = docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)))) {
                assert(function(div) {
                    support.disconnectedMatch = matches.call(div, "div");
                    matches.call(div, "[s!='']:x");
                    rbuggyMatches.push("!=", pseudos);
                });
            }
            rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|"));
            rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|"));
            hasCompare = rnative.test(docElem.compareDocumentPosition);
            contains = hasCompare || rnative.test(docElem.contains) ? function(a, b) {
                var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;
                return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));
            } : function(a, b) {
                if (b) {
                    while ((b = b.parentNode)) {
                        if (b === a) {
                            return true;
                        }
                    }
                }
                return false;
            };
            sortOrder = hasCompare ? function(a, b) {
                if (a === b) {
                    hasDuplicate = true;
                    return 0;
                }
                var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
                if (compare) {
                    return compare;
                }
                compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;
                if (compare & 1 || (!support.sortDetached && b.compareDocumentPosition(a) === compare)) {
                    if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {
                        return -1;
                    }
                    if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {
                        return 1;
                    }
                    return sortInput ? (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) : 0;
                }
                return compare & 4 ? -1 : 1;
            } : function(a, b) {
                if (a === b) {
                    hasDuplicate = true;
                    return 0;
                }
                var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];
                if (!aup || !bup) {
                    return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) : 0;
                } else {
                    if (aup === bup) {
                        return siblingCheck(a, b);
                    }
                }
                cur = a;
                while ((cur = cur.parentNode)) {
                    ap.unshift(cur);
                }
                cur = b;
                while ((cur = cur.parentNode)) {
                    bp.unshift(cur);
                }
                while (ap[i] === bp[i]) {
                    i++;
                }
                return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;
            };
            return doc;
        };
        Sizzle.matches = function(expr, elements) {
            return Sizzle(expr, null, null, elements);
        };
        Sizzle.matchesSelector = function(elem, expr) {
            if ((elem.ownerDocument || elem) !== document) {
                setDocument(elem);
            }
            expr = expr.replace(rattributeQuotes, "='$1']");
            if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {
                try {
                    var ret = matches.call(elem, expr);
                    if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {
                        return ret;
                    }
                } catch (e) {
                }
            }
            return Sizzle(expr, document, null, [elem]).length > 0;
        };
        Sizzle.contains = function(context, elem) {
            if ((context.ownerDocument || context) !== document) {
                setDocument(context);
            }
            return contains(context, elem);
        };
        Sizzle.attr = function(elem, name) {
            if ((elem.ownerDocument || elem) !== document) {
                setDocument(elem);
            }
            var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;
            return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
        };
        Sizzle.error = function(msg) {
            throw new Error("Syntax error, unrecognized expression: " + msg);
        };
        Sizzle.uniqueSort = function(results) {
            var elem, duplicates = [], j = 0, i = 0;
            hasDuplicate = !support.detectDuplicates;
            sortInput = !support.sortStable && results.slice(0);
            results.sort(sortOrder);
            if (hasDuplicate) {
                while ((elem = results[i++])) {
                    if (elem === results[i]) {
                        j = duplicates.push(i);
                    }
                }
                while (j--) {
                    results.splice(duplicates[j], 1);
                }
            }
            sortInput = null;
            return results;
        };
        getText = Sizzle.getText = function(elem) {
            var node, ret = "", i = 0, nodeType = elem.nodeType;
            if (!nodeType) {
                while ((node = elem[i++])) {
                    ret += getText(node);
                }
            } else {
                if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
                    if (typeof elem.textContent === "string") {
                        return elem.textContent;
                    } else {
                        for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
                            ret += getText(elem);
                        }
                    }
                } else {
                    if (nodeType === 3 || nodeType === 4) {
                        return elem.nodeValue;
                    }
                }
            }
            return ret;
        };
        Expr = Sizzle.selectors = {cacheLength: 50,createPseudo: markFunction,match: matchExpr,attrHandle: {},find: {},relative: {">": {dir: "parentNode",first: true}," ": {dir: "parentNode"},"+": {dir: "previousSibling",first: true},"~": {dir: "previousSibling"}},preFilter: {ATTR: function(match) {
                    match[1] = match[1].replace(runescape, funescape);
                    match[3] = (match[4] || match[5] || "").replace(runescape, funescape);
                    if (match[2] === "~=") {
                        match[3] = " " + match[3] + " ";
                    }
                    return match.slice(0, 4);
                },CHILD: function(match) {
                    match[1] = match[1].toLowerCase();
                    if (match[1].slice(0, 3) === "nth") {
                        if (!match[3]) {
                            Sizzle.error(match[0]);
                        }
                        match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === "even" || match[3] === "odd"));
                        match[5] = +((match[7] + match[8]) || match[3] === "odd");
                    } else {
                        if (match[3]) {
                            Sizzle.error(match[0]);
                        }
                    }
                    return match;
                },PSEUDO: function(match) {
                    var excess, unquoted = !match[5] && match[2];
                    if (matchExpr.CHILD.test(match[0])) {
                        return null;
                    }
                    if (match[3] && match[4] !== undefined) {
                        match[2] = match[4];
                    } else {
                        if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length)) {
                            match[0] = match[0].slice(0, excess);
                            match[2] = unquoted.slice(0, excess);
                        }
                    }
                    return match.slice(0, 3);
                }},filter: {TAG: function(nodeNameSelector) {
                    var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
                    return nodeNameSelector === "*" ? function() {
                        return true;
                    } : function(elem) {
                        return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
                    };
                },CLASS: function(className) {
                    var pattern = classCache[className + " "];
                    return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function(elem) {
                        return pattern.test(typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "");
                    });
                },ATTR: function(name, operator, check) {
                    return function(elem) {
                        var result = Sizzle.attr(elem, name);
                        if (result == null) {
                            return operator === "!=";
                        }
                        if (!operator) {
                            return true;
                        }
                        result += "";
                        return operator === "=" ? result === check : operator === "!=" ? result !== check : operator === "^=" ? check && result.indexOf(check) === 0 : operator === "*=" ? check && result.indexOf(check) > -1 : operator === "$=" ? check && result.slice(-check.length) === check : operator === "~=" ? (" " + result + " ").indexOf(check) > -1 : operator === "|=" ? result === check || result.slice(0, check.length + 1) === check + "-" : false;
                    };
                },CHILD: function(type, what, argument, first, last) {
                    var simple = type.slice(0, 3) !== "nth", forward = type.slice(-4) !== "last", ofType = what === "of-type";
                    return first === 1 && last === 0 ? function(elem) {
                        return !!elem.parentNode;
                    } : function(elem, context, xml) {
                        var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? "nextSibling" : "previousSibling", parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;
                        if (parent) {
                            if (simple) {
                                while (dir) {
                                    node = elem;
                                    while ((node = node[dir])) {
                                        if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {
                                            return false;
                                        }
                                    }
                                    start = dir = type === "only" && !start && "nextSibling";
                                }
                                return true;
                            }
                            start = [forward ? parent.firstChild : parent.lastChild];
                            if (forward && useCache) {
                                outerCache = parent[expando] || (parent[expando] = {});
                                cache = outerCache[type] || [];
                                nodeIndex = cache[0] === dirruns && cache[1];
                                diff = cache[0] === dirruns && cache[2];
                                node = nodeIndex && parent.childNodes[nodeIndex];
                                while ((node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop())) {
                                    if (node.nodeType === 1 && ++diff && node === elem) {
                                        outerCache[type] = [dirruns, nodeIndex, diff];
                                        break;
                                    }
                                }
                            } else {
                                if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {
                                    diff = cache[1];
                                } else {
                                    while ((node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop())) {
                                        if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {
                                            if (useCache) {
                                                (node[expando] || (node[expando] = {}))[type] = [dirruns, diff];
                                            }
                                            if (node === elem) {
                                                break;
                                            }
                                        }
                                    }
                                }
                            }
                            diff -= last;
                            return diff === first || (diff % first === 0 && diff / first >= 0);
                        }
                    };
                },PSEUDO: function(pseudo, argument) {
                    var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);
                    if (fn[expando]) {
                        return fn(argument);
                    }
                    if (fn.length > 1) {
                        args = [pseudo, pseudo, "", argument];
                        return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function(seed, matches) {
                            var idx, matched = fn(seed, argument), i = matched.length;
                            while (i--) {
                                idx = indexOf.call(seed, matched[i]);
                                seed[idx] = !(matches[idx] = matched[i]);
                            }
                        }) : function(elem) {
                            return fn(elem, 0, args);
                        };
                    }
                    return fn;
                }},pseudos: {not: markFunction(function(selector) {
                    var input = [], results = [], matcher = compile(selector.replace(rtrim, "$1"));
                    return matcher[expando] ? markFunction(function(seed, matches, context, xml) {
                        var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;
                        while (i--) {
                            if ((elem = unmatched[i])) {
                                seed[i] = !(matches[i] = elem);
                            }
                        }
                    }) : function(elem, context, xml) {
                        input[0] = elem;
                        matcher(input, null, xml, results);
                        return !results.pop();
                    };
                }),has: markFunction(function(selector) {
                    return function(elem) {
                        return Sizzle(selector, elem).length > 0;
                    };
                }),contains: markFunction(function(text) {
                    return function(elem) {
                        return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;
                    };
                }),lang: markFunction(function(lang) {
                    if (!ridentifier.test(lang || "")) {
                        Sizzle.error("unsupported lang: " + lang);
                    }
                    lang = lang.replace(runescape, funescape).toLowerCase();
                    return function(elem) {
                        var elemLang;
                        do {
                            if ((elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang"))) {
                                elemLang = elemLang.toLowerCase();
                                return elemLang === lang || elemLang.indexOf(lang + "-") === 0;
                            }
                        } while ((elem = elem.parentNode) && elem.nodeType === 1);
                        return false;
                    };
                }),target: function(elem) {
                    var hash = window.location && window.location.hash;
                    return hash && hash.slice(1) === elem.id;
                },root: function(elem) {
                    return elem === docElem;
                },focus: function(elem) {
                    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
                },enabled: function(elem) {
                    return elem.disabled === false;
                },disabled: function(elem) {
                    return elem.disabled === true;
                },checked: function(elem) {
                    var nodeName = elem.nodeName.toLowerCase();
                    return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
                },selected: function(elem) {
                    if (elem.parentNode) {
                        elem.parentNode.selectedIndex;
                    }
                    return elem.selected === true;
                },empty: function(elem) {
                    for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
                        if (elem.nodeType < 6) {
                            return false;
                        }
                    }
                    return true;
                },parent: function(elem) {
                    return !Expr.pseudos.empty(elem);
                },header: function(elem) {
                    return rheader.test(elem.nodeName);
                },input: function(elem) {
                    return rinputs.test(elem.nodeName);
                },button: function(elem) {
                    var name = elem.nodeName.toLowerCase();
                    return name === "input" && elem.type === "button" || name === "button";
                },text: function(elem) {
                    var attr;
                    return elem.nodeName.toLowerCase() === "input" && elem.type === "text" && ((attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text");
                },first: createPositionalPseudo(function() {
                    return [0];
                }),last: createPositionalPseudo(function(matchIndexes, length) {
                    return [length - 1];
                }),eq: createPositionalPseudo(function(matchIndexes, length, argument) {
                    return [argument < 0 ? argument + length : argument];
                }),even: createPositionalPseudo(function(matchIndexes, length) {
                    var i = 0;
                    for (; i < length; i += 2) {
                        matchIndexes.push(i);
                    }
                    return matchIndexes;
                }),odd: createPositionalPseudo(function(matchIndexes, length) {
                    var i = 1;
                    for (; i < length; i += 2) {
                        matchIndexes.push(i);
                    }
                    return matchIndexes;
                }),lt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    var i = argument < 0 ? argument + length : argument;
                    for (; --i >= 0; ) {
                        matchIndexes.push(i);
                    }
                    return matchIndexes;
                }),gt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    var i = argument < 0 ? argument + length : argument;
                    for (; ++i < length; ) {
                        matchIndexes.push(i);
                    }
                    return matchIndexes;
                })}};
        Expr.pseudos.nth = Expr.pseudos.eq;
        for (i in {radio: true,checkbox: true,file: true,password: true,image: true}) {
            Expr.pseudos[i] = createInputPseudo(i);
        }
        for (i in {submit: true,reset: true}) {
            Expr.pseudos[i] = createButtonPseudo(i);
        }
        function setFilters() {
        }
        setFilters.prototype = Expr.filters = Expr.pseudos;
        Expr.setFilters = new setFilters();
        function tokenize(selector, parseOnly) {
            var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + " "];
            if (cached) {
                return parseOnly ? 0 : cached.slice(0);
            }
            soFar = selector;
            groups = [];
            preFilters = Expr.preFilter;
            while (soFar) {
                if (!matched || (match = rcomma.exec(soFar))) {
                    if (match) {
                        soFar = soFar.slice(match[0].length) || soFar;
                    }
                    groups.push((tokens = []));
                }
                matched = false;
                if ((match = rcombinators.exec(soFar))) {
                    matched = match.shift();
                    tokens.push({value: matched,type: match[0].replace(rtrim, " ")});
                    soFar = soFar.slice(matched.length);
                }
                for (type in Expr.filter) {
                    if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {
                        matched = match.shift();
                        tokens.push({value: matched,type: type,matches: match});
                        soFar = soFar.slice(matched.length);
                    }
                }
                if (!matched) {
                    break;
                }
            }
            return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);
        }
        function toSelector(tokens) {
            var i = 0, len = tokens.length, selector = "";
            for (; i < len; i++) {
                selector += tokens[i].value;
            }
            return selector;
        }
        function addCombinator(matcher, combinator, base) {
            var dir = combinator.dir, checkNonElements = base && dir === "parentNode", doneName = done++;
            return combinator.first ? function(elem, context, xml) {
                while ((elem = elem[dir])) {
                    if (elem.nodeType === 1 || checkNonElements) {
                        return matcher(elem, context, xml);
                    }
                }
            } : function(elem, context, xml) {
                var oldCache, outerCache, newCache = [dirruns, doneName];
                if (xml) {
                    while ((elem = elem[dir])) {
                        if (elem.nodeType === 1 || checkNonElements) {
                            if (matcher(elem, context, xml)) {
                                return true;
                            }
                        }
                    }
                } else {
                    while ((elem = elem[dir])) {
                        if (elem.nodeType === 1 || checkNonElements) {
                            outerCache = elem[expando] || (elem[expando] = {});
                            if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {
                                return (newCache[2] = oldCache[2]);
                            } else {
                                outerCache[dir] = newCache;
                                if ((newCache[2] = matcher(elem, context, xml))) {
                                    return true;
                                }
                            }
                        }
                    }
                }
            };
        }
        function elementMatcher(matchers) {
            return matchers.length > 1 ? function(elem, context, xml) {
                var i = matchers.length;
                while (i--) {
                    if (!matchers[i](elem, context, xml)) {
                        return false;
                    }
                }
                return true;
            } : matchers[0];
        }
        function condense(unmatched, map, filter, context, xml) {
            var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;
            for (; i < len; i++) {
                if ((elem = unmatched[i])) {
                    if (!filter || filter(elem, context, xml)) {
                        newUnmatched.push(elem);
                        if (mapped) {
                            map.push(i);
                        }
                    }
                }
            }
            return newUnmatched;
        }
        function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
            if (postFilter && !postFilter[expando]) {
                postFilter = setMatcher(postFilter);
            }
            if (postFinder && !postFinder[expando]) {
                postFinder = setMatcher(postFinder, postSelector);
            }
            return markFunction(function(seed, results, context, xml) {
                var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || "*", context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;
                if (matcher) {
                    matcher(matcherIn, matcherOut, context, xml);
                }
                if (postFilter) {
                    temp = condense(matcherOut, postMap);
                    postFilter(temp, [], context, xml);
                    i = temp.length;
                    while (i--) {
                        if ((elem = temp[i])) {
                            matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);
                        }
                    }
                }
                if (seed) {
                    if (postFinder || preFilter) {
                        if (postFinder) {
                            temp = [];
                            i = matcherOut.length;
                            while (i--) {
                                if ((elem = matcherOut[i])) {
                                    temp.push((matcherIn[i] = elem));
                                }
                            }
                            postFinder(null, (matcherOut = []), temp, xml);
                        }
                        i = matcherOut.length;
                        while (i--) {
                            if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {
                                seed[temp] = !(results[temp] = elem);
                            }
                        }
                    }
                } else {
                    matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);
                    if (postFinder) {
                        postFinder(null, results, matcherOut, xml);
                    } else {
                        push.apply(results, matcherOut);
                    }
                }
            });
        }
        function matcherFromTokens(tokens) {
            var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[" "], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function(elem) {
                return elem === checkContext;
            }, implicitRelative, true), matchAnyContext = addCombinator(function(elem) {
                return indexOf.call(checkContext, elem) > -1;
            }, implicitRelative, true), matchers = [function(elem, context, xml) {
                    return (!leadingRelative && (xml || context !== outermostContext)) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
                }];
            for (; i < len; i++) {
                if ((matcher = Expr.relative[tokens[i].type])) {
                    matchers = [addCombinator(elementMatcher(matchers), matcher)];
                } else {
                    matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);
                    if (matcher[expando]) {
                        j = ++i;
                        for (; j < len; j++) {
                            if (Expr.relative[tokens[j].type]) {
                                break;
                            }
                        }
                        return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({value: tokens[i - 2].type === " " ? "*" : ""})).replace(rtrim, "$1"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens((tokens = tokens.slice(j))), j < len && toSelector(tokens));
                    }
                    matchers.push(matcher);
                }
            }
            return elementMatcher(matchers);
        }
        function matcherFromGroupMatchers(elementMatchers, setMatchers) {
            var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function(seed, context, xml, results, outermost) {
                var elem, j, matcher, matchedCount = 0, i = "0", unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG("*", outermost), dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1), len = elems.length;
                if (outermost) {
                    outermostContext = context !== document && context;
                }
                for (; i !== len && (elem = elems[i]) != null; i++) {
                    if (byElement && elem) {
                        j = 0;
                        while ((matcher = elementMatchers[j++])) {
                            if (matcher(elem, context, xml)) {
                                results.push(elem);
                                break;
                            }
                        }
                        if (outermost) {
                            dirruns = dirrunsUnique;
                        }
                    }
                    if (bySet) {
                        if ((elem = !matcher && elem)) {
                            matchedCount--;
                        }
                        if (seed) {
                            unmatched.push(elem);
                        }
                    }
                }
                matchedCount += i;
                if (bySet && i !== matchedCount) {
                    j = 0;
                    while ((matcher = setMatchers[j++])) {
                        matcher(unmatched, setMatched, context, xml);
                    }
                    if (seed) {
                        if (matchedCount > 0) {
                            while (i--) {
                                if (!(unmatched[i] || setMatched[i])) {
                                    setMatched[i] = pop.call(results);
                                }
                            }
                        }
                        setMatched = condense(setMatched);
                    }
                    push.apply(results, setMatched);
                    if (outermost && !seed && setMatched.length > 0 && (matchedCount + setMatchers.length) > 1) {
                        Sizzle.uniqueSort(results);
                    }
                }
                if (outermost) {
                    dirruns = dirrunsUnique;
                    outermostContext = contextBackup;
                }
                return unmatched;
            };
            return bySet ? markFunction(superMatcher) : superMatcher;
        }
        compile = Sizzle.compile = function(selector, group) {
            var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + " "];
            if (!cached) {
                if (!group) {
                    group = tokenize(selector);
                }
                i = group.length;
                while (i--) {
                    cached = matcherFromTokens(group[i]);
                    if (cached[expando]) {
                        setMatchers.push(cached);
                    } else {
                        elementMatchers.push(cached);
                    }
                }
                cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));
            }
            return cached;
        };
        function multipleContexts(selector, contexts, results) {
            var i = 0, len = contexts.length;
            for (; i < len; i++) {
                Sizzle(selector, contexts[i], results);
            }
            return results;
        }
        function select(selector, context, results, seed) {
            var i, tokens, token, type, find, match = tokenize(selector);
            if (!seed) {
                if (match.length === 1) {
                    tokens = match[0] = match[0].slice(0);
                    if (tokens.length > 2 && (token = tokens[0]).type === "ID" && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {
                        context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];
                        if (!context) {
                            return results;
                        }
                        selector = selector.slice(tokens.shift().value.length);
                    }
                    i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;
                    while (i--) {
                        token = tokens[i];
                        if (Expr.relative[(type = token.type)]) {
                            break;
                        }
                        if ((find = Expr.find[type])) {
                            if ((seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context))) {
                                tokens.splice(i, 1);
                                selector = seed.length && toSelector(tokens);
                                if (!selector) {
                                    push.apply(results, seed);
                                    return results;
                                }
                                break;
                            }
                        }
                    }
                }
            }
            compile(selector, match)(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);
            return results;
        }
        support.sortStable = expando.split("").sort(sortOrder).join("") === expando;
        support.detectDuplicates = !!hasDuplicate;
        setDocument();
        support.sortDetached = assert(function(div1) {
            return div1.compareDocumentPosition(document.createElement("div")) & 1;
        });
        if (!assert(function(div) {
            div.innerHTML = "<a href='#'></a>";
            return div.firstChild.getAttribute("href") === "#";
        })) {
            addHandle("type|href|height|width", function(elem, name, isXML) {
                if (!isXML) {
                    return elem.getAttribute(name, name.toLowerCase() === "type" ? 1 : 2);
                }
            });
        }
        if (!support.attributes || !assert(function(div) {
            div.innerHTML = "<input/>";
            div.firstChild.setAttribute("value", "");
            return div.firstChild.getAttribute("value") === "";
        })) {
            addHandle("value", function(elem, name, isXML) {
                if (!isXML && elem.nodeName.toLowerCase() === "input") {
                    return elem.defaultValue;
                }
            });
        }
        if (!assert(function(div) {
            return div.getAttribute("disabled") == null;
        })) {
            addHandle(booleans, function(elem, name, isXML) {
                var val;
                if (!isXML) {
                    return elem[name] === true ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
                }
            });
        }
        return Sizzle;
    })(window);
    jQuery.find = Sizzle;
    jQuery.expr = Sizzle.selectors;
    jQuery.expr[":"] = jQuery.expr.pseudos;
    jQuery.unique = Sizzle.uniqueSort;
    jQuery.text = Sizzle.getText;
    jQuery.isXMLDoc = Sizzle.isXML;
    jQuery.contains = Sizzle.contains;
    var rneedsContext = jQuery.expr.match.needsContext;
    var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);
    var risSimple = /^.[^:#\[\.,]*$/;
    function winnow(elements, qualifier, not) {
        if (jQuery.isFunction(qualifier)) {
            return jQuery.grep(elements, function(elem, i) {
                return !!qualifier.call(elem, i, elem) !== not;
            });
        }
        if (qualifier.nodeType) {
            return jQuery.grep(elements, function(elem) {
                return (elem === qualifier) !== not;
            });
        }
        if (typeof qualifier === "string") {
            if (risSimple.test(qualifier)) {
                return jQuery.filter(qualifier, elements, not);
            }
            qualifier = jQuery.filter(qualifier, elements);
        }
        return jQuery.grep(elements, function(elem) {
            return (jQuery.inArray(elem, qualifier) >= 0) !== not;
        });
    }
    jQuery.filter = function(expr, elems, not) {
        var elem = elems[0];
        if (not) {
            expr = ":not(" + expr + ")";
        }
        return elems.length === 1 && elem.nodeType === 1 ? jQuery.find.matchesSelector(elem, expr) ? [elem] : [] : jQuery.find.matches(expr, jQuery.grep(elems, function(elem) {
            return elem.nodeType === 1;
        }));
    };
    jQuery.fn.extend({find: function(selector) {
            var i, ret = [], self = this, len = self.length;
            if (typeof selector !== "string") {
                return this.pushStack(jQuery(selector).filter(function() {
                    for (i = 0; i < len; i++) {
                        if (jQuery.contains(self[i], this)) {
                            return true;
                        }
                    }
                }));
            }
            for (i = 0; i < len; i++) {
                jQuery.find(selector, self[i], ret);
            }
            ret = this.pushStack(len > 1 ? jQuery.unique(ret) : ret);
            ret.selector = this.selector ? this.selector + " " + selector : selector;
            return ret;
        },filter: function(selector) {
            return this.pushStack(winnow(this, selector || [], false));
        },not: function(selector) {
            return this.pushStack(winnow(this, selector || [], true));
        },is: function(selector) {
            return !!winnow(this, typeof selector === "string" && rneedsContext.test(selector) ? jQuery(selector) : selector || [], false).length;
        }});
    var rootjQuery, document = window.document, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, init = jQuery.fn.init = function(selector, context) {
        var match, elem;
        if (!selector) {
            return this;
        }
        if (typeof selector === "string") {
            if (selector.charAt(0) === "<" && selector.charAt(selector.length - 1) === ">" && selector.length >= 3) {
                match = [null, selector, null];
            } else {
                match = rquickExpr.exec(selector);
            }
            if (match && (match[1] || !context)) {
                if (match[1]) {
                    context = context instanceof jQuery ? context[0] : context;
                    jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, true));
                    if (rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) {
                        for (match in context) {
                            if (jQuery.isFunction(this[match])) {
                                this[match](context[match]);
                            } else {
                                this.attr(match, context[match]);
                            }
                        }
                    }
                    return this;
                } else {
                    elem = document.getElementById(match[2]);
                    if (elem && elem.parentNode) {
                        if (elem.id !== match[2]) {
                            return rootjQuery.find(selector);
                        }
                        this.length = 1;
                        this[0] = elem;
                    }
                    this.context = document;
                    this.selector = selector;
                    return this;
                }
            } else {
                if (!context || context.jquery) {
                    return (context || rootjQuery).find(selector);
                } else {
                    return this.constructor(context).find(selector);
                }
            }
        } else {
            if (selector.nodeType) {
                this.context = this[0] = selector;
                this.length = 1;
                return this;
            } else {
                if (jQuery.isFunction(selector)) {
                    return typeof rootjQuery.ready !== "undefined" ? rootjQuery.ready(selector) : selector(jQuery);
                }
            }
        }
        if (selector.selector !== undefined) {
            this.selector = selector.selector;
            this.context = selector.context;
        }
        return jQuery.makeArray(selector, this);
    };
    init.prototype = jQuery.fn;
    rootjQuery = jQuery(document);
    var rparentsprev = /^(?:parents|prev(?:Until|All))/, guaranteedUnique = {children: true,contents: true,next: true,prev: true};
    jQuery.extend({dir: function(elem, dir, until) {
            var matched = [], cur = elem[dir];
            while (cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery(cur).is(until))) {
                if (cur.nodeType === 1) {
                    matched.push(cur);
                }
                cur = cur[dir];
            }
            return matched;
        },sibling: function(n, elem) {
            var r = [];
            for (; n; n = n.nextSibling) {
                if (n.nodeType === 1 && n !== elem) {
                    r.push(n);
                }
            }
            return r;
        }});
    jQuery.fn.extend({has: function(target) {
            var i, targets = jQuery(target, this), len = targets.length;
            return this.filter(function() {
                for (i = 0; i < len; i++) {
                    if (jQuery.contains(this, targets[i])) {
                        return true;
                    }
                }
            });
        },closest: function(selectors, context) {
            var cur, i = 0, l = this.length, matched = [], pos = rneedsContext.test(selectors) || typeof selectors !== "string" ? jQuery(selectors, context || this.context) : 0;
            for (; i < l; i++) {
                for (cur = this[i]; cur && cur !== context; cur = cur.parentNode) {
                    if (cur.nodeType < 11 && (pos ? pos.index(cur) > -1 : cur.nodeType === 1 && jQuery.find.matchesSelector(cur, selectors))) {
                        matched.push(cur);
                        break;
                    }
                }
            }
            return this.pushStack(matched.length > 1 ? jQuery.unique(matched) : matched);
        },index: function(elem) {
            if (!elem) {
                return (this[0] && this[0].parentNode) ? this.first().prevAll().length : -1;
            }
            if (typeof elem === "string") {
                return jQuery.inArray(this[0], jQuery(elem));
            }
            return jQuery.inArray(elem.jquery ? elem[0] : elem, this);
        },add: function(selector, context) {
            return this.pushStack(jQuery.unique(jQuery.merge(this.get(), jQuery(selector, context))));
        },addBack: function(selector) {
            return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
        }});
    function sibling(cur, dir) {
        do {
            cur = cur[dir];
        } while (cur && cur.nodeType !== 1);
        return cur;
    }
    jQuery.each({parent: function(elem) {
            var parent = elem.parentNode;
            return parent && parent.nodeType !== 11 ? parent : null;
        },parents: function(elem) {
            return jQuery.dir(elem, "parentNode");
        },parentsUntil: function(elem, i, until) {
            return jQuery.dir(elem, "parentNode", until);
        },next: function(elem) {
            return sibling(elem, "nextSibling");
        },prev: function(elem) {
            return sibling(elem, "previousSibling");
        },nextAll: function(elem) {
            return jQuery.dir(elem, "nextSibling");
        },prevAll: function(elem) {
            return jQuery.dir(elem, "previousSibling");
        },nextUntil: function(elem, i, until) {
            return jQuery.dir(elem, "nextSibling", until);
        },prevUntil: function(elem, i, until) {
            return jQuery.dir(elem, "previousSibling", until);
        },siblings: function(elem) {
            return jQuery.sibling((elem.parentNode || {}).firstChild, elem);
        },children: function(elem) {
            return jQuery.sibling(elem.firstChild);
        },contents: function(elem) {
            return jQuery.nodeName(elem, "iframe") ? elem.contentDocument || elem.contentWindow.document : jQuery.merge([], elem.childNodes);
        }}, function(name, fn) {
        jQuery.fn[name] = function(until, selector) {
            var ret = jQuery.map(this, fn, until);
            if (name.slice(-5) !== "Until") {
                selector = until;
            }
            if (selector && typeof selector === "string") {
                ret = jQuery.filter(selector, ret);
            }
            if (this.length > 1) {
                if (!guaranteedUnique[name]) {
                    ret = jQuery.unique(ret);
                }
                if (rparentsprev.test(name)) {
                    ret = ret.reverse();
                }
            }
            return this.pushStack(ret);
        };
    });
    var rnotwhite = (/\S+/g);
    var optionsCache = {};
    function createOptions(options) {
        var object = optionsCache[options] = {};
        jQuery.each(options.match(rnotwhite) || [], function(_, flag) {
            object[flag] = true;
        });
        return object;
    }
    jQuery.Callbacks = function(options) {
        options = typeof options === "string" ? (optionsCache[options] || createOptions(options)) : jQuery.extend({}, options);
        var firing, memory, fired, firingLength, firingIndex, firingStart, list = [], stack = !options.once && [], fire = function(data) {
            memory = options.memory && data;
            fired = true;
            firingIndex = firingStart || 0;
            firingStart = 0;
            firingLength = list.length;
            firing = true;
            for (; list && firingIndex < firingLength; firingIndex++) {
                if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {
                    memory = false;
                    break;
                }
            }
            firing = false;
            if (list) {
                if (stack) {
                    if (stack.length) {
                        fire(stack.shift());
                    }
                } else {
                    if (memory) {
                        list = [];
                    } else {
                        self.disable();
                    }
                }
            }
        }, self = {add: function() {
                if (list) {
                    var start = list.length;
                    (function add(args) {
                        jQuery.each(args, function(_, arg) {
                            var type = jQuery.type(arg);
                            if (type === "function") {
                                if (!options.unique || !self.has(arg)) {
                                    list.push(arg);
                                }
                            } else {
                                if (arg && arg.length && type !== "string") {
                                    add(arg);
                                }
                            }
                        });
                    })(arguments);
                    if (firing) {
                        firingLength = list.length;
                    } else {
                        if (memory) {
                            firingStart = start;
                            fire(memory);
                        }
                    }
                }
                return this;
            },remove: function() {
                if (list) {
                    jQuery.each(arguments, function(_, arg) {
                        var index;
                        while ((index = jQuery.inArray(arg, list, index)) > -1) {
                            list.splice(index, 1);
                            if (firing) {
                                if (index <= firingLength) {
                                    firingLength--;
                                }
                                if (index <= firingIndex) {
                                    firingIndex--;
                                }
                            }
                        }
                    });
                }
                return this;
            },has: function(fn) {
                return fn ? jQuery.inArray(fn, list) > -1 : !!(list && list.length);
            },empty: function() {
                list = [];
                firingLength = 0;
                return this;
            },disable: function() {
                list = stack = memory = undefined;
                return this;
            },disabled: function() {
                return !list;
            },lock: function() {
                stack = undefined;
                if (!memory) {
                    self.disable();
                }
                return this;
            },locked: function() {
                return !stack;
            },fireWith: function(context, args) {
                if (list && (!fired || stack)) {
                    args = args || [];
                    args = [context, args.slice ? args.slice() : args];
                    if (firing) {
                        stack.push(args);
                    } else {
                        fire(args);
                    }
                }
                return this;
            },fire: function() {
                self.fireWith(this, arguments);
                return this;
            },fired: function() {
                return !!fired;
            }};
        return self;
    };
    jQuery.extend({Deferred: function(func) {
            var tuples = [["resolve", "done", jQuery.Callbacks("once memory"), "resolved"], ["reject", "fail", jQuery.Callbacks("once memory"), "rejected"], ["notify", "progress", jQuery.Callbacks("memory")]], state = "pending", promise = {state: function() {
                    return state;
                },always: function() {
                    deferred.done(arguments).fail(arguments);
                    return this;
                },then: function() {
                    var fns = arguments;
                    return jQuery.Deferred(function(newDefer) {
                        jQuery.each(tuples, function(i, tuple) {
                            var fn = jQuery.isFunction(fns[i]) && fns[i];
                            deferred[tuple[1]](function() {
                                var returned = fn && fn.apply(this, arguments);
                                if (returned && jQuery.isFunction(returned.promise)) {
                                    returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);
                                } else {
                                    newDefer[tuple[0] + "With"](this === promise ? newDefer.promise() : this, fn ? [returned] : arguments);
                                }
                            });
                        });
                        fns = null;
                    }).promise();
                },promise: function(obj) {
                    return obj != null ? jQuery.extend(obj, promise) : promise;
                }}, deferred = {};
            promise.pipe = promise.then;
            jQuery.each(tuples, function(i, tuple) {
                var list = tuple[2], stateString = tuple[3];
                promise[tuple[1]] = list.add;
                if (stateString) {
                    list.add(function() {
                        state = stateString;
                    }, tuples[i ^ 1][2].disable, tuples[2][2].lock);
                }
                deferred[tuple[0]] = function() {
                    deferred[tuple[0] + "With"](this === deferred ? promise : this, arguments);
                    return this;
                };
                deferred[tuple[0] + "With"] = list.fireWith;
            });
            promise.promise(deferred);
            if (func) {
                func.call(deferred, deferred);
            }
            return deferred;
        },when: function(subordinate) {
            var i = 0, resolveValues = slice.call(arguments), length = resolveValues.length, remaining = length !== 1 || (subordinate && jQuery.isFunction(subordinate.promise)) ? length : 0, deferred = remaining === 1 ? subordinate : jQuery.Deferred(), updateFunc = function(i, contexts, values) {
                return function(value) {
                    contexts[i] = this;
                    values[i] = arguments.length > 1 ? slice.call(arguments) : value;
                    if (values === progressValues) {
                        deferred.notifyWith(contexts, values);
                    } else {
                        if (!(--remaining)) {
                            deferred.resolveWith(contexts, values);
                        }
                    }
                };
            }, progressValues, progressContexts, resolveContexts;
            if (length > 1) {
                progressValues = new Array(length);
                progressContexts = new Array(length);
                resolveContexts = new Array(length);
                for (; i < length; i++) {
                    if (resolveValues[i] && jQuery.isFunction(resolveValues[i].promise)) {
                        resolveValues[i].promise().done(updateFunc(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFunc(i, progressContexts, progressValues));
                    } else {
                        --remaining;
                    }
                }
            }
            if (!remaining) {
                deferred.resolveWith(resolveContexts, resolveValues);
            }
            return deferred.promise();
        }});
    var readyList;
    jQuery.fn.ready = function(fn) {
        jQuery.ready.promise().done(fn);
        return this;
    };
    jQuery.extend({isReady: false,readyWait: 1,holdReady: function(hold) {
            if (hold) {
                jQuery.readyWait++;
            } else {
                jQuery.ready(true);
            }
        },ready: function(wait) {
            if (wait === true ? --jQuery.readyWait : jQuery.isReady) {
                return;
            }
            if (!document.body) {
                return setTimeout(jQuery.ready);
            }
            jQuery.isReady = true;
            if (wait !== true && --jQuery.readyWait > 0) {
                return;
            }
            readyList.resolveWith(document, [jQuery]);
            if (jQuery.fn.trigger) {
                jQuery(document).trigger("ready").off("ready");
            }
        }});
    function detach() {
        if (document.addEventListener) {
            document.removeEventListener("DOMContentLoaded", completed, false);
            window.removeEventListener("load", completed, false);
        } else {
            document.detachEvent("onreadystatechange", completed);
            window.detachEvent("onload", completed);
        }
    }
    function completed() {
        if (document.addEventListener || event.type === "load" || document.readyState === "complete") {
            detach();
            jQuery.ready();
        }
    }
    jQuery.ready.promise = function(obj) {
        if (!readyList) {
            readyList = jQuery.Deferred();
            if (document.readyState === "complete") {
                setTimeout(jQuery.ready);
            } else {
                if (document.addEventListener) {
                    document.addEventListener("DOMContentLoaded", completed, false);
                    window.addEventListener("load", completed, false);
                } else {
                    document.attachEvent("onreadystatechange", completed);
                    window.attachEvent("onload", completed);
                    var top = false;
                    try {
                        top = window.frameElement == null && document.documentElement;
                    } catch (e) {
                    }
                    if (top && top.doScroll) {
                        (function doScrollCheck() {
                            if (!jQuery.isReady) {
                                try {
                                    top.doScroll("left");
                                } catch (e) {
                                    return setTimeout(doScrollCheck, 50);
                                }
                                detach();
                                jQuery.ready();
                            }
                        })();
                    }
                }
            }
        }
        return readyList.promise(obj);
    };
    var strundefined = typeof undefined;
    var i;
    for (i in jQuery(support)) {
        break;
    }
    support.ownLast = i !== "0";
    support.inlineBlockNeedsLayout = false;
    jQuery(function() {
        var container, div, body = document.getElementsByTagName("body")[0];
        if (!body) {
            return;
        }
        container = document.createElement("div");
        container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
        div = document.createElement("div");
        body.appendChild(container).appendChild(div);
        if (typeof div.style.zoom !== strundefined) {
            div.style.cssText = "border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1";
            if ((support.inlineBlockNeedsLayout = (div.offsetWidth === 3))) {
                body.style.zoom = 1;
            }
        }
        body.removeChild(container);
        container = div = null;
    });
    (function() {
        var div = document.createElement("div");
        if (support.deleteExpando == null) {
            support.deleteExpando = true;
            try {
                delete div.test;
            } catch (e) {
                support.deleteExpando = false;
            }
        }
        div = null;
    })();
    jQuery.acceptData = function(elem) {
        var noData = jQuery.noData[(elem.nodeName + " ").toLowerCase()], nodeType = +elem.nodeType || 1;
        return nodeType !== 1 && nodeType !== 9 ? false : !noData || noData !== true && elem.getAttribute("classid") === noData;
    };
    var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, rmultiDash = /([A-Z])/g;
    function dataAttr(elem, key, data) {
        if (data === undefined && elem.nodeType === 1) {
            var name = "data-" + key.replace(rmultiDash, "-$1").toLowerCase();
            data = elem.getAttribute(name);
            if (typeof data === "string") {
                try {
                    data = data === "true" ? true : data === "false" ? false : data === "null" ? null : +data + "" === data ? +data : rbrace.test(data) ? jQuery.parseJSON(data) : data;
                } catch (e) {
                }
                jQuery.data(elem, key, data);
            } else {
                data = undefined;
            }
        }
        return data;
    }
    function isEmptyDataObject(obj) {
        var name;
        for (name in obj) {
            if (name === "data" && jQuery.isEmptyObject(obj[name])) {
                continue;
            }
            if (name !== "toJSON") {
                return false;
            }
        }
        return true;
    }
    function internalData(elem, name, data, pvt) {
        if (!jQuery.acceptData(elem)) {
            return;
        }
        var ret, thisCache, internalKey = jQuery.expando, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[internalKey] : elem[internalKey] && internalKey;
        if ((!id || !cache[id] || (!pvt && !cache[id].data)) && data === undefined && typeof name === "string") {
            return;
        }
        if (!id) {
            if (isNode) {
                id = elem[internalKey] = deletedIds.pop() || jQuery.guid++;
            } else {
                id = internalKey;
            }
        }
        if (!cache[id]) {
            cache[id] = isNode ? {} : {toJSON: jQuery.noop};
        }
        if (typeof name === "object" || typeof name === "function") {
            if (pvt) {
                cache[id] = jQuery.extend(cache[id], name);
            } else {
                cache[id].data = jQuery.extend(cache[id].data, name);
            }
        }
        thisCache = cache[id];
        if (!pvt) {
            if (!thisCache.data) {
                thisCache.data = {};
            }
            thisCache = thisCache.data;
        }
        if (data !== undefined) {
            thisCache[jQuery.camelCase(name)] = data;
        }
        if (typeof name === "string") {
            ret = thisCache[name];
            if (ret == null) {
                ret = thisCache[jQuery.camelCase(name)];
            }
        } else {
            ret = thisCache;
        }
        return ret;
    }
    function internalRemoveData(elem, name, pvt) {
        if (!jQuery.acceptData(elem)) {
            return;
        }
        var thisCache, i, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[jQuery.expando] : jQuery.expando;
        if (!cache[id]) {
            return;
        }
        if (name) {
            thisCache = pvt ? cache[id] : cache[id].data;
            if (thisCache) {
                if (!jQuery.isArray(name)) {
                    if (name in thisCache) {
                        name = [name];
                    } else {
                        name = jQuery.camelCase(name);
                        if (name in thisCache) {
                            name = [name];
                        } else {
                            name = name.split(" ");
                        }
                    }
                } else {
                    name = name.concat(jQuery.map(name, jQuery.camelCase));
                }
                i = name.length;
                while (i--) {
                    delete thisCache[name[i]];
                }
                if (pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache)) {
                    return;
                }
            }
        }
        if (!pvt) {
            delete cache[id].data;
            if (!isEmptyDataObject(cache[id])) {
                return;
            }
        }
        if (isNode) {
            jQuery.cleanData([elem], true);
        } else {
            if (support.deleteExpando || cache != cache.window) {
                delete cache[id];
            } else {
                cache[id] = null;
            }
        }
    }
    jQuery.extend({cache: {},noData: {"applet ": true,"embed ": true,"object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData: function(elem) {
            elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando];
            return !!elem && !isEmptyDataObject(elem);
        },data: function(elem, name, data) {
            return internalData(elem, name, data);
        },removeData: function(elem, name) {
            return internalRemoveData(elem, name);
        },_data: function(elem, name, data) {
            return internalData(elem, name, data, true);
        },_removeData: function(elem, name) {
            return internalRemoveData(elem, name, true);
        }});
    jQuery.fn.extend({data: function(key, value) {
            var i, name, data, elem = this[0], attrs = elem && elem.attributes;
            if (key === undefined) {
                if (this.length) {
                    data = jQuery.data(elem);
                    if (elem.nodeType === 1 && !jQuery._data(elem, "parsedAttrs")) {
                        i = attrs.length;
                        while (i--) {
                            name = attrs[i].name;
                            if (name.indexOf("data-") === 0) {
                                name = jQuery.camelCase(name.slice(5));
                                dataAttr(elem, name, data[name]);
                            }
                        }
                        jQuery._data(elem, "parsedAttrs", true);
                    }
                }
                return data;
            }
            if (typeof key === "object") {
                return this.each(function() {
                    jQuery.data(this, key);
                });
            }
            return arguments.length > 1 ? this.each(function() {
                jQuery.data(this, key, value);
            }) : elem ? dataAttr(elem, key, jQuery.data(elem, key)) : undefined;
        },removeData: function(key) {
            return this.each(function() {
                jQuery.removeData(this, key);
            });
        }});
    jQuery.extend({queue: function(elem, type, data) {
            var queue;
            if (elem) {
                type = (type || "fx") + "queue";
                queue = jQuery._data(elem, type);
                if (data) {
                    if (!queue || jQuery.isArray(data)) {
                        queue = jQuery._data(elem, type, jQuery.makeArray(data));
                    } else {
                        queue.push(data);
                    }
                }
                return queue || [];
            }
        },dequeue: function(elem, type) {
            type = type || "fx";
            var queue = jQuery.queue(elem, type), startLength = queue.length, fn = queue.shift(), hooks = jQuery._queueHooks(elem, type), next = function() {
                jQuery.dequeue(elem, type);
            };
            if (fn === "inprogress") {
                fn = queue.shift();
                startLength--;
            }
            if (fn) {
                if (type === "fx") {
                    queue.unshift("inprogress");
                }
                delete hooks.stop;
                fn.call(elem, next, hooks);
            }
            if (!startLength && hooks) {
                hooks.empty.fire();
            }
        },_queueHooks: function(elem, type) {
            var key = type + "queueHooks";
            return jQuery._data(elem, key) || jQuery._data(elem, key, {empty: jQuery.Callbacks("once memory").add(function() {
                    jQuery._removeData(elem, type + "queue");
                    jQuery._removeData(elem, key);
                })});
        }});
    jQuery.fn.extend({queue: function(type, data) {
            var setter = 2;
            if (typeof type !== "string") {
                data = type;
                type = "fx";
                setter--;
            }
            if (arguments.length < setter) {
                return jQuery.queue(this[0], type);
            }
            return data === undefined ? this : this.each(function() {
                var queue = jQuery.queue(this, type, data);
                jQuery._queueHooks(this, type);
                if (type === "fx" && queue[0] !== "inprogress") {
                    jQuery.dequeue(this, type);
                }
            });
        },dequeue: function(type) {
            return this.each(function() {
                jQuery.dequeue(this, type);
            });
        },clearQueue: function(type) {
            return this.queue(type || "fx", []);
        },promise: function(type, obj) {
            var tmp, count = 1, defer = jQuery.Deferred(), elements = this, i = this.length, resolve = function() {
                if (!(--count)) {
                    defer.resolveWith(elements, [elements]);
                }
            };
            if (typeof type !== "string") {
                obj = type;
                type = undefined;
            }
            type = type || "fx";
            while (i--) {
                tmp = jQuery._data(elements[i], type + "queueHooks");
                if (tmp && tmp.empty) {
                    count++;
                    tmp.empty.add(resolve);
                }
            }
            resolve();
            return defer.promise(obj);
        }});
    var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;
    var cssExpand = ["Top", "Right", "Bottom", "Left"];
    var isHidden = function(elem, el) {
        elem = el || elem;
        return jQuery.css(elem, "display") === "none" || !jQuery.contains(elem.ownerDocument, elem);
    };
    var access = jQuery.access = function(elems, fn, key, value, chainable, emptyGet, raw) {
        var i = 0, length = elems.length, bulk = key == null;
        if (jQuery.type(key) === "object") {
            chainable = true;
            for (i in key) {
                jQuery.access(elems, fn, i, key[i], true, emptyGet, raw);
            }
        } else {
            if (value !== undefined) {
                chainable = true;
                if (!jQuery.isFunction(value)) {
                    raw = true;
                }
                if (bulk) {
                    if (raw) {
                        fn.call(elems, value);
                        fn = null;
                    } else {
                        bulk = fn;
                        fn = function(elem, key, value) {
                            return bulk.call(jQuery(elem), value);
                        };
                    }
                }
                if (fn) {
                    for (; i < length; i++) {
                        fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
                    }
                }
            }
        }
        return chainable ? elems : bulk ? fn.call(elems) : length ? fn(elems[0], key) : emptyGet;
    };
    var rcheckableType = (/^(?:checkbox|radio)$/i);
    (function() {
        var fragment = document.createDocumentFragment(), div = document.createElement("div"), input = document.createElement("input");
        div.setAttribute("className", "t");
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a>";
        support.leadingWhitespace = div.firstChild.nodeType === 3;
        support.tbody = !div.getElementsByTagName("tbody").length;
        support.htmlSerialize = !!div.getElementsByTagName("link").length;
        support.html5Clone = document.createElement("nav").cloneNode(true).outerHTML !== "<:nav></:nav>";
        input.type = "checkbox";
        input.checked = true;
        fragment.appendChild(input);
        support.appendChecked = input.checked;
        div.innerHTML = "<textarea>x</textarea>";
        support.noCloneChecked = !!div.cloneNode(true).lastChild.defaultValue;
        fragment.appendChild(div);
        div.innerHTML = "<input type='radio' checked='checked' name='t'/>";
        support.checkClone = div.cloneNode(true).cloneNode(true).lastChild.checked;
        support.noCloneEvent = true;
        if (div.attachEvent) {
            div.attachEvent("onclick", function() {
                support.noCloneEvent = false;
            });
            div.cloneNode(true).click();
        }
        if (support.deleteExpando == null) {
            support.deleteExpando = true;
            try {
                delete div.test;
            } catch (e) {
                support.deleteExpando = false;
            }
        }
        fragment = div = input = null;
    })();
    (function() {
        var i, eventName, div = document.createElement("div");
        for (i in {submit: true,change: true,focusin: true}) {
            eventName = "on" + i;
            if (!(support[i + "Bubbles"] = eventName in window)) {
                div.setAttribute(eventName, "t");
                support[i + "Bubbles"] = div.attributes[eventName].expando === false;
            }
        }
        div = null;
    })();
    var rformElems = /^(?:input|select|textarea)$/i, rkeyEvent = /^key/, rmouseEvent = /^(?:mouse|contextmenu)|click/, rfocusMorph = /^(?:focusinfocus|focusoutblur)$/, rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
    function returnTrue() {
        return true;
    }
    function returnFalse() {
        return false;
    }
    function safeActiveElement() {
        try {
            return document.activeElement;
        } catch (err) {
        }
    }
    jQuery.event = {global: {},add: function(elem, types, handler, data, selector) {
            var tmp, events, t, handleObjIn, special, eventHandle, handleObj, handlers, type, namespaces, origType, elemData = jQuery._data(elem);
            if (!elemData) {
                return;
            }
            if (handler.handler) {
                handleObjIn = handler;
                handler = handleObjIn.handler;
                selector = handleObjIn.selector;
            }
            if (!handler.guid) {
                handler.guid = jQuery.guid++;
            }
            if (!(events = elemData.events)) {
                events = elemData.events = {};
            }
            if (!(eventHandle = elemData.handle)) {
                eventHandle = elemData.handle = function(e) {
                    return typeof jQuery !== strundefined && (!e || jQuery.event.triggered !== e.type) ? jQuery.event.dispatch.apply(eventHandle.elem, arguments) : undefined;
                };
                eventHandle.elem = elem;
            }
            types = (types || "").match(rnotwhite) || [""];
            t = types.length;
            while (t--) {
                tmp = rtypenamespace.exec(types[t]) || [];
                type = origType = tmp[1];
                namespaces = (tmp[2] || "").split(".").sort();
                if (!type) {
                    continue;
                }
                special = jQuery.event.special[type] || {};
                type = (selector ? special.delegateType : special.bindType) || type;
                special = jQuery.event.special[type] || {};
                handleObj = jQuery.extend({type: type,origType: origType,data: data,handler: handler,guid: handler.guid,selector: selector,needsContext: selector && jQuery.expr.match.needsContext.test(selector),namespace: namespaces.join(".")}, handleObjIn);
                if (!(handlers = events[type])) {
                    handlers = events[type] = [];
                    handlers.delegateCount = 0;
                    if (!special.setup || special.setup.call(elem, data, namespaces, eventHandle) === false) {
                        if (elem.addEventListener) {
                            elem.addEventListener(type, eventHandle, false);
                        } else {
                            if (elem.attachEvent) {
                                elem.attachEvent("on" + type, eventHandle);
                            }
                        }
                    }
                }
                if (special.add) {
                    special.add.call(elem, handleObj);
                    if (!handleObj.handler.guid) {
                        handleObj.handler.guid = handler.guid;
                    }
                }
                if (selector) {
                    handlers.splice(handlers.delegateCount++, 0, handleObj);
                } else {
                    handlers.push(handleObj);
                }
                jQuery.event.global[type] = true;
            }
            elem = null;
        },remove: function(elem, types, handler, selector, mappedTypes) {
            var j, handleObj, tmp, origCount, t, events, special, handlers, type, namespaces, origType, elemData = jQuery.hasData(elem) && jQuery._data(elem);
            if (!elemData || !(events = elemData.events)) {
                return;
            }
            types = (types || "").match(rnotwhite) || [""];
            t = types.length;
            while (t--) {
                tmp = rtypenamespace.exec(types[t]) || [];
                type = origType = tmp[1];
                namespaces = (tmp[2] || "").split(".").sort();
                if (!type) {
                    for (type in events) {
                        jQuery.event.remove(elem, type + types[t], handler, selector, true);
                    }
                    continue;
                }
                special = jQuery.event.special[type] || {};
                type = (selector ? special.delegateType : special.bindType) || type;
                handlers = events[type] || [];
                tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)");
                origCount = j = handlers.length;
                while (j--) {
                    handleObj = handlers[j];
                    if ((mappedTypes || origType === handleObj.origType) && (!handler || handler.guid === handleObj.guid) && (!tmp || tmp.test(handleObj.namespace)) && (!selector || selector === handleObj.selector || selector === "**" && handleObj.selector)) {
                        handlers.splice(j, 1);
                        if (handleObj.selector) {
                            handlers.delegateCount--;
                        }
                        if (special.remove) {
                            special.remove.call(elem, handleObj);
                        }
                    }
                }
                if (origCount && !handlers.length) {
                    if (!special.teardown || special.teardown.call(elem, namespaces, elemData.handle) === false) {
                        jQuery.removeEvent(elem, type, elemData.handle);
                    }
                    delete events[type];
                }
            }
            if (jQuery.isEmptyObject(events)) {
                delete elemData.handle;
                jQuery._removeData(elem, "events");
            }
        },trigger: function(event, data, elem, onlyHandlers) {
            var handle, ontype, cur, bubbleType, special, tmp, i, eventPath = [elem || document], type = hasOwn.call(event, "type") ? event.type : event, namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
            cur = tmp = elem = elem || document;
            if (elem.nodeType === 3 || elem.nodeType === 8) {
                return;
            }
            if (rfocusMorph.test(type + jQuery.event.triggered)) {
                return;
            }
            if (type.indexOf(".") >= 0) {
                namespaces = type.split(".");
                type = namespaces.shift();
                namespaces.sort();
            }
            ontype = type.indexOf(":") < 0 && "on" + type;
            event = event[jQuery.expando] ? event : new jQuery.Event(type, typeof event === "object" && event);
            event.isTrigger = onlyHandlers ? 2 : 3;
            event.namespace = namespaces.join(".");
            event.namespace_re = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null;
            event.result = undefined;
            if (!event.target) {
                event.target = elem;
            }
            data = data == null ? [event] : jQuery.makeArray(data, [event]);
            special = jQuery.event.special[type] || {};
            if (!onlyHandlers && special.trigger && special.trigger.apply(elem, data) === false) {
                return;
            }
            if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {
                bubbleType = special.delegateType || type;
                if (!rfocusMorph.test(bubbleType + type)) {
                    cur = cur.parentNode;
                }
                for (; cur; cur = cur.parentNode) {
                    eventPath.push(cur);
                    tmp = cur;
                }
                if (tmp === (elem.ownerDocument || document)) {
                    eventPath.push(tmp.defaultView || tmp.parentWindow || window);
                }
            }
            i = 0;
            while ((cur = eventPath[i++]) && !event.isPropagationStopped()) {
                event.type = i > 1 ? bubbleType : special.bindType || type;
                handle = (jQuery._data(cur, "events") || {})[event.type] && jQuery._data(cur, "handle");
                if (handle) {
                    handle.apply(cur, data);
                }
                handle = ontype && cur[ontype];
                if (handle && handle.apply && jQuery.acceptData(cur)) {
                    event.result = handle.apply(cur, data);
                    if (event.result === false) {
                        event.preventDefault();
                    }
                }
            }
            event.type = type;
            if (!onlyHandlers && !event.isDefaultPrevented()) {
                if ((!special._default || special._default.apply(eventPath.pop(), data) === false) && jQuery.acceptData(elem)) {
                    if (ontype && elem[type] && !jQuery.isWindow(elem)) {
                        tmp = elem[ontype];
                        if (tmp) {
                            elem[ontype] = null;
                        }
                        jQuery.event.triggered = type;
                        try {
                            elem[type]();
                        } catch (e) {
                        }
                        jQuery.event.triggered = undefined;
                        if (tmp) {
                            elem[ontype] = tmp;
                        }
                    }
                }
            }
            return event.result;
        },dispatch: function(event) {
            event = jQuery.event.fix(event);
            var i, ret, handleObj, matched, j, handlerQueue = [], args = slice.call(arguments), handlers = (jQuery._data(this, "events") || {})[event.type] || [], special = jQuery.event.special[event.type] || {};
            args[0] = event;
            event.delegateTarget = this;
            if (special.preDispatch && special.preDispatch.call(this, event) === false) {
                return;
            }
            handlerQueue = jQuery.event.handlers.call(this, event, handlers);
            i = 0;
            while ((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {
                event.currentTarget = matched.elem;
                j = 0;
                while ((handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped()) {
                    if (!event.namespace_re || event.namespace_re.test(handleObj.namespace)) {
                        event.handleObj = handleObj;
                        event.data = handleObj.data;
                        ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args);
                        if (ret !== undefined) {
                            if ((event.result = ret) === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                        }
                    }
                }
            }
            if (special.postDispatch) {
                special.postDispatch.call(this, event);
            }
            return event.result;
        },handlers: function(event, handlers) {
            var sel, handleObj, matches, i, handlerQueue = [], delegateCount = handlers.delegateCount, cur = event.target;
            if (delegateCount && cur.nodeType && (!event.button || event.type !== "click")) {
                for (; cur != this; cur = cur.parentNode || this) {
                    if (cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click")) {
                        matches = [];
                        for (i = 0; i < delegateCount; i++) {
                            handleObj = handlers[i];
                            sel = handleObj.selector + " ";
                            if (matches[sel] === undefined) {
                                matches[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) >= 0 : jQuery.find(sel, this, null, [cur]).length;
                            }
                            if (matches[sel]) {
                                matches.push(handleObj);
                            }
                        }
                        if (matches.length) {
                            handlerQueue.push({elem: cur,handlers: matches});
                        }
                    }
                }
            }
            if (delegateCount < handlers.length) {
                handlerQueue.push({elem: this,handlers: handlers.slice(delegateCount)});
            }
            return handlerQueue;
        },fix: function(event) {
            if (event[jQuery.expando]) {
                return event;
            }
            var i, prop, copy, type = event.type, originalEvent = event, fixHook = this.fixHooks[type];
            if (!fixHook) {
                this.fixHooks[type] = fixHook = rmouseEvent.test(type) ? this.mouseHooks : rkeyEvent.test(type) ? this.keyHooks : {};
            }
            copy = fixHook.props ? this.props.concat(fixHook.props) : this.props;
            event = new jQuery.Event(originalEvent);
            i = copy.length;
            while (i--) {
                prop = copy[i];
                event[prop] = originalEvent[prop];
            }
            if (!event.target) {
                event.target = originalEvent.srcElement || document;
            }
            if (event.target.nodeType === 3) {
                event.target = event.target.parentNode;
            }
            event.metaKey = !!event.metaKey;
            return fixHook.filter ? fixHook.filter(event, originalEvent) : event;
        },props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks: {},keyHooks: {props: "char charCode key keyCode".split(" "),filter: function(event, original) {
                if (event.which == null) {
                    event.which = original.charCode != null ? original.charCode : original.keyCode;
                }
                return event;
            }},mouseHooks: {props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter: function(event, original) {
                var body, eventDoc, doc, button = original.button, fromElement = original.fromElement;
                if (event.pageX == null && original.clientX != null) {
                    eventDoc = event.target.ownerDocument || document;
                    doc = eventDoc.documentElement;
                    body = eventDoc.body;
                    event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);
                    event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);
                }
                if (!event.relatedTarget && fromElement) {
                    event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
                }
                if (!event.which && button !== undefined) {
                    event.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));
                }
                return event;
            }},special: {load: {noBubble: true},focus: {trigger: function() {
                    if (this !== safeActiveElement() && this.focus) {
                        try {
                            this.focus();
                            return false;
                        } catch (e) {
                        }
                    }
                },delegateType: "focusin"},blur: {trigger: function() {
                    if (this === safeActiveElement() && this.blur) {
                        this.blur();
                        return false;
                    }
                },delegateType: "focusout"},click: {trigger: function() {
                    if (jQuery.nodeName(this, "input") && this.type === "checkbox" && this.click) {
                        this.click();
                        return false;
                    }
                },_default: function(event) {
                    return jQuery.nodeName(event.target, "a");
                }},beforeunload: {postDispatch: function(event) {
                    if (event.result !== undefined) {
                        event.originalEvent.returnValue = event.result;
                    }
                }}},simulate: function(type, elem, event, bubble) {
            var e = jQuery.extend(new jQuery.Event(), event, {type: type,isSimulated: true,originalEvent: {}});
            if (bubble) {
                jQuery.event.trigger(e, null, elem);
            } else {
                jQuery.event.dispatch.call(elem, e);
            }
            if (e.isDefaultPrevented()) {
                event.preventDefault();
            }
        }};
    jQuery.removeEvent = document.removeEventListener ? function(elem, type, handle) {
        if (elem.removeEventListener) {
            elem.removeEventListener(type, handle, false);
        }
    } : function(elem, type, handle) {
        var name = "on" + type;
        if (elem.detachEvent) {
            if (typeof elem[name] === strundefined) {
                elem[name] = null;
            }
            elem.detachEvent(name, handle);
        }
    };
    jQuery.Event = function(src, props) {
        if (!(this instanceof jQuery.Event)) {
            return new jQuery.Event(src, props);
        }
        if (src && src.type) {
            this.originalEvent = src;
            this.type = src.type;
            this.isDefaultPrevented = src.defaultPrevented || src.defaultPrevented === undefined && (src.returnValue === false || src.getPreventDefault && src.getPreventDefault()) ? returnTrue : returnFalse;
        } else {
            this.type = src;
        }
        if (props) {
            jQuery.extend(this, props);
        }
        this.timeStamp = src && src.timeStamp || jQuery.now();
        this[jQuery.expando] = true;
    };
    jQuery.Event.prototype = {isDefaultPrevented: returnFalse,isPropagationStopped: returnFalse,isImmediatePropagationStopped: returnFalse,preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = returnTrue;
            if (!e) {
                return;
            }
            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }
        },stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = returnTrue;
            if (!e) {
                return;
            }
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.cancelBubble = true;
        },stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = returnTrue;
            this.stopPropagation();
        }};
    jQuery.each({mouseenter: "mouseover",mouseleave: "mouseout"}, function(orig, fix) {
        jQuery.event.special[orig] = {delegateType: fix,bindType: fix,handle: function(event) {
                var ret, target = this, related = event.relatedTarget, handleObj = event.handleObj;
                if (!related || (related !== target && !jQuery.contains(target, related))) {
                    event.type = handleObj.origType;
                    ret = handleObj.handler.apply(this, arguments);
                    event.type = fix;
                }
                return ret;
            }};
    });
    if (!support.submitBubbles) {
        jQuery.event.special.submit = {setup: function() {
                if (jQuery.nodeName(this, "form")) {
                    return false;
                }
                jQuery.event.add(this, "click._submit keypress._submit", function(e) {
                    var elem = e.target, form = jQuery.nodeName(elem, "input") || jQuery.nodeName(elem, "button") ? elem.form : undefined;
                    if (form && !jQuery._data(form, "submitBubbles")) {
                        jQuery.event.add(form, "submit._submit", function(event) {
                            event._submit_bubble = true;
                        });
                        jQuery._data(form, "submitBubbles", true);
                    }
                });
            },postDispatch: function(event) {
                if (event._submit_bubble) {
                    delete event._submit_bubble;
                    if (this.parentNode && !event.isTrigger) {
                        jQuery.event.simulate("submit", this.parentNode, event, true);
                    }
                }
            },teardown: function() {
                if (jQuery.nodeName(this, "form")) {
                    return false;
                }
                jQuery.event.remove(this, "._submit");
            }};
    }
    if (!support.changeBubbles) {
        jQuery.event.special.change = {setup: function() {
                if (rformElems.test(this.nodeName)) {
                    if (this.type === "checkbox" || this.type === "radio") {
                        jQuery.event.add(this, "propertychange._change", function(event) {
                            if (event.originalEvent.propertyName === "checked") {
                                this._just_changed = true;
                            }
                        });
                        jQuery.event.add(this, "click._change", function(event) {
                            if (this._just_changed && !event.isTrigger) {
                                this._just_changed = false;
                            }
                            jQuery.event.simulate("change", this, event, true);
                        });
                    }
                    return false;
                }
                jQuery.event.add(this, "beforeactivate._change", function(e) {
                    var elem = e.target;
                    if (rformElems.test(elem.nodeName) && !jQuery._data(elem, "changeBubbles")) {
                        jQuery.event.add(elem, "change._change", function(event) {
                            if (this.parentNode && !event.isSimulated && !event.isTrigger) {
                                jQuery.event.simulate("change", this.parentNode, event, true);
                            }
                        });
                        jQuery._data(elem, "changeBubbles", true);
                    }
                });
            },handle: function(event) {
                var elem = event.target;
                if (this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox")) {
                    return event.handleObj.handler.apply(this, arguments);
                }
            },teardown: function() {
                jQuery.event.remove(this, "._change");
                return !rformElems.test(this.nodeName);
            }};
    }
    if (!support.focusinBubbles) {
        jQuery.each({focus: "focusin",blur: "focusout"}, function(orig, fix) {
            var handler = function(event) {
                jQuery.event.simulate(fix, event.target, jQuery.event.fix(event), true);
            };
            jQuery.event.special[fix] = {setup: function() {
                    var doc = this.ownerDocument || this, attaches = jQuery._data(doc, fix);
                    if (!attaches) {
                        doc.addEventListener(orig, handler, true);
                    }
                    jQuery._data(doc, fix, (attaches || 0) + 1);
                },teardown: function() {
                    var doc = this.ownerDocument || this, attaches = jQuery._data(doc, fix) - 1;
                    if (!attaches) {
                        doc.removeEventListener(orig, handler, true);
                        jQuery._removeData(doc, fix);
                    } else {
                        jQuery._data(doc, fix, attaches);
                    }
                }};
        });
    }
    jQuery.fn.extend({on: function(types, selector, data, fn, one) {
            var type, origFn;
            if (typeof types === "object") {
                if (typeof selector !== "string") {
                    data = data || selector;
                    selector = undefined;
                }
                for (type in types) {
                    this.on(type, selector, data, types[type], one);
                }
                return this;
            }
            if (data == null && fn == null) {
                fn = selector;
                data = selector = undefined;
            } else {
                if (fn == null) {
                    if (typeof selector === "string") {
                        fn = data;
                        data = undefined;
                    } else {
                        fn = data;
                        data = selector;
                        selector = undefined;
                    }
                }
            }
            if (fn === false) {
                fn = returnFalse;
            } else {
                if (!fn) {
                    return this;
                }
            }
            if (one === 1) {
                origFn = fn;
                fn = function(event) {
                    jQuery().off(event);
                    return origFn.apply(this, arguments);
                };
                fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
            }
            return this.each(function() {
                jQuery.event.add(this, types, fn, data, selector);
            });
        },one: function(types, selector, data, fn) {
            return this.on(types, selector, data, fn, 1);
        },off: function(types, selector, fn) {
            var handleObj, type;
            if (types && types.preventDefault && types.handleObj) {
                handleObj = types.handleObj;
                jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler);
                return this;
            }
            if (typeof types === "object") {
                for (type in types) {
                    this.off(type, selector, types[type]);
                }
                return this;
            }
            if (selector === false || typeof selector === "function") {
                fn = selector;
                selector = undefined;
            }
            if (fn === false) {
                fn = returnFalse;
            }
            return this.each(function() {
                jQuery.event.remove(this, types, fn, selector);
            });
        },trigger: function(type, data) {
            return this.each(function() {
                jQuery.event.trigger(type, data, this);
            });
        },triggerHandler: function(type, data) {
            var elem = this[0];
            if (elem) {
                return jQuery.event.trigger(type, data, elem, true);
            }
        }});
    function createSafeFragment(document) {
        var list = nodeNames.split("|"), safeFrag = document.createDocumentFragment();
        if (safeFrag.createElement) {
            while (list.length) {
                safeFrag.createElement(list.pop());
            }
        }
        return safeFrag;
    }
    var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g, rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"), rleadingWhitespace = /^\s+/, rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, rtagName = /<([\w:]+)/, rtbody = /<tbody/i, rhtml = /<|&#?\w+;/, rnoInnerhtml = /<(?:script|style|link)/i, rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i, rscriptType = /^$|\/(?:java|ecma)script/i, rscriptTypeMasked = /^true\/(.*)/, rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, wrapMap = {option: [1, "<select multiple='multiple'>", "</select>"],legend: [1, "<fieldset>", "</fieldset>"],area: [1, "<map>", "</map>"],param: [1, "<object>", "</object>"],thead: [1, "<table>", "</table>"],tr: [2, "<table><tbody>", "</tbody></table>"],col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],_default: support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]}, safeFragment = createSafeFragment(document), fragmentDiv = safeFragment.appendChild(document.createElement("div"));
    wrapMap.optgroup = wrapMap.option;
    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
    wrapMap.th = wrapMap.td;
    function getAll(context, tag) {
        var elems, elem, i = 0, found = typeof context.getElementsByTagName !== strundefined ? context.getElementsByTagName(tag || "*") : typeof context.querySelectorAll !== strundefined ? context.querySelectorAll(tag || "*") : undefined;
        if (!found) {
            for (found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++) {
                if (!tag || jQuery.nodeName(elem, tag)) {
                    found.push(elem);
                } else {
                    jQuery.merge(found, getAll(elem, tag));
                }
            }
        }
        return tag === undefined || tag && jQuery.nodeName(context, tag) ? jQuery.merge([context], found) : found;
    }
    function fixDefaultChecked(elem) {
        if (rcheckableType.test(elem.type)) {
            elem.defaultChecked = elem.checked;
        }
    }
    function manipulationTarget(elem, content) {
        return jQuery.nodeName(elem, "table") && jQuery.nodeName(content.nodeType !== 11 ? content : content.firstChild, "tr") ? elem.getElementsByTagName("tbody")[0] || elem.appendChild(elem.ownerDocument.createElement("tbody")) : elem;
    }
    function disableScript(elem) {
        elem.type = (jQuery.find.attr(elem, "type") !== null) + "/" + elem.type;
        return elem;
    }
    function restoreScript(elem) {
        var match = rscriptTypeMasked.exec(elem.type);
        if (match) {
            elem.type = match[1];
        } else {
            elem.removeAttribute("type");
        }
        return elem;
    }
    function setGlobalEval(elems, refElements) {
        var elem, i = 0;
        for (; (elem = elems[i]) != null; i++) {
            jQuery._data(elem, "globalEval", !refElements || jQuery._data(refElements[i], "globalEval"));
        }
    }
    function cloneCopyEvent(src, dest) {
        if (dest.nodeType !== 1 || !jQuery.hasData(src)) {
            return;
        }
        var type, i, l, oldData = jQuery._data(src), curData = jQuery._data(dest, oldData), events = oldData.events;
        if (events) {
            delete curData.handle;
            curData.events = {};
            for (type in events) {
                for (i = 0, l = events[type].length; i < l; i++) {
                    jQuery.event.add(dest, type, events[type][i]);
                }
            }
        }
        if (curData.data) {
            curData.data = jQuery.extend({}, curData.data);
        }
    }
    function fixCloneNodeIssues(src, dest) {
        var nodeName, e, data;
        if (dest.nodeType !== 1) {
            return;
        }
        nodeName = dest.nodeName.toLowerCase();
        if (!support.noCloneEvent && dest[jQuery.expando]) {
            data = jQuery._data(dest);
            for (e in data.events) {
                jQuery.removeEvent(dest, e, data.handle);
            }
            dest.removeAttribute(jQuery.expando);
        }
        if (nodeName === "script" && dest.text !== src.text) {
            disableScript(dest).text = src.text;
            restoreScript(dest);
        } else {
            if (nodeName === "object") {
                if (dest.parentNode) {
                    dest.outerHTML = src.outerHTML;
                }
                if (support.html5Clone && (src.innerHTML && !jQuery.trim(dest.innerHTML))) {
                    dest.innerHTML = src.innerHTML;
                }
            } else {
                if (nodeName === "input" && rcheckableType.test(src.type)) {
                    dest.defaultChecked = dest.checked = src.checked;
                    if (dest.value !== src.value) {
                        dest.value = src.value;
                    }
                } else {
                    if (nodeName === "option") {
                        dest.defaultSelected = dest.selected = src.defaultSelected;
                    } else {
                        if (nodeName === "input" || nodeName === "textarea") {
                            dest.defaultValue = src.defaultValue;
                        }
                    }
                }
            }
        }
    }
    jQuery.extend({clone: function(elem, dataAndEvents, deepDataAndEvents) {
            var destElements, node, clone, i, srcElements, inPage = jQuery.contains(elem.ownerDocument, elem);
            if (support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test("<" + elem.nodeName + ">")) {
                clone = elem.cloneNode(true);
            } else {
                fragmentDiv.innerHTML = elem.outerHTML;
                fragmentDiv.removeChild(clone = fragmentDiv.firstChild);
            }
            if ((!support.noCloneEvent || !support.noCloneChecked) && (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)) {
                destElements = getAll(clone);
                srcElements = getAll(elem);
                for (i = 0; (node = srcElements[i]) != null; ++i) {
                    if (destElements[i]) {
                        fixCloneNodeIssues(node, destElements[i]);
                    }
                }
            }
            if (dataAndEvents) {
                if (deepDataAndEvents) {
                    srcElements = srcElements || getAll(elem);
                    destElements = destElements || getAll(clone);
                    for (i = 0; (node = srcElements[i]) != null; i++) {
                        cloneCopyEvent(node, destElements[i]);
                    }
                } else {
                    cloneCopyEvent(elem, clone);
                }
            }
            destElements = getAll(clone, "script");
            if (destElements.length > 0) {
                setGlobalEval(destElements, !inPage && getAll(elem, "script"));
            }
            destElements = srcElements = node = null;
            return clone;
        },buildFragment: function(elems, context, scripts, selection) {
            var j, elem, contains, tmp, tag, tbody, wrap, l = elems.length, safe = createSafeFragment(context), nodes = [], i = 0;
            for (; i < l; i++) {
                elem = elems[i];
                if (elem || elem === 0) {
                    if (jQuery.type(elem) === "object") {
                        jQuery.merge(nodes, elem.nodeType ? [elem] : elem);
                    } else {
                        if (!rhtml.test(elem)) {
                            nodes.push(context.createTextNode(elem));
                        } else {
                            tmp = tmp || safe.appendChild(context.createElement("div"));
                            tag = (rtagName.exec(elem) || ["", ""])[1].toLowerCase();
                            wrap = wrapMap[tag] || wrapMap._default;
                            tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, "<$1></$2>") + wrap[2];
                            j = wrap[0];
                            while (j--) {
                                tmp = tmp.lastChild;
                            }
                            if (!support.leadingWhitespace && rleadingWhitespace.test(elem)) {
                                nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));
                            }
                            if (!support.tbody) {
                                elem = tag === "table" && !rtbody.test(elem) ? tmp.firstChild : wrap[1] === "<table>" && !rtbody.test(elem) ? tmp : 0;
                                j = elem && elem.childNodes.length;
                                while (j--) {
                                    if (jQuery.nodeName((tbody = elem.childNodes[j]), "tbody") && !tbody.childNodes.length) {
                                        elem.removeChild(tbody);
                                    }
                                }
                            }
                            jQuery.merge(nodes, tmp.childNodes);
                            tmp.textContent = "";
                            while (tmp.firstChild) {
                                tmp.removeChild(tmp.firstChild);
                            }
                            tmp = safe.lastChild;
                        }
                    }
                }
            }
            if (tmp) {
                safe.removeChild(tmp);
            }
            if (!support.appendChecked) {
                jQuery.grep(getAll(nodes, "input"), fixDefaultChecked);
            }
            i = 0;
            while ((elem = nodes[i++])) {
                if (selection && jQuery.inArray(elem, selection) !== -1) {
                    continue;
                }
                contains = jQuery.contains(elem.ownerDocument, elem);
                tmp = getAll(safe.appendChild(elem), "script");
                if (contains) {
                    setGlobalEval(tmp);
                }
                if (scripts) {
                    j = 0;
                    while ((elem = tmp[j++])) {
                        if (rscriptType.test(elem.type || "")) {
                            scripts.push(elem);
                        }
                    }
                }
            }
            tmp = null;
            return safe;
        },cleanData: function(elems, acceptData) {
            var elem, type, id, data, i = 0, internalKey = jQuery.expando, cache = jQuery.cache, deleteExpando = support.deleteExpando, special = jQuery.event.special;
            for (; (elem = elems[i]) != null; i++) {
                if (acceptData || jQuery.acceptData(elem)) {
                    id = elem[internalKey];
                    data = id && cache[id];
                    if (data) {
                        if (data.events) {
                            for (type in data.events) {
                                if (special[type]) {
                                    jQuery.event.remove(elem, type);
                                } else {
                                    jQuery.removeEvent(elem, type, data.handle);
                                }
                            }
                        }
                        if (cache[id]) {
                            delete cache[id];
                            if (deleteExpando) {
                                delete elem[internalKey];
                            } else {
                                if (typeof elem.removeAttribute !== strundefined) {
                                    elem.removeAttribute(internalKey);
                                } else {
                                    elem[internalKey] = null;
                                }
                            }
                            deletedIds.push(id);
                        }
                    }
                }
            }
        }});
    jQuery.fn.extend({text: function(value) {
            return access(this, function(value) {
                return value === undefined ? jQuery.text(this) : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
            }, null, value, arguments.length);
        },append: function() {
            return this.domManip(arguments, function(elem) {
                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                    var target = manipulationTarget(this, elem);
                    target.appendChild(elem);
                }
            });
        },prepend: function() {
            return this.domManip(arguments, function(elem) {
                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                    var target = manipulationTarget(this, elem);
                    target.insertBefore(elem, target.firstChild);
                }
            });
        },before: function() {
            return this.domManip(arguments, function(elem) {
                if (this.parentNode) {
                    this.parentNode.insertBefore(elem, this);
                }
            });
        },after: function() {
            return this.domManip(arguments, function(elem) {
                if (this.parentNode) {
                    this.parentNode.insertBefore(elem, this.nextSibling);
                }
            });
        },remove: function(selector, keepData) {
            var elem, elems = selector ? jQuery.filter(selector, this) : this, i = 0;
            for (; (elem = elems[i]) != null; i++) {
                if (!keepData && elem.nodeType === 1) {
                    jQuery.cleanData(getAll(elem));
                }
                if (elem.parentNode) {
                    if (keepData && jQuery.contains(elem.ownerDocument, elem)) {
                        setGlobalEval(getAll(elem, "script"));
                    }
                    elem.parentNode.removeChild(elem);
                }
            }
            return this;
        },empty: function() {
            var elem, i = 0;
            for (; (elem = this[i]) != null; i++) {
                if (elem.nodeType === 1) {
                    jQuery.cleanData(getAll(elem, false));
                }
                while (elem.firstChild) {
                    elem.removeChild(elem.firstChild);
                }
                if (elem.options && jQuery.nodeName(elem, "select")) {
                    elem.options.length = 0;
                }
            }
            return this;
        },clone: function(dataAndEvents, deepDataAndEvents) {
            dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
            deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
            return this.map(function() {
                return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
            });
        },html: function(value) {
            return access(this, function(value) {
                var elem = this[0] || {}, i = 0, l = this.length;
                if (value === undefined) {
                    return elem.nodeType === 1 ? elem.innerHTML.replace(rinlinejQuery, "") : undefined;
                }
                if (typeof value === "string" && !rnoInnerhtml.test(value) && (support.htmlSerialize || !rnoshimcache.test(value)) && (support.leadingWhitespace || !rleadingWhitespace.test(value)) && !wrapMap[(rtagName.exec(value) || ["", ""])[1].toLowerCase()]) {
                    value = value.replace(rxhtmlTag, "<$1></$2>");
                    try {
                        for (; i < l; i++) {
                            elem = this[i] || {};
                            if (elem.nodeType === 1) {
                                jQuery.cleanData(getAll(elem, false));
                                elem.innerHTML = value;
                            }
                        }
                        elem = 0;
                    } catch (e) {
                    }
                }
                if (elem) {
                    this.empty().append(value);
                }
            }, null, value, arguments.length);
        },replaceWith: function() {
            var arg = arguments[0];
            this.domManip(arguments, function(elem) {
                arg = this.parentNode;
                jQuery.cleanData(getAll(this));
                if (arg) {
                    arg.replaceChild(elem, this);
                }
            });
            return arg && (arg.length || arg.nodeType) ? this : this.remove();
        },detach: function(selector) {
            return this.remove(selector, true);
        },domManip: function(args, callback) {
            args = concat.apply([], args);
            var first, node, hasScripts, scripts, doc, fragment, i = 0, l = this.length, set = this, iNoClone = l - 1, value = args[0], isFunction = jQuery.isFunction(value);
            if (isFunction || (l > 1 && typeof value === "string" && !support.checkClone && rchecked.test(value))) {
                return this.each(function(index) {
                    var self = set.eq(index);
                    if (isFunction) {
                        args[0] = value.call(this, index, self.html());
                    }
                    self.domManip(args, callback);
                });
            }
            if (l) {
                fragment = jQuery.buildFragment(args, this[0].ownerDocument, false, this);
                first = fragment.firstChild;
                if (fragment.childNodes.length === 1) {
                    fragment = first;
                }
                if (first) {
                    scripts = jQuery.map(getAll(fragment, "script"), disableScript);
                    hasScripts = scripts.length;
                    for (; i < l; i++) {
                        node = fragment;
                        if (i !== iNoClone) {
                            node = jQuery.clone(node, true, true);
                            if (hasScripts) {
                                jQuery.merge(scripts, getAll(node, "script"));
                            }
                        }
                        callback.call(this[i], node, i);
                    }
                    if (hasScripts) {
                        doc = scripts[scripts.length - 1].ownerDocument;
                        jQuery.map(scripts, restoreScript);
                        for (i = 0; i < hasScripts; i++) {
                            node = scripts[i];
                            if (rscriptType.test(node.type || "") && !jQuery._data(node, "globalEval") && jQuery.contains(doc, node)) {
                                if (node.src) {
                                    if (jQuery._evalUrl) {
                                        jQuery._evalUrl(node.src);
                                    }
                                } else {
                                    jQuery.globalEval((node.text || node.textContent || node.innerHTML || "").replace(rcleanScript, ""));
                                }
                            }
                        }
                    }
                    fragment = first = null;
                }
            }
            return this;
        }});
    jQuery.each({appendTo: "append",prependTo: "prepend",insertBefore: "before",insertAfter: "after",replaceAll: "replaceWith"}, function(name, original) {
        jQuery.fn[name] = function(selector) {
            var elems, i = 0, ret = [], insert = jQuery(selector), last = insert.length - 1;
            for (; i <= last; i++) {
                elems = i === last ? this : this.clone(true);
                jQuery(insert[i])[original](elems);
                push.apply(ret, elems.get());
            }
            return this.pushStack(ret);
        };
    });
    var iframe, elemdisplay = {};
    function actualDisplay(name, doc) {
        var elem = jQuery(doc.createElement(name)).appendTo(doc.body), display = window.getDefaultComputedStyle ? window.getDefaultComputedStyle(elem[0]).display : jQuery.css(elem[0], "display");
        elem.detach();
        return display;
    }
    function defaultDisplay(nodeName) {
        var doc = document, display = elemdisplay[nodeName];
        if (!display) {
            display = actualDisplay(nodeName, doc);
            if (display === "none" || !display) {
                iframe = (iframe || jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);
                doc = (iframe[0].contentWindow || iframe[0].contentDocument).document;
                doc.write();
                doc.close();
                display = actualDisplay(nodeName, doc);
                iframe.detach();
            }
            elemdisplay[nodeName] = display;
        }
        return display;
    }
    (function() {
        var a, shrinkWrapBlocksVal, div = document.createElement("div"), divReset = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        a = div.getElementsByTagName("a")[0];
        a.style.cssText = "float:left;opacity:.5";
        support.opacity = /^0.5/.test(a.style.opacity);
        support.cssFloat = !!a.style.cssFloat;
        div.style.backgroundClip = "content-box";
        div.cloneNode(true).style.backgroundClip = "";
        support.clearCloneStyle = div.style.backgroundClip === "content-box";
        a = div = null;
        support.shrinkWrapBlocks = function() {
            var body, container, div, containerStyles;
            if (shrinkWrapBlocksVal == null) {
                body = document.getElementsByTagName("body")[0];
                if (!body) {
                    return;
                }
                containerStyles = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px";
                container = document.createElement("div");
                div = document.createElement("div");
                body.appendChild(container).appendChild(div);
                shrinkWrapBlocksVal = false;
                if (typeof div.style.zoom !== strundefined) {
                    div.style.cssText = divReset + ";width:1px;padding:1px;zoom:1";
                    div.innerHTML = "<div></div>";
                    div.firstChild.style.width = "5px";
                    shrinkWrapBlocksVal = div.offsetWidth !== 3;
                }
                body.removeChild(container);
                body = container = div = null;
            }
            return shrinkWrapBlocksVal;
        };
    })();
    var rmargin = (/^margin/);
    var rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i");
    var getStyles, curCSS, rposition = /^(top|right|bottom|left)$/;
    if (window.getComputedStyle) {
        getStyles = function(elem) {
            return elem.ownerDocument.defaultView.getComputedStyle(elem, null);
        };
        curCSS = function(elem, name, computed) {
            var width, minWidth, maxWidth, ret, style = elem.style;
            computed = computed || getStyles(elem);
            ret = computed ? computed.getPropertyValue(name) || computed[name] : undefined;
            if (computed) {
                if (ret === "" && !jQuery.contains(elem.ownerDocument, elem)) {
                    ret = jQuery.style(elem, name);
                }
                if (rnumnonpx.test(ret) && rmargin.test(name)) {
                    width = style.width;
                    minWidth = style.minWidth;
                    maxWidth = style.maxWidth;
                    style.minWidth = style.maxWidth = style.width = ret;
                    ret = computed.width;
                    style.width = width;
                    style.minWidth = minWidth;
                    style.maxWidth = maxWidth;
                }
            }
            return ret === undefined ? ret : ret + "";
        };
    } else {
        if (document.documentElement.currentStyle) {
            getStyles = function(elem) {
                return elem.currentStyle;
            };
            curCSS = function(elem, name, computed) {
                var left, rs, rsLeft, ret, style = elem.style;
                computed = computed || getStyles(elem);
                ret = computed ? computed[name] : undefined;
                if (ret == null && style && style[name]) {
                    ret = style[name];
                }
                if (rnumnonpx.test(ret) && !rposition.test(name)) {
                    left = style.left;
                    rs = elem.runtimeStyle;
                    rsLeft = rs && rs.left;
                    if (rsLeft) {
                        rs.left = elem.currentStyle.left;
                    }
                    style.left = name === "fontSize" ? "1em" : ret;
                    ret = style.pixelLeft + "px";
                    style.left = left;
                    if (rsLeft) {
                        rs.left = rsLeft;
                    }
                }
                return ret === undefined ? ret : ret + "" || "auto";
            };
        }
    }
    function addGetHookIf(conditionFn, hookFn) {
        return {get: function() {
                var condition = conditionFn();
                if (condition == null) {
                    return;
                }
                if (condition) {
                    delete this.get;
                    return;
                }
                return (this.get = hookFn).apply(this, arguments);
            }};
    }
    (function() {
        var a, reliableHiddenOffsetsVal, boxSizingVal, boxSizingReliableVal, pixelPositionVal, reliableMarginRightVal, div = document.createElement("div"), containerStyles = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px", divReset = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        a = div.getElementsByTagName("a")[0];
        a.style.cssText = "float:left;opacity:.5";
        support.opacity = /^0.5/.test(a.style.opacity);
        support.cssFloat = !!a.style.cssFloat;
        div.style.backgroundClip = "content-box";
        div.cloneNode(true).style.backgroundClip = "";
        support.clearCloneStyle = div.style.backgroundClip === "content-box";
        a = div = null;
        jQuery.extend(support, {reliableHiddenOffsets: function() {
                if (reliableHiddenOffsetsVal != null) {
                    return reliableHiddenOffsetsVal;
                }
                var container, tds, isSupported, div = document.createElement("div"), body = document.getElementsByTagName("body")[0];
                if (!body) {
                    return;
                }
                div.setAttribute("className", "t");
                div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
                container = document.createElement("div");
                container.style.cssText = containerStyles;
                body.appendChild(container).appendChild(div);
                div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
                tds = div.getElementsByTagName("td");
                tds[0].style.cssText = "padding:0;margin:0;border:0;display:none";
                isSupported = (tds[0].offsetHeight === 0);
                tds[0].style.display = "";
                tds[1].style.display = "none";
                reliableHiddenOffsetsVal = isSupported && (tds[0].offsetHeight === 0);
                body.removeChild(container);
                div = body = null;
                return reliableHiddenOffsetsVal;
            },boxSizing: function() {
                if (boxSizingVal == null) {
                    computeStyleTests();
                }
                return boxSizingVal;
            },boxSizingReliable: function() {
                if (boxSizingReliableVal == null) {
                    computeStyleTests();
                }
                return boxSizingReliableVal;
            },pixelPosition: function() {
                if (pixelPositionVal == null) {
                    computeStyleTests();
                }
                return pixelPositionVal;
            },reliableMarginRight: function() {
                var body, container, div, marginDiv;
                if (reliableMarginRightVal == null && window.getComputedStyle) {
                    body = document.getElementsByTagName("body")[0];
                    if (!body) {
                        return;
                    }
                    container = document.createElement("div");
                    div = document.createElement("div");
                    container.style.cssText = containerStyles;
                    body.appendChild(container).appendChild(div);
                    marginDiv = div.appendChild(document.createElement("div"));
                    marginDiv.style.cssText = div.style.cssText = divReset;
                    marginDiv.style.marginRight = marginDiv.style.width = "0";
                    div.style.width = "1px";
                    reliableMarginRightVal = !parseFloat((window.getComputedStyle(marginDiv, null) || {}).marginRight);
                    body.removeChild(container);
                }
                return reliableMarginRightVal;
            }});
        function computeStyleTests() {
            var container, div, body = document.getElementsByTagName("body")[0];
            if (!body) {
                return;
            }
            container = document.createElement("div");
            div = document.createElement("div");
            container.style.cssText = containerStyles;
            body.appendChild(container).appendChild(div);
            div.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%";
            jQuery.swap(body, body.style.zoom != null ? {zoom: 1} : {}, function() {
                boxSizingVal = div.offsetWidth === 4;
            });
            boxSizingReliableVal = true;
            pixelPositionVal = false;
            reliableMarginRightVal = true;
            if (window.getComputedStyle) {
                pixelPositionVal = (window.getComputedStyle(div, null) || {}).top !== "1%";
                boxSizingReliableVal = (window.getComputedStyle(div, null) || {width: "4px"}).width === "4px";
            }
            body.removeChild(container);
            div = body = null;
        }
    })();
    jQuery.swap = function(elem, options, callback, args) {
        var ret, name, old = {};
        for (name in options) {
            old[name] = elem.style[name];
            elem.style[name] = options[name];
        }
        ret = callback.apply(elem, args || []);
        for (name in options) {
            elem.style[name] = old[name];
        }
        return ret;
    };
    var ralpha = /alpha\([^)]*\)/i, ropacity = /opacity\s*=\s*([^)]*)/, rdisplayswap = /^(none|table(?!-c[ea]).+)/, rnumsplit = new RegExp("^(" + pnum + ")(.*)$", "i"), rrelNum = new RegExp("^([+-])=(" + pnum + ")", "i"), cssShow = {position: "absolute",visibility: "hidden",display: "block"}, cssNormalTransform = {letterSpacing: 0,fontWeight: 400}, cssPrefixes = ["Webkit", "O", "Moz", "ms"];
    function vendorPropName(style, name) {
        if (name in style) {
            return name;
        }
        var capName = name.charAt(0).toUpperCase() + name.slice(1), origName = name, i = cssPrefixes.length;
        while (i--) {
            name = cssPrefixes[i] + capName;
            if (name in style) {
                return name;
            }
        }
        return origName;
    }
    function showHide(elements, show) {
        var display, elem, hidden, values = [], index = 0, length = elements.length;
        for (; index < length; index++) {
            elem = elements[index];
            if (!elem.style) {
                continue;
            }
            values[index] = jQuery._data(elem, "olddisplay");
            display = elem.style.display;
            if (show) {
                if (!values[index] && display === "none") {
                    elem.style.display = "";
                }
                if (elem.style.display === "" && isHidden(elem)) {
                    values[index] = jQuery._data(elem, "olddisplay", defaultDisplay(elem.nodeName));
                }
            } else {
                if (!values[index]) {
                    hidden = isHidden(elem);
                    if (display && display !== "none" || !hidden) {
                        jQuery._data(elem, "olddisplay", hidden ? display : jQuery.css(elem, "display"));
                    }
                }
            }
        }
        for (index = 0; index < length; index++) {
            elem = elements[index];
            if (!elem.style) {
                continue;
            }
            if (!show || elem.style.display === "none" || elem.style.display === "") {
                elem.style.display = show ? values[index] || "" : "none";
            }
        }
        return elements;
    }
    function setPositiveNumber(elem, value, subtract) {
        var matches = rnumsplit.exec(value);
        return matches ? Math.max(0, matches[1] - (subtract || 0)) + (matches[2] || "px") : value;
    }
    function augmentWidthOrHeight(elem, name, extra, isBorderBox, styles) {
        var i = extra === (isBorderBox ? "border" : "content") ? 4 : name === "width" ? 1 : 0, val = 0;
        for (; i < 4; i += 2) {
            if (extra === "margin") {
                val += jQuery.css(elem, extra + cssExpand[i], true, styles);
            }
            if (isBorderBox) {
                if (extra === "content") {
                    val -= jQuery.css(elem, "padding" + cssExpand[i], true, styles);
                }
                if (extra !== "margin") {
                    val -= jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
                }
            } else {
                val += jQuery.css(elem, "padding" + cssExpand[i], true, styles);
                if (extra !== "padding") {
                    val += jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
                }
            }
        }
        return val;
    }
    function getWidthOrHeight(elem, name, extra) {
        var valueIsBorderBox = true, val = name === "width" ? elem.offsetWidth : elem.offsetHeight, styles = getStyles(elem), isBorderBox = support.boxSizing() && jQuery.css(elem, "boxSizing", false, styles) === "border-box";
        if (val <= 0 || val == null) {
            val = curCSS(elem, name, styles);
            if (val < 0 || val == null) {
                val = elem.style[name];
            }
            if (rnumnonpx.test(val)) {
                return val;
            }
            valueIsBorderBox = isBorderBox && (support.boxSizingReliable() || val === elem.style[name]);
            val = parseFloat(val) || 0;
        }
        return (val + augmentWidthOrHeight(elem, name, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles)) + "px";
    }
    jQuery.extend({cssHooks: {opacity: {get: function(elem, computed) {
                    if (computed) {
                        var ret = curCSS(elem, "opacity");
                        return ret === "" ? "1" : ret;
                    }
                }}},cssNumber: {columnCount: true,fillOpacity: true,fontWeight: true,lineHeight: true,opacity: true,order: true,orphans: true,widows: true,zIndex: true,zoom: true},cssProps: {"float": support.cssFloat ? "cssFloat" : "styleFloat"},style: function(elem, name, value, extra) {
            if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {
                return;
            }
            var ret, type, hooks, origName = jQuery.camelCase(name), style = elem.style;
            name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(style, origName));
            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];
            if (value !== undefined) {
                type = typeof value;
                if (type === "string" && (ret = rrelNum.exec(value))) {
                    value = (ret[1] + 1) * ret[2] + parseFloat(jQuery.css(elem, name));
                    type = "number";
                }
                if (value == null || value !== value) {
                    return;
                }
                if (type === "number" && !jQuery.cssNumber[origName]) {
                    value += "px";
                }
                if (!support.clearCloneStyle && value === "" && name.indexOf("background") === 0) {
                    style[name] = "inherit";
                }
                if (!hooks || !("set" in hooks) || (value = hooks.set(elem, value, extra)) !== undefined) {
                    try {
                        style[name] = "";
                        style[name] = value;
                    } catch (e) {
                    }
                }
            } else {
                if (hooks && "get" in hooks && (ret = hooks.get(elem, false, extra)) !== undefined) {
                    return ret;
                }
                return style[name];
            }
        },css: function(elem, name, extra, styles) {
            var num, val, hooks, origName = jQuery.camelCase(name);
            name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(elem.style, origName));
            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];
            if (hooks && "get" in hooks) {
                val = hooks.get(elem, true, extra);
            }
            if (val === undefined) {
                val = curCSS(elem, name, styles);
            }
            if (val === "normal" && name in cssNormalTransform) {
                val = cssNormalTransform[name];
            }
            if (extra === "" || extra) {
                num = parseFloat(val);
                return extra === true || jQuery.isNumeric(num) ? num || 0 : val;
            }
            return val;
        }});
    jQuery.each(["height", "width"], function(i, name) {
        jQuery.cssHooks[name] = {get: function(elem, computed, extra) {
                if (computed) {
                    return elem.offsetWidth === 0 && rdisplayswap.test(jQuery.css(elem, "display")) ? jQuery.swap(elem, cssShow, function() {
                        return getWidthOrHeight(elem, name, extra);
                    }) : getWidthOrHeight(elem, name, extra);
                }
            },set: function(elem, value, extra) {
                var styles = extra && getStyles(elem);
                return setPositiveNumber(elem, value, extra ? augmentWidthOrHeight(elem, name, extra, support.boxSizing() && jQuery.css(elem, "boxSizing", false, styles) === "border-box", styles) : 0);
            }};
    });
    if (!support.opacity) {
        jQuery.cssHooks.opacity = {get: function(elem, computed) {
                return ropacity.test((computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "") ? (0.01 * parseFloat(RegExp.$1)) + "" : computed ? "1" : "";
            },set: function(elem, value) {
                var style = elem.style, currentStyle = elem.currentStyle, opacity = jQuery.isNumeric(value) ? "alpha(opacity=" + value * 100 + ")" : "", filter = currentStyle && currentStyle.filter || style.filter || "";
                style.zoom = 1;
                if ((value >= 1 || value === "") && jQuery.trim(filter.replace(ralpha, "")) === "" && style.removeAttribute) {
                    style.removeAttribute("filter");
                    if (value === "" || currentStyle && !currentStyle.filter) {
                        return;
                    }
                }
                style.filter = ralpha.test(filter) ? filter.replace(ralpha, opacity) : filter + " " + opacity;
            }};
    }
    jQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight, function(elem, computed) {
        if (computed) {
            return jQuery.swap(elem, {display: "inline-block"}, curCSS, [elem, "marginRight"]);
        }
    });
    jQuery.each({margin: "",padding: "",border: "Width"}, function(prefix, suffix) {
        jQuery.cssHooks[prefix + suffix] = {expand: function(value) {
                var i = 0, expanded = {}, parts = typeof value === "string" ? value.split(" ") : [value];
                for (; i < 4; i++) {
                    expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
                }
                return expanded;
            }};
        if (!rmargin.test(prefix)) {
            jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;
        }
    });
    jQuery.fn.extend({css: function(name, value) {
            return access(this, function(elem, name, value) {
                var styles, len, map = {}, i = 0;
                if (jQuery.isArray(name)) {
                    styles = getStyles(elem);
                    len = name.length;
                    for (; i < len; i++) {
                        map[name[i]] = jQuery.css(elem, name[i], false, styles);
                    }
                    return map;
                }
                return value !== undefined ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
            }, name, value, arguments.length > 1);
        },show: function() {
            return showHide(this, true);
        },hide: function() {
            return showHide(this);
        },toggle: function(state) {
            if (typeof state === "boolean") {
                return state ? this.show() : this.hide();
            }
            return this.each(function() {
                if (isHidden(this)) {
                    jQuery(this).show();
                } else {
                    jQuery(this).hide();
                }
            });
        }});
    function Tween(elem, options, prop, end, easing) {
        return new Tween.prototype.init(elem, options, prop, end, easing);
    }
    jQuery.Tween = Tween;
    Tween.prototype = {constructor: Tween,init: function(elem, options, prop, end, easing, unit) {
            this.elem = elem;
            this.prop = prop;
            this.easing = easing || "swing";
            this.options = options;
            this.start = this.now = this.cur();
            this.end = end;
            this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px");
        },cur: function() {
            var hooks = Tween.propHooks[this.prop];
            return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this);
        },run: function(percent) {
            var eased, hooks = Tween.propHooks[this.prop];
            if (this.options.duration) {
                this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration);
            } else {
                this.pos = eased = percent;
            }
            this.now = (this.end - this.start) * eased + this.start;
            if (this.options.step) {
                this.options.step.call(this.elem, this.now, this);
            }
            if (hooks && hooks.set) {
                hooks.set(this);
            } else {
                Tween.propHooks._default.set(this);
            }
            return this;
        }};
    Tween.prototype.init.prototype = Tween.prototype;
    Tween.propHooks = {_default: {get: function(tween) {
                var result;
                if (tween.elem[tween.prop] != null && (!tween.elem.style || tween.elem.style[tween.prop] == null)) {
                    return tween.elem[tween.prop];
                }
                result = jQuery.css(tween.elem, tween.prop, "");
                return !result || result === "auto" ? 0 : result;
            },set: function(tween) {
                if (jQuery.fx.step[tween.prop]) {
                    jQuery.fx.step[tween.prop](tween);
                } else {
                    if (tween.elem.style && (tween.elem.style[jQuery.cssProps[tween.prop]] != null || jQuery.cssHooks[tween.prop])) {
                        jQuery.style(tween.elem, tween.prop, tween.now + tween.unit);
                    } else {
                        tween.elem[tween.prop] = tween.now;
                    }
                }
            }}};
    Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {set: function(tween) {
            if (tween.elem.nodeType && tween.elem.parentNode) {
                tween.elem[tween.prop] = tween.now;
            }
        }};
    jQuery.easing = {linear: function(p) {
            return p;
        },swing: function(p) {
            return 0.5 - Math.cos(p * Math.PI) / 2;
        }};
    jQuery.fx = Tween.prototype.init;
    jQuery.fx.step = {};
    var fxNow, timerId, rfxtypes = /^(?:toggle|show|hide)$/, rfxnum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i"), rrun = /queueHooks$/, animationPrefilters = [defaultPrefilter], tweeners = {"*": [function(prop, value) {
                var tween = this.createTween(prop, value), target = tween.cur(), parts = rfxnum.exec(value), unit = parts && parts[3] || (jQuery.cssNumber[prop] ? "" : "px"), start = (jQuery.cssNumber[prop] || unit !== "px" && +target) && rfxnum.exec(jQuery.css(tween.elem, prop)), scale = 1, maxIterations = 20;
                if (start && start[3] !== unit) {
                    unit = unit || start[3];
                    parts = parts || [];
                    start = +target || 1;
                    do {
                        scale = scale || ".5";
                        start = start / scale;
                        jQuery.style(tween.elem, prop, start + unit);
                    } while (scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations);
                }
                if (parts) {
                    start = tween.start = +start || +target || 0;
                    tween.unit = unit;
                    tween.end = parts[1] ? start + (parts[1] + 1) * parts[2] : +parts[2];
                }
                return tween;
            }]};
    function createFxNow() {
        setTimeout(function() {
            fxNow = undefined;
        });
        return (fxNow = jQuery.now());
    }
    function genFx(type, includeWidth) {
        var which, attrs = {height: type}, i = 0;
        includeWidth = includeWidth ? 1 : 0;
        for (; i < 4; i += 2 - includeWidth) {
            which = cssExpand[i];
            attrs["margin" + which] = attrs["padding" + which] = type;
        }
        if (includeWidth) {
            attrs.opacity = attrs.width = type;
        }
        return attrs;
    }
    function createTween(value, prop, animation) {
        var tween, collection = (tweeners[prop] || []).concat(tweeners["*"]), index = 0, length = collection.length;
        for (; index < length; index++) {
            if ((tween = collection[index].call(animation, prop, value))) {
                return tween;
            }
        }
    }
    function defaultPrefilter(elem, props, opts) {
        var prop, value, toggle, tween, hooks, oldfire, display, dDisplay, anim = this, orig = {}, style = elem.style, hidden = elem.nodeType && isHidden(elem), dataShow = jQuery._data(elem, "fxshow");
        if (!opts.queue) {
            hooks = jQuery._queueHooks(elem, "fx");
            if (hooks.unqueued == null) {
                hooks.unqueued = 0;
                oldfire = hooks.empty.fire;
                hooks.empty.fire = function() {
                    if (!hooks.unqueued) {
                        oldfire();
                    }
                };
            }
            hooks.unqueued++;
            anim.always(function() {
                anim.always(function() {
                    hooks.unqueued--;
                    if (!jQuery.queue(elem, "fx").length) {
                        hooks.empty.fire();
                    }
                });
            });
        }
        if (elem.nodeType === 1 && ("height" in props || "width" in props)) {
            opts.overflow = [style.overflow, style.overflowX, style.overflowY];
            display = jQuery.css(elem, "display");
            dDisplay = defaultDisplay(elem.nodeName);
            if (display === "none") {
                display = dDisplay;
            }
            if (display === "inline" && jQuery.css(elem, "float") === "none") {
                if (!support.inlineBlockNeedsLayout || dDisplay === "inline") {
                    style.display = "inline-block";
                } else {
                    style.zoom = 1;
                }
            }
        }
        if (opts.overflow) {
            style.overflow = "hidden";
            if (!support.shrinkWrapBlocks()) {
                anim.always(function() {
                    style.overflow = opts.overflow[0];
                    style.overflowX = opts.overflow[1];
                    style.overflowY = opts.overflow[2];
                });
            }
        }
        for (prop in props) {
            value = props[prop];
            if (rfxtypes.exec(value)) {
                delete props[prop];
                toggle = toggle || value === "toggle";
                if (value === (hidden ? "hide" : "show")) {
                    if (value === "show" && dataShow && dataShow[prop] !== undefined) {
                        hidden = true;
                    } else {
                        continue;
                    }
                }
                orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop);
            }
        }
        if (!jQuery.isEmptyObject(orig)) {
            if (dataShow) {
                if ("hidden" in dataShow) {
                    hidden = dataShow.hidden;
                }
            } else {
                dataShow = jQuery._data(elem, "fxshow", {});
            }
            if (toggle) {
                dataShow.hidden = !hidden;
            }
            if (hidden) {
                jQuery(elem).show();
            } else {
                anim.done(function() {
                    jQuery(elem).hide();
                });
            }
            anim.done(function() {
                var prop;
                jQuery._removeData(elem, "fxshow");
                for (prop in orig) {
                    jQuery.style(elem, prop, orig[prop]);
                }
            });
            for (prop in orig) {
                tween = createTween(hidden ? dataShow[prop] : 0, prop, anim);
                if (!(prop in dataShow)) {
                    dataShow[prop] = tween.start;
                    if (hidden) {
                        tween.end = tween.start;
                        tween.start = prop === "width" || prop === "height" ? 1 : 0;
                    }
                }
            }
        }
    }
    function propFilter(props, specialEasing) {
        var index, name, easing, value, hooks;
        for (index in props) {
            name = jQuery.camelCase(index);
            easing = specialEasing[name];
            value = props[index];
            if (jQuery.isArray(value)) {
                easing = value[1];
                value = props[index] = value[0];
            }
            if (index !== name) {
                props[name] = value;
                delete props[index];
            }
            hooks = jQuery.cssHooks[name];
            if (hooks && "expand" in hooks) {
                value = hooks.expand(value);
                delete props[name];
                for (index in value) {
                    if (!(index in props)) {
                        props[index] = value[index];
                        specialEasing[index] = easing;
                    }
                }
            } else {
                specialEasing[name] = easing;
            }
        }
    }
    function Animation(elem, properties, options) {
        var result, stopped, index = 0, length = animationPrefilters.length, deferred = jQuery.Deferred().always(function() {
            delete tick.elem;
        }), tick = function() {
            if (stopped) {
                return false;
            }
            var currentTime = fxNow || createFxNow(), remaining = Math.max(0, animation.startTime + animation.duration - currentTime), temp = remaining / animation.duration || 0, percent = 1 - temp, index = 0, length = animation.tweens.length;
            for (; index < length; index++) {
                animation.tweens[index].run(percent);
            }
            deferred.notifyWith(elem, [animation, percent, remaining]);
            if (percent < 1 && length) {
                return remaining;
            } else {
                deferred.resolveWith(elem, [animation]);
                return false;
            }
        }, animation = deferred.promise({elem: elem,props: jQuery.extend({}, properties),opts: jQuery.extend(true, {specialEasing: {}}, options),originalProperties: properties,originalOptions: options,startTime: fxNow || createFxNow(),duration: options.duration,tweens: [],createTween: function(prop, end) {
                var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
                animation.tweens.push(tween);
                return tween;
            },stop: function(gotoEnd) {
                var index = 0, length = gotoEnd ? animation.tweens.length : 0;
                if (stopped) {
                    return this;
                }
                stopped = true;
                for (; index < length; index++) {
                    animation.tweens[index].run(1);
                }
                if (gotoEnd) {
                    deferred.resolveWith(elem, [animation, gotoEnd]);
                } else {
                    deferred.rejectWith(elem, [animation, gotoEnd]);
                }
                return this;
            }}), props = animation.props;
        propFilter(props, animation.opts.specialEasing);
        for (; index < length; index++) {
            result = animationPrefilters[index].call(animation, elem, props, animation.opts);
            if (result) {
                return result;
            }
        }
        jQuery.map(props, createTween, animation);
        if (jQuery.isFunction(animation.opts.start)) {
            animation.opts.start.call(elem, animation);
        }
        jQuery.fx.timer(jQuery.extend(tick, {elem: elem,anim: animation,queue: animation.opts.queue}));
        return animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);
    }
    jQuery.Animation = jQuery.extend(Animation, {tweener: function(props, callback) {
            if (jQuery.isFunction(props)) {
                callback = props;
                props = ["*"];
            } else {
                props = props.split(" ");
            }
            var prop, index = 0, length = props.length;
            for (; index < length; index++) {
                prop = props[index];
                tweeners[prop] = tweeners[prop] || [];
                tweeners[prop].unshift(callback);
            }
        },prefilter: function(callback, prepend) {
            if (prepend) {
                animationPrefilters.unshift(callback);
            } else {
                animationPrefilters.push(callback);
            }
        }});
    jQuery.speed = function(speed, easing, fn) {
        var opt = speed && typeof speed === "object" ? jQuery.extend({}, speed) : {complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,duration: speed,easing: fn && easing || easing && !jQuery.isFunction(easing) && easing};
        opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default;
        if (opt.queue == null || opt.queue === true) {
            opt.queue = "fx";
        }
        opt.old = opt.complete;
        opt.complete = function() {
            if (jQuery.isFunction(opt.old)) {
                opt.old.call(this);
            }
            if (opt.queue) {
                jQuery.dequeue(this, opt.queue);
            }
        };
        return opt;
    };
    jQuery.fn.extend({fadeTo: function(speed, to, easing, callback) {
            return this.filter(isHidden).css("opacity", 0).show().end().animate({opacity: to}, speed, easing, callback);
        },animate: function(prop, speed, easing, callback) {
            var empty = jQuery.isEmptyObject(prop), optall = jQuery.speed(speed, easing, callback), doAnimation = function() {
                var anim = Animation(this, jQuery.extend({}, prop), optall);
                if (empty || jQuery._data(this, "finish")) {
                    anim.stop(true);
                }
            };
            doAnimation.finish = doAnimation;
            return empty || optall.queue === false ? this.each(doAnimation) : this.queue(optall.queue, doAnimation);
        },stop: function(type, clearQueue, gotoEnd) {
            var stopQueue = function(hooks) {
                var stop = hooks.stop;
                delete hooks.stop;
                stop(gotoEnd);
            };
            if (typeof type !== "string") {
                gotoEnd = clearQueue;
                clearQueue = type;
                type = undefined;
            }
            if (clearQueue && type !== false) {
                this.queue(type || "fx", []);
            }
            return this.each(function() {
                var dequeue = true, index = type != null && type + "queueHooks", timers = jQuery.timers, data = jQuery._data(this);
                if (index) {
                    if (data[index] && data[index].stop) {
                        stopQueue(data[index]);
                    }
                } else {
                    for (index in data) {
                        if (data[index] && data[index].stop && rrun.test(index)) {
                            stopQueue(data[index]);
                        }
                    }
                }
                for (index = timers.length; index--; ) {
                    if (timers[index].elem === this && (type == null || timers[index].queue === type)) {
                        timers[index].anim.stop(gotoEnd);
                        dequeue = false;
                        timers.splice(index, 1);
                    }
                }
                if (dequeue || !gotoEnd) {
                    jQuery.dequeue(this, type);
                }
            });
        },finish: function(type) {
            if (type !== false) {
                type = type || "fx";
            }
            return this.each(function() {
                var index, data = jQuery._data(this), queue = data[type + "queue"], hooks = data[type + "queueHooks"], timers = jQuery.timers, length = queue ? queue.length : 0;
                data.finish = true;
                jQuery.queue(this, type, []);
                if (hooks && hooks.stop) {
                    hooks.stop.call(this, true);
                }
                for (index = timers.length; index--; ) {
                    if (timers[index].elem === this && timers[index].queue === type) {
                        timers[index].anim.stop(true);
                        timers.splice(index, 1);
                    }
                }
                for (index = 0; index < length; index++) {
                    if (queue[index] && queue[index].finish) {
                        queue[index].finish.call(this);
                    }
                }
                delete data.finish;
            });
        }});
    jQuery.each(["toggle", "show", "hide"], function(i, name) {
        var cssFn = jQuery.fn[name];
        jQuery.fn[name] = function(speed, easing, callback) {
            return speed == null || typeof speed === "boolean" ? cssFn.apply(this, arguments) : this.animate(genFx(name, true), speed, easing, callback);
        };
    });
    jQuery.each({slideDown: genFx("show"),slideUp: genFx("hide"),slideToggle: genFx("toggle"),fadeIn: {opacity: "show"},fadeOut: {opacity: "hide"},fadeToggle: {opacity: "toggle"}}, function(name, props) {
        jQuery.fn[name] = function(speed, easing, callback) {
            return this.animate(props, speed, easing, callback);
        };
    });
    jQuery.timers = [];
    jQuery.fx.tick = function() {
        var timer, timers = jQuery.timers, i = 0;
        fxNow = jQuery.now();
        for (; i < timers.length; i++) {
            timer = timers[i];
            if (!timer() && timers[i] === timer) {
                timers.splice(i--, 1);
            }
        }
        if (!timers.length) {
            jQuery.fx.stop();
        }
        fxNow = undefined;
    };
    jQuery.fx.timer = function(timer) {
        jQuery.timers.push(timer);
        if (timer()) {
            jQuery.fx.start();
        } else {
            jQuery.timers.pop();
        }
    };
    jQuery.fx.interval = 13;
    jQuery.fx.start = function() {
        if (!timerId) {
            timerId = setInterval(jQuery.fx.tick, jQuery.fx.interval);
        }
    };
    jQuery.fx.stop = function() {
        clearInterval(timerId);
        timerId = null;
    };
    jQuery.fx.speeds = {slow: 600,fast: 200,_default: 400};
    jQuery.fn.delay = function(time, type) {
        time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;
        type = type || "fx";
        return this.queue(type, function(next, hooks) {
            var timeout = setTimeout(next, time);
            hooks.stop = function() {
                clearTimeout(timeout);
            };
        });
    };
    (function() {
        var a, input, select, opt, div = document.createElement("div");
        div.setAttribute("className", "t");
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        a = div.getElementsByTagName("a")[0];
        select = document.createElement("select");
        opt = select.appendChild(document.createElement("option"));
        input = div.getElementsByTagName("input")[0];
        a.style.cssText = "top:1px";
        support.getSetAttribute = div.className !== "t";
        support.style = /top/.test(a.getAttribute("style"));
        support.hrefNormalized = a.getAttribute("href") === "/a";
        support.checkOn = !!input.value;
        support.optSelected = opt.selected;
        support.enctype = !!document.createElement("form").enctype;
        select.disabled = true;
        support.optDisabled = !opt.disabled;
        input = document.createElement("input");
        input.setAttribute("value", "");
        support.input = input.getAttribute("value") === "";
        input.value = "t";
        input.setAttribute("type", "radio");
        support.radioValue = input.value === "t";
        a = input = select = opt = div = null;
    })();
    var rreturn = /\r/g;
    jQuery.fn.extend({val: function(value) {
            var hooks, ret, isFunction, elem = this[0];
            if (!arguments.length) {
                if (elem) {
                    hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];
                    if (hooks && "get" in hooks && (ret = hooks.get(elem, "value")) !== undefined) {
                        return ret;
                    }
                    ret = elem.value;
                    return typeof ret === "string" ? ret.replace(rreturn, "") : ret == null ? "" : ret;
                }
                return;
            }
            isFunction = jQuery.isFunction(value);
            return this.each(function(i) {
                var val;
                if (this.nodeType !== 1) {
                    return;
                }
                if (isFunction) {
                    val = value.call(this, i, jQuery(this).val());
                } else {
                    val = value;
                }
                if (val == null) {
                    val = "";
                } else {
                    if (typeof val === "number") {
                        val += "";
                    } else {
                        if (jQuery.isArray(val)) {
                            val = jQuery.map(val, function(value) {
                                return value == null ? "" : value + "";
                            });
                        }
                    }
                }
                hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];
                if (!hooks || !("set" in hooks) || hooks.set(this, val, "value") === undefined) {
                    this.value = val;
                }
            });
        }});
    jQuery.extend({valHooks: {option: {get: function(elem) {
                    var val = jQuery.find.attr(elem, "value");
                    return val != null ? val : jQuery.text(elem);
                }},select: {get: function(elem) {
                    var value, option, options = elem.options, index = elem.selectedIndex, one = elem.type === "select-one" || index < 0, values = one ? null : [], max = one ? index + 1 : options.length, i = index < 0 ? max : one ? index : 0;
                    for (; i < max; i++) {
                        option = options[i];
                        if ((option.selected || i === index) && (support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, "optgroup"))) {
                            value = jQuery(option).val();
                            if (one) {
                                return value;
                            }
                            values.push(value);
                        }
                    }
                    return values;
                },set: function(elem, value) {
                    var optionSet, option, options = elem.options, values = jQuery.makeArray(value), i = options.length;
                    while (i--) {
                        option = options[i];
                        if (jQuery.inArray(jQuery.valHooks.option.get(option), values) >= 0) {
                            try {
                                option.selected = optionSet = true;
                            } catch (_) {
                                option.scrollHeight;
                            }
                        } else {
                            option.selected = false;
                        }
                    }
                    if (!optionSet) {
                        elem.selectedIndex = -1;
                    }
                    return options;
                }}}});
    jQuery.each(["radio", "checkbox"], function() {
        jQuery.valHooks[this] = {set: function(elem, value) {
                if (jQuery.isArray(value)) {
                    return (elem.checked = jQuery.inArray(jQuery(elem).val(), value) >= 0);
                }
            }};
        if (!support.checkOn) {
            jQuery.valHooks[this].get = function(elem) {
                return elem.getAttribute("value") === null ? "on" : elem.value;
            };
        }
    });
    var nodeHook, boolHook, attrHandle = jQuery.expr.attrHandle, ruseDefault = /^(?:checked|selected)$/i, getSetAttribute = support.getSetAttribute, getSetInput = support.input;
    jQuery.fn.extend({attr: function(name, value) {
            return access(this, jQuery.attr, name, value, arguments.length > 1);
        },removeAttr: function(name) {
            return this.each(function() {
                jQuery.removeAttr(this, name);
            });
        }});
    jQuery.extend({attr: function(elem, name, value) {
            var hooks, ret, nType = elem.nodeType;
            if (!elem || nType === 3 || nType === 8 || nType === 2) {
                return;
            }
            if (typeof elem.getAttribute === strundefined) {
                return jQuery.prop(elem, name, value);
            }
            if (nType !== 1 || !jQuery.isXMLDoc(elem)) {
                name = name.toLowerCase();
                hooks = jQuery.attrHooks[name] || (jQuery.expr.match.bool.test(name) ? boolHook : nodeHook);
            }
            if (value !== undefined) {
                if (value === null) {
                    jQuery.removeAttr(elem, name);
                } else {
                    if (hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
                        return ret;
                    } else {
                        elem.setAttribute(name, value + "");
                        return value;
                    }
                }
            } else {
                if (hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null) {
                    return ret;
                } else {
                    ret = jQuery.find.attr(elem, name);
                    return ret == null ? undefined : ret;
                }
            }
        },removeAttr: function(elem, value) {
            var name, propName, i = 0, attrNames = value && value.match(rnotwhite);
            if (attrNames && elem.nodeType === 1) {
                while ((name = attrNames[i++])) {
                    propName = jQuery.propFix[name] || name;
                    if (jQuery.expr.match.bool.test(name)) {
                        if (getSetInput && getSetAttribute || !ruseDefault.test(name)) {
                            elem[propName] = false;
                        } else {
                            elem[jQuery.camelCase("default-" + name)] = elem[propName] = false;
                        }
                    } else {
                        jQuery.attr(elem, name, "");
                    }
                    elem.removeAttribute(getSetAttribute ? name : propName);
                }
            }
        },attrHooks: {type: {set: function(elem, value) {
                    if (!support.radioValue && value === "radio" && jQuery.nodeName(elem, "input")) {
                        var val = elem.value;
                        elem.setAttribute("type", value);
                        if (val) {
                            elem.value = val;
                        }
                        return value;
                    }
                }}}});
    boolHook = {set: function(elem, value, name) {
            if (value === false) {
                jQuery.removeAttr(elem, name);
            } else {
                if (getSetInput && getSetAttribute || !ruseDefault.test(name)) {
                    elem.setAttribute(!getSetAttribute && jQuery.propFix[name] || name, name);
                } else {
                    elem[jQuery.camelCase("default-" + name)] = elem[name] = true;
                }
            }
            return name;
        }};
    jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(i, name) {
        var getter = attrHandle[name] || jQuery.find.attr;
        attrHandle[name] = getSetInput && getSetAttribute || !ruseDefault.test(name) ? function(elem, name, isXML) {
            var ret, handle;
            if (!isXML) {
                handle = attrHandle[name];
                attrHandle[name] = ret;
                ret = getter(elem, name, isXML) != null ? name.toLowerCase() : null;
                attrHandle[name] = handle;
            }
            return ret;
        } : function(elem, name, isXML) {
            if (!isXML) {
                return elem[jQuery.camelCase("default-" + name)] ? name.toLowerCase() : null;
            }
        };
    });
    if (!getSetInput || !getSetAttribute) {
        jQuery.attrHooks.value = {set: function(elem, value, name) {
                if (jQuery.nodeName(elem, "input")) {
                    elem.defaultValue = value;
                } else {
                    return nodeHook && nodeHook.set(elem, value, name);
                }
            }};
    }
    if (!getSetAttribute) {
        nodeHook = {set: function(elem, value, name) {
                var ret = elem.getAttributeNode(name);
                if (!ret) {
                    elem.setAttributeNode((ret = elem.ownerDocument.createAttribute(name)));
                }
                ret.value = value += "";
                if (name === "value" || value === elem.getAttribute(name)) {
                    return value;
                }
            }};
        attrHandle.id = attrHandle.name = attrHandle.coords = function(elem, name, isXML) {
            var ret;
            if (!isXML) {
                return (ret = elem.getAttributeNode(name)) && ret.value !== "" ? ret.value : null;
            }
        };
        jQuery.valHooks.button = {get: function(elem, name) {
                var ret = elem.getAttributeNode(name);
                if (ret && ret.specified) {
                    return ret.value;
                }
            },set: nodeHook.set};
        jQuery.attrHooks.contenteditable = {set: function(elem, value, name) {
                nodeHook.set(elem, value === "" ? false : value, name);
            }};
        jQuery.each(["width", "height"], function(i, name) {
            jQuery.attrHooks[name] = {set: function(elem, value) {
                    if (value === "") {
                        elem.setAttribute(name, "auto");
                        return value;
                    }
                }};
        });
    }
    if (!support.style) {
        jQuery.attrHooks.style = {get: function(elem) {
                return elem.style.cssText || undefined;
            },set: function(elem, value) {
                return (elem.style.cssText = value + "");
            }};
    }
    var rfocusable = /^(?:input|select|textarea|button|object)$/i, rclickable = /^(?:a|area)$/i;
    jQuery.fn.extend({prop: function(name, value) {
            return access(this, jQuery.prop, name, value, arguments.length > 1);
        },removeProp: function(name) {
            name = jQuery.propFix[name] || name;
            return this.each(function() {
                try {
                    this[name] = undefined;
                    delete this[name];
                } catch (e) {
                }
            });
        }});
    jQuery.extend({propFix: {"for": "htmlFor","class": "className"},prop: function(elem, name, value) {
            var ret, hooks, notxml, nType = elem.nodeType;
            if (!elem || nType === 3 || nType === 8 || nType === 2) {
                return;
            }
            notxml = nType !== 1 || !jQuery.isXMLDoc(elem);
            if (notxml) {
                name = jQuery.propFix[name] || name;
                hooks = jQuery.propHooks[name];
            }
            if (value !== undefined) {
                return hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined ? ret : (elem[name] = value);
            } else {
                return hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null ? ret : elem[name];
            }
        },propHooks: {tabIndex: {get: function(elem) {
                    var tabindex = jQuery.find.attr(elem, "tabindex");
                    return tabindex ? parseInt(tabindex, 10) : rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ? 0 : -1;
                }}}});
    if (!support.hrefNormalized) {
        jQuery.each(["href", "src"], function(i, name) {
            jQuery.propHooks[name] = {get: function(elem) {
                    return elem.getAttribute(name, 4);
                }};
        });
    }
    if (!support.optSelected) {
        jQuery.propHooks.selected = {get: function(elem) {
                var parent = elem.parentNode;
                if (parent) {
                    parent.selectedIndex;
                    if (parent.parentNode) {
                        parent.parentNode.selectedIndex;
                    }
                }
                return null;
            }};
    }
    jQuery.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        jQuery.propFix[this.toLowerCase()] = this;
    });
    if (!support.enctype) {
        jQuery.propFix.enctype = "encoding";
    }
    var rclass = /[\t\r\n\f]/g;
    jQuery.fn.extend({addClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, i = 0, len = this.length, proceed = typeof value === "string" && value;
            if (jQuery.isFunction(value)) {
                return this.each(function(j) {
                    jQuery(this).addClass(value.call(this, j, this.className));
                });
            }
            if (proceed) {
                classes = (value || "").match(rnotwhite) || [];
                for (; i < len; i++) {
                    elem = this[i];
                    cur = elem.nodeType === 1 && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : " ");
                    if (cur) {
                        j = 0;
                        while ((clazz = classes[j++])) {
                            if (cur.indexOf(" " + clazz + " ") < 0) {
                                cur += clazz + " ";
                            }
                        }
                        finalValue = jQuery.trim(cur);
                        if (elem.className !== finalValue) {
                            elem.className = finalValue;
                        }
                    }
                }
            }
            return this;
        },removeClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, i = 0, len = this.length, proceed = arguments.length === 0 || typeof value === "string" && value;
            if (jQuery.isFunction(value)) {
                return this.each(function(j) {
                    jQuery(this).removeClass(value.call(this, j, this.className));
                });
            }
            if (proceed) {
                classes = (value || "").match(rnotwhite) || [];
                for (; i < len; i++) {
                    elem = this[i];
                    cur = elem.nodeType === 1 && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : "");
                    if (cur) {
                        j = 0;
                        while ((clazz = classes[j++])) {
                            while (cur.indexOf(" " + clazz + " ") >= 0) {
                                cur = cur.replace(" " + clazz + " ", " ");
                            }
                        }
                        finalValue = value ? jQuery.trim(cur) : "";
                        if (elem.className !== finalValue) {
                            elem.className = finalValue;
                        }
                    }
                }
            }
            return this;
        },toggleClass: function(value, stateVal) {
            var type = typeof value;
            if (typeof stateVal === "boolean" && type === "string") {
                return stateVal ? this.addClass(value) : this.removeClass(value);
            }
            if (jQuery.isFunction(value)) {
                return this.each(function(i) {
                    jQuery(this).toggleClass(value.call(this, i, this.className, stateVal), stateVal);
                });
            }
            return this.each(function() {
                if (type === "string") {
                    var className, i = 0, self = jQuery(this), classNames = value.match(rnotwhite) || [];
                    while ((className = classNames[i++])) {
                        if (self.hasClass(className)) {
                            self.removeClass(className);
                        } else {
                            self.addClass(className);
                        }
                    }
                } else {
                    if (type === strundefined || type === "boolean") {
                        if (this.className) {
                            jQuery._data(this, "__className__", this.className);
                        }
                        this.className = this.className || value === false ? "" : jQuery._data(this, "__className__") || "";
                    }
                }
            });
        },hasClass: function(selector) {
            var className = " " + selector + " ", i = 0, l = this.length;
            for (; i < l; i++) {
                if (this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf(className) >= 0) {
                    return true;
                }
            }
            return false;
        }});
    jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "), function(i, name) {
        jQuery.fn[name] = function(data, fn) {
            return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name);
        };
    });
    jQuery.fn.extend({hover: function(fnOver, fnOut) {
            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
        },bind: function(types, data, fn) {
            return this.on(types, null, data, fn);
        },unbind: function(types, fn) {
            return this.off(types, null, fn);
        },delegate: function(selector, types, data, fn) {
            return this.on(types, selector, data, fn);
        },undelegate: function(selector, types, fn) {
            return arguments.length === 1 ? this.off(selector, "**") : this.off(types, selector || "**", fn);
        }});
    var nonce = jQuery.now();
    var rquery = (/\?/);
    var rvalidtokens = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    jQuery.parseJSON = function(data) {
        if (window.JSON && window.JSON.parse) {
            return window.JSON.parse(data + "");
        }
        var requireNonComma, depth = null, str = jQuery.trim(data + "");
        return str && !jQuery.trim(str.replace(rvalidtokens, function(token, comma, open, close) {
            if (requireNonComma && comma) {
                depth = 0;
            }
            if (depth === 0) {
                return token;
            }
            requireNonComma = open || comma;
            depth += !close - !open;
            return "";
        })) ? (Function("return " + str))() : jQuery.error("Invalid JSON: " + data);
    };
    jQuery.parseXML = function(data) {
        var xml, tmp;
        if (!data || typeof data !== "string") {
            return null;
        }
        try {
            if (window.DOMParser) {
                tmp = new DOMParser();
                xml = tmp.parseFromString(data, "text/xml");
            } else {
                xml = new ActiveXObject("Microsoft.XMLDOM");
                xml.async = "false";
                xml.loadXML(data);
            }
        } catch (e) {
            xml = undefined;
        }
        if (!xml || !xml.documentElement || xml.getElementsByTagName("parsererror").length) {
            jQuery.error("Invalid XML: " + data);
        }
        return xml;
    };
    var ajaxLocParts, ajaxLocation, rhash = /#.*$/, rts = /([?&])_=[^&]*/, rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, rnoContent = /^(?:GET|HEAD)$/, rprotocol = /^\/\//, rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, prefilters = {}, transports = {}, allTypes = "*/".concat("*");
    try {
        ajaxLocation = location.href;
    } catch (e) {
        ajaxLocation = document.createElement("a");
        ajaxLocation.href = "";
        ajaxLocation = ajaxLocation.href;
    }
    ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];
    function addToPrefiltersOrTransports(structure) {
        return function(dataTypeExpression, func) {
            if (typeof dataTypeExpression !== "string") {
                func = dataTypeExpression;
                dataTypeExpression = "*";
            }
            var dataType, i = 0, dataTypes = dataTypeExpression.toLowerCase().match(rnotwhite) || [];
            if (jQuery.isFunction(func)) {
                while ((dataType = dataTypes[i++])) {
                    if (dataType.charAt(0) === "+") {
                        dataType = dataType.slice(1) || "*";
                        (structure[dataType] = structure[dataType] || []).unshift(func);
                    } else {
                        (structure[dataType] = structure[dataType] || []).push(func);
                    }
                }
            }
        };
    }
    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
        var inspected = {}, seekingTransport = (structure === transports);
        function inspect(dataType) {
            var selected;
            inspected[dataType] = true;
            jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {
                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
                if (typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[dataTypeOrTransport]) {
                    options.dataTypes.unshift(dataTypeOrTransport);
                    inspect(dataTypeOrTransport);
                    return false;
                } else {
                    if (seekingTransport) {
                        return !(selected = dataTypeOrTransport);
                    }
                }
            });
            return selected;
        }
        return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*");
    }
    function ajaxExtend(target, src) {
        var deep, key, flatOptions = jQuery.ajaxSettings.flatOptions || {};
        for (key in src) {
            if (src[key] !== undefined) {
                (flatOptions[key] ? target : (deep || (deep = {})))[key] = src[key];
            }
        }
        if (deep) {
            jQuery.extend(true, target, deep);
        }
        return target;
    }
    function ajaxHandleResponses(s, jqXHR, responses) {
        var firstDataType, ct, finalDataType, type, contents = s.contents, dataTypes = s.dataTypes;
        while (dataTypes[0] === "*") {
            dataTypes.shift();
            if (ct === undefined) {
                ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
            }
        }
        if (ct) {
            for (type in contents) {
                if (contents[type] && contents[type].test(ct)) {
                    dataTypes.unshift(type);
                    break;
                }
            }
        }
        if (dataTypes[0] in responses) {
            finalDataType = dataTypes[0];
        } else {
            for (type in responses) {
                if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                    finalDataType = type;
                    break;
                }
                if (!firstDataType) {
                    firstDataType = type;
                }
            }
            finalDataType = finalDataType || firstDataType;
        }
        if (finalDataType) {
            if (finalDataType !== dataTypes[0]) {
                dataTypes.unshift(finalDataType);
            }
            return responses[finalDataType];
        }
    }
    function ajaxConvert(s, response, jqXHR, isSuccess) {
        var conv2, current, conv, tmp, prev, converters = {}, dataTypes = s.dataTypes.slice();
        if (dataTypes[1]) {
            for (conv in s.converters) {
                converters[conv.toLowerCase()] = s.converters[conv];
            }
        }
        current = dataTypes.shift();
        while (current) {
            if (s.responseFields[current]) {
                jqXHR[s.responseFields[current]] = response;
            }
            if (!prev && isSuccess && s.dataFilter) {
                response = s.dataFilter(response, s.dataType);
            }
            prev = current;
            current = dataTypes.shift();
            if (current) {
                if (current === "*") {
                    current = prev;
                } else {
                    if (prev !== "*" && prev !== current) {
                        conv = converters[prev + " " + current] || converters["* " + current];
                        if (!conv) {
                            for (conv2 in converters) {
                                tmp = conv2.split(" ");
                                if (tmp[1] === current) {
                                    conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]];
                                    if (conv) {
                                        if (conv === true) {
                                            conv = converters[conv2];
                                        } else {
                                            if (converters[conv2] !== true) {
                                                current = tmp[0];
                                                dataTypes.unshift(tmp[1]);
                                            }
                                        }
                                        break;
                                    }
                                }
                            }
                        }
                        if (conv !== true) {
                            if (conv && s["throws"]) {
                                response = conv(response);
                            } else {
                                try {
                                    response = conv(response);
                                } catch (e) {
                                    return {state: "parsererror",error: conv ? e : "No conversion from " + prev + " to " + current};
                                }
                            }
                        }
                    }
                }
            }
        }
        return {state: "success",data: response};
    }
    jQuery.extend({active: 0,lastModified: {},etag: {},ajaxSettings: {url: ajaxLocation,type: "GET",isLocal: rlocalProtocol.test(ajaxLocParts[1]),global: true,processData: true,async: true,contentType: "application/x-www-form-urlencoded; charset=UTF-8",accepts: {"*": allTypes,text: "text/plain",html: "text/html",xml: "application/xml, text/xml",json: "application/json, text/javascript"},contents: {xml: /xml/,html: /html/,json: /json/},responseFields: {xml: "responseXML",text: "responseText",json: "responseJSON"},converters: {"* text": String,"text html": true,"text json": jQuery.parseJSON,"text xml": jQuery.parseXML},flatOptions: {url: true,context: true}},ajaxSetup: function(target, settings) {
            return settings ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) : ajaxExtend(jQuery.ajaxSettings, target);
        },ajaxPrefilter: addToPrefiltersOrTransports(prefilters),ajaxTransport: addToPrefiltersOrTransports(transports),ajax: function(url, options) {
            if (typeof url === "object") {
                options = url;
                url = undefined;
            }
            options = options || {};
            var parts, i, cacheURL, responseHeadersString, timeoutTimer, fireGlobals, transport, responseHeaders, s = jQuery.ajaxSetup({}, options), callbackContext = s.context || s, globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event, deferred = jQuery.Deferred(), completeDeferred = jQuery.Callbacks("once memory"), statusCode = s.statusCode || {}, requestHeaders = {}, requestHeadersNames = {}, state = 0, strAbort = "canceled", jqXHR = {readyState: 0,getResponseHeader: function(key) {
                    var match;
                    if (state === 2) {
                        if (!responseHeaders) {
                            responseHeaders = {};
                            while ((match = rheaders.exec(responseHeadersString))) {
                                responseHeaders[match[1].toLowerCase()] = match[2];
                            }
                        }
                        match = responseHeaders[key.toLowerCase()];
                    }
                    return match == null ? null : match;
                },getAllResponseHeaders: function() {
                    return state === 2 ? responseHeadersString : null;
                },setRequestHeader: function(name, value) {
                    var lname = name.toLowerCase();
                    if (!state) {
                        name = requestHeadersNames[lname] = requestHeadersNames[lname] || name;
                        requestHeaders[name] = value;
                    }
                    return this;
                },overrideMimeType: function(type) {
                    if (!state) {
                        s.mimeType = type;
                    }
                    return this;
                },statusCode: function(map) {
                    var code;
                    if (map) {
                        if (state < 2) {
                            for (code in map) {
                                statusCode[code] = [statusCode[code], map[code]];
                            }
                        } else {
                            jqXHR.always(map[jqXHR.status]);
                        }
                    }
                    return this;
                },abort: function(statusText) {
                    var finalText = statusText || strAbort;
                    if (transport) {
                        transport.abort(finalText);
                    }
                    done(0, finalText);
                    return this;
                }};
            deferred.promise(jqXHR).complete = completeDeferred.add;
            jqXHR.success = jqXHR.done;
            jqXHR.error = jqXHR.fail;
            s.url = ((url || s.url || ajaxLocation) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//");
            s.type = options.method || options.type || s.method || s.type;
            s.dataTypes = jQuery.trim(s.dataType || "*").toLowerCase().match(rnotwhite) || [""];
            if (s.crossDomain == null) {
                parts = rurl.exec(s.url.toLowerCase());
                s.crossDomain = !!(parts && (parts[1] !== ajaxLocParts[1] || parts[2] !== ajaxLocParts[2] || (parts[3] || (parts[1] === "http:" ? "80" : "443")) !== (ajaxLocParts[3] || (ajaxLocParts[1] === "http:" ? "80" : "443"))));
            }
            if (s.data && s.processData && typeof s.data !== "string") {
                s.data = jQuery.param(s.data, s.traditional);
            }
            inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);
            if (state === 2) {
                return jqXHR;
            }
            fireGlobals = s.global;
            if (fireGlobals && jQuery.active++ === 0) {
                jQuery.event.trigger("ajaxStart");
            }
            s.type = s.type.toUpperCase();
            s.hasContent = !rnoContent.test(s.type);
            cacheURL = s.url;
            if (!s.hasContent) {
                if (s.data) {
                    cacheURL = (s.url += (rquery.test(cacheURL) ? "&" : "?") + s.data);
                    delete s.data;
                }
                if (s.cache === false) {
                    s.url = rts.test(cacheURL) ? cacheURL.replace(rts, "$1_=" + nonce++) : cacheURL + (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce++;
                }
            }
            if (s.ifModified) {
                if (jQuery.lastModified[cacheURL]) {
                    jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]);
                }
                if (jQuery.etag[cacheURL]) {
                    jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL]);
                }
            }
            if (s.data && s.hasContent && s.contentType !== false || options.contentType) {
                jqXHR.setRequestHeader("Content-Type", s.contentType);
            }
            jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== "*" ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]);
            for (i in s.headers) {
                jqXHR.setRequestHeader(i, s.headers[i]);
            }
            if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === false || state === 2)) {
                return jqXHR.abort();
            }
            strAbort = "abort";
            for (i in {success: 1,error: 1,complete: 1}) {
                jqXHR[i](s[i]);
            }
            transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);
            if (!transport) {
                done(-1, "No Transport");
            } else {
                jqXHR.readyState = 1;
                if (fireGlobals) {
                    globalEventContext.trigger("ajaxSend", [jqXHR, s]);
                }
                if (s.async && s.timeout > 0) {
                    timeoutTimer = setTimeout(function() {
                        jqXHR.abort("timeout");
                    }, s.timeout);
                }
                try {
                    state = 1;
                    transport.send(requestHeaders, done);
                } catch (e) {
                    if (state < 2) {
                        done(-1, e);
                    } else {
                        throw e;
                    }
                }
            }
            function done(status, nativeStatusText, responses, headers) {
                var isSuccess, success, error, response, modified, statusText = nativeStatusText;
                if (state === 2) {
                    return;
                }
                state = 2;
                if (timeoutTimer) {
                    clearTimeout(timeoutTimer);
                }
                transport = undefined;
                responseHeadersString = headers || "";
                jqXHR.readyState = status > 0 ? 4 : 0;
                isSuccess = status >= 200 && status < 300 || status === 304;
                if (responses) {
                    response = ajaxHandleResponses(s, jqXHR, responses);
                }
                response = ajaxConvert(s, response, jqXHR, isSuccess);
                if (isSuccess) {
                    if (s.ifModified) {
                        modified = jqXHR.getResponseHeader("Last-Modified");
                        if (modified) {
                            jQuery.lastModified[cacheURL] = modified;
                        }
                        modified = jqXHR.getResponseHeader("etag");
                        if (modified) {
                            jQuery.etag[cacheURL] = modified;
                        }
                    }
                    if (status === 204 || s.type === "HEAD") {
                        statusText = "nocontent";
                    } else {
                        if (status === 304) {
                            statusText = "notmodified";
                        } else {
                            statusText = response.state;
                            success = response.data;
                            error = response.error;
                            isSuccess = !error;
                        }
                    }
                } else {
                    error = statusText;
                    if (status || !statusText) {
                        statusText = "error";
                        if (status < 0) {
                            status = 0;
                        }
                    }
                }
                jqXHR.status = status;
                jqXHR.statusText = (nativeStatusText || statusText) + "";
                if (isSuccess) {
                    deferred.resolveWith(callbackContext, [success, statusText, jqXHR]);
                } else {
                    deferred.rejectWith(callbackContext, [jqXHR, statusText, error]);
                }
                jqXHR.statusCode(statusCode);
                statusCode = undefined;
                if (fireGlobals) {
                    globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [jqXHR, s, isSuccess ? success : error]);
                }
                completeDeferred.fireWith(callbackContext, [jqXHR, statusText]);
                if (fireGlobals) {
                    globalEventContext.trigger("ajaxComplete", [jqXHR, s]);
                    if (!(--jQuery.active)) {
                        jQuery.event.trigger("ajaxStop");
                    }
                }
            }
            return jqXHR;
        },getJSON: function(url, data, callback) {
            return jQuery.get(url, data, callback, "json");
        },getScript: function(url, callback) {
            return jQuery.get(url, undefined, callback, "script");
        }});
    jQuery.each(["get", "post"], function(i, method) {
        jQuery[method] = function(url, data, callback, type) {
            if (jQuery.isFunction(data)) {
                type = type || callback;
                callback = data;
                data = undefined;
            }
            return jQuery.ajax({url: url,type: method,dataType: type,data: data,success: callback});
        };
    });
    jQuery.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(i, type) {
        jQuery.fn[type] = function(fn) {
            return this.on(type, fn);
        };
    });
    jQuery._evalUrl = function(url) {
        return jQuery.ajax({url: url,type: "GET",dataType: "script",async: false,global: false,"throws": true});
    };
    jQuery.fn.extend({wrapAll: function(html) {
            if (jQuery.isFunction(html)) {
                return this.each(function(i) {
                    jQuery(this).wrapAll(html.call(this, i));
                });
            }
            if (this[0]) {
                var wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);
                if (this[0].parentNode) {
                    wrap.insertBefore(this[0]);
                }
                wrap.map(function() {
                    var elem = this;
                    while (elem.firstChild && elem.firstChild.nodeType === 1) {
                        elem = elem.firstChild;
                    }
                    return elem;
                }).append(this);
            }
            return this;
        },wrapInner: function(html) {
            if (jQuery.isFunction(html)) {
                return this.each(function(i) {
                    jQuery(this).wrapInner(html.call(this, i));
                });
            }
            return this.each(function() {
                var self = jQuery(this), contents = self.contents();
                if (contents.length) {
                    contents.wrapAll(html);
                } else {
                    self.append(html);
                }
            });
        },wrap: function(html) {
            var isFunction = jQuery.isFunction(html);
            return this.each(function(i) {
                jQuery(this).wrapAll(isFunction ? html.call(this, i) : html);
            });
        },unwrap: function() {
            return this.parent().each(function() {
                if (!jQuery.nodeName(this, "body")) {
                    jQuery(this).replaceWith(this.childNodes);
                }
            }).end();
        }});
    jQuery.expr.filters.hidden = function(elem) {
        return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 || (!support.reliableHiddenOffsets() && ((elem.style && elem.style.display) || jQuery.css(elem, "display")) === "none");
    };
    jQuery.expr.filters.visible = function(elem) {
        return !jQuery.expr.filters.hidden(elem);
    };
    var r20 = /%20/g, rbracket = /\[\]$/, rCRLF = /\r?\n/g, rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i, rsubmittable = /^(?:input|select|textarea|keygen)/i;
    function buildParams(prefix, obj, traditional, add) {
        var name;
        if (jQuery.isArray(obj)) {
            jQuery.each(obj, function(i, v) {
                if (traditional || rbracket.test(prefix)) {
                    add(prefix, v);
                } else {
                    buildParams(prefix + "[" + (typeof v === "object" ? i : "") + "]", v, traditional, add);
                }
            });
        } else {
            if (!traditional && jQuery.type(obj) === "object") {
                for (name in obj) {
                    buildParams(prefix + "[" + name + "]", obj[name], traditional, add);
                }
            } else {
                add(prefix, obj);
            }
        }
    }
    jQuery.param = function(a, traditional) {
        var prefix, s = [], add = function(key, value) {
            value = jQuery.isFunction(value) ? value() : (value == null ? "" : value);
            s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value);
        };
        if (traditional === undefined) {
            traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
        }
        if (jQuery.isArray(a) || (a.jquery && !jQuery.isPlainObject(a))) {
            jQuery.each(a, function() {
                add(this.name, this.value);
            });
        } else {
            for (prefix in a) {
                buildParams(prefix, a[prefix], traditional, add);
            }
        }
        return s.join("&").replace(r20, "+");
    };
    jQuery.fn.extend({serialize: function() {
            return jQuery.param(this.serializeArray());
        },serializeArray: function() {
            return this.map(function() {
                var elements = jQuery.prop(this, "elements");
                return elements ? jQuery.makeArray(elements) : this;
            }).filter(function() {
                var type = this.type;
                return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type));
            }).map(function(i, elem) {
                var val = jQuery(this).val();
                return val == null ? null : jQuery.isArray(val) ? jQuery.map(val, function(val) {
                    return {name: elem.name,value: val.replace(rCRLF, "\r\n")};
                }) : {name: elem.name,value: val.replace(rCRLF, "\r\n")};
            }).get();
        }});
    jQuery.ajaxSettings.xhr = window.ActiveXObject !== undefined ? function() {
        return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && createStandardXHR() || createActiveXHR();
    } : createStandardXHR;
    var xhrId = 0, xhrCallbacks = {}, xhrSupported = jQuery.ajaxSettings.xhr();
    if (window.ActiveXObject) {
        jQuery(window).on("unload", function() {
            for (var key in xhrCallbacks) {
                xhrCallbacks[key](undefined, true);
            }
        });
    }
    support.cors = !!xhrSupported && ("withCredentials" in xhrSupported);
    xhrSupported = support.ajax = !!xhrSupported;
    if (xhrSupported) {
        jQuery.ajaxTransport(function(options) {
            if (!options.crossDomain || support.cors) {
                var callback;
                return {send: function(headers, complete) {
                        var i, xhr = options.xhr(), id = ++xhrId;
                        xhr.open(options.type, options.url, options.async, options.username, options.password);
                        if (options.xhrFields) {
                            for (i in options.xhrFields) {
                                xhr[i] = options.xhrFields[i];
                            }
                        }
                        if (options.mimeType && xhr.overrideMimeType) {
                            xhr.overrideMimeType(options.mimeType);
                        }
                        if (!options.crossDomain && !headers["X-Requested-With"]) {
                            headers["X-Requested-With"] = "XMLHttpRequest";
                        }
                        for (i in headers) {
                            if (headers[i] !== undefined) {
                                xhr.setRequestHeader(i, headers[i] + "");
                            }
                        }
                        xhr.send((options.hasContent && options.data) || null);
                        callback = function(_, isAbort) {
                            var status, statusText, responses;
                            if (callback && (isAbort || xhr.readyState === 4)) {
                                delete xhrCallbacks[id];
                                callback = undefined;
                                xhr.onreadystatechange = jQuery.noop;
                                if (isAbort) {
                                    if (xhr.readyState !== 4) {
                                        xhr.abort();
                                    }
                                } else {
                                    responses = {};
                                    status = xhr.status;
                                    if (typeof xhr.responseText === "string") {
                                        responses.text = xhr.responseText;
                                    }
                                    try {
                                        statusText = xhr.statusText;
                                    } catch (e) {
                                        statusText = "";
                                    }
                                    if (!status && options.isLocal && !options.crossDomain) {
                                        status = responses.text ? 200 : 404;
                                    } else {
                                        if (status === 1223) {
                                            status = 204;
                                        }
                                    }
                                }
                            }
                            if (responses) {
                                complete(status, statusText, responses, xhr.getAllResponseHeaders());
                            }
                        };
                        if (!options.async) {
                            callback();
                        } else {
                            if (xhr.readyState === 4) {
                                setTimeout(callback);
                            } else {
                                xhr.onreadystatechange = xhrCallbacks[id] = callback;
                            }
                        }
                    },abort: function() {
                        if (callback) {
                            callback(undefined, true);
                        }
                    }};
            }
        });
    }
    function createStandardXHR() {
        try {
            return new window.XMLHttpRequest();
        } catch (e) {
        }
    }
    function createActiveXHR() {
        try {
            return new window.ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
        }
    }
    jQuery.ajaxSetup({accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents: {script: /(?:java|ecma)script/},converters: {"text script": function(text) {
                jQuery.globalEval(text);
                return text;
            }}});
    jQuery.ajaxPrefilter("script", function(s) {
        if (s.cache === undefined) {
            s.cache = false;
        }
        if (s.crossDomain) {
            s.type = "GET";
            s.global = false;
        }
    });
    jQuery.ajaxTransport("script", function(s) {
        if (s.crossDomain) {
            var script, head = document.head || jQuery("head")[0] || document.documentElement;
            return {send: function(_, callback) {
                    script = document.createElement("script");
                    script.async = true;
                    if (s.scriptCharset) {
                        script.charset = s.scriptCharset;
                    }
                    script.src = s.url;
                    script.onload = script.onreadystatechange = function(_, isAbort) {
                        if (isAbort || !script.readyState || /loaded|complete/.test(script.readyState)) {
                            script.onload = script.onreadystatechange = null;
                            if (script.parentNode) {
                                script.parentNode.removeChild(script);
                            }
                            script = null;
                            if (!isAbort) {
                                callback(200, "success");
                            }
                        }
                    };
                    head.insertBefore(script, head.firstChild);
                },abort: function() {
                    if (script) {
                        script.onload(undefined, true);
                    }
                }};
        }
    });
    var oldCallbacks = [], rjsonp = /(=)\?(?=&|$)|\?\?/;
    jQuery.ajaxSetup({jsonp: "callback",jsonpCallback: function() {
            var callback = oldCallbacks.pop() || (jQuery.expando + "_" + (nonce++));
            this[callback] = true;
            return callback;
        }});
    jQuery.ajaxPrefilter("json jsonp", function(s, originalSettings, jqXHR) {
        var callbackName, overwritten, responseContainer, jsonProp = s.jsonp !== false && (rjsonp.test(s.url) ? "url" : typeof s.data === "string" && !(s.contentType || "").indexOf("application/x-www-form-urlencoded") && rjsonp.test(s.data) && "data");
        if (jsonProp || s.dataTypes[0] === "jsonp") {
            callbackName = s.jsonpCallback = jQuery.isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback;
            if (jsonProp) {
                s[jsonProp] = s[jsonProp].replace(rjsonp, "$1" + callbackName);
            } else {
                if (s.jsonp !== false) {
                    s.url += (rquery.test(s.url) ? "&" : "?") + s.jsonp + "=" + callbackName;
                }
            }
            s.converters["script json"] = function() {
                if (!responseContainer) {
                    jQuery.error(callbackName + " was not called");
                }
                return responseContainer[0];
            };
            s.dataTypes[0] = "json";
            overwritten = window[callbackName];
            window[callbackName] = function() {
                responseContainer = arguments;
            };
            jqXHR.always(function() {
                window[callbackName] = overwritten;
                if (s[callbackName]) {
                    s.jsonpCallback = originalSettings.jsonpCallback;
                    oldCallbacks.push(callbackName);
                }
                if (responseContainer && jQuery.isFunction(overwritten)) {
                    overwritten(responseContainer[0]);
                }
                responseContainer = overwritten = undefined;
            });
            return "script";
        }
    });
    jQuery.parseHTML = function(data, context, keepScripts) {
        if (!data || typeof data !== "string") {
            return null;
        }
        if (typeof context === "boolean") {
            keepScripts = context;
            context = false;
        }
        context = context || document;
        var parsed = rsingleTag.exec(data), scripts = !keepScripts && [];
        if (parsed) {
            return [context.createElement(parsed[1])];
        }
        parsed = jQuery.buildFragment([data], context, scripts);
        if (scripts && scripts.length) {
            jQuery(scripts).remove();
        }
        return jQuery.merge([], parsed.childNodes);
    };
    var _load = jQuery.fn.load;
    jQuery.fn.load = function(url, params, callback) {
        if (typeof url !== "string" && _load) {
            return _load.apply(this, arguments);
        }
        var selector, response, type, self = this, off = url.indexOf(" ");
        if (off >= 0) {
            selector = url.slice(off, url.length);
            url = url.slice(0, off);
        }
        if (jQuery.isFunction(params)) {
            callback = params;
            params = undefined;
        } else {
            if (params && typeof params === "object") {
                type = "POST";
            }
        }
        if (self.length > 0) {
            jQuery.ajax({url: url,type: type,dataType: "html",data: params}).done(function(responseText) {
                response = arguments;
                self.html(selector ? jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector) : responseText);
            }).complete(callback && function(jqXHR, status) {
                self.each(callback, response || [jqXHR.responseText, status, jqXHR]);
            });
        }
        return this;
    };
    jQuery.expr.filters.animated = function(elem) {
        return jQuery.grep(jQuery.timers, function(fn) {
            return elem === fn.elem;
        }).length;
    };
    var docElem = window.document.documentElement;
    function getWindow(elem) {
        return jQuery.isWindow(elem) ? elem : elem.nodeType === 9 ? elem.defaultView || elem.parentWindow : false;
    }
    jQuery.offset = {setOffset: function(elem, options, i) {
            var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition, position = jQuery.css(elem, "position"), curElem = jQuery(elem), props = {};
            if (position === "static") {
                elem.style.position = "relative";
            }
            curOffset = curElem.offset();
            curCSSTop = jQuery.css(elem, "top");
            curCSSLeft = jQuery.css(elem, "left");
            calculatePosition = (position === "absolute" || position === "fixed") && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1;
            if (calculatePosition) {
                curPosition = curElem.position();
                curTop = curPosition.top;
                curLeft = curPosition.left;
            } else {
                curTop = parseFloat(curCSSTop) || 0;
                curLeft = parseFloat(curCSSLeft) || 0;
            }
            if (jQuery.isFunction(options)) {
                options = options.call(elem, i, curOffset);
            }
            if (options.top != null) {
                props.top = (options.top - curOffset.top) + curTop;
            }
            if (options.left != null) {
                props.left = (options.left - curOffset.left) + curLeft;
            }
            if ("using" in options) {
                options.using.call(elem, props);
            } else {
                curElem.css(props);
            }
        }};
    jQuery.fn.extend({offset: function(options) {
            if (arguments.length) {
                return options === undefined ? this : this.each(function(i) {
                    jQuery.offset.setOffset(this, options, i);
                });
            }
            var docElem, win, box = {top: 0,left: 0}, elem = this[0], doc = elem && elem.ownerDocument;
            if (!doc) {
                return;
            }
            docElem = doc.documentElement;
            if (!jQuery.contains(docElem, elem)) {
                return box;
            }
            if (typeof elem.getBoundingClientRect !== strundefined) {
                box = elem.getBoundingClientRect();
            }
            win = getWindow(doc);
            return {top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)};
        },position: function() {
            if (!this[0]) {
                return;
            }
            var offsetParent, offset, parentOffset = {top: 0,left: 0}, elem = this[0];
            if (jQuery.css(elem, "position") === "fixed") {
                offset = elem.getBoundingClientRect();
            } else {
                offsetParent = this.offsetParent();
                offset = this.offset();
                if (!jQuery.nodeName(offsetParent[0], "html")) {
                    parentOffset = offsetParent.offset();
                }
                parentOffset.top += jQuery.css(offsetParent[0], "borderTopWidth", true);
                parentOffset.left += jQuery.css(offsetParent[0], "borderLeftWidth", true);
            }
            return {top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", true),left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", true)};
        },offsetParent: function() {
            return this.map(function() {
                var offsetParent = this.offsetParent || docElem;
                while (offsetParent && (!jQuery.nodeName(offsetParent, "html") && jQuery.css(offsetParent, "position") === "static")) {
                    offsetParent = offsetParent.offsetParent;
                }
                return offsetParent || docElem;
            });
        }});
    jQuery.each({scrollLeft: "pageXOffset",scrollTop: "pageYOffset"}, function(method, prop) {
        var top = /Y/.test(prop);
        jQuery.fn[method] = function(val) {
            return access(this, function(elem, method, val) {
                var win = getWindow(elem);
                if (val === undefined) {
                    return win ? (prop in win) ? win[prop] : win.document.documentElement[method] : elem[method];
                }
                if (win) {
                    win.scrollTo(!top ? val : jQuery(win).scrollLeft(), top ? val : jQuery(win).scrollTop());
                } else {
                    elem[method] = val;
                }
            }, method, val, arguments.length, null);
        };
    });
    jQuery.each(["top", "left"], function(i, prop) {
        jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function(elem, computed) {
            if (computed) {
                computed = curCSS(elem, prop);
                return rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed;
            }
        });
    });
    jQuery.each({Height: "height",Width: "width"}, function(name, type) {
        jQuery.each({padding: "inner" + name,content: type,"": "outer" + name}, function(defaultExtra, funcName) {
            jQuery.fn[funcName] = function(margin, value) {
                var chainable = arguments.length && (defaultExtra || typeof margin !== "boolean"), extra = defaultExtra || (margin === true || value === true ? "margin" : "border");
                return access(this, function(elem, type, value) {
                    var doc;
                    if (jQuery.isWindow(elem)) {
                        return elem.document.documentElement["client" + name];
                    }
                    if (elem.nodeType === 9) {
                        doc = elem.documentElement;
                        return Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name]);
                    }
                    return value === undefined ? jQuery.css(elem, type, extra) : jQuery.style(elem, type, value, extra);
                }, type, chainable ? margin : undefined, chainable, null);
            };
        });
    });
    jQuery.fn.size = function() {
        return this.length;
    };
    jQuery.fn.andSelf = jQuery.fn.addBack;
    if (typeof define === "function" && define.amd) {
        define("jquery", [], function() {
            return jQuery;
        });
    }
    var _jQuery = window.jQuery, _$ = window.$;
    jQuery.noConflict = function(deep) {
        if (window.$ === jQuery) {
            window.$ = _$;
        }
        if (deep && window.jQuery === jQuery) {
            window.jQuery = _jQuery;
        }
        return jQuery;
    };
    if (typeof noGlobal === strundefined) {
        window.jQuery = window.$ = jQuery;
    }
    return jQuery;
}));
(function(root, doc, factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], function($) {
            factory($, root, doc);
            return $.mobile;
        });
    } else {
        factory(root.jQuery, root, doc);
    }
}(this, document, function(jQuery, window, document, undefined) {
    (function($, undefined) {
        $.extend($.support, {orientation: "orientation" in window && "onorientationchange" in window});
    }(jQuery));
    (function($) {
        $.event.special.throttledresize = {setup: function() {
                $(this).bind("resize", handler);
            },teardown: function() {
                $(this).unbind("resize", handler);
            }};
        var throttle = 250, handler = function() {
            curr = (new Date()).getTime();
            diff = curr - lastCall;
            if (diff >= throttle) {
                lastCall = curr;
                $(this).trigger("throttledresize");
            } else {
                if (heldCall) {
                    clearTimeout(heldCall);
                }
                heldCall = setTimeout(handler, throttle - diff);
            }
        }, lastCall = 0, heldCall, curr, diff;
    })(jQuery);
    (function($, window) {
        var win = $(window), event_name = "orientationchange", get_orientation, last_orientation, initial_orientation_is_landscape, initial_orientation_is_default, portrait_map = {"0": true,"180": true}, ww, wh, landscape_threshold;
        if ($.support.orientation) {
            ww = window.innerWidth || win.width();
            wh = window.innerHeight || win.height();
            landscape_threshold = 50;
            initial_orientation_is_landscape = ww > wh && (ww - wh) > landscape_threshold;
            initial_orientation_is_default = portrait_map[window.orientation];
            if ((initial_orientation_is_landscape && initial_orientation_is_default) || (!initial_orientation_is_landscape && !initial_orientation_is_default)) {
                portrait_map = {"-90": true,"90": true};
            }
        }
        $.event.special.orientationchange = $.extend({}, $.event.special.orientationchange, {setup: function() {
                if ($.support.orientation && !$.event.special.orientationchange.disabled) {
                    return false;
                }
                last_orientation = get_orientation();
                win.bind("throttledresize", handler);
            },teardown: function() {
                if ($.support.orientation && !$.event.special.orientationchange.disabled) {
                    return false;
                }
                win.unbind("throttledresize", handler);
            },add: function(handleObj) {
                var old_handler = handleObj.handler;
                handleObj.handler = function(event) {
                    event.orientation = get_orientation();
                    return old_handler.apply(this, arguments);
                };
            }});
        function handler() {
            var orientation = get_orientation();
            if (orientation !== last_orientation) {
                last_orientation = orientation;
                win.trigger(event_name);
            }
        }
        $.event.special.orientationchange.orientation = get_orientation = function() {
            var isPortrait = true, elem = document.documentElement;
            if ($.support.orientation) {
                isPortrait = portrait_map[window.orientation];
            } else {
                isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;
            }
            return isPortrait ? "portrait" : "landscape";
        };
        $.fn[event_name] = function(fn) {
            return fn ? this.bind(event_name, fn) : this.trigger(event_name);
        };
        if ($.attrFn) {
            $.attrFn[event_name] = true;
        }
    }(jQuery, this));
    (function($, window, document, undefined) {
        var dataPropertyName = "virtualMouseBindings", touchTargetPropertyName = "virtualTouchID", virtualEventNames = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "), touchEventProps = "clientX clientY pageX pageY screenX screenY".split(" "), mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [], mouseEventProps = $.event.props.concat(mouseHookProps), activeDocHandlers = {}, resetTimerID = 0, startX = 0, startY = 0, didScroll = false, clickBlockList = [], blockMouseTriggers = false, blockTouchTriggers = false, eventCaptureSupported = "addEventListener" in document, $document = $(document), nextTouchID = 1, lastTouchID = 0, threshold, i;
        $.vmouse = {moveDistanceThreshold: 10,clickDistanceThreshold: 10,resetTimerDuration: 1500};
        function getNativeEvent(event) {
            while (event && typeof event.originalEvent !== "undefined") {
                event = event.originalEvent;
            }
            return event;
        }
        function createVirtualEvent(event, eventType) {
            var t = event.type, oe, props, ne, prop, ct, touch, i, j, len;
            event = $.Event(event);
            event.type = eventType;
            oe = event.originalEvent;
            props = $.event.props;
            if (t.search(/^(mouse|click)/) > -1) {
                props = mouseEventProps;
            }
            if (oe) {
                for (i = props.length, prop; i; ) {
                    prop = props[--i];
                    event[prop] = oe[prop];
                }
            }
            if (t.search(/mouse(down|up)|click/) > -1 && !event.which) {
                event.which = 1;
            }
            if (t.search(/^touch/) !== -1) {
                ne = getNativeEvent(oe);
                t = ne.touches;
                ct = ne.changedTouches;
                touch = (t && t.length) ? t[0] : ((ct && ct.length) ? ct[0] : undefined);
                if (touch) {
                    for (j = 0, len = touchEventProps.length; j < len; j++) {
                        prop = touchEventProps[j];
                        event[prop] = touch[prop];
                    }
                }
            }
            return event;
        }
        function getVirtualBindingFlags(element) {
            var flags = {}, b, k;
            while (element) {
                b = $.data(element, dataPropertyName);
                for (k in b) {
                    if (b[k]) {
                        flags[k] = flags.hasVirtualBinding = true;
                    }
                }
                element = element.parentNode;
            }
            return flags;
        }
        function getClosestElementWithVirtualBinding(element, eventType) {
            var b;
            while (element) {
                b = $.data(element, dataPropertyName);
                if (b && (!eventType || b[eventType])) {
                    return element;
                }
                element = element.parentNode;
            }
            return null;
        }
        function enableTouchBindings() {
            blockTouchTriggers = false;
        }
        function disableTouchBindings() {
            blockTouchTriggers = true;
        }
        function enableMouseBindings() {
            lastTouchID = 0;
            clickBlockList.length = 0;
            blockMouseTriggers = false;
            disableTouchBindings();
        }
        function disableMouseBindings() {
            enableTouchBindings();
        }
        function startResetTimer() {
            clearResetTimer();
            resetTimerID = setTimeout(function() {
                resetTimerID = 0;
                enableMouseBindings();
            }, $.vmouse.resetTimerDuration);
        }
        function clearResetTimer() {
            if (resetTimerID) {
                clearTimeout(resetTimerID);
                resetTimerID = 0;
            }
        }
        function triggerVirtualEvent(eventType, event, flags) {
            var ve;
            if ((flags && flags[eventType]) || (!flags && getClosestElementWithVirtualBinding(event.target, eventType))) {
                ve = createVirtualEvent(event, eventType);
                $(event.target).trigger(ve);
            }
            return ve;
        }
        function mouseEventCallback(event) {
            var touchID = $.data(event.target, touchTargetPropertyName), ve;
            if (!blockMouseTriggers && (!lastTouchID || lastTouchID !== touchID)) {
                ve = triggerVirtualEvent("v" + event.type, event);
                if (ve) {
                    if (ve.isDefaultPrevented()) {
                        event.preventDefault();
                    }
                    if (ve.isPropagationStopped()) {
                        event.stopPropagation();
                    }
                    if (ve.isImmediatePropagationStopped()) {
                        event.stopImmediatePropagation();
                    }
                }
            }
        }
        function handleTouchStart(event) {
            var touches = getNativeEvent(event).touches, target, flags, t;
            if (touches && touches.length === 1) {
                target = event.target;
                flags = getVirtualBindingFlags(target);
                if (flags.hasVirtualBinding) {
                    lastTouchID = nextTouchID++;
                    $.data(target, touchTargetPropertyName, lastTouchID);
                    clearResetTimer();
                    disableMouseBindings();
                    didScroll = false;
                    t = getNativeEvent(event).touches[0];
                    startX = t.pageX;
                    startY = t.pageY;
                    triggerVirtualEvent("vmouseover", event, flags);
                    triggerVirtualEvent("vmousedown", event, flags);
                }
            }
        }
        function handleScroll(event) {
            if (blockTouchTriggers) {
                return;
            }
            if (!didScroll) {
                triggerVirtualEvent("vmousecancel", event, getVirtualBindingFlags(event.target));
            }
            didScroll = true;
            startResetTimer();
        }
        function handleTouchMove(event) {
            if (blockTouchTriggers) {
                return;
            }
            var t = getNativeEvent(event).touches[0], didCancel = didScroll, moveThreshold = $.vmouse.moveDistanceThreshold, flags = getVirtualBindingFlags(event.target);
            didScroll = didScroll || (Math.abs(t.pageX - startX) > moveThreshold || Math.abs(t.pageY - startY) > moveThreshold);
            if (didScroll && !didCancel) {
                triggerVirtualEvent("vmousecancel", event, flags);
            }
            triggerVirtualEvent("vmousemove", event, flags);
            startResetTimer();
        }
        function handleTouchEnd(event) {
            if (blockTouchTriggers) {
                return;
            }
            disableTouchBindings();
            var flags = getVirtualBindingFlags(event.target), ve, t;
            triggerVirtualEvent("vmouseup", event, flags);
            if (!didScroll) {
                ve = triggerVirtualEvent("vclick", event, flags);
                if (ve && ve.isDefaultPrevented()) {
                    t = getNativeEvent(event).changedTouches[0];
                    clickBlockList.push({touchID: lastTouchID,x: t.clientX,y: t.clientY});
                    blockMouseTriggers = true;
                }
            }
            triggerVirtualEvent("vmouseout", event, flags);
            didScroll = false;
            startResetTimer();
        }
        function hasVirtualBindings(ele) {
            var bindings = $.data(ele, dataPropertyName), k;
            if (bindings) {
                for (k in bindings) {
                    if (bindings[k]) {
                        return true;
                    }
                }
            }
            return false;
        }
        function dummyMouseHandler() {
        }
        function getSpecialEventObject(eventType) {
            var realType = eventType.substr(1);
            return {setup: function() {
                    if (!hasVirtualBindings(this)) {
                        $.data(this, dataPropertyName, {});
                    }
                    var bindings = $.data(this, dataPropertyName);
                    bindings[eventType] = true;
                    activeDocHandlers[eventType] = (activeDocHandlers[eventType] || 0) + 1;
                    if (activeDocHandlers[eventType] === 1) {
                        $document.bind(realType, mouseEventCallback);
                    }
                    $(this).bind(realType, dummyMouseHandler);
                    if (eventCaptureSupported) {
                        activeDocHandlers.touchstart = (activeDocHandlers.touchstart || 0) + 1;
                        if (activeDocHandlers.touchstart === 1) {
                            $document.bind("touchstart", handleTouchStart).bind("touchend", handleTouchEnd).bind("touchmove", handleTouchMove).bind("scroll", handleScroll);
                        }
                    }
                },teardown: function() {
                    --activeDocHandlers[eventType];
                    if (!activeDocHandlers[eventType]) {
                        $document.unbind(realType, mouseEventCallback);
                    }
                    if (eventCaptureSupported) {
                        --activeDocHandlers.touchstart;
                        if (!activeDocHandlers.touchstart) {
                            $document.unbind("touchstart", handleTouchStart).unbind("touchmove", handleTouchMove).unbind("touchend", handleTouchEnd).unbind("scroll", handleScroll);
                        }
                    }
                    var $this = $(this), bindings = $.data(this, dataPropertyName);
                    if (bindings) {
                        bindings[eventType] = false;
                    }
                    $this.unbind(realType, dummyMouseHandler);
                    if (!hasVirtualBindings(this)) {
                        $this.removeData(dataPropertyName);
                    }
                }};
        }
        for (i = 0; i < virtualEventNames.length; i++) {
            $.event.special[virtualEventNames[i]] = getSpecialEventObject(virtualEventNames[i]);
        }
        if (eventCaptureSupported) {
            document.addEventListener("click", function(e) {
                var cnt = clickBlockList.length, target = e.target, x, y, ele, i, o, touchID;
                if (cnt) {
                    x = e.clientX;
                    y = e.clientY;
                    threshold = $.vmouse.clickDistanceThreshold;
                    ele = target;
                    while (ele) {
                        for (i = 0; i < cnt; i++) {
                            o = clickBlockList[i];
                            touchID = 0;
                            if ((ele === target && Math.abs(o.x - x) < threshold && Math.abs(o.y - y) < threshold) || $.data(ele, touchTargetPropertyName) === o.touchID) {
                                e.preventDefault();
                                e.stopPropagation();
                                return;
                            }
                        }
                        ele = ele.parentNode;
                    }
                }
            }, true);
        }
    })(jQuery, window, document);
    (function($) {
        $.mobile = {};
    }(jQuery));
    (function($, undefined) {
        var support = {touch: "ontouchend" in document};
        $.mobile.support = $.mobile.support || {};
        $.extend($.support, support);
        $.extend($.mobile.support, support);
    }(jQuery));
    (function($, window, undefined) {
        var $document = $(document), supportTouch = $.mobile.support.touch, scrollEvent = "touchmove scroll", touchStartEvent = supportTouch ? "touchstart" : "mousedown", touchStopEvent = supportTouch ? "touchend" : "mouseup", touchMoveEvent = supportTouch ? "touchmove" : "mousemove";
        $.each(("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop").split(" "), function(i, name) {
            $.fn[name] = function(fn) {
                return fn ? this.bind(name, fn) : this.trigger(name);
            };
            if ($.attrFn) {
                $.attrFn[name] = true;
            }
        });
        function triggerCustomEvent(obj, eventType, event) {
            var originalType = event.type;
            event.type = eventType;
            $.event.dispatch.call(obj, event);
            event.type = originalType;
        }
        $.event.special.scrollstart = {enabled: true,setup: function() {
                var thisObject = this, $this = $(thisObject), scrolling, timer;
                function trigger(event, state) {
                    scrolling = state;
                    triggerCustomEvent(thisObject, scrolling ? "scrollstart" : "scrollstop", event);
                }
                $this.bind(scrollEvent, function(event) {
                    if (!$.event.special.scrollstart.enabled) {
                        return;
                    }
                    if (!scrolling) {
                        trigger(event, true);
                    }
                    clearTimeout(timer);
                    timer = setTimeout(function() {
                        trigger(event, false);
                    }, 50);
                });
            },teardown: function() {
                $(this).unbind(scrollEvent);
            }};
        $.event.special.tap = {tapholdThreshold: 750,emitTapOnTaphold: true,setup: function() {
                var thisObject = this, $this = $(thisObject), isTaphold = false;
                $this.bind("vmousedown", function(event) {
                    isTaphold = false;
                    if (event.which && event.which !== 1) {
                        return false;
                    }
                    var origTarget = event.target, timer;
                    function clearTapTimer() {
                        clearTimeout(timer);
                    }
                    function clearTapHandlers() {
                        clearTapTimer();
                        $this.unbind("vclick", clickHandler).unbind("vmouseup", clearTapTimer);
                        $document.unbind("vmousecancel", clearTapHandlers);
                    }
                    function clickHandler(event) {
                        clearTapHandlers();
                        if (!isTaphold && origTarget === event.target) {
                            triggerCustomEvent(thisObject, "tap", event);
                        } else {
                            if (isTaphold) {
                                event.stopPropagation();
                            }
                        }
                    }
                    $this.bind("vmouseup", clearTapTimer).bind("vclick", clickHandler);
                    $document.bind("vmousecancel", clearTapHandlers);
                    timer = setTimeout(function() {
                        if (!$.event.special.tap.emitTapOnTaphold) {
                            isTaphold = true;
                        }
                        triggerCustomEvent(thisObject, "taphold", $.Event("taphold", {target: origTarget}));
                    }, $.event.special.tap.tapholdThreshold);
                });
            },teardown: function() {
                $(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");
                $document.unbind("vmousecancel");
            }};
        $.event.special.swipe = {scrollSupressionThreshold: 30,durationThreshold: 1000,horizontalDistanceThreshold: 30,verticalDistanceThreshold: 75,start: function(event) {
                var data = event.originalEvent.touches ? event.originalEvent.touches[0] : event;
                return {time: (new Date()).getTime(),coords: [data.pageX, data.pageY],origin: $(event.target)};
            },stop: function(event) {
                var data = event.originalEvent.touches ? event.originalEvent.touches[0] : event;
                return {time: (new Date()).getTime(),coords: [data.pageX, data.pageY]};
            },handleSwipe: function(start, stop, thisObject, origTarget) {
                if (stop.time - start.time < $.event.special.swipe.durationThreshold && Math.abs(start.coords[0] - stop.coords[0]) > $.event.special.swipe.horizontalDistanceThreshold && Math.abs(start.coords[1] - stop.coords[1]) < $.event.special.swipe.verticalDistanceThreshold) {
                    var direction = start.coords[0] > stop.coords[0] ? "swipeleft" : "swiperight";
                    triggerCustomEvent(thisObject, "swipe", $.Event("swipe", {target: origTarget,swipestart: start,swipestop: stop}));
                    triggerCustomEvent(thisObject, direction, $.Event(direction, {target: origTarget,swipestart: start,swipestop: stop}));
                    return true;
                }
                return false;
            },setup: function() {
                var thisObject = this, $this = $(thisObject);
                $this.bind(touchStartEvent, function(event) {
                    var stop, start = $.event.special.swipe.start(event), origTarget = event.target, emitted = false;
                    function moveHandler(event) {
                        if (!start) {
                            return;
                        }
                        stop = $.event.special.swipe.stop(event);
                        if (!emitted) {
                            emitted = $.event.special.swipe.handleSwipe(start, stop, thisObject, origTarget);
                        }
                        if (Math.abs(start.coords[0] - stop.coords[0]) > $.event.special.swipe.scrollSupressionThreshold) {
                            event.preventDefault();
                        }
                    }
                    $this.bind(touchMoveEvent, moveHandler).one(touchStopEvent, function() {
                        emitted = true;
                        $this.unbind(touchMoveEvent, moveHandler);
                    });
                });
            },teardown: function() {
                $(this).unbind(touchStartEvent).unbind(touchMoveEvent).unbind(touchStopEvent);
            }};
        $.each({scrollstop: "scrollstart",taphold: "tap",swipeleft: "swipe",swiperight: "swipe"}, function(event, sourceEvent) {
            $.event.special[event] = {setup: function() {
                    $(this).bind(sourceEvent, $.noop);
                },teardown: function() {
                    $(this).unbind(sourceEvent);
                }};
        });
    })(jQuery, this);
    (function($, window, undefined) {
        $.extend($.mobile, {version: "1.4.0",subPageUrlKey: "ui-page",hideUrlBar: true,keepNative: ":jqmData(role='none'), :jqmData(role='nojs')",activePageClass: "ui-page-active",activeBtnClass: "ui-btn-active",focusClass: "ui-focus",ajaxEnabled: true,hashListeningEnabled: true,linkBindingEnabled: true,defaultPageTransition: "fade",maxTransitionWidth: false,minScrollBack: 0,defaultDialogTransition: "pop",pageLoadErrorMessage: "Error Loading Page",pageLoadErrorMessageTheme: "a",phonegapNavigationEnabled: false,autoInitializePage: true,pushStateEnabled: true,ignoreContentEnabled: false,buttonMarkup: {hoverDelay: 200},dynamicBaseEnabled: true,pageContainer: $(),allowCrossDomainPages: false,dialogHashKey: "&ui-state=dialog"});
    })(jQuery, this);
    (function($, window, undefined) {
        var nsNormalizeDict = {}, oldFind = $.find, rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, jqmDataRE = /:jqmData\(([^)]*)\)/g;
        $.extend($.mobile, {ns: "",getAttribute: function(element, key) {
                var data;
                element = element.jquery ? element[0] : element;
                if (element && element.getAttribute) {
                    data = element.getAttribute("data-" + $.mobile.ns + key);
                }
                try {
                    data = data === "true" ? true : data === "false" ? false : data === "null" ? null : +data + "" === data ? +data : rbrace.test(data) ? JSON.parse(data) : data;
                } catch (err) {
                }
                return data;
            },nsNormalizeDict: nsNormalizeDict,nsNormalize: function(prop) {
                return nsNormalizeDict[prop] || (nsNormalizeDict[prop] = $.camelCase($.mobile.ns + prop));
            },closestPageData: function($target) {
                return $target.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page");
            }});
        $.fn.jqmData = function(prop, value) {
            var result;
            if (typeof prop !== "undefined") {
                if (prop) {
                    prop = $.mobile.nsNormalize(prop);
                }
                if (arguments.length < 2 || value === undefined) {
                    result = this.data(prop);
                } else {
                    result = this.data(prop, value);
                }
            }
            return result;
        };
        $.jqmData = function(elem, prop, value) {
            var result;
            if (typeof prop !== "undefined") {
                result = $.data(elem, prop ? $.mobile.nsNormalize(prop) : prop, value);
            }
            return result;
        };
        $.fn.jqmRemoveData = function(prop) {
            return this.removeData($.mobile.nsNormalize(prop));
        };
        $.jqmRemoveData = function(elem, prop) {
            return $.removeData(elem, $.mobile.nsNormalize(prop));
        };
        $.find = function(selector, context, ret, extra) {
            if (selector.indexOf(":jqmData") > -1) {
                selector = selector.replace(jqmDataRE, "[data-" + ($.mobile.ns || "") + "$1]");
            }
            return oldFind.call(this, selector, context, ret, extra);
        };
        $.extend($.find, oldFind);
    })(jQuery, this);
    (function($, undefined) {
        var uuid = 0, runiqueId = /^ui-id-\d+$/;
        $.ui = $.ui || {};
        $.extend($.ui, {version: "c0ab71056b936627e8a7821f03c044aec6280a40",keyCode: {BACKSPACE: 8,COMMA: 188,DELETE: 46,DOWN: 40,END: 35,ENTER: 13,ESCAPE: 27,HOME: 36,LEFT: 37,PAGE_DOWN: 34,PAGE_UP: 33,PERIOD: 190,RIGHT: 39,SPACE: 32,TAB: 9,UP: 38}});
        $.fn.extend({focus: (function(orig) {
                return function(delay, fn) {
                    return typeof delay === "number" ? this.each(function() {
                        var elem = this;
                        setTimeout(function() {
                            $(elem).focus();
                            if (fn) {
                                fn.call(elem);
                            }
                        }, delay);
                    }) : orig.apply(this, arguments);
                };
            })($.fn.focus),scrollParent: function() {
                var scrollParent;
                if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
                    scrollParent = this.parents().filter(function() {
                        return (/(relative|absolute|fixed)/).test($.css(this, "position")) && (/(auto|scroll)/).test($.css(this, "overflow") + $.css(this, "overflow-y") + $.css(this, "overflow-x"));
                    }).eq(0);
                } else {
                    scrollParent = this.parents().filter(function() {
                        return (/(auto|scroll)/).test($.css(this, "overflow") + $.css(this, "overflow-y") + $.css(this, "overflow-x"));
                    }).eq(0);
                }
                return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(this[0].ownerDocument || document) : scrollParent;
            },uniqueId: function() {
                return this.each(function() {
                    if (!this.id) {
                        this.id = "ui-id-" + (++uuid);
                    }
                });
            },removeUniqueId: function() {
                return this.each(function() {
                    if (runiqueId.test(this.id)) {
                        $(this).removeAttr("id");
                    }
                });
            }});
        function focusable(element, isTabIndexNotNaN) {
            var map, mapName, img, nodeName = element.nodeName.toLowerCase();
            if ("area" === nodeName) {
                map = element.parentNode;
                mapName = map.name;
                if (!element.href || !mapName || map.nodeName.toLowerCase() !== "map") {
                    return false;
                }
                img = $("img[usemap=#" + mapName + "]")[0];
                return !!img && visible(img);
            }
            return (/input|select|textarea|button|object/.test(nodeName) ? !element.disabled : "a" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) && visible(element);
        }
        function visible(element) {
            return $.expr.filters.visible(element) && !$(element).parents().addBack().filter(function() {
                return $.css(this, "visibility") === "hidden";
            }).length;
        }
        $.extend($.expr[":"], {data: $.expr.createPseudo ? $.expr.createPseudo(function(dataName) {
                return function(elem) {
                    return !!$.data(elem, dataName);
                };
            }) : function(elem, i, match) {
                return !!$.data(elem, match[3]);
            },focusable: function(element) {
                return focusable(element, !isNaN($.attr(element, "tabindex")));
            },tabbable: function(element) {
                var tabIndex = $.attr(element, "tabindex"), isTabIndexNaN = isNaN(tabIndex);
                return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);
            }});
        if (!$("<a>").outerWidth(1).jquery) {
            $.each(["Width", "Height"], function(i, name) {
                var side = name === "Width" ? ["Left", "Right"] : ["Top", "Bottom"], type = name.toLowerCase(), orig = {innerWidth: $.fn.innerWidth,innerHeight: $.fn.innerHeight,outerWidth: $.fn.outerWidth,outerHeight: $.fn.outerHeight};
                function reduce(elem, size, border, margin) {
                    $.each(side, function() {
                        size -= parseFloat($.css(elem, "padding" + this)) || 0;
                        if (border) {
                            size -= parseFloat($.css(elem, "border" + this + "Width")) || 0;
                        }
                        if (margin) {
                            size -= parseFloat($.css(elem, "margin" + this)) || 0;
                        }
                    });
                    return size;
                }
                $.fn["inner" + name] = function(size) {
                    if (size === undefined) {
                        return orig["inner" + name].call(this);
                    }
                    return this.each(function() {
                        $(this).css(type, reduce(this, size) + "px");
                    });
                };
                $.fn["outer" + name] = function(size, margin) {
                    if (typeof size !== "number") {
                        return orig["outer" + name].call(this, size);
                    }
                    return this.each(function() {
                        $(this).css(type, reduce(this, size, true, margin) + "px");
                    });
                };
            });
        }
        if (!$.fn.addBack) {
            $.fn.addBack = function(selector) {
                return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
            };
        }
        if ($("<a>").data("a-b", "a").removeData("a-b").data("a-b")) {
            $.fn.removeData = (function(removeData) {
                return function(key) {
                    if (arguments.length) {
                        return removeData.call(this, $.camelCase(key));
                    } else {
                        return removeData.call(this);
                    }
                };
            })($.fn.removeData);
        }
        $.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
        $.support.selectstart = "onselectstart" in document.createElement("div");
        $.fn.extend({disableSelection: function() {
                return this.bind(($.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(event) {
                    event.preventDefault();
                });
            },enableSelection: function() {
                return this.unbind(".ui-disableSelection");
            },zIndex: function(zIndex) {
                if (zIndex !== undefined) {
                    return this.css("zIndex", zIndex);
                }
                if (this.length) {
                    var elem = $(this[0]), position, value;
                    while (elem.length && elem[0] !== document) {
                        position = elem.css("position");
                        if (position === "absolute" || position === "relative" || position === "fixed") {
                            value = parseInt(elem.css("zIndex"), 10);
                            if (!isNaN(value) && value !== 0) {
                                return value;
                            }
                        }
                        elem = elem.parent();
                    }
                }
                return 0;
            }});
        $.ui.plugin = {add: function(module, option, set) {
                var i, proto = $.ui[module].prototype;
                for (i in set) {
                    proto.plugins[i] = proto.plugins[i] || [];
                    proto.plugins[i].push([option, set[i]]);
                }
            },call: function(instance, name, args, allowDisconnected) {
                var i, set = instance.plugins[name];
                if (!set) {
                    return;
                }
                if (!allowDisconnected && (!instance.element[0].parentNode || instance.element[0].parentNode.nodeType === 11)) {
                    return;
                }
                for (i = 0; i < set.length; i++) {
                    if (instance.options[set[i][0]]) {
                        set[i][1].apply(instance.element, args);
                    }
                }
            }};
    })(jQuery);
    (function($, window, undefined) {
        $.extend($.mobile, {window: $(window),document: $(document),keyCode: $.ui.keyCode,behaviors: {},silentScroll: function(ypos) {
                if ($.type(ypos) !== "number") {
                    ypos = $.mobile.defaultHomeScroll;
                }
                $.event.special.scrollstart.enabled = false;
                setTimeout(function() {
                    window.scrollTo(0, ypos);
                    $.mobile.document.trigger("silentscroll", {x: 0,y: ypos});
                }, 20);
                setTimeout(function() {
                    $.event.special.scrollstart.enabled = true;
                }, 150);
            },getClosestBaseUrl: function(ele) {
                var url = $(ele).closest(".ui-page").jqmData("url"), base = $.mobile.path.documentBase.hrefNoHash;
                if (!$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath(url)) {
                    url = base;
                }
                return $.mobile.path.makeUrlAbsolute(url, base);
            },removeActiveLinkClass: function(forceRemoval) {
                if (!!$.mobile.activeClickedLink && (!$.mobile.activeClickedLink.closest("." + $.mobile.activePageClass).length || forceRemoval)) {
                    $.mobile.activeClickedLink.removeClass($.mobile.activeBtnClass);
                }
                $.mobile.activeClickedLink = null;
            },getInheritedTheme: function(el, defaultTheme) {
                var e = el[0], ltr = "", re = /ui-(bar|body|overlay)-([a-z])\b/, c, m;
                while (e) {
                    c = e.className || "";
                    if (c && (m = re.exec(c)) && (ltr = m[2])) {
                        break;
                    }
                    e = e.parentNode;
                }
                return ltr || defaultTheme || "a";
            },enhanceable: function(elements) {
                return this.haveParents(elements, "enhance");
            },hijackable: function(elements) {
                return this.haveParents(elements, "ajax");
            },haveParents: function(elements, attr) {
                if (!$.mobile.ignoreContentEnabled) {
                    return elements;
                }
                var count = elements.length, $newSet = $(), e, $element, excluded, i, c;
                for (i = 0; i < count; i++) {
                    $element = elements.eq(i);
                    excluded = false;
                    e = elements[i];
                    while (e) {
                        c = e.getAttribute ? e.getAttribute("data-" + $.mobile.ns + attr) : "";
                        if (c === "false") {
                            excluded = true;
                            break;
                        }
                        e = e.parentNode;
                    }
                    if (!excluded) {
                        $newSet = $newSet.add($element);
                    }
                }
                return $newSet;
            },getScreenHeight: function() {
                return window.innerHeight || $.mobile.window.height();
            },resetActivePageHeight: function(height) {
                var page = $("." + $.mobile.activePageClass), pageHeight = page.height(), pageOuterHeight = page.outerHeight(true);
                height = (typeof height === "number") ? height : $.mobile.getScreenHeight();
                page.css("min-height", height - (pageOuterHeight - pageHeight));
            },loading: function() {
                var loader = this.loading._widget || $($.mobile.loader.prototype.defaultHtml).loader(), returnValue = loader.loader.apply(loader, arguments);
                this.loading._widget = loader;
                return returnValue;
            }});
        $.addDependents = function(elem, newDependents) {
            var $elem = $(elem), dependents = $elem.jqmData("dependents") || $();
            $elem.jqmData("dependents", $(dependents).add(newDependents));
        };
        $.fn.extend({removeWithDependents: function() {
                $.removeWithDependents(this);
            },enhanceWithin: function() {
                var index, widgetElements = {}, keepNative = $.mobile.page.prototype.keepNativeSelector(), that = this;
                if ($.mobile.nojs) {
                    $.mobile.nojs(this);
                }
                if ($.mobile.links) {
                    $.mobile.links(this);
                }
                if ($.mobile.degradeInputsWithin) {
                    $.mobile.degradeInputsWithin(this);
                }
                if ($.fn.buttonMarkup) {
                    this.find($.fn.buttonMarkup.initSelector).not(keepNative).jqmEnhanceable().buttonMarkup();
                }
                if ($.fn.fieldcontain) {
                    this.find(":jqmData(role='fieldcontain')").not(keepNative).jqmEnhanceable().fieldcontain();
                }
                $.each($.mobile.widgets, function(name, constructor) {
                    if (constructor.initSelector) {
                        var elements = $.mobile.enhanceable(that.find(constructor.initSelector));
                        if (elements.length > 0) {
                            elements = elements.not(keepNative);
                        }
                        if (elements.length > 0) {
                            widgetElements[constructor.prototype.widgetName] = elements;
                        }
                    }
                });
                for (index in widgetElements) {
                    widgetElements[index][index]();
                }
                return this;
            },addDependents: function(newDependents) {
                $.addDependents(this, newDependents);
            },getEncodedText: function() {
                return $("<a>").text(this.text()).html();
            },jqmEnhanceable: function() {
                return $.mobile.enhanceable(this);
            },jqmHijackable: function() {
                return $.mobile.hijackable(this);
            }});
        $.removeWithDependents = function(nativeElement) {
            var element = $(nativeElement);
            (element.jqmData("dependents") || $()).remove();
            element.remove();
        };
        $.addDependents = function(nativeElement, newDependents) {
            var element = $(nativeElement), dependents = element.jqmData("dependents") || $();
            element.jqmData("dependents", $(dependents).add(newDependents));
        };
        $.find.matches = function(expr, set) {
            return $.find(expr, null, null, set);
        };
        $.find.matchesSelector = function(node, expr) {
            return $.find(expr, null, null, [node]).length > 0;
        };
    })(jQuery, this);
    (function($, undefined) {
        window.matchMedia = window.matchMedia || (function(doc, undefined) {
            var bool, docElem = doc.documentElement, refNode = docElem.firstElementChild || docElem.firstChild, fakeBody = doc.createElement("body"), div = doc.createElement("div");
            div.id = "mq-test-1";
            div.style.cssText = "position:absolute;top:-100em";
            fakeBody.style.background = "none";
            fakeBody.appendChild(div);
            return function(q) {
                div.innerHTML = '&shy;<style media="' + q + '"> #mq-test-1 { width: 42px; }</style>';
                docElem.insertBefore(fakeBody, refNode);
                bool = div.offsetWidth === 42;
                docElem.removeChild(fakeBody);
                return {matches: bool,media: q};
            };
        }(document));
        $.mobile.media = function(q) {
            return window.matchMedia(q).matches;
        };
    })(jQuery);
}));
(function($, undefined) {
    var uuid = 0, runiqueId = /^ui-id-\d+$/;
    $.ui = $.ui || {};
    $.extend($.ui, {version: "1.10.3",keyCode: {BACKSPACE: 8,COMMA: 188,DELETE: 46,DOWN: 40,END: 35,ENTER: 13,ESCAPE: 27,HOME: 36,LEFT: 37,NUMPAD_ADD: 107,NUMPAD_DECIMAL: 110,NUMPAD_DIVIDE: 111,NUMPAD_ENTER: 108,NUMPAD_MULTIPLY: 106,NUMPAD_SUBTRACT: 109,PAGE_DOWN: 34,PAGE_UP: 33,PERIOD: 190,RIGHT: 39,SPACE: 32,TAB: 9,UP: 38}});
    $.fn.extend({focus: (function(orig) {
            return function(delay, fn) {
                return typeof delay === "number" ? this.each(function() {
                    var elem = this;
                    setTimeout(function() {
                        $(elem).focus();
                        if (fn) {
                            fn.call(elem);
                        }
                    }, delay);
                }) : orig.apply(this, arguments);
            };
        })($.fn.focus),scrollParent: function() {
            var scrollParent;
            if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
                scrollParent = this.parents().filter(function() {
                    return (/(relative|absolute|fixed)/).test($.css(this, "position")) && (/(auto|scroll)/).test($.css(this, "overflow") + $.css(this, "overflow-y") + $.css(this, "overflow-x"));
                }).eq(0);
            } else {
                scrollParent = this.parents().filter(function() {
                    return (/(auto|scroll)/).test($.css(this, "overflow") + $.css(this, "overflow-y") + $.css(this, "overflow-x"));
                }).eq(0);
            }
            return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
        },zIndex: function(zIndex) {
            if (zIndex !== undefined) {
                return this.css("zIndex", zIndex);
            }
            if (this.length) {
                var elem = $(this[0]), position, value;
                while (elem.length && elem[0] !== document) {
                    position = elem.css("position");
                    if (position === "absolute" || position === "relative" || position === "fixed") {
                        value = parseInt(elem.css("zIndex"), 10);
                        if (!isNaN(value) && value !== 0) {
                            return value;
                        }
                    }
                    elem = elem.parent();
                }
            }
            return 0;
        },uniqueId: function() {
            return this.each(function() {
                if (!this.id) {
                    this.id = "ui-id-" + (++uuid);
                }
            });
        },removeUniqueId: function() {
            return this.each(function() {
                if (runiqueId.test(this.id)) {
                    $(this).removeAttr("id");
                }
            });
        }});
    function focusable(element, isTabIndexNotNaN) {
        var map, mapName, img, nodeName = element.nodeName.toLowerCase();
        if ("area" === nodeName) {
            map = element.parentNode;
            mapName = map.name;
            if (!element.href || !mapName || map.nodeName.toLowerCase() !== "map") {
                return false;
            }
            img = $("img[usemap=#" + mapName + "]")[0];
            return !!img && visible(img);
        }
        return (/input|select|textarea|button|object/.test(nodeName) ? !element.disabled : "a" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) && visible(element);
    }
    function visible(element) {
        return $.expr.filters.visible(element) && !$(element).parents().addBack().filter(function() {
            return $.css(this, "visibility") === "hidden";
        }).length;
    }
    $.extend($.expr[":"], {data: $.expr.createPseudo ? $.expr.createPseudo(function(dataName) {
            return function(elem) {
                return !!$.data(elem, dataName);
            };
        }) : function(elem, i, match) {
            return !!$.data(elem, match[3]);
        },focusable: function(element) {
            return focusable(element, !isNaN($.attr(element, "tabindex")));
        },tabbable: function(element) {
            var tabIndex = $.attr(element, "tabindex"), isTabIndexNaN = isNaN(tabIndex);
            return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);
        }});
    if (!$("<a>").outerWidth(1).jquery) {
        $.each(["Width", "Height"], function(i, name) {
            var side = name === "Width" ? ["Left", "Right"] : ["Top", "Bottom"], type = name.toLowerCase(), orig = {innerWidth: $.fn.innerWidth,innerHeight: $.fn.innerHeight,outerWidth: $.fn.outerWidth,outerHeight: $.fn.outerHeight};
            function reduce(elem, size, border, margin) {
                $.each(side, function() {
                    size -= parseFloat($.css(elem, "padding" + this)) || 0;
                    if (border) {
                        size -= parseFloat($.css(elem, "border" + this + "Width")) || 0;
                    }
                    if (margin) {
                        size -= parseFloat($.css(elem, "margin" + this)) || 0;
                    }
                });
                return size;
            }
            $.fn["inner" + name] = function(size) {
                if (size === undefined) {
                    return orig["inner" + name].call(this);
                }
                return this.each(function() {
                    $(this).css(type, reduce(this, size) + "px");
                });
            };
            $.fn["outer" + name] = function(size, margin) {
                if (typeof size !== "number") {
                    return orig["outer" + name].call(this, size);
                }
                return this.each(function() {
                    $(this).css(type, reduce(this, size, true, margin) + "px");
                });
            };
        });
    }
    if (!$.fn.addBack) {
        $.fn.addBack = function(selector) {
            return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
        };
    }
    if ($("<a>").data("a-b", "a").removeData("a-b").data("a-b")) {
        $.fn.removeData = (function(removeData) {
            return function(key) {
                if (arguments.length) {
                    return removeData.call(this, $.camelCase(key));
                } else {
                    return removeData.call(this);
                }
            };
        })($.fn.removeData);
    }
    $.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
    $.support.selectstart = "onselectstart" in document.createElement("div");
    $.fn.extend({disableSelection: function() {
            return this.bind(($.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(event) {
                event.preventDefault();
            });
        },enableSelection: function() {
            return this.unbind(".ui-disableSelection");
        }});
    $.extend($.ui, {plugin: {add: function(module, option, set) {
                var i, proto = $.ui[module].prototype;
                for (i in set) {
                    proto.plugins[i] = proto.plugins[i] || [];
                    proto.plugins[i].push([option, set[i]]);
                }
            },call: function(instance, name, args) {
                var i, set = instance.plugins[name];
                if (!set || !instance.element[0].parentNode || instance.element[0].parentNode.nodeType === 11) {
                    return;
                }
                for (i = 0; i < set.length; i++) {
                    if (instance.options[set[i][0]]) {
                        set[i][1].apply(instance.element, args);
                    }
                }
            }},hasScroll: function(el, a) {
            if ($(el).css("overflow") === "hidden") {
                return false;
            }
            var scroll = (a && a === "left") ? "scrollLeft" : "scrollTop", has = false;
            if (el[scroll] > 0) {
                return true;
            }
            el[scroll] = 1;
            has = (el[scroll] > 0);
            el[scroll] = 0;
            return has;
        }});
})(jQuery);
(function($, undefined) {
    var uuid = 0, slice = Array.prototype.slice, _cleanData = $.cleanData;
    $.cleanData = function(elems) {
        for (var i = 0, elem; (elem = elems[i]) != null; i++) {
            try {
                $(elem).triggerHandler("remove");
            } catch (e) {
            }
        }
        _cleanData(elems);
    };
    $.widget = function(name, base, prototype) {
        var fullName, existingConstructor, constructor, basePrototype, proxiedPrototype = {}, namespace = name.split(".")[0];
        name = name.split(".")[1];
        fullName = namespace + "-" + name;
        if (!prototype) {
            prototype = base;
            base = $.Widget;
        }
        $.expr[":"][fullName.toLowerCase()] = function(elem) {
            return !!$.data(elem, fullName);
        };
        $[namespace] = $[namespace] || {};
        existingConstructor = $[namespace][name];
        constructor = $[namespace][name] = function(options, element) {
            if (!this._createWidget) {
                return new constructor(options, element);
            }
            if (arguments.length) {
                this._createWidget(options, element);
            }
        };
        $.extend(constructor, existingConstructor, {version: prototype.version,_proto: $.extend({}, prototype),_childConstructors: []});
        basePrototype = new base();
        basePrototype.options = $.widget.extend({}, basePrototype.options);
        $.each(prototype, function(prop, value) {
            if (!$.isFunction(value)) {
                proxiedPrototype[prop] = value;
                return;
            }
            proxiedPrototype[prop] = (function() {
                var _super = function() {
                    return base.prototype[prop].apply(this, arguments);
                }, _superApply = function(args) {
                    return base.prototype[prop].apply(this, args);
                };
                return function() {
                    var __super = this._super, __superApply = this._superApply, returnValue;
                    this._super = _super;
                    this._superApply = _superApply;
                    returnValue = value.apply(this, arguments);
                    this._super = __super;
                    this._superApply = __superApply;
                    return returnValue;
                };
            })();
        });
        constructor.prototype = $.widget.extend(basePrototype, {widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name}, proxiedPrototype, {constructor: constructor,namespace: namespace,widgetName: name,widgetFullName: fullName});
        if (existingConstructor) {
            $.each(existingConstructor._childConstructors, function(i, child) {
                var childPrototype = child.prototype;
                $.widget(childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto);
            });
            delete existingConstructor._childConstructors;
        } else {
            base._childConstructors.push(constructor);
        }
        $.widget.bridge(name, constructor);
    };
    $.widget.extend = function(target) {
        var input = slice.call(arguments, 1), inputIndex = 0, inputLength = input.length, key, value;
        for (; inputIndex < inputLength; inputIndex++) {
            for (key in input[inputIndex]) {
                value = input[inputIndex][key];
                if (input[inputIndex].hasOwnProperty(key) && value !== undefined) {
                    if ($.isPlainObject(value)) {
                        target[key] = $.isPlainObject(target[key]) ? $.widget.extend({}, target[key], value) : $.widget.extend({}, value);
                    } else {
                        target[key] = value;
                    }
                }
            }
        }
        return target;
    };
    $.widget.bridge = function(name, object) {
        var fullName = object.prototype.widgetFullName || name;
        $.fn[name] = function(options) {
            var isMethodCall = typeof options === "string", args = slice.call(arguments, 1), returnValue = this;
            options = !isMethodCall && args.length ? $.widget.extend.apply(null, [options].concat(args)) : options;
            if (isMethodCall) {
                this.each(function() {
                    var methodValue, instance = $.data(this, fullName);
                    if (!instance) {
                        return $.error("cannot call methods on " + name + " prior to initialization; attempted to call method '" + options + "'");
                    }
                    if (!$.isFunction(instance[options]) || options.charAt(0) === "_") {
                        return $.error("no such method '" + options + "' for " + name + " widget instance");
                    }
                    methodValue = instance[options].apply(instance, args);
                    if (methodValue !== instance && methodValue !== undefined) {
                        returnValue = methodValue && methodValue.jquery ? returnValue.pushStack(methodValue.get()) : methodValue;
                        return false;
                    }
                });
            } else {
                this.each(function() {
                    var instance = $.data(this, fullName);
                    if (instance) {
                        instance.option(options || {})._init();
                    } else {
                        $.data(this, fullName, new object(options, this));
                    }
                });
            }
            return returnValue;
        };
    };
    $.Widget = function() {
    };
    $.Widget._childConstructors = [];
    $.Widget.prototype = {widgetName: "widget",widgetEventPrefix: "",defaultElement: "<div>",options: {disabled: false,create: null},_createWidget: function(options, element) {
            element = $(element || this.defaultElement || this)[0];
            this.element = $(element);
            this.uuid = uuid++;
            this.eventNamespace = "." + this.widgetName + this.uuid;
            this.options = $.widget.extend({}, this.options, this._getCreateOptions(), options);
            this.bindings = $();
            this.hoverable = $();
            this.focusable = $();
            if (element !== this) {
                $.data(element, this.widgetFullName, this);
                this._on(true, this.element, {remove: function(event) {
                        if (event.target === element) {
                            this.destroy();
                        }
                    }});
                this.document = $(element.style ? element.ownerDocument : element.document || element);
                this.window = $(this.document[0].defaultView || this.document[0].parentWindow);
            }
            this._create();
            this._trigger("create", null, this._getCreateEventData());
            this._init();
        },_getCreateOptions: $.noop,_getCreateEventData: $.noop,_create: $.noop,_init: $.noop,destroy: function() {
            this._destroy();
            this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled");
            this.bindings.unbind(this.eventNamespace);
            this.hoverable.removeClass("ui-state-hover");
            this.focusable.removeClass("ui-state-focus");
        },_destroy: $.noop,widget: function() {
            return this.element;
        },option: function(key, value) {
            var options = key, parts, curOption, i;
            if (arguments.length === 0) {
                return $.widget.extend({}, this.options);
            }
            if (typeof key === "string") {
                options = {};
                parts = key.split(".");
                key = parts.shift();
                if (parts.length) {
                    curOption = options[key] = $.widget.extend({}, this.options[key]);
                    for (i = 0; i < parts.length - 1; i++) {
                        curOption[parts[i]] = curOption[parts[i]] || {};
                        curOption = curOption[parts[i]];
                    }
                    key = parts.pop();
                    if (value === undefined) {
                        return curOption[key] === undefined ? null : curOption[key];
                    }
                    curOption[key] = value;
                } else {
                    if (value === undefined) {
                        return this.options[key] === undefined ? null : this.options[key];
                    }
                    options[key] = value;
                }
            }
            this._setOptions(options);
            return this;
        },_setOptions: function(options) {
            var key;
            for (key in options) {
                this._setOption(key, options[key]);
            }
            return this;
        },_setOption: function(key, value) {
            this.options[key] = value;
            if (key === "disabled") {
                this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!value).attr("aria-disabled", value);
                this.hoverable.removeClass("ui-state-hover");
                this.focusable.removeClass("ui-state-focus");
            }
            return this;
        },enable: function() {
            return this._setOption("disabled", false);
        },disable: function() {
            return this._setOption("disabled", true);
        },_on: function(suppressDisabledCheck, element, handlers) {
            var delegateElement, instance = this;
            if (typeof suppressDisabledCheck !== "boolean") {
                handlers = element;
                element = suppressDisabledCheck;
                suppressDisabledCheck = false;
            }
            if (!handlers) {
                handlers = element;
                element = this.element;
                delegateElement = this.widget();
            } else {
                element = delegateElement = $(element);
                this.bindings = this.bindings.add(element);
            }
            $.each(handlers, function(event, handler) {
                function handlerProxy() {
                    if (!suppressDisabledCheck && (instance.options.disabled === true || $(this).hasClass("ui-state-disabled"))) {
                        return;
                    }
                    return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);
                }
                if (typeof handler !== "string") {
                    handlerProxy.guid = handler.guid = handler.guid || handlerProxy.guid || $.guid++;
                }
                var match = event.match(/^(\w+)\s*(.*)$/), eventName = match[1] + instance.eventNamespace, selector = match[2];
                if (selector) {
                    delegateElement.delegate(selector, eventName, handlerProxy);
                } else {
                    element.bind(eventName, handlerProxy);
                }
            });
        },_off: function(element, eventName) {
            eventName = (eventName || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;
            element.unbind(eventName).undelegate(eventName);
        },_delay: function(handler, delay) {
            function handlerProxy() {
                return (typeof handler === "string" ? instance[handler] : handler).apply(instance, arguments);
            }
            var instance = this;
            return setTimeout(handlerProxy, delay || 0);
        },_hoverable: function(element) {
            this.hoverable = this.hoverable.add(element);
            this._on(element, {mouseenter: function(event) {
                    $(event.currentTarget).addClass("ui-state-hover");
                },mouseleave: function(event) {
                    $(event.currentTarget).removeClass("ui-state-hover");
                }});
        },_focusable: function(element) {
            this.focusable = this.focusable.add(element);
            this._on(element, {focusin: function(event) {
                    $(event.currentTarget).addClass("ui-state-focus");
                },focusout: function(event) {
                    $(event.currentTarget).removeClass("ui-state-focus");
                }});
        },_trigger: function(type, event, data) {
            var prop, orig, callback = this.options[type];
            data = data || {};
            event = $.Event(event);
            event.type = (type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type).toLowerCase();
            event.target = this.element[0];
            orig = event.originalEvent;
            if (orig) {
                for (prop in orig) {
                    if (!(prop in event)) {
                        event[prop] = orig[prop];
                    }
                }
            }
            this.element.trigger(event, data);
            return !($.isFunction(callback) && callback.apply(this.element[0], [event].concat(data)) === false || event.isDefaultPrevented());
        }};
    $.each({show: "fadeIn",hide: "fadeOut"}, function(method, defaultEffect) {
        $.Widget.prototype["_" + method] = function(element, options, callback) {
            if (typeof options === "string") {
                options = {effect: options};
            }
            var hasOptions, effectName = !options ? method : options === true || typeof options === "number" ? defaultEffect : options.effect || defaultEffect;
            options = options || {};
            if (typeof options === "number") {
                options = {duration: options};
            }
            hasOptions = !$.isEmptyObject(options);
            options.complete = callback;
            if (options.delay) {
                element.delay(options.delay);
            }
            if (hasOptions && $.effects && $.effects.effect[effectName]) {
                element[method](options);
            } else {
                if (effectName !== method && element[effectName]) {
                    element[effectName](options.duration, options.easing, callback);
                } else {
                    element.queue(function(next) {
                        $(this)[method]();
                        if (callback) {
                            callback.call(element[0]);
                        }
                        next();
                    });
                }
            }
        };
    });
})(jQuery);
(function($, undefined) {
    var mouseHandled = false;
    $(document).mouseup(function() {
        mouseHandled = false;
    });
    $.widget("ui.mouse", {version: "1.10.3",options: {cancel: "input,textarea,button,select,option",distance: 1,delay: 0},_mouseInit: function() {
            var that = this;
            this.element.bind("mousedown." + this.widgetName, function(event) {
                return that._mouseDown(event);
            }).bind("click." + this.widgetName, function(event) {
                if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
                    $.removeData(event.target, that.widgetName + ".preventClickEvent");
                    event.stopImmediatePropagation();
                    return false;
                }
            });
            this.started = false;
        },_mouseDestroy: function() {
            this.element.unbind("." + this.widgetName);
            if (this._mouseMoveDelegate) {
                $(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
            }
        },_mouseDown: function(event) {
            if (mouseHandled) {
                return;
            }
            (this._mouseStarted && this._mouseUp(event));
            this._mouseDownEvent = event;
            var that = this, btnIsLeft = (event.which === 1), elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
            if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
                return true;
            }
            this.mouseDelayMet = !this.options.delay;
            if (!this.mouseDelayMet) {
                this._mouseDelayTimer = setTimeout(function() {
                    that.mouseDelayMet = true;
                }, this.options.delay);
            }
            if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
                this._mouseStarted = (this._mouseStart(event) !== false);
                if (!this._mouseStarted) {
                    event.preventDefault();
                    return true;
                }
            }
            if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
                $.removeData(event.target, this.widgetName + ".preventClickEvent");
            }
            this._mouseMoveDelegate = function(event) {
                return that._mouseMove(event);
            };
            this._mouseUpDelegate = function(event) {
                return that._mouseUp(event);
            };
            $(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate);
            event.preventDefault();
            mouseHandled = true;
            return true;
        },_mouseMove: function(event) {
            if ($.ui.ie && (!document.documentMode || document.documentMode < 9) && !event.button) {
                return this._mouseUp(event);
            }
            if (this._mouseStarted) {
                this._mouseDrag(event);
                return event.preventDefault();
            }
            if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
                this._mouseStarted = (this._mouseStart(this._mouseDownEvent, event) !== false);
                (this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
            }
            return !this._mouseStarted;
        },_mouseUp: function(event) {
            $(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
            if (this._mouseStarted) {
                this._mouseStarted = false;
                if (event.target === this._mouseDownEvent.target) {
                    $.data(event.target, this.widgetName + ".preventClickEvent", true);
                }
                this._mouseStop(event);
            }
            return false;
        },_mouseDistanceMet: function(event) {
            return (Math.max(Math.abs(this._mouseDownEvent.pageX - event.pageX), Math.abs(this._mouseDownEvent.pageY - event.pageY)) >= this.options.distance);
        },_mouseDelayMet: function() {
            return this.mouseDelayMet;
        },_mouseStart: function() {
        },_mouseDrag: function() {
        },_mouseStop: function() {
        },_mouseCapture: function() {
            return true;
        }});
})(jQuery);
(function($, undefined) {
    $.ui = $.ui || {};
    var cachedScrollbarWidth, max = Math.max, abs = Math.abs, round = Math.round, rhorizontal = /left|center|right/, rvertical = /top|center|bottom/, roffset = /[\+\-]\d+(\.[\d]+)?%?/, rposition = /^\w+/, rpercent = /%$/, _position = $.fn.position;
    function getOffsets(offsets, width, height) {
        return [parseFloat(offsets[0]) * (rpercent.test(offsets[0]) ? width / 100 : 1), parseFloat(offsets[1]) * (rpercent.test(offsets[1]) ? height / 100 : 1)];
    }
    function parseCss(element, property) {
        return parseInt($.css(element, property), 10) || 0;
    }
    function getDimensions(elem) {
        var raw = elem[0];
        if (raw.nodeType === 9) {
            return {width: elem.width(),height: elem.height(),offset: {top: 0,left: 0}};
        }
        if ($.isWindow(raw)) {
            return {width: elem.width(),height: elem.height(),offset: {top: elem.scrollTop(),left: elem.scrollLeft()}};
        }
        if (raw.preventDefault) {
            return {width: 0,height: 0,offset: {top: raw.pageY,left: raw.pageX}};
        }
        return {width: elem.outerWidth(),height: elem.outerHeight(),offset: elem.offset()};
    }
    $.position = {scrollbarWidth: function() {
            if (cachedScrollbarWidth !== undefined) {
                return cachedScrollbarWidth;
            }
            var w1, w2, div = $("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), innerDiv = div.children()[0];
            $("body").append(div);
            w1 = innerDiv.offsetWidth;
            div.css("overflow", "scroll");
            w2 = innerDiv.offsetWidth;
            if (w1 === w2) {
                w2 = div[0].clientWidth;
            }
            div.remove();
            return (cachedScrollbarWidth = w1 - w2);
        },getScrollInfo: function(within) {
            var overflowX = within.isWindow ? "" : within.element.css("overflow-x"), overflowY = within.isWindow ? "" : within.element.css("overflow-y"), hasOverflowX = overflowX === "scroll" || (overflowX === "auto" && within.width < within.element[0].scrollWidth), hasOverflowY = overflowY === "scroll" || (overflowY === "auto" && within.height < within.element[0].scrollHeight);
            return {width: hasOverflowY ? $.position.scrollbarWidth() : 0,height: hasOverflowX ? $.position.scrollbarWidth() : 0};
        },getWithinInfo: function(element) {
            var withinElement = $(element || window), isWindow = $.isWindow(withinElement[0]);
            return {element: withinElement,isWindow: isWindow,offset: withinElement.offset() || {left: 0,top: 0},scrollLeft: withinElement.scrollLeft(),scrollTop: withinElement.scrollTop(),width: isWindow ? withinElement.width() : withinElement.outerWidth(),height: isWindow ? withinElement.height() : withinElement.outerHeight()};
        }};
    $.fn.position = function(options) {
        if (!options || !options.of) {
            return _position.apply(this, arguments);
        }
        options = $.extend({}, options);
        var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions, target = $(options.of), within = $.position.getWithinInfo(options.within), scrollInfo = $.position.getScrollInfo(within), collision = (options.collision || "flip").split(" "), offsets = {};
        dimensions = getDimensions(target);
        if (target[0].preventDefault) {
            options.at = "left top";
        }
        targetWidth = dimensions.width;
        targetHeight = dimensions.height;
        targetOffset = dimensions.offset;
        basePosition = $.extend({}, targetOffset);
        $.each(["my", "at"], function() {
            var pos = (options[this] || "").split(" "), horizontalOffset, verticalOffset;
            if (pos.length === 1) {
                pos = rhorizontal.test(pos[0]) ? pos.concat(["center"]) : rvertical.test(pos[0]) ? ["center"].concat(pos) : ["center", "center"];
            }
            pos[0] = rhorizontal.test(pos[0]) ? pos[0] : "center";
            pos[1] = rvertical.test(pos[1]) ? pos[1] : "center";
            horizontalOffset = roffset.exec(pos[0]);
            verticalOffset = roffset.exec(pos[1]);
            offsets[this] = [horizontalOffset ? horizontalOffset[0] : 0, verticalOffset ? verticalOffset[0] : 0];
            options[this] = [rposition.exec(pos[0])[0], rposition.exec(pos[1])[0]];
        });
        if (collision.length === 1) {
            collision[1] = collision[0];
        }
        if (options.at[0] === "right") {
            basePosition.left += targetWidth;
        } else {
            if (options.at[0] === "center") {
                basePosition.left += targetWidth / 2;
            }
        }
        if (options.at[1] === "bottom") {
            basePosition.top += targetHeight;
        } else {
            if (options.at[1] === "center") {
                basePosition.top += targetHeight / 2;
            }
        }
        atOffset = getOffsets(offsets.at, targetWidth, targetHeight);
        basePosition.left += atOffset[0];
        basePosition.top += atOffset[1];
        return this.each(function() {
            var collisionPosition, using, elem = $(this), elemWidth = elem.outerWidth(), elemHeight = elem.outerHeight(), marginLeft = parseCss(this, "marginLeft"), marginTop = parseCss(this, "marginTop"), collisionWidth = elemWidth + marginLeft + parseCss(this, "marginRight") + scrollInfo.width, collisionHeight = elemHeight + marginTop + parseCss(this, "marginBottom") + scrollInfo.height, position = $.extend({}, basePosition), myOffset = getOffsets(offsets.my, elem.outerWidth(), elem.outerHeight());
            if (options.my[0] === "right") {
                position.left -= elemWidth;
            } else {
                if (options.my[0] === "center") {
                    position.left -= elemWidth / 2;
                }
            }
            if (options.my[1] === "bottom") {
                position.top -= elemHeight;
            } else {
                if (options.my[1] === "center") {
                    position.top -= elemHeight / 2;
                }
            }
            position.left += myOffset[0];
            position.top += myOffset[1];
            if (!$.support.offsetFractions) {
                position.left = round(position.left);
                position.top = round(position.top);
            }
            collisionPosition = {marginLeft: marginLeft,marginTop: marginTop};
            $.each(["left", "top"], function(i, dir) {
                if ($.ui.position[collision[i]]) {
                    $.ui.position[collision[i]][dir](position, {targetWidth: targetWidth,targetHeight: targetHeight,elemWidth: elemWidth,elemHeight: elemHeight,collisionPosition: collisionPosition,collisionWidth: collisionWidth,collisionHeight: collisionHeight,offset: [atOffset[0] + myOffset[0], atOffset[1] + myOffset[1]],my: options.my,at: options.at,within: within,elem: elem});
                }
            });
            if (options.using) {
                using = function(props) {
                    var left = targetOffset.left - position.left, right = left + targetWidth - elemWidth, top = targetOffset.top - position.top, bottom = top + targetHeight - elemHeight, feedback = {target: {element: target,left: targetOffset.left,top: targetOffset.top,width: targetWidth,height: targetHeight},element: {element: elem,left: position.left,top: position.top,width: elemWidth,height: elemHeight},horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"};
                    if (targetWidth < elemWidth && abs(left + right) < targetWidth) {
                        feedback.horizontal = "center";
                    }
                    if (targetHeight < elemHeight && abs(top + bottom) < targetHeight) {
                        feedback.vertical = "middle";
                    }
                    if (max(abs(left), abs(right)) > max(abs(top), abs(bottom))) {
                        feedback.important = "horizontal";
                    } else {
                        feedback.important = "vertical";
                    }
                    options.using.call(this, props, feedback);
                };
            }
            elem.offset($.extend(position, {using: using}));
        });
    };
    $.ui.position = {fit: {left: function(position, data) {
                var within = data.within, withinOffset = within.isWindow ? within.scrollLeft : within.offset.left, outerWidth = within.width, collisionPosLeft = position.left - data.collisionPosition.marginLeft, overLeft = withinOffset - collisionPosLeft, overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset, newOverRight;
                if (data.collisionWidth > outerWidth) {
                    if (overLeft > 0 && overRight <= 0) {
                        newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
                        position.left += overLeft - newOverRight;
                    } else {
                        if (overRight > 0 && overLeft <= 0) {
                            position.left = withinOffset;
                        } else {
                            if (overLeft > overRight) {
                                position.left = withinOffset + outerWidth - data.collisionWidth;
                            } else {
                                position.left = withinOffset;
                            }
                        }
                    }
                } else {
                    if (overLeft > 0) {
                        position.left += overLeft;
                    } else {
                        if (overRight > 0) {
                            position.left -= overRight;
                        } else {
                            position.left = max(position.left - collisionPosLeft, position.left);
                        }
                    }
                }
            },top: function(position, data) {
                var within = data.within, withinOffset = within.isWindow ? within.scrollTop : within.offset.top, outerHeight = data.within.height, collisionPosTop = position.top - data.collisionPosition.marginTop, overTop = withinOffset - collisionPosTop, overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset, newOverBottom;
                if (data.collisionHeight > outerHeight) {
                    if (overTop > 0 && overBottom <= 0) {
                        newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
                        position.top += overTop - newOverBottom;
                    } else {
                        if (overBottom > 0 && overTop <= 0) {
                            position.top = withinOffset;
                        } else {
                            if (overTop > overBottom) {
                                position.top = withinOffset + outerHeight - data.collisionHeight;
                            } else {
                                position.top = withinOffset;
                            }
                        }
                    }
                } else {
                    if (overTop > 0) {
                        position.top += overTop;
                    } else {
                        if (overBottom > 0) {
                            position.top -= overBottom;
                        } else {
                            position.top = max(position.top - collisionPosTop, position.top);
                        }
                    }
                }
            }},flip: {left: function(position, data) {
                var within = data.within, withinOffset = within.offset.left + within.scrollLeft, outerWidth = within.width, offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left, collisionPosLeft = position.left - data.collisionPosition.marginLeft, overLeft = collisionPosLeft - offsetLeft, overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft, myOffset = data.my[0] === "left" ? -data.elemWidth : data.my[0] === "right" ? data.elemWidth : 0, atOffset = data.at[0] === "left" ? data.targetWidth : data.at[0] === "right" ? -data.targetWidth : 0, offset = -2 * data.offset[0], newOverRight, newOverLeft;
                if (overLeft < 0) {
                    newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
                    if (newOverRight < 0 || newOverRight < abs(overLeft)) {
                        position.left += myOffset + atOffset + offset;
                    }
                } else {
                    if (overRight > 0) {
                        newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
                        if (newOverLeft > 0 || abs(newOverLeft) < overRight) {
                            position.left += myOffset + atOffset + offset;
                        }
                    }
                }
            },top: function(position, data) {
                var within = data.within, withinOffset = within.offset.top + within.scrollTop, outerHeight = within.height, offsetTop = within.isWindow ? within.scrollTop : within.offset.top, collisionPosTop = position.top - data.collisionPosition.marginTop, overTop = collisionPosTop - offsetTop, overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop, top = data.my[1] === "top", myOffset = top ? -data.elemHeight : data.my[1] === "bottom" ? data.elemHeight : 0, atOffset = data.at[1] === "top" ? data.targetHeight : data.at[1] === "bottom" ? -data.targetHeight : 0, offset = -2 * data.offset[1], newOverTop, newOverBottom;
                if (overTop < 0) {
                    newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
                    if ((position.top + myOffset + atOffset + offset) > overTop && (newOverBottom < 0 || newOverBottom < abs(overTop))) {
                        position.top += myOffset + atOffset + offset;
                    }
                } else {
                    if (overBottom > 0) {
                        newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
                        if ((position.top + myOffset + atOffset + offset) > overBottom && (newOverTop > 0 || abs(newOverTop) < overBottom)) {
                            position.top += myOffset + atOffset + offset;
                        }
                    }
                }
            }},flipfit: {left: function() {
                $.ui.position.flip.left.apply(this, arguments);
                $.ui.position.fit.left.apply(this, arguments);
            },top: function() {
                $.ui.position.flip.top.apply(this, arguments);
                $.ui.position.fit.top.apply(this, arguments);
            }}};
    (function() {
        var testElement, testElementParent, testElementStyle, offsetLeft, i, body = document.getElementsByTagName("body")[0], div = document.createElement("div");
        testElement = document.createElement(body ? "div" : "body");
        testElementStyle = {visibility: "hidden",width: 0,height: 0,border: 0,margin: 0,background: "none"};
        if (body) {
            $.extend(testElementStyle, {position: "absolute",left: "-1000px",top: "-1000px"});
        }
        for (i in testElementStyle) {
            testElement.style[i] = testElementStyle[i];
        }
        testElement.appendChild(div);
        testElementParent = body || document.documentElement;
        testElementParent.insertBefore(testElement, testElementParent.firstChild);
        div.style.cssText = "position: absolute; left: 10.7432222px;";
        offsetLeft = $(div).offset().left;
        $.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;
        testElement.innerHTML = "";
        testElementParent.removeChild(testElement);
    })();
}(jQuery));
(function($, undefined) {
    $.widget("ui.draggable", $.ui.mouse, {version: "1.10.3",widgetEventPrefix: "drag",options: {addClasses: true,appendTo: "parent",axis: false,connectToSortable: false,containment: false,cursor: "auto",cursorAt: false,grid: false,handle: false,helper: "original",iframeFix: false,opacity: false,refreshPositions: false,revert: false,revertDuration: 500,scope: "default",scroll: true,scrollSensitivity: 20,scrollSpeed: 20,snap: false,snapMode: "both",snapTolerance: 20,stack: false,zIndex: false,drag: null,start: null,stop: null},_create: function() {
            if (this.options.helper === "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
                this.element[0].style.position = "relative";
            }
            if (this.options.addClasses) {
                this.element.addClass("ui-draggable");
            }
            if (this.options.disabled) {
                this.element.addClass("ui-draggable-disabled");
            }
            this._mouseInit();
        },_destroy: function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
            this._mouseDestroy();
        },_mouseCapture: function(event) {
            var o = this.options;
            if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
                return false;
            }
            this.handle = this._getHandle(event);
            if (!this.handle) {
                return false;
            }
            $(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
                $("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width: this.offsetWidth + "px",height: this.offsetHeight + "px",position: "absolute",opacity: "0.001",zIndex: 1000}).css($(this).offset()).appendTo("body");
            });
            return true;
        },_mouseStart: function(event) {
            var o = this.options;
            this.helper = this._createHelper(event);
            this.helper.addClass("ui-draggable-dragging");
            this._cacheHelperProportions();
            if ($.ui.ddmanager) {
                $.ui.ddmanager.current = this;
            }
            this._cacheMargins();
            this.cssPosition = this.helper.css("position");
            this.scrollParent = this.helper.scrollParent();
            this.offsetParent = this.helper.offsetParent();
            this.offsetParentCssPosition = this.offsetParent.css("position");
            this.offset = this.positionAbs = this.element.offset();
            this.offset = {top: this.offset.top - this.margins.top,left: this.offset.left - this.margins.left};
            this.offset.scroll = false;
            $.extend(this.offset, {click: {left: event.pageX - this.offset.left,top: event.pageY - this.offset.top},parent: this._getParentOffset(),relative: this._getRelativeOffset()});
            this.originalPosition = this.position = this._generatePosition(event);
            this.originalPageX = event.pageX;
            this.originalPageY = event.pageY;
            (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
            this._setContainment();
            if (this._trigger("start", event) === false) {
                this._clear();
                return false;
            }
            this._cacheHelperProportions();
            if ($.ui.ddmanager && !o.dropBehaviour) {
                $.ui.ddmanager.prepareOffsets(this, event);
            }
            this._mouseDrag(event, true);
            if ($.ui.ddmanager) {
                $.ui.ddmanager.dragStart(this, event);
            }
            return true;
        },_mouseDrag: function(event, noPropagation) {
            if (this.offsetParentCssPosition === "fixed") {
                this.offset.parent = this._getParentOffset();
            }
            this.position = this._generatePosition(event);
            this.positionAbs = this._convertPositionTo("absolute");
            if (!noPropagation) {
                var ui = this._uiHash();
                if (this._trigger("drag", event, ui) === false) {
                    this._mouseUp({});
                    return false;
                }
                this.position = ui.position;
            }
            if (!this.options.axis || this.options.axis !== "y") {
                this.helper[0].style.left = this.position.left + "px";
            }
            if (!this.options.axis || this.options.axis !== "x") {
                this.helper[0].style.top = this.position.top + "px";
            }
            if ($.ui.ddmanager) {
                $.ui.ddmanager.drag(this, event);
            }
            return false;
        },_mouseStop: function(event) {
            var that = this, dropped = false;
            if ($.ui.ddmanager && !this.options.dropBehaviour) {
                dropped = $.ui.ddmanager.drop(this, event);
            }
            if (this.dropped) {
                dropped = this.dropped;
                this.dropped = false;
            }
            if (this.options.helper === "original" && !$.contains(this.element[0].ownerDocument, this.element[0])) {
                return false;
            }
            if ((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
                $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                    if (that._trigger("stop", event) !== false) {
                        that._clear();
                    }
                });
            } else {
                if (this._trigger("stop", event) !== false) {
                    this._clear();
                }
            }
            return false;
        },_mouseUp: function(event) {
            $("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            });
            if ($.ui.ddmanager) {
                $.ui.ddmanager.dragStop(this, event);
            }
            return $.ui.mouse.prototype._mouseUp.call(this, event);
        },cancel: function() {
            if (this.helper.is(".ui-draggable-dragging")) {
                this._mouseUp({});
            } else {
                this._clear();
            }
            return this;
        },_getHandle: function(event) {
            return this.options.handle ? !!$(event.target).closest(this.element.find(this.options.handle)).length : true;
        },_createHelper: function(event) {
            var o = this.options, helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element);
            if (!helper.parents("body").length) {
                helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
            }
            if (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
                helper.css("position", "absolute");
            }
            return helper;
        },_adjustOffsetFromHelper: function(obj) {
            if (typeof obj === "string") {
                obj = obj.split(" ");
            }
            if ($.isArray(obj)) {
                obj = {left: +obj[0],top: +obj[1] || 0};
            }
            if ("left" in obj) {
                this.offset.click.left = obj.left + this.margins.left;
            }
            if ("right" in obj) {
                this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
            }
            if ("top" in obj) {
                this.offset.click.top = obj.top + this.margins.top;
            }
            if ("bottom" in obj) {
                this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
            }
        },_getParentOffset: function() {
            var po = this.offsetParent.offset();
            if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
                po.left += this.scrollParent.scrollLeft();
                po.top += this.scrollParent.scrollTop();
            }
            if ((this.offsetParent[0] === document.body) || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
                po = {top: 0,left: 0};
            }
            return {top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)};
        },_getRelativeOffset: function() {
            if (this.cssPosition === "relative") {
                var p = this.element.position();
                return {top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()};
            } else {
                return {top: 0,left: 0};
            }
        },_cacheMargins: function() {
            this.margins = {left: (parseInt(this.element.css("marginLeft"), 10) || 0),top: (parseInt(this.element.css("marginTop"), 10) || 0),right: (parseInt(this.element.css("marginRight"), 10) || 0),bottom: (parseInt(this.element.css("marginBottom"), 10) || 0)};
        },_cacheHelperProportions: function() {
            this.helperProportions = {width: this.helper.outerWidth(),height: this.helper.outerHeight()};
        },_setContainment: function() {
            var over, c, ce, o = this.options;
            if (!o.containment) {
                this.containment = null;
                return;
            }
            if (o.containment === "window") {
                this.containment = [$(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, $(window).scrollLeft() + $(window).width() - this.helperProportions.width - this.margins.left, $(window).scrollTop() + ($(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return;
            }
            if (o.containment === "document") {
                this.containment = [0, 0, $(document).width() - this.helperProportions.width - this.margins.left, ($(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return;
            }
            if (o.containment.constructor === Array) {
                this.containment = o.containment;
                return;
            }
            if (o.containment === "parent") {
                o.containment = this.helper[0].parentNode;
            }
            c = $(o.containment);
            ce = c[0];
            if (!ce) {
                return;
            }
            over = c.css("overflow") !== "hidden";
            this.containment = [(parseInt(c.css("borderLeftWidth"), 10) || 0) + (parseInt(c.css("paddingLeft"), 10) || 0), (parseInt(c.css("borderTopWidth"), 10) || 0) + (parseInt(c.css("paddingTop"), 10) || 0), (over ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt(c.css("borderRightWidth"), 10) || 0) - (parseInt(c.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (over ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt(c.css("borderBottomWidth"), 10) || 0) - (parseInt(c.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom];
            this.relative_container = c;
        },_convertPositionTo: function(d, pos) {
            if (!pos) {
                pos = this.position;
            }
            var mod = d === "absolute" ? 1 : -1, scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent;
            if (!this.offset.scroll) {
                this.offset.scroll = {top: scroll.scrollTop(),left: scroll.scrollLeft()};
            }
            return {top: (pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - ((this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * mod)),left: (pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - ((this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * mod))};
        },_generatePosition: function(event) {
            var containment, co, top, left, o = this.options, scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, pageX = event.pageX, pageY = event.pageY;
            if (!this.offset.scroll) {
                this.offset.scroll = {top: scroll.scrollTop(),left: scroll.scrollLeft()};
            }
            if (this.originalPosition) {
                if (this.containment) {
                    if (this.relative_container) {
                        co = this.relative_container.offset();
                        containment = [this.containment[0] + co.left, this.containment[1] + co.top, this.containment[2] + co.left, this.containment[3] + co.top];
                    } else {
                        containment = this.containment;
                    }
                    if (event.pageX - this.offset.click.left < containment[0]) {
                        pageX = containment[0] + this.offset.click.left;
                    }
                    if (event.pageY - this.offset.click.top < containment[1]) {
                        pageY = containment[1] + this.offset.click.top;
                    }
                    if (event.pageX - this.offset.click.left > containment[2]) {
                        pageX = containment[2] + this.offset.click.left;
                    }
                    if (event.pageY - this.offset.click.top > containment[3]) {
                        pageY = containment[3] + this.offset.click.top;
                    }
                }
                if (o.grid) {
                    top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
                    pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
                    left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
                    pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
                }
            }
            return {top: (pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top)),left: (pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left))};
        },_clear: function() {
            this.helper.removeClass("ui-draggable-dragging");
            if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
                this.helper.remove();
            }
            this.helper = null;
            this.cancelHelperRemoval = false;
        },_trigger: function(type, event, ui) {
            ui = ui || this._uiHash();
            $.ui.plugin.call(this, type, [event, ui]);
            if (type === "drag") {
                this.positionAbs = this._convertPositionTo("absolute");
            }
            return $.Widget.prototype._trigger.call(this, type, event, ui);
        },plugins: {},_uiHash: function() {
            return {helper: this.helper,position: this.position,originalPosition: this.originalPosition,offset: this.positionAbs};
        }});
    $.ui.plugin.add("draggable", "connectToSortable", {start: function(event, ui) {
            var inst = $(this).data("ui-draggable"), o = inst.options, uiSortable = $.extend({}, ui, {item: inst.element});
            inst.sortables = [];
            $(o.connectToSortable).each(function() {
                var sortable = $.data(this, "ui-sortable");
                if (sortable && !sortable.options.disabled) {
                    inst.sortables.push({instance: sortable,shouldRevert: sortable.options.revert});
                    sortable.refreshPositions();
                    sortable._trigger("activate", event, uiSortable);
                }
            });
        },stop: function(event, ui) {
            var inst = $(this).data("ui-draggable"), uiSortable = $.extend({}, ui, {item: inst.element});
            $.each(inst.sortables, function() {
                if (this.instance.isOver) {
                    this.instance.isOver = 0;
                    inst.cancelHelperRemoval = true;
                    this.instance.cancelHelperRemoval = false;
                    if (this.shouldRevert) {
                        this.instance.options.revert = this.shouldRevert;
                    }
                    this.instance._mouseStop(event);
                    this.instance.options.helper = this.instance.options._helper;
                    if (inst.options.helper === "original") {
                        this.instance.currentItem.css({top: "auto",left: "auto"});
                    }
                } else {
                    this.instance.cancelHelperRemoval = false;
                    this.instance._trigger("deactivate", event, uiSortable);
                }
            });
        },drag: function(event, ui) {
            var inst = $(this).data("ui-draggable"), that = this;
            $.each(inst.sortables, function() {
                var innermostIntersecting = false, thisSortable = this;
                this.instance.positionAbs = inst.positionAbs;
                this.instance.helperProportions = inst.helperProportions;
                this.instance.offset.click = inst.offset.click;
                if (this.instance._intersectsWith(this.instance.containerCache)) {
                    innermostIntersecting = true;
                    $.each(inst.sortables, function() {
                        this.instance.positionAbs = inst.positionAbs;
                        this.instance.helperProportions = inst.helperProportions;
                        this.instance.offset.click = inst.offset.click;
                        if (this !== thisSortable && this.instance._intersectsWith(this.instance.containerCache) && $.contains(thisSortable.instance.element[0], this.instance.element[0])) {
                            innermostIntersecting = false;
                        }
                        return innermostIntersecting;
                    });
                }
                if (innermostIntersecting) {
                    if (!this.instance.isOver) {
                        this.instance.isOver = 1;
                        this.instance.currentItem = $(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
                        this.instance.options._helper = this.instance.options.helper;
                        this.instance.options.helper = function() {
                            return ui.helper[0];
                        };
                        event.target = this.instance.currentItem[0];
                        this.instance._mouseCapture(event, true);
                        this.instance._mouseStart(event, true, true);
                        this.instance.offset.click.top = inst.offset.click.top;
                        this.instance.offset.click.left = inst.offset.click.left;
                        this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
                        this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;
                        inst._trigger("toSortable", event);
                        inst.dropped = this.instance.element;
                        inst.currentItem = inst.element;
                        this.instance.fromOutside = inst;
                    }
                    if (this.instance.currentItem) {
                        this.instance._mouseDrag(event);
                    }
                } else {
                    if (this.instance.isOver) {
                        this.instance.isOver = 0;
                        this.instance.cancelHelperRemoval = true;
                        this.instance.options.revert = false;
                        this.instance._trigger("out", event, this.instance._uiHash(this.instance));
                        this.instance._mouseStop(event, true);
                        this.instance.options.helper = this.instance.options._helper;
                        this.instance.currentItem.remove();
                        if (this.instance.placeholder) {
                            this.instance.placeholder.remove();
                        }
                        inst._trigger("fromSortable", event);
                        inst.dropped = false;
                    }
                }
            });
        }});
    $.ui.plugin.add("draggable", "cursor", {start: function() {
            var t = $("body"), o = $(this).data("ui-draggable").options;
            if (t.css("cursor")) {
                o._cursor = t.css("cursor");
            }
            t.css("cursor", o.cursor);
        },stop: function() {
            var o = $(this).data("ui-draggable").options;
            if (o._cursor) {
                $("body").css("cursor", o._cursor);
            }
        }});
    $.ui.plugin.add("draggable", "opacity", {start: function(event, ui) {
            var t = $(ui.helper), o = $(this).data("ui-draggable").options;
            if (t.css("opacity")) {
                o._opacity = t.css("opacity");
            }
            t.css("opacity", o.opacity);
        },stop: function(event, ui) {
            var o = $(this).data("ui-draggable").options;
            if (o._opacity) {
                $(ui.helper).css("opacity", o._opacity);
            }
        }});
    $.ui.plugin.add("draggable", "scroll", {start: function() {
            var i = $(this).data("ui-draggable");
            if (i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
                i.overflowOffset = i.scrollParent.offset();
            }
        },drag: function(event) {
            var i = $(this).data("ui-draggable"), o = i.options, scrolled = false;
            if (i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
                if (!o.axis || o.axis !== "x") {
                    if ((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
                        i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
                    } else {
                        if (event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
                            i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
                        }
                    }
                }
                if (!o.axis || o.axis !== "y") {
                    if ((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
                        i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
                    } else {
                        if (event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
                            i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
                        }
                    }
                }
            } else {
                if (!o.axis || o.axis !== "x") {
                    if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
                        scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                    } else {
                        if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
                        }
                    }
                }
                if (!o.axis || o.axis !== "y") {
                    if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
                        scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                    } else {
                        if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
                        }
                    }
                }
            }
            if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
                $.ui.ddmanager.prepareOffsets(i, event);
            }
        }});
    $.ui.plugin.add("draggable", "snap", {start: function() {
            var i = $(this).data("ui-draggable"), o = i.options;
            i.snapElements = [];
            $(o.snap.constructor !== String ? (o.snap.items || ":data(ui-draggable)") : o.snap).each(function() {
                var $t = $(this), $o = $t.offset();
                if (this !== i.element[0]) {
                    i.snapElements.push({item: this,width: $t.outerWidth(),height: $t.outerHeight(),top: $o.top,left: $o.left});
                }
            });
        },drag: function(event, ui) {
            var ts, bs, ls, rs, l, r, t, b, i, first, inst = $(this).data("ui-draggable"), o = inst.options, d = o.snapTolerance, x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width, y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
            for (i = inst.snapElements.length - 1; i >= 0; i--) {
                l = inst.snapElements[i].left;
                r = l + inst.snapElements[i].width;
                t = inst.snapElements[i].top;
                b = t + inst.snapElements[i].height;
                if (x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains(inst.snapElements[i].item.ownerDocument, inst.snapElements[i].item)) {
                    if (inst.snapElements[i].snapping) {
                        (inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), {snapItem: inst.snapElements[i].item})));
                    }
                    inst.snapElements[i].snapping = false;
                    continue;
                }
                if (o.snapMode !== "inner") {
                    ts = Math.abs(t - y2) <= d;
                    bs = Math.abs(b - y1) <= d;
                    ls = Math.abs(l - x2) <= d;
                    rs = Math.abs(r - x1) <= d;
                    if (ts) {
                        ui.position.top = inst._convertPositionTo("relative", {top: t - inst.helperProportions.height,left: 0}).top - inst.margins.top;
                    }
                    if (bs) {
                        ui.position.top = inst._convertPositionTo("relative", {top: b,left: 0}).top - inst.margins.top;
                    }
                    if (ls) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: l - inst.helperProportions.width}).left - inst.margins.left;
                    }
                    if (rs) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: r}).left - inst.margins.left;
                    }
                }
                first = (ts || bs || ls || rs);
                if (o.snapMode !== "outer") {
                    ts = Math.abs(t - y1) <= d;
                    bs = Math.abs(b - y2) <= d;
                    ls = Math.abs(l - x1) <= d;
                    rs = Math.abs(r - x2) <= d;
                    if (ts) {
                        ui.position.top = inst._convertPositionTo("relative", {top: t,left: 0}).top - inst.margins.top;
                    }
                    if (bs) {
                        ui.position.top = inst._convertPositionTo("relative", {top: b - inst.helperProportions.height,left: 0}).top - inst.margins.top;
                    }
                    if (ls) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: l}).left - inst.margins.left;
                    }
                    if (rs) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: r - inst.helperProportions.width}).left - inst.margins.left;
                    }
                }
                if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
                    (inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), {snapItem: inst.snapElements[i].item})));
                }
                inst.snapElements[i].snapping = (ts || bs || ls || rs || first);
            }
        }});
    $.ui.plugin.add("draggable", "stack", {start: function() {
            var min, o = this.data("ui-draggable").options, group = $.makeArray($(o.stack)).sort(function(a, b) {
                return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);
            });
            if (!group.length) {
                return;
            }
            min = parseInt($(group[0]).css("zIndex"), 10) || 0;
            $(group).each(function(i) {
                $(this).css("zIndex", min + i);
            });
            this.css("zIndex", (min + group.length));
        }});
    $.ui.plugin.add("draggable", "zIndex", {start: function(event, ui) {
            var t = $(ui.helper), o = $(this).data("ui-draggable").options;
            if (t.css("zIndex")) {
                o._zIndex = t.css("zIndex");
            }
            t.css("zIndex", o.zIndex);
        },stop: function(event, ui) {
            var o = $(this).data("ui-draggable").options;
            if (o._zIndex) {
                $(ui.helper).css("zIndex", o._zIndex);
            }
        }});
})(jQuery);
(function($, undefined) {
    function isOverAxis(x, reference, size) {
        return (x > reference) && (x < (reference + size));
    }
    $.widget("ui.droppable", {version: "1.10.3",widgetEventPrefix: "drop",options: {accept: "*",activeClass: false,addClasses: true,greedy: false,hoverClass: false,scope: "default",tolerance: "intersect",activate: null,deactivate: null,drop: null,out: null,over: null},_create: function() {
            var o = this.options, accept = o.accept;
            this.isover = false;
            this.isout = true;
            this.accept = $.isFunction(accept) ? accept : function(d) {
                return d.is(accept);
            };
            this.proportions = {width: this.element[0].offsetWidth,height: this.element[0].offsetHeight};
            $.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
            $.ui.ddmanager.droppables[o.scope].push(this);
            (o.addClasses && this.element.addClass("ui-droppable"));
        },_destroy: function() {
            var i = 0, drop = $.ui.ddmanager.droppables[this.options.scope];
            for (; i < drop.length; i++) {
                if (drop[i] === this) {
                    drop.splice(i, 1);
                }
            }
            this.element.removeClass("ui-droppable ui-droppable-disabled");
        },_setOption: function(key, value) {
            if (key === "accept") {
                this.accept = $.isFunction(value) ? value : function(d) {
                    return d.is(value);
                };
            }
            $.Widget.prototype._setOption.apply(this, arguments);
        },_activate: function(event) {
            var draggable = $.ui.ddmanager.current;
            if (this.options.activeClass) {
                this.element.addClass(this.options.activeClass);
            }
            if (draggable) {
                this._trigger("activate", event, this.ui(draggable));
            }
        },_deactivate: function(event) {
            var draggable = $.ui.ddmanager.current;
            if (this.options.activeClass) {
                this.element.removeClass(this.options.activeClass);
            }
            if (draggable) {
                this._trigger("deactivate", event, this.ui(draggable));
            }
        },_over: function(event) {
            var draggable = $.ui.ddmanager.current;
            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                return;
            }
            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {
                if (this.options.hoverClass) {
                    this.element.addClass(this.options.hoverClass);
                }
                this._trigger("over", event, this.ui(draggable));
            }
        },_out: function(event) {
            var draggable = $.ui.ddmanager.current;
            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                return;
            }
            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {
                if (this.options.hoverClass) {
                    this.element.removeClass(this.options.hoverClass);
                }
                this._trigger("out", event, this.ui(draggable));
            }
        },_drop: function(event, custom) {
            var draggable = custom || $.ui.ddmanager.current, childrenIntersection = false;
            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                return false;
            }
            this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var inst = $.data(this, "ui-droppable");
                if (inst.options.greedy && !inst.options.disabled && inst.options.scope === draggable.options.scope && inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) && $.ui.intersect(draggable, $.extend(inst, {offset: inst.element.offset()}), inst.options.tolerance)) {
                    childrenIntersection = true;
                    return false;
                }
            });
            if (childrenIntersection) {
                return false;
            }
            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {
                if (this.options.activeClass) {
                    this.element.removeClass(this.options.activeClass);
                }
                if (this.options.hoverClass) {
                    this.element.removeClass(this.options.hoverClass);
                }
                this._trigger("drop", event, this.ui(draggable));
                return this.element;
            }
            return false;
        },ui: function(c) {
            return {draggable: (c.currentItem || c.element),helper: c.helper,position: c.position,offset: c.positionAbs};
        }});
    $.ui.intersect = function(draggable, droppable, toleranceMode) {
        if (!droppable.offset) {
            return false;
        }
        var draggableLeft, draggableTop, x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width, y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height, l = droppable.offset.left, r = l + droppable.proportions.width, t = droppable.offset.top, b = t + droppable.proportions.height;
        switch (toleranceMode) {
            case "fit":
                return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);
            case "intersect":
                return (l < x1 + (draggable.helperProportions.width / 2) && x2 - (draggable.helperProportions.width / 2) < r && t < y1 + (draggable.helperProportions.height / 2) && y2 - (draggable.helperProportions.height / 2) < b);
            case "pointer":
                draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
                draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
                return isOverAxis(draggableTop, t, droppable.proportions.height) && isOverAxis(draggableLeft, l, droppable.proportions.width);
            case "touch":
                return ((y1 >= t && y1 <= b) || (y2 >= t && y2 <= b) || (y1 < t && y2 > b)) && ((x1 >= l && x1 <= r) || (x2 >= l && x2 <= r) || (x1 < l && x2 > r));
            default:
                return false;
        }
    };
    $.ui.ddmanager = {current: null,droppables: {"default": []},prepareOffsets: function(t, event) {
            var i, j, m = $.ui.ddmanager.droppables[t.options.scope] || [], type = event ? event.type : null, list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            droppablesLoop: for (i = 0; i < m.length; i++) {
                if (m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0], (t.currentItem || t.element)))) {
                    continue;
                }
                for (j = 0; j < list.length; j++) {
                    if (list[j] === m[i].element[0]) {
                        m[i].proportions.height = 0;
                        continue droppablesLoop;
                    }
                }
                m[i].visible = m[i].element.css("display") !== "none";
                if (!m[i].visible) {
                    continue;
                }
                if (type === "mousedown") {
                    m[i]._activate.call(m[i], event);
                }
                m[i].offset = m[i].element.offset();
                m[i].proportions = {width: m[i].element[0].offsetWidth,height: m[i].element[0].offsetHeight};
            }
        },drop: function(draggable, event) {
            var dropped = false;
            $.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {
                if (!this.options) {
                    return;
                }
                if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {
                    dropped = this._drop.call(this, event) || dropped;
                }
                if (!this.options.disabled && this.visible && this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {
                    this.isout = true;
                    this.isover = false;
                    this._deactivate.call(this, event);
                }
            });
            return dropped;
        },dragStart: function(draggable, event) {
            draggable.element.parentsUntil("body").bind("scroll.droppable", function() {
                if (!draggable.options.refreshPositions) {
                    $.ui.ddmanager.prepareOffsets(draggable, event);
                }
            });
        },drag: function(draggable, event) {
            if (draggable.options.refreshPositions) {
                $.ui.ddmanager.prepareOffsets(draggable, event);
            }
            $.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {
                if (this.options.disabled || this.greedyChild || !this.visible) {
                    return;
                }
                var parentInstance, scope, parent, intersects = $.ui.intersect(draggable, this, this.options.tolerance), c = !intersects && this.isover ? "isout" : (intersects && !this.isover ? "isover" : null);
                if (!c) {
                    return;
                }
                if (this.options.greedy) {
                    scope = this.options.scope;
                    parent = this.element.parents(":data(ui-droppable)").filter(function() {
                        return $.data(this, "ui-droppable").options.scope === scope;
                    });
                    if (parent.length) {
                        parentInstance = $.data(parent[0], "ui-droppable");
                        parentInstance.greedyChild = (c === "isover");
                    }
                }
                if (parentInstance && c === "isover") {
                    parentInstance.isover = false;
                    parentInstance.isout = true;
                    parentInstance._out.call(parentInstance, event);
                }
                this[c] = true;
                this[c === "isout" ? "isover" : "isout"] = false;
                this[c === "isover" ? "_over" : "_out"].call(this, event);
                if (parentInstance && c === "isout") {
                    parentInstance.isout = false;
                    parentInstance.isover = true;
                    parentInstance._over.call(parentInstance, event);
                }
            });
        },dragStop: function(draggable, event) {
            draggable.element.parentsUntil("body").unbind("scroll.droppable");
            if (!draggable.options.refreshPositions) {
                $.ui.ddmanager.prepareOffsets(draggable, event);
            }
        }};
})(jQuery);
(function($, undefined) {
    function num(v) {
        return parseInt(v, 10) || 0;
    }
    function isNumber(value) {
        return !isNaN(parseInt(value, 10));
    }
    $.widget("ui.resizable", $.ui.mouse, {version: "1.10.3",widgetEventPrefix: "resize",options: {alsoResize: false,animate: false,animateDuration: "slow",animateEasing: "swing",aspectRatio: false,autoHide: false,containment: false,ghost: false,grid: false,handles: "e,s,se",helper: false,maxHeight: null,maxWidth: null,minHeight: 10,minWidth: 10,zIndex: 90,resize: null,start: null,stop: null},_create: function() {
            var n, i, handle, axis, hname, that = this, o = this.options;
            this.element.addClass("ui-resizable");
            $.extend(this, {_aspectRatio: !!(o.aspectRatio),aspectRatio: o.aspectRatio,originalElement: this.element,_proportionallyResizeElements: [],_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null});
            if (this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {
                this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position: this.element.css("position"),width: this.element.outerWidth(),height: this.element.outerHeight(),top: this.element.css("top"),left: this.element.css("left")}));
                this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable"));
                this.elementIsWrapper = true;
                this.element.css({marginLeft: this.originalElement.css("marginLeft"),marginTop: this.originalElement.css("marginTop"),marginRight: this.originalElement.css("marginRight"),marginBottom: this.originalElement.css("marginBottom")});
                this.originalElement.css({marginLeft: 0,marginTop: 0,marginRight: 0,marginBottom: 0});
                this.originalResizeStyle = this.originalElement.css("resize");
                this.originalElement.css("resize", "none");
                this._proportionallyResizeElements.push(this.originalElement.css({position: "static",zoom: 1,display: "block"}));
                this.originalElement.css({margin: this.originalElement.css("margin")});
                this._proportionallyResize();
            }
            this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : {n: ".ui-resizable-n",e: ".ui-resizable-e",s: ".ui-resizable-s",w: ".ui-resizable-w",se: ".ui-resizable-se",sw: ".ui-resizable-sw",ne: ".ui-resizable-ne",nw: ".ui-resizable-nw"});
            if (this.handles.constructor === String) {
                if (this.handles === "all") {
                    this.handles = "n,e,s,w,se,sw,ne,nw";
                }
                n = this.handles.split(",");
                this.handles = {};
                for (i = 0; i < n.length; i++) {
                    handle = $.trim(n[i]);
                    hname = "ui-resizable-" + handle;
                    axis = $("<div class='ui-resizable-handle " + hname + "'></div>");
                    axis.css({zIndex: o.zIndex});
                    if ("se" === handle) {
                        axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
                    }
                    this.handles[handle] = ".ui-resizable-" + handle;
                    this.element.append(axis);
                }
            }
            this._renderAxis = function(target) {
                var i, axis, padPos, padWrapper;
                target = target || this.element;
                for (i in this.handles) {
                    if (this.handles[i].constructor === String) {
                        this.handles[i] = $(this.handles[i], this.element).show();
                    }
                    if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
                        axis = $(this.handles[i], this.element);
                        padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();
                        padPos = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join("");
                        target.css(padPos, padWrapper);
                        this._proportionallyResize();
                    }
                    if (!$(this.handles[i]).length) {
                        continue;
                    }
                }
            };
            this._renderAxis(this.element);
            this._handles = $(".ui-resizable-handle", this.element).disableSelection();
            this._handles.mouseover(function() {
                if (!that.resizing) {
                    if (this.className) {
                        axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
                    }
                    that.axis = axis && axis[1] ? axis[1] : "se";
                }
            });
            if (o.autoHide) {
                this._handles.hide();
                $(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                    if (o.disabled) {
                        return;
                    }
                    $(this).removeClass("ui-resizable-autohide");
                    that._handles.show();
                }).mouseleave(function() {
                    if (o.disabled) {
                        return;
                    }
                    if (!that.resizing) {
                        $(this).addClass("ui-resizable-autohide");
                        that._handles.hide();
                    }
                });
            }
            this._mouseInit();
        },_destroy: function() {
            this._mouseDestroy();
            var wrapper, _destroy = function(exp) {
                $(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            };
            if (this.elementIsWrapper) {
                _destroy(this.element);
                wrapper = this.element;
                this.originalElement.css({position: wrapper.css("position"),width: wrapper.outerWidth(),height: wrapper.outerHeight(),top: wrapper.css("top"),left: wrapper.css("left")}).insertAfter(wrapper);
                wrapper.remove();
            }
            this.originalElement.css("resize", this.originalResizeStyle);
            _destroy(this.originalElement);
            return this;
        },_mouseCapture: function(event) {
            var i, handle, capture = false;
            for (i in this.handles) {
                handle = $(this.handles[i])[0];
                if (handle === event.target || $.contains(handle, event.target)) {
                    capture = true;
                }
            }
            return !this.options.disabled && capture;
        },_mouseStart: function(event) {
            var curleft, curtop, cursor, o = this.options, iniPos = this.element.position(), el = this.element;
            this.resizing = true;
            if ((/absolute/).test(el.css("position"))) {
                el.css({position: "absolute",top: el.css("top"),left: el.css("left")});
            } else {
                if (el.is(".ui-draggable")) {
                    el.css({position: "absolute",top: iniPos.top,left: iniPos.left});
                }
            }
            this._renderProxy();
            curleft = num(this.helper.css("left"));
            curtop = num(this.helper.css("top"));
            if (o.containment) {
                curleft += $(o.containment).scrollLeft() || 0;
                curtop += $(o.containment).scrollTop() || 0;
            }
            this.offset = this.helper.offset();
            this.position = {left: curleft,top: curtop};
            this.size = this._helper ? {width: el.outerWidth(),height: el.outerHeight()} : {width: el.width(),height: el.height()};
            this.originalSize = this._helper ? {width: el.outerWidth(),height: el.outerHeight()} : {width: el.width(),height: el.height()};
            this.originalPosition = {left: curleft,top: curtop};
            this.sizeDiff = {width: el.outerWidth() - el.width(),height: el.outerHeight() - el.height()};
            this.originalMousePosition = {left: event.pageX,top: event.pageY};
            this.aspectRatio = (typeof o.aspectRatio === "number") ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);
            cursor = $(".ui-resizable-" + this.axis).css("cursor");
            $("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);
            el.addClass("ui-resizable-resizing");
            this._propagate("start", event);
            return true;
        },_mouseDrag: function(event) {
            var data, el = this.helper, props = {}, smp = this.originalMousePosition, a = this.axis, prevTop = this.position.top, prevLeft = this.position.left, prevWidth = this.size.width, prevHeight = this.size.height, dx = (event.pageX - smp.left) || 0, dy = (event.pageY - smp.top) || 0, trigger = this._change[a];
            if (!trigger) {
                return false;
            }
            data = trigger.apply(this, [event, dx, dy]);
            this._updateVirtualBoundaries(event.shiftKey);
            if (this._aspectRatio || event.shiftKey) {
                data = this._updateRatio(data, event);
            }
            data = this._respectSize(data, event);
            this._updateCache(data);
            this._propagate("resize", event);
            if (this.position.top !== prevTop) {
                props.top = this.position.top + "px";
            }
            if (this.position.left !== prevLeft) {
                props.left = this.position.left + "px";
            }
            if (this.size.width !== prevWidth) {
                props.width = this.size.width + "px";
            }
            if (this.size.height !== prevHeight) {
                props.height = this.size.height + "px";
            }
            el.css(props);
            if (!this._helper && this._proportionallyResizeElements.length) {
                this._proportionallyResize();
            }
            if (!$.isEmptyObject(props)) {
                this._trigger("resize", event, this.ui());
            }
            return false;
        },_mouseStop: function(event) {
            this.resizing = false;
            var pr, ista, soffseth, soffsetw, s, left, top, o = this.options, that = this;
            if (this._helper) {
                pr = this._proportionallyResizeElements;
                ista = pr.length && (/textarea/i).test(pr[0].nodeName);
                soffseth = ista && $.ui.hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height;
                soffsetw = ista ? 0 : that.sizeDiff.width;
                s = {width: (that.helper.width() - soffsetw),height: (that.helper.height() - soffseth)};
                left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null;
                top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;
                if (!o.animate) {
                    this.element.css($.extend(s, {top: top,left: left}));
                }
                that.helper.height(that.size.height);
                that.helper.width(that.size.width);
                if (this._helper && !o.animate) {
                    this._proportionallyResize();
                }
            }
            $("body").css("cursor", "auto");
            this.element.removeClass("ui-resizable-resizing");
            this._propagate("stop", event);
            if (this._helper) {
                this.helper.remove();
            }
            return false;
        },_updateVirtualBoundaries: function(forceAspectRatio) {
            var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b, o = this.options;
            b = {minWidth: isNumber(o.minWidth) ? o.minWidth : 0,maxWidth: isNumber(o.maxWidth) ? o.maxWidth : Infinity,minHeight: isNumber(o.minHeight) ? o.minHeight : 0,maxHeight: isNumber(o.maxHeight) ? o.maxHeight : Infinity};
            if (this._aspectRatio || forceAspectRatio) {
                pMinWidth = b.minHeight * this.aspectRatio;
                pMinHeight = b.minWidth / this.aspectRatio;
                pMaxWidth = b.maxHeight * this.aspectRatio;
                pMaxHeight = b.maxWidth / this.aspectRatio;
                if (pMinWidth > b.minWidth) {
                    b.minWidth = pMinWidth;
                }
                if (pMinHeight > b.minHeight) {
                    b.minHeight = pMinHeight;
                }
                if (pMaxWidth < b.maxWidth) {
                    b.maxWidth = pMaxWidth;
                }
                if (pMaxHeight < b.maxHeight) {
                    b.maxHeight = pMaxHeight;
                }
            }
            this._vBoundaries = b;
        },_updateCache: function(data) {
            this.offset = this.helper.offset();
            if (isNumber(data.left)) {
                this.position.left = data.left;
            }
            if (isNumber(data.top)) {
                this.position.top = data.top;
            }
            if (isNumber(data.height)) {
                this.size.height = data.height;
            }
            if (isNumber(data.width)) {
                this.size.width = data.width;
            }
        },_updateRatio: function(data) {
            var cpos = this.position, csize = this.size, a = this.axis;
            if (isNumber(data.height)) {
                data.width = (data.height * this.aspectRatio);
            } else {
                if (isNumber(data.width)) {
                    data.height = (data.width / this.aspectRatio);
                }
            }
            if (a === "sw") {
                data.left = cpos.left + (csize.width - data.width);
                data.top = null;
            }
            if (a === "nw") {
                data.top = cpos.top + (csize.height - data.height);
                data.left = cpos.left + (csize.width - data.width);
            }
            return data;
        },_respectSize: function(data) {
            var o = this._vBoundaries, a = this.axis, ismaxw = isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width), ismaxh = isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height), isminw = isNumber(data.width) && o.minWidth && (o.minWidth > data.width), isminh = isNumber(data.height) && o.minHeight && (o.minHeight > data.height), dw = this.originalPosition.left + this.originalSize.width, dh = this.position.top + this.size.height, cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
            if (isminw) {
                data.width = o.minWidth;
            }
            if (isminh) {
                data.height = o.minHeight;
            }
            if (ismaxw) {
                data.width = o.maxWidth;
            }
            if (ismaxh) {
                data.height = o.maxHeight;
            }
            if (isminw && cw) {
                data.left = dw - o.minWidth;
            }
            if (ismaxw && cw) {
                data.left = dw - o.maxWidth;
            }
            if (isminh && ch) {
                data.top = dh - o.minHeight;
            }
            if (ismaxh && ch) {
                data.top = dh - o.maxHeight;
            }
            if (!data.width && !data.height && !data.left && data.top) {
                data.top = null;
            } else {
                if (!data.width && !data.height && !data.top && data.left) {
                    data.left = null;
                }
            }
            return data;
        },_proportionallyResize: function() {
            if (!this._proportionallyResizeElements.length) {
                return;
            }
            var i, j, borders, paddings, prel, element = this.helper || this.element;
            for (i = 0; i < this._proportionallyResizeElements.length; i++) {
                prel = this._proportionallyResizeElements[i];
                if (!this.borderDif) {
                    this.borderDif = [];
                    borders = [prel.css("borderTopWidth"), prel.css("borderRightWidth"), prel.css("borderBottomWidth"), prel.css("borderLeftWidth")];
                    paddings = [prel.css("paddingTop"), prel.css("paddingRight"), prel.css("paddingBottom"), prel.css("paddingLeft")];
                    for (j = 0; j < borders.length; j++) {
                        this.borderDif[j] = (parseInt(borders[j], 10) || 0) + (parseInt(paddings[j], 10) || 0);
                    }
                }
                prel.css({height: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,width: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0});
            }
        },_renderProxy: function() {
            var el = this.element, o = this.options;
            this.elementOffset = el.offset();
            if (this._helper) {
                this.helper = this.helper || $("<div style='overflow:hidden;'></div>");
                this.helper.addClass(this._helper).css({width: this.element.outerWidth() - 1,height: this.element.outerHeight() - 1,position: "absolute",left: this.elementOffset.left + "px",top: this.elementOffset.top + "px",zIndex: ++o.zIndex});
                this.helper.appendTo("body").disableSelection();
            } else {
                this.helper = this.element;
            }
        },_change: {e: function(event, dx) {
                return {width: this.originalSize.width + dx};
            },w: function(event, dx) {
                var cs = this.originalSize, sp = this.originalPosition;
                return {left: sp.left + dx,width: cs.width - dx};
            },n: function(event, dx, dy) {
                var cs = this.originalSize, sp = this.originalPosition;
                return {top: sp.top + dy,height: cs.height - dy};
            },s: function(event, dx, dy) {
                return {height: this.originalSize.height + dy};
            },se: function(event, dx, dy) {
                return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
            },sw: function(event, dx, dy) {
                return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
            },ne: function(event, dx, dy) {
                return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
            },nw: function(event, dx, dy) {
                return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
            }},_propagate: function(n, event) {
            $.ui.plugin.call(this, n, [event, this.ui()]);
            (n !== "resize" && this._trigger(n, event, this.ui()));
        },plugins: {},ui: function() {
            return {originalElement: this.originalElement,element: this.element,helper: this.helper,position: this.position,size: this.size,originalSize: this.originalSize,originalPosition: this.originalPosition};
        }});
    $.ui.plugin.add("resizable", "animate", {stop: function(event) {
            var that = $(this).data("ui-resizable"), o = that.options, pr = that._proportionallyResizeElements, ista = pr.length && (/textarea/i).test(pr[0].nodeName), soffseth = ista && $.ui.hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height, soffsetw = ista ? 0 : that.sizeDiff.width, style = {width: (that.size.width - soffsetw),height: (that.size.height - soffseth)}, left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null, top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;
            that.element.animate($.extend(style, top && left ? {top: top,left: left} : {}), {duration: o.animateDuration,easing: o.animateEasing,step: function() {
                    var data = {width: parseInt(that.element.css("width"), 10),height: parseInt(that.element.css("height"), 10),top: parseInt(that.element.css("top"), 10),left: parseInt(that.element.css("left"), 10)};
                    if (pr && pr.length) {
                        $(pr[0]).css({width: data.width,height: data.height});
                    }
                    that._updateCache(data);
                    that._propagate("resize", event);
                }});
        }});
    $.ui.plugin.add("resizable", "containment", {start: function() {
            var element, p, co, ch, cw, width, height, that = $(this).data("ui-resizable"), o = that.options, el = that.element, oc = o.containment, ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;
            if (!ce) {
                return;
            }
            that.containerElement = $(ce);
            if (/document/.test(oc) || oc === document) {
                that.containerOffset = {left: 0,top: 0};
                that.containerPosition = {left: 0,top: 0};
                that.parentData = {element: $(document),left: 0,top: 0,width: $(document).width(),height: $(document).height() || document.body.parentNode.scrollHeight};
            } else {
                element = $(ce);
                p = [];
                $(["Top", "Right", "Left", "Bottom"]).each(function(i, name) {
                    p[i] = num(element.css("padding" + name));
                });
                that.containerOffset = element.offset();
                that.containerPosition = element.position();
                that.containerSize = {height: (element.innerHeight() - p[3]),width: (element.innerWidth() - p[1])};
                co = that.containerOffset;
                ch = that.containerSize.height;
                cw = that.containerSize.width;
                width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw);
                height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);
                that.parentData = {element: ce,left: co.left,top: co.top,width: width,height: height};
            }
        },resize: function(event) {
            var woset, hoset, isParent, isOffsetRelative, that = $(this).data("ui-resizable"), o = that.options, co = that.containerOffset, cp = that.position, pRatio = that._aspectRatio || event.shiftKey, cop = {top: 0,left: 0}, ce = that.containerElement;
            if (ce[0] !== document && (/static/).test(ce.css("position"))) {
                cop = co;
            }
            if (cp.left < (that._helper ? co.left : 0)) {
                that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
                if (pRatio) {
                    that.size.height = that.size.width / that.aspectRatio;
                }
                that.position.left = o.helper ? co.left : 0;
            }
            if (cp.top < (that._helper ? co.top : 0)) {
                that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
                if (pRatio) {
                    that.size.width = that.size.height * that.aspectRatio;
                }
                that.position.top = that._helper ? co.top : 0;
            }
            that.offset.left = that.parentData.left + that.position.left;
            that.offset.top = that.parentData.top + that.position.top;
            woset = Math.abs((that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width);
            hoset = Math.abs((that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height);
            isParent = that.containerElement.get(0) === that.element.parent().get(0);
            isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));
            if (isParent && isOffsetRelative) {
                woset -= that.parentData.left;
            }
            if (woset + that.size.width >= that.parentData.width) {
                that.size.width = that.parentData.width - woset;
                if (pRatio) {
                    that.size.height = that.size.width / that.aspectRatio;
                }
            }
            if (hoset + that.size.height >= that.parentData.height) {
                that.size.height = that.parentData.height - hoset;
                if (pRatio) {
                    that.size.width = that.size.height * that.aspectRatio;
                }
            }
        },stop: function() {
            var that = $(this).data("ui-resizable"), o = that.options, co = that.containerOffset, cop = that.containerPosition, ce = that.containerElement, helper = $(that.helper), ho = helper.offset(), w = helper.outerWidth() - that.sizeDiff.width, h = helper.outerHeight() - that.sizeDiff.height;
            if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
                $(this).css({left: ho.left - cop.left - co.left,width: w,height: h});
            }
            if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
                $(this).css({left: ho.left - cop.left - co.left,width: w,height: h});
            }
        }});
    $.ui.plugin.add("resizable", "alsoResize", {start: function() {
            var that = $(this).data("ui-resizable"), o = that.options, _store = function(exp) {
                $(exp).each(function() {
                    var el = $(this);
                    el.data("ui-resizable-alsoresize", {width: parseInt(el.width(), 10),height: parseInt(el.height(), 10),left: parseInt(el.css("left"), 10),top: parseInt(el.css("top"), 10)});
                });
            };
            if (typeof (o.alsoResize) === "object" && !o.alsoResize.parentNode) {
                if (o.alsoResize.length) {
                    o.alsoResize = o.alsoResize[0];
                    _store(o.alsoResize);
                } else {
                    $.each(o.alsoResize, function(exp) {
                        _store(exp);
                    });
                }
            } else {
                _store(o.alsoResize);
            }
        },resize: function(event, ui) {
            var that = $(this).data("ui-resizable"), o = that.options, os = that.originalSize, op = that.originalPosition, delta = {height: (that.size.height - os.height) || 0,width: (that.size.width - os.width) || 0,top: (that.position.top - op.top) || 0,left: (that.position.left - op.left) || 0}, _alsoResize = function(exp, c) {
                $(exp).each(function() {
                    var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {}, css = c && c.length ? c : el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    $.each(css, function(i, prop) {
                        var sum = (start[prop] || 0) + (delta[prop] || 0);
                        if (sum && sum >= 0) {
                            style[prop] = sum || null;
                        }
                    });
                    el.css(style);
                });
            };
            if (typeof (o.alsoResize) === "object" && !o.alsoResize.nodeType) {
                $.each(o.alsoResize, function(exp, c) {
                    _alsoResize(exp, c);
                });
            } else {
                _alsoResize(o.alsoResize);
            }
        },stop: function() {
            $(this).removeData("resizable-alsoresize");
        }});
    $.ui.plugin.add("resizable", "ghost", {start: function() {
            var that = $(this).data("ui-resizable"), o = that.options, cs = that.size;
            that.ghost = that.originalElement.clone();
            that.ghost.css({opacity: 0.25,display: "block",position: "relative",height: cs.height,width: cs.width,margin: 0,left: 0,top: 0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost === "string" ? o.ghost : "");
            that.ghost.appendTo(that.helper);
        },resize: function() {
            var that = $(this).data("ui-resizable");
            if (that.ghost) {
                that.ghost.css({position: "relative",height: that.size.height,width: that.size.width});
            }
        },stop: function() {
            var that = $(this).data("ui-resizable");
            if (that.ghost && that.helper) {
                that.helper.get(0).removeChild(that.ghost.get(0));
            }
        }});
    $.ui.plugin.add("resizable", "grid", {resize: function() {
            var that = $(this).data("ui-resizable"), o = that.options, cs = that.size, os = that.originalSize, op = that.originalPosition, a = that.axis, grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid, gridX = (grid[0] || 1), gridY = (grid[1] || 1), ox = Math.round((cs.width - os.width) / gridX) * gridX, oy = Math.round((cs.height - os.height) / gridY) * gridY, newWidth = os.width + ox, newHeight = os.height + oy, isMaxWidth = o.maxWidth && (o.maxWidth < newWidth), isMaxHeight = o.maxHeight && (o.maxHeight < newHeight), isMinWidth = o.minWidth && (o.minWidth > newWidth), isMinHeight = o.minHeight && (o.minHeight > newHeight);
            o.grid = grid;
            if (isMinWidth) {
                newWidth = newWidth + gridX;
            }
            if (isMinHeight) {
                newHeight = newHeight + gridY;
            }
            if (isMaxWidth) {
                newWidth = newWidth - gridX;
            }
            if (isMaxHeight) {
                newHeight = newHeight - gridY;
            }
            if (/^(se|s|e)$/.test(a)) {
                that.size.width = newWidth;
                that.size.height = newHeight;
            } else {
                if (/^(ne)$/.test(a)) {
                    that.size.width = newWidth;
                    that.size.height = newHeight;
                    that.position.top = op.top - oy;
                } else {
                    if (/^(sw)$/.test(a)) {
                        that.size.width = newWidth;
                        that.size.height = newHeight;
                        that.position.left = op.left - ox;
                    } else {
                        that.size.width = newWidth;
                        that.size.height = newHeight;
                        that.position.top = op.top - oy;
                        that.position.left = op.left - ox;
                    }
                }
            }
        }});
})(jQuery);
(function($, undefined) {
    $.widget("ui.selectable", $.ui.mouse, {version: "1.10.3",options: {appendTo: "body",autoRefresh: true,distance: 0,filter: "*",tolerance: "touch",selected: null,selecting: null,start: null,stop: null,unselected: null,unselecting: null},_create: function() {
            var selectees, that = this;
            this.element.addClass("ui-selectable");
            this.dragged = false;
            this.refresh = function() {
                selectees = $(that.options.filter, that.element[0]);
                selectees.addClass("ui-selectee");
                selectees.each(function() {
                    var $this = $(this), pos = $this.offset();
                    $.data(this, "selectable-item", {element: this,$element: $this,left: pos.left,top: pos.top,right: pos.left + $this.outerWidth(),bottom: pos.top + $this.outerHeight(),startselected: false,selected: $this.hasClass("ui-selected"),selecting: $this.hasClass("ui-selecting"),unselecting: $this.hasClass("ui-unselecting")});
                });
            };
            this.refresh();
            this.selectees = selectees.addClass("ui-selectee");
            this._mouseInit();
            this.helper = $("<div class='ui-selectable-helper'></div>");
        },_destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item");
            this.element.removeClass("ui-selectable ui-selectable-disabled");
            this._mouseDestroy();
        },_mouseStart: function(event) {
            var that = this, options = this.options;
            this.opos = [event.pageX, event.pageY];
            if (this.options.disabled) {
                return;
            }
            this.selectees = $(options.filter, this.element[0]);
            this._trigger("start", event);
            $(options.appendTo).append(this.helper);
            this.helper.css({left: event.pageX,top: event.pageY,width: 0,height: 0});
            if (options.autoRefresh) {
                this.refresh();
            }
            this.selectees.filter(".ui-selected").each(function() {
                var selectee = $.data(this, "selectable-item");
                selectee.startselected = true;
                if (!event.metaKey && !event.ctrlKey) {
                    selectee.$element.removeClass("ui-selected");
                    selectee.selected = false;
                    selectee.$element.addClass("ui-unselecting");
                    selectee.unselecting = true;
                    that._trigger("unselecting", event, {unselecting: selectee.element});
                }
            });
            $(event.target).parents().addBack().each(function() {
                var doSelect, selectee = $.data(this, "selectable-item");
                if (selectee) {
                    doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
                    selectee.$element.removeClass(doSelect ? "ui-unselecting" : "ui-selected").addClass(doSelect ? "ui-selecting" : "ui-unselecting");
                    selectee.unselecting = !doSelect;
                    selectee.selecting = doSelect;
                    selectee.selected = doSelect;
                    if (doSelect) {
                        that._trigger("selecting", event, {selecting: selectee.element});
                    } else {
                        that._trigger("unselecting", event, {unselecting: selectee.element});
                    }
                    return false;
                }
            });
        },_mouseDrag: function(event) {
            this.dragged = true;
            if (this.options.disabled) {
                return;
            }
            var tmp, that = this, options = this.options, x1 = this.opos[0], y1 = this.opos[1], x2 = event.pageX, y2 = event.pageY;
            if (x1 > x2) {
                tmp = x2;
                x2 = x1;
                x1 = tmp;
            }
            if (y1 > y2) {
                tmp = y2;
                y2 = y1;
                y1 = tmp;
            }
            this.helper.css({left: x1,top: y1,width: x2 - x1,height: y2 - y1});
            this.selectees.each(function() {
                var selectee = $.data(this, "selectable-item"), hit = false;
                if (!selectee || selectee.element === that.element[0]) {
                    return;
                }
                if (options.tolerance === "touch") {
                    hit = (!(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1));
                } else {
                    if (options.tolerance === "fit") {
                        hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
                    }
                }
                if (hit) {
                    if (selectee.selected) {
                        selectee.$element.removeClass("ui-selected");
                        selectee.selected = false;
                    }
                    if (selectee.unselecting) {
                        selectee.$element.removeClass("ui-unselecting");
                        selectee.unselecting = false;
                    }
                    if (!selectee.selecting) {
                        selectee.$element.addClass("ui-selecting");
                        selectee.selecting = true;
                        that._trigger("selecting", event, {selecting: selectee.element});
                    }
                } else {
                    if (selectee.selecting) {
                        if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
                            selectee.$element.removeClass("ui-selecting");
                            selectee.selecting = false;
                            selectee.$element.addClass("ui-selected");
                            selectee.selected = true;
                        } else {
                            selectee.$element.removeClass("ui-selecting");
                            selectee.selecting = false;
                            if (selectee.startselected) {
                                selectee.$element.addClass("ui-unselecting");
                                selectee.unselecting = true;
                            }
                            that._trigger("unselecting", event, {unselecting: selectee.element});
                        }
                    }
                    if (selectee.selected) {
                        if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
                            selectee.$element.removeClass("ui-selected");
                            selectee.selected = false;
                            selectee.$element.addClass("ui-unselecting");
                            selectee.unselecting = true;
                            that._trigger("unselecting", event, {unselecting: selectee.element});
                        }
                    }
                }
            });
            return false;
        },_mouseStop: function(event) {
            var that = this;
            this.dragged = false;
            $(".ui-unselecting", this.element[0]).each(function() {
                var selectee = $.data(this, "selectable-item");
                selectee.$element.removeClass("ui-unselecting");
                selectee.unselecting = false;
                selectee.startselected = false;
                that._trigger("unselected", event, {unselected: selectee.element});
            });
            $(".ui-selecting", this.element[0]).each(function() {
                var selectee = $.data(this, "selectable-item");
                selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
                selectee.selecting = false;
                selectee.selected = true;
                selectee.startselected = true;
                that._trigger("selected", event, {selected: selectee.element});
            });
            this._trigger("stop", event);
            this.helper.remove();
            return false;
        }});
})(jQuery);
(function($, undefined) {
    function isOverAxis(x, reference, size) {
        return (x > reference) && (x < (reference + size));
    }
    function isFloating(item) {
        return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
    }
    $.widget("ui.sortable", $.ui.mouse, {version: "1.10.3",widgetEventPrefix: "sort",ready: false,options: {appendTo: "parent",axis: false,connectWith: false,containment: false,cursor: "auto",cursorAt: false,dropOnEmpty: true,forcePlaceholderSize: false,forceHelperSize: false,grid: false,handle: false,helper: "original",items: "> *",opacity: false,placeholder: false,revert: false,scroll: true,scrollSensitivity: 20,scrollSpeed: 20,scope: "default",tolerance: "intersect",zIndex: 1000,activate: null,beforeStop: null,change: null,deactivate: null,out: null,over: null,receive: null,remove: null,sort: null,start: null,stop: null,update: null},_create: function() {
            var o = this.options;
            this.containerCache = {};
            this.element.addClass("ui-sortable");
            this.refresh();
            this.floating = this.items.length ? o.axis === "x" || isFloating(this.items[0].item) : false;
            this.offset = this.element.offset();
            this._mouseInit();
            this.ready = true;
        },_destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled");
            this._mouseDestroy();
            for (var i = this.items.length - 1; i >= 0; i--) {
                this.items[i].item.removeData(this.widgetName + "-item");
            }
            return this;
        },_setOption: function(key, value) {
            if (key === "disabled") {
                this.options[key] = value;
                this.widget().toggleClass("ui-sortable-disabled", !!value);
            } else {
                $.Widget.prototype._setOption.apply(this, arguments);
            }
        },_mouseCapture: function(event, overrideHandle) {
            var currentItem = null, validHandle = false, that = this;
            if (this.reverting) {
                return false;
            }
            if (this.options.disabled || this.options.type === "static") {
                return false;
            }
            this._refreshItems(event);
            $(event.target).parents().each(function() {
                if ($.data(this, that.widgetName + "-item") === that) {
                    currentItem = $(this);
                    return false;
                }
            });
            if ($.data(event.target, that.widgetName + "-item") === that) {
                currentItem = $(event.target);
            }
            if (!currentItem) {
                return false;
            }
            if (this.options.handle && !overrideHandle) {
                $(this.options.handle, currentItem).find("*").addBack().each(function() {
                    if (this === event.target) {
                        validHandle = true;
                    }
                });
                if (!validHandle) {
                    return false;
                }
            }
            this.currentItem = currentItem;
            this._removeCurrentsFromItems();
            return true;
        },_mouseStart: function(event, overrideHandle, noActivation) {
            var i, body, o = this.options;
            this.currentContainer = this;
            this.refreshPositions();
            this.helper = this._createHelper(event);
            this._cacheHelperProportions();
            this._cacheMargins();
            this.scrollParent = this.helper.scrollParent();
            this.offset = this.currentItem.offset();
            this.offset = {top: this.offset.top - this.margins.top,left: this.offset.left - this.margins.left};
            $.extend(this.offset, {click: {left: event.pageX - this.offset.left,top: event.pageY - this.offset.top},parent: this._getParentOffset(),relative: this._getRelativeOffset()});
            this.helper.css("position", "absolute");
            this.cssPosition = this.helper.css("position");
            this.originalPosition = this._generatePosition(event);
            this.originalPageX = event.pageX;
            this.originalPageY = event.pageY;
            (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
            this.domPosition = {prev: this.currentItem.prev()[0],parent: this.currentItem.parent()[0]};
            if (this.helper[0] !== this.currentItem[0]) {
                this.currentItem.hide();
            }
            this._createPlaceholder();
            if (o.containment) {
                this._setContainment();
            }
            if (o.cursor && o.cursor !== "auto") {
                body = this.document.find("body");
                this.storedCursor = body.css("cursor");
                body.css("cursor", o.cursor);
                this.storedStylesheet = $("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(body);
            }
            if (o.opacity) {
                if (this.helper.css("opacity")) {
                    this._storedOpacity = this.helper.css("opacity");
                }
                this.helper.css("opacity", o.opacity);
            }
            if (o.zIndex) {
                if (this.helper.css("zIndex")) {
                    this._storedZIndex = this.helper.css("zIndex");
                }
                this.helper.css("zIndex", o.zIndex);
            }
            if (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                this.overflowOffset = this.scrollParent.offset();
            }
            this._trigger("start", event, this._uiHash());
            if (!this._preserveHelperProportions) {
                this._cacheHelperProportions();
            }
            if (!noActivation) {
                for (i = this.containers.length - 1; i >= 0; i--) {
                    this.containers[i]._trigger("activate", event, this._uiHash(this));
                }
            }
            if ($.ui.ddmanager) {
                $.ui.ddmanager.current = this;
            }
            if ($.ui.ddmanager && !o.dropBehaviour) {
                $.ui.ddmanager.prepareOffsets(this, event);
            }
            this.dragging = true;
            this.helper.addClass("ui-sortable-helper");
            this._mouseDrag(event);
            return true;
        },_mouseDrag: function(event) {
            var i, item, itemElement, intersection, o = this.options, scrolled = false;
            this.position = this._generatePosition(event);
            this.positionAbs = this._convertPositionTo("absolute");
            if (!this.lastPositionAbs) {
                this.lastPositionAbs = this.positionAbs;
            }
            if (this.options.scroll) {
                if (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                    if ((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
                        this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
                    } else {
                        if (event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
                            this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
                        }
                    }
                    if ((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
                        this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
                    } else {
                        if (event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
                            this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
                        }
                    }
                } else {
                    if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
                        scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                    } else {
                        if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
                        }
                    }
                    if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
                        scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                    } else {
                        if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
                        }
                    }
                }
                if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
                    $.ui.ddmanager.prepareOffsets(this, event);
                }
            }
            this.positionAbs = this._convertPositionTo("absolute");
            if (!this.options.axis || this.options.axis !== "y") {
                this.helper[0].style.left = this.position.left + "px";
            }
            if (!this.options.axis || this.options.axis !== "x") {
                this.helper[0].style.top = this.position.top + "px";
            }
            for (i = this.items.length - 1; i >= 0; i--) {
                item = this.items[i];
                itemElement = item.item[0];
                intersection = this._intersectsWithPointer(item);
                if (!intersection) {
                    continue;
                }
                if (item.instance !== this.currentContainer) {
                    continue;
                }
                if (itemElement !== this.currentItem[0] && this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement && !$.contains(this.placeholder[0], itemElement) && (this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)) {
                    this.direction = intersection === 1 ? "down" : "up";
                    if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
                        this._rearrange(event, item);
                    } else {
                        break;
                    }
                    this._trigger("change", event, this._uiHash());
                    break;
                }
            }
            this._contactContainers(event);
            if ($.ui.ddmanager) {
                $.ui.ddmanager.drag(this, event);
            }
            this._trigger("sort", event, this._uiHash());
            this.lastPositionAbs = this.positionAbs;
            return false;
        },_mouseStop: function(event, noPropagation) {
            if (!event) {
                return;
            }
            if ($.ui.ddmanager && !this.options.dropBehaviour) {
                $.ui.ddmanager.drop(this, event);
            }
            if (this.options.revert) {
                var that = this, cur = this.placeholder.offset(), axis = this.options.axis, animation = {};
                if (!axis || axis === "x") {
                    animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);
                }
                if (!axis || axis === "y") {
                    animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);
                }
                this.reverting = true;
                $(this.helper).animate(animation, parseInt(this.options.revert, 10) || 500, function() {
                    that._clear(event);
                });
            } else {
                this._clear(event, noPropagation);
            }
            return false;
        },cancel: function() {
            if (this.dragging) {
                this._mouseUp({target: null});
                if (this.options.helper === "original") {
                    this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
                } else {
                    this.currentItem.show();
                }
                for (var i = this.containers.length - 1; i >= 0; i--) {
                    this.containers[i]._trigger("deactivate", null, this._uiHash(this));
                    if (this.containers[i].containerCache.over) {
                        this.containers[i]._trigger("out", null, this._uiHash(this));
                        this.containers[i].containerCache.over = 0;
                    }
                }
            }
            if (this.placeholder) {
                if (this.placeholder[0].parentNode) {
                    this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                }
                if (this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
                    this.helper.remove();
                }
                $.extend(this, {helper: null,dragging: false,reverting: false,_noFinalSort: null});
                if (this.domPosition.prev) {
                    $(this.domPosition.prev).after(this.currentItem);
                } else {
                    $(this.domPosition.parent).prepend(this.currentItem);
                }
            }
            return this;
        },serialize: function(o) {
            var items = this._getItemsAsjQuery(o && o.connected), str = [];
            o = o || {};
            $(items).each(function() {
                var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
                if (res) {
                    str.push((o.key || res[1] + "[]") + "=" + (o.key && o.expression ? res[1] : res[2]));
                }
            });
            if (!str.length && o.key) {
                str.push(o.key + "=");
            }
            return str.join("&");
        },toArray: function(o) {
            var items = this._getItemsAsjQuery(o && o.connected), ret = [];
            o = o || {};
            items.each(function() {
                ret.push($(o.item || this).attr(o.attribute || "id") || "");
            });
            return ret;
        },_intersectsWith: function(item) {
            var x1 = this.positionAbs.left, x2 = x1 + this.helperProportions.width, y1 = this.positionAbs.top, y2 = y1 + this.helperProportions.height, l = item.left, r = l + item.width, t = item.top, b = t + item.height, dyClick = this.offset.click.top, dxClick = this.offset.click.left, isOverElementHeight = (this.options.axis === "x") || ((y1 + dyClick) > t && (y1 + dyClick) < b), isOverElementWidth = (this.options.axis === "y") || ((x1 + dxClick) > l && (x1 + dxClick) < r), isOverElement = isOverElementHeight && isOverElementWidth;
            if (this.options.tolerance === "pointer" || this.options.forcePointerForContainers || (this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])) {
                return isOverElement;
            } else {
                return (l < x1 + (this.helperProportions.width / 2) && x2 - (this.helperProportions.width / 2) < r && t < y1 + (this.helperProportions.height / 2) && y2 - (this.helperProportions.height / 2) < b);
            }
        },_intersectsWithPointer: function(item) {
            var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height), isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width), isOverElement = isOverElementHeight && isOverElementWidth, verticalDirection = this._getDragVerticalDirection(), horizontalDirection = this._getDragHorizontalDirection();
            if (!isOverElement) {
                return false;
            }
            return this.floating ? (((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1) : (verticalDirection && (verticalDirection === "down" ? 2 : 1));
        },_intersectsWithSides: function(item) {
            var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height / 2), item.height), isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width / 2), item.width), verticalDirection = this._getDragVerticalDirection(), horizontalDirection = this._getDragHorizontalDirection();
            if (this.floating && horizontalDirection) {
                return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
            } else {
                return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
            }
        },_getDragVerticalDirection: function() {
            var delta = this.positionAbs.top - this.lastPositionAbs.top;
            return delta !== 0 && (delta > 0 ? "down" : "up");
        },_getDragHorizontalDirection: function() {
            var delta = this.positionAbs.left - this.lastPositionAbs.left;
            return delta !== 0 && (delta > 0 ? "right" : "left");
        },refresh: function(event) {
            this._refreshItems(event);
            this.refreshPositions();
            return this;
        },_connectWith: function() {
            var options = this.options;
            return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
        },_getItemsAsjQuery: function(connected) {
            var i, j, cur, inst, items = [], queries = [], connectWith = this._connectWith();
            if (connectWith && connected) {
                for (i = connectWith.length - 1; i >= 0; i--) {
                    cur = $(connectWith[i]);
                    for (j = cur.length - 1; j >= 0; j--) {
                        inst = $.data(cur[j], this.widgetFullName);
                        if (inst && inst !== this && !inst.options.disabled) {
                            queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
                        }
                    }
                }
            }
            queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, {options: this.options,item: this.currentItem}) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
            for (i = queries.length - 1; i >= 0; i--) {
                queries[i][0].each(function() {
                    items.push(this);
                });
            }
            return $(items);
        },_removeCurrentsFromItems: function() {
            var list = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = $.grep(this.items, function(item) {
                for (var j = 0; j < list.length; j++) {
                    if (list[j] === item.item[0]) {
                        return false;
                    }
                }
                return true;
            });
        },_refreshItems: function(event) {
            this.items = [];
            this.containers = [this];
            var i, j, cur, inst, targetData, _queries, item, queriesLength, items = this.items, queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, {item: this.currentItem}) : $(this.options.items, this.element), this]], connectWith = this._connectWith();
            if (connectWith && this.ready) {
                for (i = connectWith.length - 1; i >= 0; i--) {
                    cur = $(connectWith[i]);
                    for (j = cur.length - 1; j >= 0; j--) {
                        inst = $.data(cur[j], this.widgetFullName);
                        if (inst && inst !== this && !inst.options.disabled) {
                            queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, {item: this.currentItem}) : $(inst.options.items, inst.element), inst]);
                            this.containers.push(inst);
                        }
                    }
                }
            }
            for (i = queries.length - 1; i >= 0; i--) {
                targetData = queries[i][1];
                _queries = queries[i][0];
                for (j = 0, queriesLength = _queries.length; j < queriesLength; j++) {
                    item = $(_queries[j]);
                    item.data(this.widgetName + "-item", targetData);
                    items.push({item: item,instance: targetData,width: 0,height: 0,left: 0,top: 0});
                }
            }
        },refreshPositions: function(fast) {
            if (this.offsetParent && this.helper) {
                this.offset.parent = this._getParentOffset();
            }
            var i, item, t, p;
            for (i = this.items.length - 1; i >= 0; i--) {
                item = this.items[i];
                if (item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
                    continue;
                }
                t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;
                if (!fast) {
                    item.width = t.outerWidth();
                    item.height = t.outerHeight();
                }
                p = t.offset();
                item.left = p.left;
                item.top = p.top;
            }
            if (this.options.custom && this.options.custom.refreshContainers) {
                this.options.custom.refreshContainers.call(this);
            } else {
                for (i = this.containers.length - 1; i >= 0; i--) {
                    p = this.containers[i].element.offset();
                    this.containers[i].containerCache.left = p.left;
                    this.containers[i].containerCache.top = p.top;
                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth();
                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
                }
            }
            return this;
        },_createPlaceholder: function(that) {
            that = that || this;
            var className, o = that.options;
            if (!o.placeholder || o.placeholder.constructor === String) {
                className = o.placeholder;
                o.placeholder = {element: function() {
                        var nodeName = that.currentItem[0].nodeName.toLowerCase(), element = $("<" + nodeName + ">", that.document[0]).addClass(className || that.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                        if (nodeName === "tr") {
                            that.currentItem.children().each(function() {
                                $("<td>&#160;</td>", that.document[0]).attr("colspan", $(this).attr("colspan") || 1).appendTo(element);
                            });
                        } else {
                            if (nodeName === "img") {
                                element.attr("src", that.currentItem.attr("src"));
                            }
                        }
                        if (!className) {
                            element.css("visibility", "hidden");
                        }
                        return element;
                    },update: function(container, p) {
                        if (className && !o.forcePlaceholderSize) {
                            return;
                        }
                        if (!p.height()) {
                            p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop") || 0, 10) - parseInt(that.currentItem.css("paddingBottom") || 0, 10));
                        }
                        if (!p.width()) {
                            p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft") || 0, 10) - parseInt(that.currentItem.css("paddingRight") || 0, 10));
                        }
                    }};
            }
            that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));
            that.currentItem.after(that.placeholder);
            o.placeholder.update(that, that.placeholder);
        },_contactContainers: function(event) {
            var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating, innermostContainer = null, innermostIndex = null;
            for (i = this.containers.length - 1; i >= 0; i--) {
                if ($.contains(this.currentItem[0], this.containers[i].element[0])) {
                    continue;
                }
                if (this._intersectsWith(this.containers[i].containerCache)) {
                    if (innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
                        continue;
                    }
                    innermostContainer = this.containers[i];
                    innermostIndex = i;
                } else {
                    if (this.containers[i].containerCache.over) {
                        this.containers[i]._trigger("out", event, this._uiHash(this));
                        this.containers[i].containerCache.over = 0;
                    }
                }
            }
            if (!innermostContainer) {
                return;
            }
            if (this.containers.length === 1) {
                if (!this.containers[innermostIndex].containerCache.over) {
                    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
                    this.containers[innermostIndex].containerCache.over = 1;
                }
            } else {
                dist = 10000;
                itemWithLeastDistance = null;
                floating = innermostContainer.floating || isFloating(this.currentItem);
                posProperty = floating ? "left" : "top";
                sizeProperty = floating ? "width" : "height";
                base = this.positionAbs[posProperty] + this.offset.click[posProperty];
                for (j = this.items.length - 1; j >= 0; j--) {
                    if (!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
                        continue;
                    }
                    if (this.items[j].item[0] === this.currentItem[0]) {
                        continue;
                    }
                    if (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {
                        continue;
                    }
                    cur = this.items[j].item.offset()[posProperty];
                    nearBottom = false;
                    if (Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)) {
                        nearBottom = true;
                        cur += this.items[j][sizeProperty];
                    }
                    if (Math.abs(cur - base) < dist) {
                        dist = Math.abs(cur - base);
                        itemWithLeastDistance = this.items[j];
                        this.direction = nearBottom ? "up" : "down";
                    }
                }
                if (!itemWithLeastDistance && !this.options.dropOnEmpty) {
                    return;
                }
                if (this.currentContainer === this.containers[innermostIndex]) {
                    return;
                }
                itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
                this._trigger("change", event, this._uiHash());
                this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
                this.currentContainer = this.containers[innermostIndex];
                this.options.placeholder.update(this.currentContainer, this.placeholder);
                this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
                this.containers[innermostIndex].containerCache.over = 1;
            }
        },_createHelper: function(event) {
            var o = this.options, helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);
            if (!helper.parents("body").length) {
                $(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
            }
            if (helper[0] === this.currentItem[0]) {
                this._storedCSS = {width: this.currentItem[0].style.width,height: this.currentItem[0].style.height,position: this.currentItem.css("position"),top: this.currentItem.css("top"),left: this.currentItem.css("left")};
            }
            if (!helper[0].style.width || o.forceHelperSize) {
                helper.width(this.currentItem.width());
            }
            if (!helper[0].style.height || o.forceHelperSize) {
                helper.height(this.currentItem.height());
            }
            return helper;
        },_adjustOffsetFromHelper: function(obj) {
            if (typeof obj === "string") {
                obj = obj.split(" ");
            }
            if ($.isArray(obj)) {
                obj = {left: +obj[0],top: +obj[1] || 0};
            }
            if ("left" in obj) {
                this.offset.click.left = obj.left + this.margins.left;
            }
            if ("right" in obj) {
                this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
            }
            if ("top" in obj) {
                this.offset.click.top = obj.top + this.margins.top;
            }
            if ("bottom" in obj) {
                this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
            }
        },_getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var po = this.offsetParent.offset();
            if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
                po.left += this.scrollParent.scrollLeft();
                po.top += this.scrollParent.scrollTop();
            }
            if (this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
                po = {top: 0,left: 0};
            }
            return {top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)};
        },_getRelativeOffset: function() {
            if (this.cssPosition === "relative") {
                var p = this.currentItem.position();
                return {top: p.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),left: p.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()};
            } else {
                return {top: 0,left: 0};
            }
        },_cacheMargins: function() {
            this.margins = {left: (parseInt(this.currentItem.css("marginLeft"), 10) || 0),top: (parseInt(this.currentItem.css("marginTop"), 10) || 0)};
        },_cacheHelperProportions: function() {
            this.helperProportions = {width: this.helper.outerWidth(),height: this.helper.outerHeight()};
        },_setContainment: function() {
            var ce, co, over, o = this.options;
            if (o.containment === "parent") {
                o.containment = this.helper[0].parentNode;
            }
            if (o.containment === "document" || o.containment === "window") {
                this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, $(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left, ($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
            }
            if (!(/^(document|window|parent)$/).test(o.containment)) {
                ce = $(o.containment)[0];
                co = $(o.containment).offset();
                over = ($(ce).css("overflow") !== "hidden");
                this.containment = [co.left + (parseInt($(ce).css("borderLeftWidth"), 10) || 0) + (parseInt($(ce).css("paddingLeft"), 10) || 0) - this.margins.left, co.top + (parseInt($(ce).css("borderTopWidth"), 10) || 0) + (parseInt($(ce).css("paddingTop"), 10) || 0) - this.margins.top, co.left + (over ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"), 10) || 0) - (parseInt($(ce).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, co.top + (over ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"), 10) || 0) - (parseInt($(ce).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top];
            }
        },_convertPositionTo: function(d, pos) {
            if (!pos) {
                pos = this.position;
            }
            var mod = d === "absolute" ? 1 : -1, scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
            return {top: (pos.top + this.offset.relative.top * mod + this.offset.parent.top * mod - ((this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : (scrollIsRootNode ? 0 : scroll.scrollTop())) * mod)),left: (pos.left + this.offset.relative.left * mod + this.offset.parent.left * mod - ((this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft()) * mod))};
        },_generatePosition: function(event) {
            var top, left, o = this.options, pageX = event.pageX, pageY = event.pageY, scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
            if (this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
                this.offset.relative = this._getRelativeOffset();
            }
            if (this.originalPosition) {
                if (this.containment) {
                    if (event.pageX - this.offset.click.left < this.containment[0]) {
                        pageX = this.containment[0] + this.offset.click.left;
                    }
                    if (event.pageY - this.offset.click.top < this.containment[1]) {
                        pageY = this.containment[1] + this.offset.click.top;
                    }
                    if (event.pageX - this.offset.click.left > this.containment[2]) {
                        pageX = this.containment[2] + this.offset.click.left;
                    }
                    if (event.pageY - this.offset.click.top > this.containment[3]) {
                        pageY = this.containment[3] + this.offset.click.top;
                    }
                }
                if (o.grid) {
                    top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
                    pageY = this.containment ? ((top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
                    left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
                    pageX = this.containment ? ((left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
                }
            }
            return {top: (pageY - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ((this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : (scrollIsRootNode ? 0 : scroll.scrollTop())))),left: (pageX - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ((this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft())))};
        },_rearrange: function(event, i, a, hardRefresh) {
            a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));
            this.counter = this.counter ? ++this.counter : 1;
            var counter = this.counter;
            this._delay(function() {
                if (counter === this.counter) {
                    this.refreshPositions(!hardRefresh);
                }
            });
        },_clear: function(event, noPropagation) {
            this.reverting = false;
            var i, delayedTriggers = [];
            if (!this._noFinalSort && this.currentItem.parent().length) {
                this.placeholder.before(this.currentItem);
            }
            this._noFinalSort = null;
            if (this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS) {
                    if (this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
                        this._storedCSS[i] = "";
                    }
                }
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else {
                this.currentItem.show();
            }
            if (this.fromOutside && !noPropagation) {
                delayedTriggers.push(function(event) {
                    this._trigger("receive", event, this._uiHash(this.fromOutside));
                });
            }
            if ((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
                delayedTriggers.push(function(event) {
                    this._trigger("update", event, this._uiHash());
                });
            }
            if (this !== this.currentContainer) {
                if (!noPropagation) {
                    delayedTriggers.push(function(event) {
                        this._trigger("remove", event, this._uiHash());
                    });
                    delayedTriggers.push((function(c) {
                        return function(event) {
                            c._trigger("receive", event, this._uiHash(this));
                        };
                    }).call(this, this.currentContainer));
                    delayedTriggers.push((function(c) {
                        return function(event) {
                            c._trigger("update", event, this._uiHash(this));
                        };
                    }).call(this, this.currentContainer));
                }
            }
            for (i = this.containers.length - 1; i >= 0; i--) {
                if (!noPropagation) {
                    delayedTriggers.push((function(c) {
                        return function(event) {
                            c._trigger("deactivate", event, this._uiHash(this));
                        };
                    }).call(this, this.containers[i]));
                }
                if (this.containers[i].containerCache.over) {
                    delayedTriggers.push((function(c) {
                        return function(event) {
                            c._trigger("out", event, this._uiHash(this));
                        };
                    }).call(this, this.containers[i]));
                    this.containers[i].containerCache.over = 0;
                }
            }
            if (this.storedCursor) {
                this.document.find("body").css("cursor", this.storedCursor);
                this.storedStylesheet.remove();
            }
            if (this._storedOpacity) {
                this.helper.css("opacity", this._storedOpacity);
            }
            if (this._storedZIndex) {
                this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
            }
            this.dragging = false;
            if (this.cancelHelperRemoval) {
                if (!noPropagation) {
                    this._trigger("beforeStop", event, this._uiHash());
                    for (i = 0; i < delayedTriggers.length; i++) {
                        delayedTriggers[i].call(this, event);
                    }
                    this._trigger("stop", event, this._uiHash());
                }
                this.fromOutside = false;
                return false;
            }
            if (!noPropagation) {
                this._trigger("beforeStop", event, this._uiHash());
            }
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
            if (this.helper[0] !== this.currentItem[0]) {
                this.helper.remove();
            }
            this.helper = null;
            if (!noPropagation) {
                for (i = 0; i < delayedTriggers.length; i++) {
                    delayedTriggers[i].call(this, event);
                }
                this._trigger("stop", event, this._uiHash());
            }
            this.fromOutside = false;
            return true;
        },_trigger: function() {
            if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
                this.cancel();
            }
        },_uiHash: function(_inst) {
            var inst = _inst || this;
            return {helper: inst.helper,placeholder: inst.placeholder || $([]),position: inst.position,originalPosition: inst.originalPosition,offset: inst.positionAbs,item: inst.currentItem,sender: _inst ? _inst.element : null};
        }});
})(jQuery);
(function($, undefined) {
    var uid = 0, hideProps = {}, showProps = {};
    hideProps.height = hideProps.paddingTop = hideProps.paddingBottom = hideProps.borderTopWidth = hideProps.borderBottomWidth = "hide";
    showProps.height = showProps.paddingTop = showProps.paddingBottom = showProps.borderTopWidth = showProps.borderBottomWidth = "show";
    $.widget("ui.accordion", {version: "1.10.3",options: {active: 0,animate: {},collapsible: false,event: "click",header: "> li > :first-child,> :not(li):even",heightStyle: "auto",icons: {activeHeader: "ui-icon-triangle-1-s",header: "ui-icon-triangle-1-e"},activate: null,beforeActivate: null},_create: function() {
            var options = this.options;
            this.prevShow = this.prevHide = $();
            this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist");
            if (!options.collapsible && (options.active === false || options.active == null)) {
                options.active = 0;
            }
            this._processPanels();
            if (options.active < 0) {
                options.active += this.headers.length;
            }
            this._refresh();
        },_getCreateEventData: function() {
            return {header: this.active,panel: !this.active.length ? $() : this.active.next(),content: !this.active.length ? $() : this.active.next()};
        },_createIcons: function() {
            var icons = this.options.icons;
            if (icons) {
                $("<span>").addClass("ui-accordion-header-icon ui-icon " + icons.header).prependTo(this.headers);
                this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);
                this.headers.addClass("ui-accordion-icons");
            }
        },_destroyIcons: function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();
        },_destroy: function() {
            var contents;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                if (/^ui-accordion/.test(this.id)) {
                    this.removeAttribute("id");
                }
            });
            this._destroyIcons();
            contents = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                if (/^ui-accordion/.test(this.id)) {
                    this.removeAttribute("id");
                }
            });
            if (this.options.heightStyle !== "content") {
                contents.css("height", "");
            }
        },_setOption: function(key, value) {
            if (key === "active") {
                this._activate(value);
                return;
            }
            if (key === "event") {
                if (this.options.event) {
                    this._off(this.headers, this.options.event);
                }
                this._setupEvents(value);
            }
            this._super(key, value);
            if (key === "collapsible" && !value && this.options.active === false) {
                this._activate(0);
            }
            if (key === "icons") {
                this._destroyIcons();
                if (value) {
                    this._createIcons();
                }
            }
            if (key === "disabled") {
                this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!value);
            }
        },_keydown: function(event) {
            if (event.altKey || event.ctrlKey) {
                return;
            }
            var keyCode = $.ui.keyCode, length = this.headers.length, currentIndex = this.headers.index(event.target), toFocus = false;
            switch (event.keyCode) {
                case keyCode.RIGHT:
                case keyCode.DOWN:
                    toFocus = this.headers[(currentIndex + 1) % length];
                    break;
                case keyCode.LEFT:
                case keyCode.UP:
                    toFocus = this.headers[(currentIndex - 1 + length) % length];
                    break;
                case keyCode.SPACE:
                case keyCode.ENTER:
                    this._eventHandler(event);
                    break;
                case keyCode.HOME:
                    toFocus = this.headers[0];
                    break;
                case keyCode.END:
                    toFocus = this.headers[length - 1];
                    break;
            }
            if (toFocus) {
                $(event.target).attr("tabIndex", -1);
                $(toFocus).attr("tabIndex", 0);
                toFocus.focus();
                event.preventDefault();
            }
        },_panelKeyDown: function(event) {
            if (event.keyCode === $.ui.keyCode.UP && event.ctrlKey) {
                $(event.currentTarget).prev().focus();
            }
        },refresh: function() {
            var options = this.options;
            this._processPanels();
            if ((options.active === false && options.collapsible === true) || !this.headers.length) {
                options.active = false;
                this.active = $();
            } else {
                if (options.active === false) {
                    this._activate(0);
                } else {
                    if (this.active.length && !$.contains(this.element[0], this.active[0])) {
                        if (this.headers.length === this.headers.find(".ui-state-disabled").length) {
                            options.active = false;
                            this.active = $();
                        } else {
                            this._activate(Math.max(0, options.active - 1));
                        }
                    } else {
                        options.active = this.headers.index(this.active);
                    }
                }
            }
            this._destroyIcons();
            this._refresh();
        },_processPanels: function() {
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
            this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();
        },_refresh: function() {
            var maxHeight, options = this.options, heightStyle = options.heightStyle, parent = this.element.parent(), accordionId = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++uid);
            this.active = this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");
            this.active.next().addClass("ui-accordion-content-active").show();
            this.headers.attr("role", "tab").each(function(i) {
                var header = $(this), headerId = header.attr("id"), panel = header.next(), panelId = panel.attr("id");
                if (!headerId) {
                    headerId = accordionId + "-header-" + i;
                    header.attr("id", headerId);
                }
                if (!panelId) {
                    panelId = accordionId + "-panel-" + i;
                    panel.attr("id", panelId);
                }
                header.attr("aria-controls", panelId);
                panel.attr("aria-labelledby", headerId);
            }).next().attr("role", "tabpanel");
            this.headers.not(this.active).attr({"aria-selected": "false",tabIndex: -1}).next().attr({"aria-expanded": "false","aria-hidden": "true"}).hide();
            if (!this.active.length) {
                this.headers.eq(0).attr("tabIndex", 0);
            } else {
                this.active.attr({"aria-selected": "true",tabIndex: 0}).next().attr({"aria-expanded": "true","aria-hidden": "false"});
            }
            this._createIcons();
            this._setupEvents(options.event);
            if (heightStyle === "fill") {
                maxHeight = parent.height();
                this.element.siblings(":visible").each(function() {
                    var elem = $(this), position = elem.css("position");
                    if (position === "absolute" || position === "fixed") {
                        return;
                    }
                    maxHeight -= elem.outerHeight(true);
                });
                this.headers.each(function() {
                    maxHeight -= $(this).outerHeight(true);
                });
                this.headers.next().each(function() {
                    $(this).height(Math.max(0, maxHeight - $(this).innerHeight() + $(this).height()));
                }).css("overflow", "auto");
            } else {
                if (heightStyle === "auto") {
                    maxHeight = 0;
                    this.headers.next().each(function() {
                        maxHeight = Math.max(maxHeight, $(this).css("height", "").height());
                    }).height(maxHeight);
                }
            }
        },_activate: function(index) {
            var active = this._findActive(index)[0];
            if (active === this.active[0]) {
                return;
            }
            active = active || this.active[0];
            this._eventHandler({target: active,currentTarget: active,preventDefault: $.noop});
        },_findActive: function(selector) {
            return typeof selector === "number" ? this.headers.eq(selector) : $();
        },_setupEvents: function(event) {
            var events = {keydown: "_keydown"};
            if (event) {
                $.each(event.split(" "), function(index, eventName) {
                    events[eventName] = "_eventHandler";
                });
            }
            this._off(this.headers.add(this.headers.next()));
            this._on(this.headers, events);
            this._on(this.headers.next(), {keydown: "_panelKeyDown"});
            this._hoverable(this.headers);
            this._focusable(this.headers);
        },_eventHandler: function(event) {
            var options = this.options, active = this.active, clicked = $(event.currentTarget), clickedIsActive = clicked[0] === active[0], collapsing = clickedIsActive && options.collapsible, toShow = collapsing ? $() : clicked.next(), toHide = active.next(), eventData = {oldHeader: active,oldPanel: toHide,newHeader: collapsing ? $() : clicked,newPanel: toShow};
            event.preventDefault();
            if ((clickedIsActive && !options.collapsible) || (this._trigger("beforeActivate", event, eventData) === false)) {
                return;
            }
            options.active = collapsing ? false : this.headers.index(clicked);
            this.active = clickedIsActive ? $() : clicked;
            this._toggle(eventData);
            active.removeClass("ui-accordion-header-active ui-state-active");
            if (options.icons) {
                active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);
            }
            if (!clickedIsActive) {
                clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");
                if (options.icons) {
                    clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);
                }
                clicked.next().addClass("ui-accordion-content-active");
            }
        },_toggle: function(data) {
            var toShow = data.newPanel, toHide = this.prevShow.length ? this.prevShow : data.oldPanel;
            this.prevShow.add(this.prevHide).stop(true, true);
            this.prevShow = toShow;
            this.prevHide = toHide;
            if (this.options.animate) {
                this._animate(toShow, toHide, data);
            } else {
                toHide.hide();
                toShow.show();
                this._toggleComplete(data);
            }
            toHide.attr({"aria-expanded": "false","aria-hidden": "true"});
            toHide.prev().attr("aria-selected", "false");
            if (toShow.length && toHide.length) {
                toHide.prev().attr("tabIndex", -1);
            } else {
                if (toShow.length) {
                    this.headers.filter(function() {
                        return $(this).attr("tabIndex") === 0;
                    }).attr("tabIndex", -1);
                }
            }
            toShow.attr({"aria-expanded": "true","aria-hidden": "false"}).prev().attr({"aria-selected": "true",tabIndex: 0});
        },_animate: function(toShow, toHide, data) {
            var total, easing, duration, that = this, adjust = 0, down = toShow.length && (!toHide.length || (toShow.index() < toHide.index())), animate = this.options.animate || {}, options = down && animate.down || animate, complete = function() {
                that._toggleComplete(data);
            };
            if (typeof options === "number") {
                duration = options;
            }
            if (typeof options === "string") {
                easing = options;
            }
            easing = easing || options.easing || animate.easing;
            duration = duration || options.duration || animate.duration;
            if (!toHide.length) {
                return toShow.animate(showProps, duration, easing, complete);
            }
            if (!toShow.length) {
                return toHide.animate(hideProps, duration, easing, complete);
            }
            total = toShow.show().outerHeight();
            toHide.animate(hideProps, {duration: duration,easing: easing,step: function(now, fx) {
                    fx.now = Math.round(now);
                }});
            toShow.hide().animate(showProps, {duration: duration,easing: easing,complete: complete,step: function(now, fx) {
                    fx.now = Math.round(now);
                    if (fx.prop !== "height") {
                        adjust += fx.now;
                    } else {
                        if (that.options.heightStyle !== "content") {
                            fx.now = Math.round(total - toHide.outerHeight() - adjust);
                            adjust = 0;
                        }
                    }
                }});
        },_toggleComplete: function(data) {
            var toHide = data.oldPanel;
            toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
            if (toHide.length) {
                toHide.parent()[0].className = toHide.parent()[0].className;
            }
            this._trigger("activate", null, data);
        }});
})(jQuery);
(function($, undefined) {
    var requestIndex = 0;
    $.widget("ui.autocomplete", {version: "1.10.3",defaultElement: "<input>",options: {appendTo: null,autoFocus: false,delay: 300,minLength: 1,position: {my: "left top",at: "left bottom",collision: "none"},source: null,change: null,close: null,focus: null,open: null,response: null,search: null,select: null},pending: 0,_create: function() {
            var suppressKeyPress, suppressKeyPressRepeat, suppressInput, nodeName = this.element[0].nodeName.toLowerCase(), isTextarea = nodeName === "textarea", isInput = nodeName === "input";
            this.isMultiLine = isTextarea ? true : isInput ? false : this.element.prop("isContentEditable");
            this.valueMethod = this.element[isTextarea || isInput ? "val" : "text"];
            this.isNewMenu = true;
            this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off");
            this._on(this.element, {keydown: function(event) {
                    if (this.element.prop("readOnly")) {
                        suppressKeyPress = true;
                        suppressInput = true;
                        suppressKeyPressRepeat = true;
                        return;
                    }
                    suppressKeyPress = false;
                    suppressInput = false;
                    suppressKeyPressRepeat = false;
                    var keyCode = $.ui.keyCode;
                    switch (event.keyCode) {
                        case keyCode.PAGE_UP:
                            suppressKeyPress = true;
                            this._move("previousPage", event);
                            break;
                        case keyCode.PAGE_DOWN:
                            suppressKeyPress = true;
                            this._move("nextPage", event);
                            break;
                        case keyCode.UP:
                            suppressKeyPress = true;
                            this._keyEvent("previous", event);
                            break;
                        case keyCode.DOWN:
                            suppressKeyPress = true;
                            this._keyEvent("next", event);
                            break;
                        case keyCode.ENTER:
                        case keyCode.NUMPAD_ENTER:
                            if (this.menu.active) {
                                suppressKeyPress = true;
                                event.preventDefault();
                                this.menu.select(event);
                            }
                            break;
                        case keyCode.TAB:
                            if (this.menu.active) {
                                this.menu.select(event);
                            }
                            break;
                        case keyCode.ESCAPE:
                            if (this.menu.element.is(":visible")) {
                                this._value(this.term);
                                this.close(event);
                                event.preventDefault();
                            }
                            break;
                        default:
                            suppressKeyPressRepeat = true;
                            this._searchTimeout(event);
                            break;
                    }
                },keypress: function(event) {
                    if (suppressKeyPress) {
                        suppressKeyPress = false;
                        if (!this.isMultiLine || this.menu.element.is(":visible")) {
                            event.preventDefault();
                        }
                        return;
                    }
                    if (suppressKeyPressRepeat) {
                        return;
                    }
                    var keyCode = $.ui.keyCode;
                    switch (event.keyCode) {
                        case keyCode.PAGE_UP:
                            this._move("previousPage", event);
                            break;
                        case keyCode.PAGE_DOWN:
                            this._move("nextPage", event);
                            break;
                        case keyCode.UP:
                            this._keyEvent("previous", event);
                            break;
                        case keyCode.DOWN:
                            this._keyEvent("next", event);
                            break;
                    }
                },input: function(event) {
                    if (suppressInput) {
                        suppressInput = false;
                        event.preventDefault();
                        return;
                    }
                    this._searchTimeout(event);
                },focus: function() {
                    this.selectedItem = null;
                    this.previous = this._value();
                },blur: function(event) {
                    if (this.cancelBlur) {
                        delete this.cancelBlur;
                        return;
                    }
                    clearTimeout(this.searching);
                    this.close(event);
                    this._change(event);
                }});
            this._initSource();
            this.menu = $("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role: null}).hide().data("ui-menu");
            this._on(this.menu.element, {mousedown: function(event) {
                    event.preventDefault();
                    this.cancelBlur = true;
                    this._delay(function() {
                        delete this.cancelBlur;
                    });
                    var menuElement = this.menu.element[0];
                    if (!$(event.target).closest(".ui-menu-item").length) {
                        this._delay(function() {
                            var that = this;
                            this.document.one("mousedown", function(event) {
                                if (event.target !== that.element[0] && event.target !== menuElement && !$.contains(menuElement, event.target)) {
                                    that.close();
                                }
                            });
                        });
                    }
                },menufocus: function(event, ui) {
                    if (this.isNewMenu) {
                        this.isNewMenu = false;
                        if (event.originalEvent && /^mouse/.test(event.originalEvent.type)) {
                            this.menu.blur();
                            this.document.one("mousemove", function() {
                                $(event.target).trigger(event.originalEvent);
                            });
                            return;
                        }
                    }
                    var item = ui.item.data("ui-autocomplete-item");
                    if (false !== this._trigger("focus", event, {item: item})) {
                        if (event.originalEvent && /^key/.test(event.originalEvent.type)) {
                            this._value(item.value);
                        }
                    } else {
                        this.liveRegion.text(item.value);
                    }
                },menuselect: function(event, ui) {
                    var item = ui.item.data("ui-autocomplete-item"), previous = this.previous;
                    if (this.element[0] !== this.document[0].activeElement) {
                        this.element.focus();
                        this.previous = previous;
                        this._delay(function() {
                            this.previous = previous;
                            this.selectedItem = item;
                        });
                    }
                    if (false !== this._trigger("select", event, {item: item})) {
                        this._value(item.value);
                    }
                    this.term = this._value();
                    this.close(event);
                    this.selectedItem = item;
                }});
            this.liveRegion = $("<span>", {role: "status","aria-live": "polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);
            this._on(this.window, {beforeunload: function() {
                    this.element.removeAttr("autocomplete");
                }});
        },_destroy: function() {
            clearTimeout(this.searching);
            this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");
            this.menu.element.remove();
            this.liveRegion.remove();
        },_setOption: function(key, value) {
            this._super(key, value);
            if (key === "source") {
                this._initSource();
            }
            if (key === "appendTo") {
                this.menu.element.appendTo(this._appendTo());
            }
            if (key === "disabled" && value && this.xhr) {
                this.xhr.abort();
            }
        },_appendTo: function() {
            var element = this.options.appendTo;
            if (element) {
                element = element.jquery || element.nodeType ? $(element) : this.document.find(element).eq(0);
            }
            if (!element) {
                element = this.element.closest(".ui-front");
            }
            if (!element.length) {
                element = this.document[0].body;
            }
            return element;
        },_initSource: function() {
            var array, url, that = this;
            if ($.isArray(this.options.source)) {
                array = this.options.source;
                this.source = function(request, response) {
                    response($.ui.autocomplete.filter(array, request.term));
                };
            } else {
                if (typeof this.options.source === "string") {
                    url = this.options.source;
                    this.source = function(request, response) {
                        if (that.xhr) {
                            that.xhr.abort();
                        }
                        that.xhr = $.ajax({url: url,data: request,dataType: "json",success: function(data) {
                                response(data);
                            },error: function() {
                                response([]);
                            }});
                    };
                } else {
                    this.source = this.options.source;
                }
            }
        },_searchTimeout: function(event) {
            clearTimeout(this.searching);
            this.searching = this._delay(function() {
                if (this.term !== this._value()) {
                    this.selectedItem = null;
                    this.search(null, event);
                }
            }, this.options.delay);
        },search: function(value, event) {
            value = value != null ? value : this._value();
            this.term = this._value();
            if (value.length < this.options.minLength) {
                return this.close(event);
            }
            if (this._trigger("search", event) === false) {
                return;
            }
            return this._search(value);
        },_search: function(value) {
            this.pending++;
            this.element.addClass("ui-autocomplete-loading");
            this.cancelSearch = false;
            this.source({term: value}, this._response());
        },_response: function() {
            var that = this, index = ++requestIndex;
            return function(content) {
                if (index === requestIndex) {
                    that.__response(content);
                }
                that.pending--;
                if (!that.pending) {
                    that.element.removeClass("ui-autocomplete-loading");
                }
            };
        },__response: function(content) {
            if (content) {
                content = this._normalize(content);
            }
            this._trigger("response", null, {content: content});
            if (!this.options.disabled && content && content.length && !this.cancelSearch) {
                this._suggest(content);
                this._trigger("open");
            } else {
                this._close();
            }
        },close: function(event) {
            this.cancelSearch = true;
            this._close(event);
        },_close: function(event) {
            if (this.menu.element.is(":visible")) {
                this.menu.element.hide();
                this.menu.blur();
                this.isNewMenu = true;
                this._trigger("close", event);
            }
        },_change: function(event) {
            if (this.previous !== this._value()) {
                this._trigger("change", event, {item: this.selectedItem});
            }
        },_normalize: function(items) {
            if (items.length && items[0].label && items[0].value) {
                return items;
            }
            return $.map(items, function(item) {
                if (typeof item === "string") {
                    return {label: item,value: item};
                }
                return $.extend({label: item.label || item.value,value: item.value || item.label}, item);
            });
        },_suggest: function(items) {
            var ul = this.menu.element.empty();
            this._renderMenu(ul, items);
            this.isNewMenu = true;
            this.menu.refresh();
            ul.show();
            this._resizeMenu();
            ul.position($.extend({of: this.element}, this.options.position));
            if (this.options.autoFocus) {
                this.menu.next();
            }
        },_resizeMenu: function() {
            var ul = this.menu.element;
            ul.outerWidth(Math.max(ul.width("").outerWidth() + 1, this.element.outerWidth()));
        },_renderMenu: function(ul, items) {
            var that = this;
            $.each(items, function(index, item) {
                that._renderItemData(ul, item);
            });
        },_renderItemData: function(ul, item) {
            return this._renderItem(ul, item).data("ui-autocomplete-item", item);
        },_renderItem: function(ul, item) {
            return $("<li>").append($("<a>").text(item.label)).appendTo(ul);
        },_move: function(direction, event) {
            if (!this.menu.element.is(":visible")) {
                this.search(null, event);
                return;
            }
            if (this.menu.isFirstItem() && /^previous/.test(direction) || this.menu.isLastItem() && /^next/.test(direction)) {
                this._value(this.term);
                this.menu.blur();
                return;
            }
            this.menu[direction](event);
        },widget: function() {
            return this.menu.element;
        },_value: function() {
            return this.valueMethod.apply(this.element, arguments);
        },_keyEvent: function(keyEvent, event) {
            if (!this.isMultiLine || this.menu.element.is(":visible")) {
                this._move(keyEvent, event);
                event.preventDefault();
            }
        }});
    $.extend($.ui.autocomplete, {escapeRegex: function(value) {
            return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
        },filter: function(array, term) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(term), "i");
            return $.grep(array, function(value) {
                return matcher.test(value.label || value.value || value);
            });
        }});
    $.widget("ui.autocomplete", $.ui.autocomplete, {options: {messages: {noResults: "No search results.",results: function(amount) {
                    return amount + (amount > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate.";
                }}},__response: function(content) {
            var message;
            this._superApply(arguments);
            if (this.options.disabled || this.cancelSearch) {
                return;
            }
            if (content && content.length) {
                message = this.options.messages.results(content.length);
            } else {
                message = this.options.messages.noResults;
            }
            this.liveRegion.text(message);
        }});
}(jQuery));
(function($, undefined) {
    var lastActive, startXPos, startYPos, clickDragged, baseClasses = "ui-button ui-widget ui-state-default ui-corner-all", stateClasses = "ui-state-hover ui-state-active ", typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", formResetHandler = function() {
        var form = $(this);
        setTimeout(function() {
            form.find(":ui-button").button("refresh");
        }, 1);
    }, radioGroup = function(radio) {
        var name = radio.name, form = radio.form, radios = $([]);
        if (name) {
            name = name.replace(/'/g, "\\'");
            if (form) {
                radios = $(form).find("[name='" + name + "']");
            } else {
                radios = $("[name='" + name + "']", radio.ownerDocument).filter(function() {
                    return !this.form;
                });
            }
        }
        return radios;
    };
    $.widget("ui.button", {version: "1.10.3",defaultElement: "<button>",options: {disabled: null,text: true,label: null,icons: {primary: null,secondary: null}},_create: function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, formResetHandler);
            if (typeof this.options.disabled !== "boolean") {
                this.options.disabled = !!this.element.prop("disabled");
            } else {
                this.element.prop("disabled", this.options.disabled);
            }
            this._determineButtonType();
            this.hasTitle = !!this.buttonElement.attr("title");
            var that = this, options = this.options, toggleButton = this.type === "checkbox" || this.type === "radio", activeClass = !toggleButton ? "ui-state-active" : "", focusClass = "ui-state-focus";
            if (options.label === null) {
                options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
            }
            this._hoverable(this.buttonElement);
            this.buttonElement.addClass(baseClasses).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                if (options.disabled) {
                    return;
                }
                if (this === lastActive) {
                    $(this).addClass("ui-state-active");
                }
            }).bind("mouseleave" + this.eventNamespace, function() {
                if (options.disabled) {
                    return;
                }
                $(this).removeClass(activeClass);
            }).bind("click" + this.eventNamespace, function(event) {
                if (options.disabled) {
                    event.preventDefault();
                    event.stopImmediatePropagation();
                }
            });
            this.element.bind("focus" + this.eventNamespace, function() {
                that.buttonElement.addClass(focusClass);
            }).bind("blur" + this.eventNamespace, function() {
                that.buttonElement.removeClass(focusClass);
            });
            if (toggleButton) {
                this.element.bind("change" + this.eventNamespace, function() {
                    if (clickDragged) {
                        return;
                    }
                    that.refresh();
                });
                this.buttonElement.bind("mousedown" + this.eventNamespace, function(event) {
                    if (options.disabled) {
                        return;
                    }
                    clickDragged = false;
                    startXPos = event.pageX;
                    startYPos = event.pageY;
                }).bind("mouseup" + this.eventNamespace, function(event) {
                    if (options.disabled) {
                        return;
                    }
                    if (startXPos !== event.pageX || startYPos !== event.pageY) {
                        clickDragged = true;
                    }
                });
            }
            if (this.type === "checkbox") {
                this.buttonElement.bind("click" + this.eventNamespace, function() {
                    if (options.disabled || clickDragged) {
                        return false;
                    }
                });
            } else {
                if (this.type === "radio") {
                    this.buttonElement.bind("click" + this.eventNamespace, function() {
                        if (options.disabled || clickDragged) {
                            return false;
                        }
                        $(this).addClass("ui-state-active");
                        that.buttonElement.attr("aria-pressed", "true");
                        var radio = that.element[0];
                        radioGroup(radio).not(radio).map(function() {
                            return $(this).button("widget")[0];
                        }).removeClass("ui-state-active").attr("aria-pressed", "false");
                    });
                } else {
                    this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                        if (options.disabled) {
                            return false;
                        }
                        $(this).addClass("ui-state-active");
                        lastActive = this;
                        that.document.one("mouseup", function() {
                            lastActive = null;
                        });
                    }).bind("mouseup" + this.eventNamespace, function() {
                        if (options.disabled) {
                            return false;
                        }
                        $(this).removeClass("ui-state-active");
                    }).bind("keydown" + this.eventNamespace, function(event) {
                        if (options.disabled) {
                            return false;
                        }
                        if (event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER) {
                            $(this).addClass("ui-state-active");
                        }
                    }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                        $(this).removeClass("ui-state-active");
                    });
                    if (this.buttonElement.is("a")) {
                        this.buttonElement.keyup(function(event) {
                            if (event.keyCode === $.ui.keyCode.SPACE) {
                                $(this).click();
                            }
                        });
                    }
                }
            }
            this._setOption("disabled", options.disabled);
            this._resetButton();
        },_determineButtonType: function() {
            var ancestor, labelSelector, checked;
            if (this.element.is("[type=checkbox]")) {
                this.type = "checkbox";
            } else {
                if (this.element.is("[type=radio]")) {
                    this.type = "radio";
                } else {
                    if (this.element.is("input")) {
                        this.type = "input";
                    } else {
                        this.type = "button";
                    }
                }
            }
            if (this.type === "checkbox" || this.type === "radio") {
                ancestor = this.element.parents().last();
                labelSelector = "label[for='" + this.element.attr("id") + "']";
                this.buttonElement = ancestor.find(labelSelector);
                if (!this.buttonElement.length) {
                    ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
                    this.buttonElement = ancestor.filter(labelSelector);
                    if (!this.buttonElement.length) {
                        this.buttonElement = ancestor.find(labelSelector);
                    }
                }
                this.element.addClass("ui-helper-hidden-accessible");
                checked = this.element.is(":checked");
                if (checked) {
                    this.buttonElement.addClass("ui-state-active");
                }
                this.buttonElement.prop("aria-pressed", checked);
            } else {
                this.buttonElement = this.element;
            }
        },widget: function() {
            return this.buttonElement;
        },_destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible");
            this.buttonElement.removeClass(baseClasses + " " + stateClasses + " " + typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
            if (!this.hasTitle) {
                this.buttonElement.removeAttr("title");
            }
        },_setOption: function(key, value) {
            this._super(key, value);
            if (key === "disabled") {
                if (value) {
                    this.element.prop("disabled", true);
                } else {
                    this.element.prop("disabled", false);
                }
                return;
            }
            this._resetButton();
        },refresh: function() {
            var isDisabled = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            if (isDisabled !== this.options.disabled) {
                this._setOption("disabled", isDisabled);
            }
            if (this.type === "radio") {
                radioGroup(this.element[0]).each(function() {
                    if ($(this).is(":checked")) {
                        $(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true");
                    } else {
                        $(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false");
                    }
                });
            } else {
                if (this.type === "checkbox") {
                    if (this.element.is(":checked")) {
                        this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true");
                    } else {
                        this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false");
                    }
                }
            }
        },_resetButton: function() {
            if (this.type === "input") {
                if (this.options.label) {
                    this.element.val(this.options.label);
                }
                return;
            }
            var buttonElement = this.buttonElement.removeClass(typeClasses), buttonText = $("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(), icons = this.options.icons, multipleIcons = icons.primary && icons.secondary, buttonClasses = [];
            if (icons.primary || icons.secondary) {
                if (this.options.text) {
                    buttonClasses.push("ui-button-text-icon" + (multipleIcons ? "s" : (icons.primary ? "-primary" : "-secondary")));
                }
                if (icons.primary) {
                    buttonElement.prepend("<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>");
                }
                if (icons.secondary) {
                    buttonElement.append("<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>");
                }
                if (!this.options.text) {
                    buttonClasses.push(multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only");
                    if (!this.hasTitle) {
                        buttonElement.attr("title", $.trim(buttonText));
                    }
                }
            } else {
                buttonClasses.push("ui-button-text-only");
            }
            buttonElement.addClass(buttonClasses.join(" "));
        }});
    $.widget("ui.buttonset", {version: "1.10.3",options: {items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create: function() {
            this.element.addClass("ui-buttonset");
        },_init: function() {
            this.refresh();
        },_setOption: function(key, value) {
            if (key === "disabled") {
                this.buttons.button("option", key, value);
            }
            this._super(key, value);
        },refresh: function() {
            var rtl = this.element.css("direction") === "rtl";
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return $(this).button("widget")[0];
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(rtl ? "ui-corner-left" : "ui-corner-right").end().end();
        },_destroy: function() {
            this.element.removeClass("ui-buttonset");
            this.buttons.map(function() {
                return $(this).button("widget")[0];
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
        }});
}(jQuery));
(function($, undefined) {
    $.extend($.ui, {datepicker: {version: "1.10.3"}});
    var PROP_NAME = "datepicker", instActive;
    function Datepicker() {
        this._curInst = null;
        this._keyEvent = false;
        this._disabledInputs = [];
        this._datepickerShowing = false;
        this._inDialog = false;
        this._mainDivId = "ui-datepicker-div";
        this._inlineClass = "ui-datepicker-inline";
        this._appendClass = "ui-datepicker-append";
        this._triggerClass = "ui-datepicker-trigger";
        this._dialogClass = "ui-datepicker-dialog";
        this._disableClass = "ui-datepicker-disabled";
        this._unselectableClass = "ui-datepicker-unselectable";
        this._currentClass = "ui-datepicker-current-day";
        this._dayOverClass = "ui-datepicker-days-cell-over";
        this.regional = [];
        this.regional[""] = {closeText: "Done",prevText: "Prev",nextText: "Next",currentText: "Today",monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],dayNames: ["Domingo", "Lunes", "Martes", "Mi&eacute;rcoles", "Jueves", "Viernes", "S&aacute;bado"],dayNamesShort: ["Dom", "Lun", "Mar", "Mi&eacute;", "Juv", "Vie", "S&aacute;b"],dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "S&aacute;"],weekHeader: "Sm",dateFormat: "dd/mm/yy",firstDay: 1,isRTL: false,showMonthAfterYear: false,yearSuffix: ""};
        this._defaults = {showOn: "focus",showAnim: "fadeIn",showOptions: {},defaultDate: null,appendText: "",buttonText: "...",buttonImage: "",buttonImageOnly: false,hideIfNoPrevNext: false,navigationAsDateFormat: false,gotoCurrent: false,changeMonth: false,changeYear: false,yearRange: "c-10:c+10",showOtherMonths: false,selectOtherMonths: false,showWeek: false,calculateWeek: this.iso8601Week,shortYearCutoff: "+10",minDate: null,maxDate: null,duration: "fast",beforeShowDay: null,beforeShow: null,onSelect: null,onChangeMonthYear: null,onClose: null,numberOfMonths: 1,showCurrentAtPos: 0,stepMonths: 1,stepBigMonths: 12,altField: "",altFormat: "",constrainInput: true,showButtonPanel: false,autoSize: false,disabled: false};
        $.extend(this._defaults, this.regional[""]);
        this.dpDiv = bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
    }
    $.extend(Datepicker.prototype, {markerClassName: "hasDatepicker",maxRows: 4,_widgetDatepicker: function() {
            return this.dpDiv;
        },setDefaults: function(settings) {
            extendRemove(this._defaults, settings || {});
            return this;
        },_attachDatepicker: function(target, settings) {
            var nodeName, inline, inst;
            nodeName = target.nodeName.toLowerCase();
            inline = (nodeName === "div" || nodeName === "span");
            if (!target.id) {
                this.uuid += 1;
                target.id = "dp" + this.uuid;
            }
            inst = this._newInst($(target), inline);
            inst.settings = $.extend({}, settings || {});
            if (nodeName === "input") {
                this._connectDatepicker(target, inst);
            } else {
                if (inline) {
                    this._inlineDatepicker(target, inst);
                }
            }
        },_newInst: function(target, inline) {
            var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {id: id,input: target,selectedDay: 0,selectedMonth: 0,selectedYear: 0,drawMonth: 0,drawYear: 0,inline: inline,dpDiv: (!inline ? this.dpDiv : bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
        },_connectDatepicker: function(target, inst) {
            var input = $(target);
            inst.append = $([]);
            inst.trigger = $([]);
            if (input.hasClass(this.markerClassName)) {
                return;
            }
            this._attachments(input, inst);
            input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);
            this._autoSize(inst);
            $.data(target, PROP_NAME, inst);
            if (inst.settings.disabled) {
                this._disableDatepicker(target);
            }
        },_attachments: function(input, inst) {
            var showOn, buttonText, buttonImage, appendText = this._get(inst, "appendText"), isRTL = this._get(inst, "isRTL");
            if (inst.append) {
                inst.append.remove();
            }
            if (appendText) {
                inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
                input[isRTL ? "before" : "after"](inst.append);
            }
            input.unbind("focus", this._showDatepicker);
            if (inst.trigger) {
                inst.trigger.remove();
            }
            showOn = this._get(inst, "showOn");
            if (showOn === "focus" || showOn === "both") {
                input.focus(this._showDatepicker);
            }
            if (showOn === "button" || showOn === "both") {
                buttonText = this._get(inst, "buttonText");
                buttonImage = this._get(inst, "buttonImage");
                inst.trigger = $(this._get(inst, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({src: buttonImage,alt: buttonText,title: buttonText}) : $("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage ? buttonText : $("<img/>").attr({src: buttonImage,alt: buttonText,title: buttonText})));
                input[isRTL ? "before" : "after"](inst.trigger);
                inst.trigger.click(function() {
                    if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
                        $.datepicker._hideDatepicker();
                    } else {
                        if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
                            $.datepicker._hideDatepicker();
                            $.datepicker._showDatepicker(input[0]);
                        } else {
                            $.datepicker._showDatepicker(input[0]);
                        }
                    }
                    return false;
                });
            }
        },_autoSize: function(inst) {
            if (this._get(inst, "autoSize") && !inst.inline) {
                var findMax, max, maxI, i, date = new Date(2009, 12 - 1, 20), dateFormat = this._get(inst, "dateFormat");
                if (dateFormat.match(/[DM]/)) {
                    findMax = function(names) {
                        max = 0;
                        maxI = 0;
                        for (i = 0; i < names.length; i++) {
                            if (names[i].length > max) {
                                max = names[i].length;
                                maxI = i;
                            }
                        }
                        return maxI;
                    };
                    date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ? "monthNames" : "monthNamesShort"))));
                    date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ? "dayNames" : "dayNamesShort"))) + 20 - date.getDay());
                }
                inst.input.attr("size", this._formatDate(inst, date).length);
            }
        },_inlineDatepicker: function(target, inst) {
            var divSpan = $(target);
            if (divSpan.hasClass(this.markerClassName)) {
                return;
            }
            divSpan.addClass(this.markerClassName).append(inst.dpDiv);
            $.data(target, PROP_NAME, inst);
            this._setDate(inst, this._getDefaultDate(inst), true);
            this._updateDatepicker(inst);
            this._updateAlternate(inst);
            if (inst.settings.disabled) {
                this._disableDatepicker(target);
            }
            inst.dpDiv.css("display", "block");
        },_dialogDatepicker: function(input, date, onSelect, settings, pos) {
            var id, browserWidth, browserHeight, scrollX, scrollY, inst = this._dialogInst;
            if (!inst) {
                this.uuid += 1;
                id = "dp" + this.uuid;
                this._dialogInput = $("<input type='text' id='" + id + "' style='position: absolute; top: -100px; width: 0px;'/>");
                this._dialogInput.keydown(this._doKeyDown);
                $("body").append(this._dialogInput);
                inst = this._dialogInst = this._newInst(this._dialogInput, false);
                inst.settings = {};
                $.data(this._dialogInput[0], PROP_NAME, inst);
            }
            extendRemove(inst.settings, settings || {});
            date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
            this._dialogInput.val(date);
            this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
            if (!this._pos) {
                browserWidth = document.documentElement.clientWidth;
                browserHeight = document.documentElement.clientHeight;
                scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
                scrollY = document.documentElement.scrollTop || document.body.scrollTop;
                this._pos = [(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
            }
            this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
            inst.settings.onSelect = onSelect;
            this._inDialog = true;
            this.dpDiv.addClass(this._dialogClass);
            this._showDatepicker(this._dialogInput[0]);
            if ($.blockUI) {
                $.blockUI(this.dpDiv);
            }
            $.data(this._dialogInput[0], PROP_NAME, inst);
            return this;
        },_destroyDatepicker: function(target) {
            var nodeName, $target = $(target), inst = $.data(target, PROP_NAME);
            if (!$target.hasClass(this.markerClassName)) {
                return;
            }
            nodeName = target.nodeName.toLowerCase();
            $.removeData(target, PROP_NAME);
            if (nodeName === "input") {
                inst.append.remove();
                inst.trigger.remove();
                $target.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp);
            } else {
                if (nodeName === "div" || nodeName === "span") {
                    $target.removeClass(this.markerClassName).empty();
                }
            }
        },_enableDatepicker: function(target) {
            var nodeName, inline, $target = $(target), inst = $.data(target, PROP_NAME);
            if (!$target.hasClass(this.markerClassName)) {
                return;
            }
            nodeName = target.nodeName.toLowerCase();
            if (nodeName === "input") {
                target.disabled = false;
                inst.trigger.filter("button").each(function() {
                    this.disabled = false;
                }).end().filter("img").css({opacity: "1.0",cursor: ""});
            } else {
                if (nodeName === "div" || nodeName === "span") {
                    inline = $target.children("." + this._inlineClass);
                    inline.children().removeClass("ui-state-disabled");
                    inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", false);
                }
            }
            this._disabledInputs = $.map(this._disabledInputs, function(value) {
                return (value === target ? null : value);
            });
        },_disableDatepicker: function(target) {
            var nodeName, inline, $target = $(target), inst = $.data(target, PROP_NAME);
            if (!$target.hasClass(this.markerClassName)) {
                return;
            }
            nodeName = target.nodeName.toLowerCase();
            if (nodeName === "input") {
                target.disabled = true;
                inst.trigger.filter("button").each(function() {
                    this.disabled = true;
                }).end().filter("img").css({opacity: "0.5",cursor: "default"});
            } else {
                if (nodeName === "div" || nodeName === "span") {
                    inline = $target.children("." + this._inlineClass);
                    inline.children().addClass("ui-state-disabled");
                    inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", true);
                }
            }
            this._disabledInputs = $.map(this._disabledInputs, function(value) {
                return (value === target ? null : value);
            });
            this._disabledInputs[this._disabledInputs.length] = target;
        },_isDisabledDatepicker: function(target) {
            if (!target) {
                return false;
            }
            for (var i = 0; i < this._disabledInputs.length; i++) {
                if (this._disabledInputs[i] === target) {
                    return true;
                }
            }
            return false;
        },_getInst: function(target) {
            try {
                return $.data(target, PROP_NAME);
            } catch (err) {
                throw "Missing instance data for this datepicker";
            }
        },_optionDatepicker: function(target, name, value) {
            var settings, date, minDate, maxDate, inst = this._getInst(target);
            if (arguments.length === 2 && typeof name === "string") {
                return (name === "defaults" ? $.extend({}, $.datepicker._defaults) : (inst ? (name === "all" ? $.extend({}, inst.settings) : this._get(inst, name)) : null));
            }
            settings = name || {};
            if (typeof name === "string") {
                settings = {};
                settings[name] = value;
            }
            if (inst) {
                if (this._curInst === inst) {
                    this._hideDatepicker();
                }
                date = this._getDateDatepicker(target, true);
                minDate = this._getMinMaxDate(inst, "min");
                maxDate = this._getMinMaxDate(inst, "max");
                extendRemove(inst.settings, settings);
                if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
                    inst.settings.minDate = this._formatDate(inst, minDate);
                }
                if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
                    inst.settings.maxDate = this._formatDate(inst, maxDate);
                }
                if ("disabled" in settings) {
                    if (settings.disabled) {
                        this._disableDatepicker(target);
                    } else {
                        this._enableDatepicker(target);
                    }
                }
                this._attachments($(target), inst);
                this._autoSize(inst);
                this._setDate(inst, date);
                this._updateAlternate(inst);
                this._updateDatepicker(inst);
            }
        },_changeDatepicker: function(target, name, value) {
            this._optionDatepicker(target, name, value);
        },_refreshDatepicker: function(target) {
            var inst = this._getInst(target);
            if (inst) {
                this._updateDatepicker(inst);
            }
        },_setDateDatepicker: function(target, date) {
            var inst = this._getInst(target);
            if (inst) {
                this._setDate(inst, date);
                this._updateDatepicker(inst);
                this._updateAlternate(inst);
            }
        },_getDateDatepicker: function(target, noDefault) {
            var inst = this._getInst(target);
            if (inst && !inst.inline) {
                this._setDateFromField(inst, noDefault);
            }
            return (inst ? this._getDate(inst) : null);
        },_doKeyDown: function(event) {
            var onSelect, dateStr, sel, inst = $.datepicker._getInst(event.target), handled = true, isRTL = inst.dpDiv.is(".ui-datepicker-rtl");
            inst._keyEvent = true;
            if ($.datepicker._datepickerShowing) {
                switch (event.keyCode) {
                    case 9:
                        $.datepicker._hideDatepicker();
                        handled = false;
                        break;
                    case 13:
                        sel = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", inst.dpDiv);
                        if (sel[0]) {
                            $.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
                        }
                        onSelect = $.datepicker._get(inst, "onSelect");
                        if (onSelect) {
                            dateStr = $.datepicker._formatDate(inst);
                            onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
                        } else {
                            $.datepicker._hideDatepicker();
                        }
                        return false;
                    case 27:
                        $.datepicker._hideDatepicker();
                        break;
                    case 33:
                        $.datepicker._adjustDate(event.target, (event.ctrlKey ? -$.datepicker._get(inst, "stepBigMonths") : -$.datepicker._get(inst, "stepMonths")), "M");
                        break;
                    case 34:
                        $.datepicker._adjustDate(event.target, (event.ctrlKey ? +$.datepicker._get(inst, "stepBigMonths") : +$.datepicker._get(inst, "stepMonths")), "M");
                        break;
                    case 35:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._clearDate(event.target);
                        }
                        handled = event.ctrlKey || event.metaKey;
                        break;
                    case 36:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._gotoToday(event.target);
                        }
                        handled = event.ctrlKey || event.metaKey;
                        break;
                    case 37:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
                        }
                        handled = event.ctrlKey || event.metaKey;
                        if (event.originalEvent.altKey) {
                            $.datepicker._adjustDate(event.target, (event.ctrlKey ? -$.datepicker._get(inst, "stepBigMonths") : -$.datepicker._get(inst, "stepMonths")), "M");
                        }
                        break;
                    case 38:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._adjustDate(event.target, -7, "D");
                        }
                        handled = event.ctrlKey || event.metaKey;
                        break;
                    case 39:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
                        }
                        handled = event.ctrlKey || event.metaKey;
                        if (event.originalEvent.altKey) {
                            $.datepicker._adjustDate(event.target, (event.ctrlKey ? +$.datepicker._get(inst, "stepBigMonths") : +$.datepicker._get(inst, "stepMonths")), "M");
                        }
                        break;
                    case 40:
                        if (event.ctrlKey || event.metaKey) {
                            $.datepicker._adjustDate(event.target, +7, "D");
                        }
                        handled = event.ctrlKey || event.metaKey;
                        break;
                    default:
                        handled = false;
                }
            } else {
                if (event.keyCode === 36 && event.ctrlKey) {
                    $.datepicker._showDatepicker(this);
                } else {
                    handled = false;
                }
            }
            if (handled) {
                event.preventDefault();
                event.stopPropagation();
            }
        },_doKeyPress: function(event) {
            var chars, chr, inst = $.datepicker._getInst(event.target);
            if ($.datepicker._get(inst, "constrainInput")) {
                chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
                chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
                return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
            }
        },_doKeyUp: function(event) {
            var date, inst = $.datepicker._getInst(event.target);
            if (inst.input.val() !== inst.lastVal) {
                try {
                    date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"), (inst.input ? inst.input.val() : null), $.datepicker._getFormatConfig(inst));
                    if (date) {
                        $.datepicker._setDateFromField(inst);
                        $.datepicker._updateAlternate(inst);
                        $.datepicker._updateDatepicker(inst);
                    }
                } catch (err) {
                }
            }
            return true;
        },_showDatepicker: function(input) {
            input = input.target || input;
            if (input.nodeName.toLowerCase() !== "input") {
                input = $("input", input.parentNode)[0];
            }
            if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) {
                return;
            }
            var inst, beforeShow, beforeShowSettings, isFixed, offset, showAnim, duration;
            inst = $.datepicker._getInst(input);
            if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
                $.datepicker._curInst.dpDiv.stop(true, true);
                if (inst && $.datepicker._datepickerShowing) {
                    $.datepicker._hideDatepicker($.datepicker._curInst.input[0]);
                }
            }
            beforeShow = $.datepicker._get(inst, "beforeShow");
            beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
            if (beforeShowSettings === false) {
                return;
            }
            extendRemove(inst.settings, beforeShowSettings);
            inst.lastVal = null;
            $.datepicker._lastInput = input;
            $.datepicker._setDateFromField(inst);
            if ($.datepicker._inDialog) {
                input.value = "";
            }
            if (!$.datepicker._pos) {
                $.datepicker._pos = $.datepicker._findPos(input);
                $.datepicker._pos[1] += input.offsetHeight;
            }
            isFixed = false;
            $(input).parents().each(function() {
                isFixed |= $(this).css("position") === "fixed";
                return !isFixed;
            });
            offset = {left: $.datepicker._pos[0],top: $.datepicker._pos[1]};
            $.datepicker._pos = null;
            inst.dpDiv.empty();
            inst.dpDiv.css({position: "absolute",display: "block",top: "-1000px"});
            $.datepicker._updateDatepicker(inst);
            offset = $.datepicker._checkOffset(inst, offset, isFixed);
            inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ? "static" : (isFixed ? "fixed" : "absolute")),display: "none",left: offset.left + "px",top: offset.top + "px"});
            if (!inst.inline) {
                showAnim = $.datepicker._get(inst, "showAnim");
                duration = $.datepicker._get(inst, "duration");
                inst.dpDiv.zIndex($(input).zIndex() + 1);
                $.datepicker._datepickerShowing = true;
                if ($.effects && $.effects.effect[showAnim]) {
                    inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
                } else {
                    inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
                }
                if ($.datepicker._shouldFocusInput(inst)) {
                    inst.input.focus();
                }
                $.datepicker._curInst = inst;
            }
        },_updateDatepicker: function(inst) {
            this.maxRows = 4;
            instActive = inst;
            inst.dpDiv.empty().append(this._generateHTML(inst));
            this._attachHandlers(inst);
            inst.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var origyearshtml, numMonths = this._getNumberOfMonths(inst), cols = numMonths[1], width = 17;
            inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
            if (cols > 1) {
                inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
            }
            inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi");
            inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl");
            if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput(inst)) {
                inst.input.focus();
            }
            if (inst.yearshtml) {
                origyearshtml = inst.yearshtml;
                setTimeout(function() {
                    if (origyearshtml === inst.yearshtml && inst.yearshtml) {
                        inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
                    }
                    origyearshtml = inst.yearshtml = null;
                }, 0);
            }
        },_shouldFocusInput: function(inst) {
            return inst.input && inst.input.is(":visible") && !inst.input.is(":disabled") && !inst.input.is(":focus");
        },_checkOffset: function(inst, offset, isFixed) {
            var dpWidth = inst.dpDiv.outerWidth(), dpHeight = inst.dpDiv.outerHeight(), inputWidth = inst.input ? inst.input.outerWidth() : 0, inputHeight = inst.input ? inst.input.outerHeight() : 0, viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()), viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());
            offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
            offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
            offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;
            offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ? Math.abs(offset.left + dpWidth - viewWidth) : 0);
            offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ? Math.abs(dpHeight + inputHeight) : 0);
            return offset;
        },_findPos: function(obj) {
            var position, inst = this._getInst(obj), isRTL = this._get(inst, "isRTL");
            while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
                obj = obj[isRTL ? "previousSibling" : "nextSibling"];
            }
            position = $(obj).offset();
            return [position.left, position.top];
        },_hideDatepicker: function(input) {
            var showAnim, duration, postProcess, onClose, inst = this._curInst;
            if (!inst || (input && inst !== $.data(input, PROP_NAME))) {
                return;
            }
            if (this._datepickerShowing) {
                showAnim = this._get(inst, "showAnim");
                duration = this._get(inst, "duration");
                postProcess = function() {
                    $.datepicker._tidyDialog(inst);
                };
                if ($.effects && ($.effects.effect[showAnim] || $.effects[showAnim])) {
                    inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
                } else {
                    inst.dpDiv[(showAnim === "slideDown" ? "slideUp" : (showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
                }
                if (!showAnim) {
                    postProcess();
                }
                this._datepickerShowing = false;
                onClose = this._get(inst, "onClose");
                if (onClose) {
                    onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
                }
                this._lastInput = null;
                if (this._inDialog) {
                    this._dialogInput.css({position: "absolute",left: "0",top: "-100px"});
                    if ($.blockUI) {
                        $.unblockUI();
                        $("body").append(this.dpDiv);
                    }
                }
                this._inDialog = false;
            }
        },_tidyDialog: function(inst) {
            inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
        },_checkExternalClick: function(event) {
            if (!$.datepicker._curInst) {
                return;
            }
            var $target = $(event.target), inst = $.datepicker._getInst($target[0]);
            if ((($target[0].id !== $.datepicker._mainDivId && $target.parents("#" + $.datepicker._mainDivId).length === 0 && !$target.hasClass($.datepicker.markerClassName) && !$target.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI))) || ($target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst)) {
                $.datepicker._hideDatepicker();
            }
        },_adjustDate: function(id, offset, period) {
            var target = $(id), inst = this._getInst(target[0]);
            if (this._isDisabledDatepicker(target[0])) {
                return;
            }
            this._adjustInstDate(inst, offset + (period === "M" ? this._get(inst, "showCurrentAtPos") : 0), period);
            this._updateDatepicker(inst);
        },_gotoToday: function(id) {
            var date, target = $(id), inst = this._getInst(target[0]);
            if (this._get(inst, "gotoCurrent") && inst.currentDay) {
                inst.selectedDay = inst.currentDay;
                inst.drawMonth = inst.selectedMonth = inst.currentMonth;
                inst.drawYear = inst.selectedYear = inst.currentYear;
            } else {
                date = new Date();
                inst.selectedDay = date.getDate();
                inst.drawMonth = inst.selectedMonth = date.getMonth();
                inst.drawYear = inst.selectedYear = date.getFullYear();
            }
            this._notifyChange(inst);
            this._adjustDate(target);
        },_selectMonthYear: function(id, select, period) {
            var target = $(id), inst = this._getInst(target[0]);
            inst["selected" + (period === "M" ? "Month" : "Year")] = inst["draw" + (period === "M" ? "Month" : "Year")] = parseInt(select.options[select.selectedIndex].value, 10);
            this._notifyChange(inst);
            this._adjustDate(target);
        },_selectDay: function(id, month, year, td) {
            var inst, target = $(id);
            if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
                return;
            }
            inst = this._getInst(target[0]);
            inst.selectedDay = inst.currentDay = $("a", td).html();
            inst.selectedMonth = inst.currentMonth = month;
            inst.selectedYear = inst.currentYear = year;
            this._selectDate(id, this._formatDate(inst, inst.currentDay, inst.currentMonth, inst.currentYear));
        },_clearDate: function(id) {
            var target = $(id);
            this._selectDate(target, "");
        },_selectDate: function(id, dateStr) {
            var onSelect, target = $(id), inst = this._getInst(target[0]);
            dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
            if (inst.input) {
                inst.input.val(dateStr);
            }
            this._updateAlternate(inst);
            onSelect = this._get(inst, "onSelect");
            if (onSelect) {
                onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
            } else {
                if (inst.input) {
                    inst.input.trigger("change");
                }
            }
            if (inst.inline) {
                this._updateDatepicker(inst);
            } else {
                this._hideDatepicker();
                this._lastInput = inst.input[0];
                if (typeof (inst.input[0]) !== "object") {
                    inst.input.focus();
                }
                this._lastInput = null;
            }
        },_updateAlternate: function(inst) {
            var altFormat, date, dateStr, altField = this._get(inst, "altField");
            if (altField) {
                altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
                date = this._getDate(inst);
                dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
                $(altField).each(function() {
                    $(this).val(dateStr);
                });
            }
        },noWeekends: function(date) {
            var day = date.getDay();
            return [(day > 0 && day < 6), ""];
        },iso8601Week: function(date) {
            var time, checkDate = new Date(date.getTime());
            checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));
            time = checkDate.getTime();
            checkDate.setMonth(0);
            checkDate.setDate(1);
            return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
        },parseDate: function(format, value, settings) {
            if (format == null || value == null) {
                throw "Invalid arguments";
            }
            value = (typeof value === "object" ? value.toString() : value + "");
            if (value === "") {
                return null;
            }
            var iFormat, dim, extra, iValue = 0, shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff, shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp : new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)), dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort, dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames, monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort, monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames, year = -1, month = -1, day = -1, doy = -1, literal = false, date, lookAhead = function(match) {
                var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                if (matches) {
                    iFormat++;
                }
                return matches;
            }, getNumber = function(match) {
                var isDoubled = lookAhead(match), size = (match === "@" ? 14 : (match === "!" ? 20 : (match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))), digits = new RegExp("^\\d{1," + size + "}"), num = value.substring(iValue).match(digits);
                if (!num) {
                    throw "Missing number at position " + iValue;
                }
                iValue += num[0].length;
                return parseInt(num[0], 10);
            }, getName = function(match, shortNames, longNames) {
                var index = -1, names = $.map(lookAhead(match) ? longNames : shortNames, function(v, k) {
                    return [[k, v]];
                }).sort(function(a, b) {
                    return -(a[1].length - b[1].length);
                });
                $.each(names, function(i, pair) {
                    var name = pair[1];
                    if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
                        index = pair[0];
                        iValue += name.length;
                        return false;
                    }
                });
                if (index !== -1) {
                    return index + 1;
                } else {
                    throw "Unknown name at position " + iValue;
                }
            }, checkLiteral = function() {
                if (value.charAt(iValue) !== format.charAt(iFormat)) {
                    throw "Unexpected literal at position " + iValue;
                }
                iValue++;
            };
            for (iFormat = 0; iFormat < format.length; iFormat++) {
                if (literal) {
                    if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                        literal = false;
                    } else {
                        checkLiteral();
                    }
                } else {
                    switch (format.charAt(iFormat)) {
                        case "d":
                            day = getNumber("d");
                            break;
                        case "D":
                            getName("D", dayNamesShort, dayNames);
                            break;
                        case "o":
                            doy = getNumber("o");
                            break;
                        case "m":
                            month = getNumber("m");
                            break;
                        case "M":
                            month = getName("M", monthNamesShort, monthNames);
                            break;
                        case "y":
                            year = getNumber("y");
                            break;
                        case "@":
                            date = new Date(getNumber("@"));
                            year = date.getFullYear();
                            month = date.getMonth() + 1;
                            day = date.getDate();
                            break;
                        case "!":
                            date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
                            year = date.getFullYear();
                            month = date.getMonth() + 1;
                            day = date.getDate();
                            break;
                        case "'":
                            if (lookAhead("'")) {
                                checkLiteral();
                            } else {
                                literal = true;
                            }
                            break;
                        default:
                            checkLiteral();
                    }
                }
            }
            if (iValue < value.length) {
                extra = value.substr(iValue);
                if (!/^\s+/.test(extra)) {
                    throw "Extra/unparsed characters found in date: " + extra;
                }
            }
            if (year === -1) {
                year = new Date().getFullYear();
            } else {
                if (year < 100) {
                    year += new Date().getFullYear() - new Date().getFullYear() % 100 + (year <= shortYearCutoff ? 0 : -100);
                }
            }
            if (doy > -1) {
                month = 1;
                day = doy;
                do {
                    dim = this._getDaysInMonth(year, month - 1);
                    if (day <= dim) {
                        break;
                    }
                    month++;
                    day -= dim;
                } while (true);
            }
            date = this._daylightSavingAdjust(new Date(year, month - 1, day));
            if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
                throw "Invalid date";
            }
            return date;
        },ATOM: "yy-mm-dd",COOKIE: "D, dd M yy",ISO_8601: "yy-mm-dd",RFC_822: "D, d M y",RFC_850: "DD, dd-M-y",RFC_1036: "D, d M y",RFC_1123: "D, d M yy",RFC_2822: "D, d M yy",RSS: "D, d M y",TICKS: "!",TIMESTAMP: "@",W3C: "yy-mm-dd",_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) + Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),formatDate: function(format, date, settings) {
            if (!date) {
                return "";
            }
            var iFormat, dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort, dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames, monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort, monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames, lookAhead = function(match) {
                var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                if (matches) {
                    iFormat++;
                }
                return matches;
            }, formatNumber = function(match, value, len) {
                var num = "" + value;
                if (lookAhead(match)) {
                    while (num.length < len) {
                        num = "0" + num;
                    }
                }
                return num;
            }, formatName = function(match, value, shortNames, longNames) {
                return (lookAhead(match) ? longNames[value] : shortNames[value]);
            }, output = "", literal = false;
            if (date) {
                for (iFormat = 0; iFormat < format.length; iFormat++) {
                    if (literal) {
                        if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                            literal = false;
                        } else {
                            output += format.charAt(iFormat);
                        }
                    } else {
                        switch (format.charAt(iFormat)) {
                            case "d":
                                output += formatNumber("d", date.getDate(), 2);
                                break;
                            case "D":
                                output += formatName("D", date.getDay(), dayNamesShort, dayNames);
                                break;
                            case "o":
                                output += formatNumber("o", Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
                                break;
                            case "m":
                                output += formatNumber("m", date.getMonth() + 1, 2);
                                break;
                            case "M":
                                output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
                                break;
                            case "y":
                                output += (lookAhead("y") ? date.getFullYear() : (date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
                                break;
                            case "@":
                                output += date.getTime();
                                break;
                            case "!":
                                output += date.getTime() * 10000 + this._ticksTo1970;
                                break;
                            case "'":
                                if (lookAhead("'")) {
                                    output += "'";
                                } else {
                                    literal = true;
                                }
                                break;
                            default:
                                output += format.charAt(iFormat);
                        }
                    }
                }
            }
            return output;
        },_possibleChars: function(format) {
            var iFormat, chars = "", literal = false, lookAhead = function(match) {
                var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                if (matches) {
                    iFormat++;
                }
                return matches;
            };
            for (iFormat = 0; iFormat < format.length; iFormat++) {
                if (literal) {
                    if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                        literal = false;
                    } else {
                        chars += format.charAt(iFormat);
                    }
                } else {
                    switch (format.charAt(iFormat)) {
                        case "d":
                        case "m":
                        case "y":
                        case "@":
                            chars += "0123456789";
                            break;
                        case "D":
                        case "M":
                            return null;
                        case "'":
                            if (lookAhead("'")) {
                                chars += "'";
                            } else {
                                literal = true;
                            }
                            break;
                        default:
                            chars += format.charAt(iFormat);
                    }
                }
            }
            return chars;
        },_get: function(inst, name) {
            return inst.settings[name] !== undefined ? inst.settings[name] : this._defaults[name];
        },_setDateFromField: function(inst, noDefault) {
            if (inst.input.val() === inst.lastVal) {
                return;
            }
            var dateFormat = this._get(inst, "dateFormat"), dates = inst.lastVal = inst.input ? inst.input.val() : null, defaultDate = this._getDefaultDate(inst), date = defaultDate, settings = this._getFormatConfig(inst);
            try {
                date = this.parseDate(dateFormat, dates, settings) || defaultDate;
            } catch (event) {
                dates = (noDefault ? "" : dates);
            }
            inst.selectedDay = date.getDate();
            inst.drawMonth = inst.selectedMonth = date.getMonth();
            inst.drawYear = inst.selectedYear = date.getFullYear();
            inst.currentDay = (dates ? date.getDate() : 0);
            inst.currentMonth = (dates ? date.getMonth() : 0);
            inst.currentYear = (dates ? date.getFullYear() : 0);
            this._adjustInstDate(inst);
        },_getDefaultDate: function(inst) {
            return this._restrictMinMax(inst, this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
        },_determineDate: function(inst, date, defaultDate) {
            var offsetNumeric = function(offset) {
                var date = new Date();
                date.setDate(date.getDate() + offset);
                return date;
            }, offsetString = function(offset) {
                try {
                    return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"), offset, $.datepicker._getFormatConfig(inst));
                } catch (e) {
                }
                var date = (offset.toLowerCase().match(/^c/) ? $.datepicker._getDate(inst) : null) || new Date(), year = date.getFullYear(), month = date.getMonth(), day = date.getDate(), pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, matches = pattern.exec(offset);
                while (matches) {
                    switch (matches[2] || "d") {
                        case "d":
                        case "D":
                            day += parseInt(matches[1], 10);
                            break;
                        case "w":
                        case "W":
                            day += parseInt(matches[1], 10) * 7;
                            break;
                        case "m":
                        case "M":
                            month += parseInt(matches[1], 10);
                            day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
                            break;
                        case "y":
                        case "Y":
                            year += parseInt(matches[1], 10);
                            day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
                            break;
                    }
                    matches = pattern.exec(offset);
                }
                return new Date(year, month, day);
            }, newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) : (typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));
            newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
            if (newDate) {
                newDate.setHours(0);
                newDate.setMinutes(0);
                newDate.setSeconds(0);
                newDate.setMilliseconds(0);
            }
            return this._daylightSavingAdjust(newDate);
        },_daylightSavingAdjust: function(date) {
            if (!date) {
                return null;
            }
            date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
            return date;
        },_setDate: function(inst, date, noChange) {
            var clear = !date, origMonth = inst.selectedMonth, origYear = inst.selectedYear, newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));
            inst.selectedDay = inst.currentDay = newDate.getDate();
            inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
            inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
            if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
                this._notifyChange(inst);
            }
            this._adjustInstDate(inst);
            if (inst.input) {
                inst.input.val(clear ? "" : this._formatDate(inst));
            }
        },_getDate: function(inst) {
            var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null : this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
            return startDate;
        },_attachHandlers: function(inst) {
            var stepMonths = this._get(inst, "stepMonths"), id = "#" + inst.id.replace(/\\\\/g, "\\");
            inst.dpDiv.find("[data-handler]").map(function() {
                var handler = {prev: function() {
                        $.datepicker._adjustDate(id, -stepMonths, "M");
                    },next: function() {
                        $.datepicker._adjustDate(id, +stepMonths, "M");
                    },hide: function() {
                        $.datepicker._hideDatepicker();
                    },today: function() {
                        $.datepicker._gotoToday(id);
                    },selectDay: function() {
                        $.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
                        return false;
                    },selectMonth: function() {
                        $.datepicker._selectMonthYear(id, this, "M");
                        return false;
                    },selectYear: function() {
                        $.datepicker._selectMonthYear(id, this, "Y");
                        return false;
                    }};
                $(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
            });
        },_generateHTML: function(inst) {
            var maxDraw, prevText, prev, nextText, next, currentText, gotoDate, controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin, monthNames, monthNamesShort, beforeShowDay, showOtherMonths, selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate, cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows, printDate, dRow, tbody, daySettings, otherMonth, unselectable, tempDate = new Date(), today = this._daylightSavingAdjust(new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), isRTL = this._get(inst, "isRTL"), showButtonPanel = this._get(inst, "showButtonPanel"), hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"), navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"), numMonths = this._getNumberOfMonths(inst), showCurrentAtPos = this._get(inst, "showCurrentAtPos"), stepMonths = this._get(inst, "stepMonths"), isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1), currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) : new Date(inst.currentYear, inst.currentMonth, inst.currentDay))), minDate = this._getMinMaxDate(inst, "min"), maxDate = this._getMinMaxDate(inst, "max"), drawMonth = inst.drawMonth - showCurrentAtPos, drawYear = inst.drawYear;
            if (drawMonth < 0) {
                drawMonth += 12;
                drawYear--;
            }
            if (maxDate) {
                maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(), maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
                maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
                while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
                    drawMonth--;
                    if (drawMonth < 0) {
                        drawMonth = 11;
                        drawYear--;
                    }
                }
            }
            inst.drawMonth = drawMonth;
            inst.drawYear = drawYear;
            prevText = this._get(inst, "prevText");
            prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText, this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)), this._getFormatConfig(inst)));
            prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" : (hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));
            nextText = this._get(inst, "nextText");
            nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText, this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)), this._getFormatConfig(inst)));
            next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" : (hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + (isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));
            currentText = this._get(inst, "currentText");
            gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
            currentText = (!navigationAsDateFormat ? currentText : this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
            controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(inst, "closeText") + "</button>" : "");
            buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") + (this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";
            firstDay = parseInt(this._get(inst, "firstDay"), 10);
            firstDay = (isNaN(firstDay) ? 0 : firstDay);
            showWeek = this._get(inst, "showWeek");
            dayNames = this._get(inst, "dayNames");
            dayNamesMin = this._get(inst, "dayNamesMin");
            monthNames = this._get(inst, "monthNames");
            monthNamesShort = this._get(inst, "monthNamesShort");
            beforeShowDay = this._get(inst, "beforeShowDay");
            showOtherMonths = this._get(inst, "showOtherMonths");
            selectOtherMonths = this._get(inst, "selectOtherMonths");
            defaultDate = this._getDefaultDate(inst);
            html = "";
            dow;
            for (row = 0; row < numMonths[0]; row++) {
                group = "";
                this.maxRows = 4;
                for (col = 0; col < numMonths[1]; col++) {
                    selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
                    cornerClass = " ui-corner-all";
                    calender = "";
                    if (isMultiMonth) {
                        calender += "<div class='ui-datepicker-group";
                        if (numMonths[1] > 1) {
                            switch (col) {
                                case 0:
                                    calender += " ui-datepicker-group-first";
                                    cornerClass = " ui-corner-" + (isRTL ? "right" : "left");
                                    break;
                                case numMonths[1] - 1:
                                    calender += " ui-datepicker-group-last";
                                    cornerClass = " ui-corner-" + (isRTL ? "left" : "right");
                                    break;
                                default:
                                    calender += " ui-datepicker-group-middle";
                                    cornerClass = "";
                                    break;
                            }
                        }
                        calender += "'>";
                    }
                    calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" + (/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") + (/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") + this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate, row > 0 || col > 0, monthNames, monthNamesShort) + "</div><table class='ui-datepicker-calendar'><thead><tr>";
                    thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
                    for (dow = 0; dow < 7; dow++) {
                        day = (dow + firstDay) % 7;
                        thead += "<th" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
                    }
                    calender += thead + "</tr></thead><tbody>";
                    daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
                    if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
                        inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
                    }
                    leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
                    curRows = Math.ceil((leadDays + daysInMonth) / 7);
                    numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows);
                    this.maxRows = numRows;
                    printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
                    for (dRow = 0; dRow < numRows; dRow++) {
                        calender += "<tr>";
                        tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" + this._get(inst, "calculateWeek")(printDate) + "</td>");
                        for (dow = 0; dow < 7; dow++) {
                            daySettings = (beforeShowDay ? beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
                            otherMonth = (printDate.getMonth() !== drawMonth);
                            unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] || (minDate && printDate < minDate) || (maxDate && printDate > maxDate);
                            tbody += "<td class='" + ((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (otherMonth ? " ui-datepicker-other-month" : "") + ((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || (defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ? " " + this._dayOverClass : "") + (unselectable ? " " + this._unselectableClass + " ui-state-disabled" : "") + (otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + (printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + (printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + ((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2].replace(/'/g, "&#39;") + "'" : "") + (unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + (otherMonth && !showOtherMonths ? "&#xa0;" : (unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" + (printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") + (printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + (otherMonth ? " ui-priority-secondary" : "") + "' href='#'>" + printDate.getDate() + "</a>")) + "</td>";
                            printDate.setDate(printDate.getDate() + 1);
                            printDate = this._daylightSavingAdjust(printDate);
                        }
                        calender += tbody + "</tr>";
                    }
                    drawMonth++;
                    if (drawMonth > 11) {
                        drawMonth = 0;
                        drawYear++;
                    }
                    calender += "</tbody></table>" + (isMultiMonth ? "</div>" + ((numMonths[0] > 0 && col === numMonths[1] - 1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
                    group += calender;
                }
                html += group;
            }
            html += buttonPanel;
            inst._keyEvent = false;
            return html;
        },_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate, secondary, monthNames, monthNamesShort) {
            var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear, changeMonth = this._get(inst, "changeMonth"), changeYear = this._get(inst, "changeYear"), showMonthAfterYear = this._get(inst, "showMonthAfterYear"), html = "<div class='ui-datepicker-title'>", monthHtml = "";
            if (secondary || !changeMonth) {
                monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
            } else {
                inMinYear = (minDate && minDate.getFullYear() === drawYear);
                inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
                monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
                for (month = 0; month < 12; month++) {
                    if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
                        monthHtml += "<option value='" + month + "'" + (month === drawMonth ? " selected='selected'" : "") + ">" + monthNamesShort[month] + "</option>";
                    }
                }
                monthHtml += "</select>";
            }
            if (!showMonthAfterYear) {
                html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
            }
            if (!inst.yearshtml) {
                inst.yearshtml = "";
                if (secondary || !changeYear) {
                    html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
                } else {
                    years = this._get(inst, "yearRange").split(":");
                    thisYear = new Date().getFullYear();
                    determineYear = function(value) {
                        var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) : (value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) : parseInt(value, 10)));
                        return (isNaN(year) ? thisYear : year);
                    };
                    year = determineYear(years[0]);
                    endYear = Math.max(year, determineYear(years[1] || ""));
                    year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
                    endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
                    inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
                    for (; year <= endYear; year++) {
                        inst.yearshtml += "<option value='" + year + "'" + (year === drawYear ? " selected='selected'" : "") + ">" + year + "</option>";
                    }
                    inst.yearshtml += "</select>";
                    html += inst.yearshtml;
                    inst.yearshtml = null;
                }
            }
            html += this._get(inst, "yearSuffix");
            if (showMonthAfterYear) {
                html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
            }
            html += "</div>";
            return html;
        },_adjustInstDate: function(inst, offset, period) {
            var year = inst.drawYear + (period === "Y" ? offset : 0), month = inst.drawMonth + (period === "M" ? offset : 0), day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0), date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));
            inst.selectedDay = date.getDate();
            inst.drawMonth = inst.selectedMonth = date.getMonth();
            inst.drawYear = inst.selectedYear = date.getFullYear();
            if (period === "M" || period === "Y") {
                this._notifyChange(inst);
            }
        },_restrictMinMax: function(inst, date) {
            var minDate = this._getMinMaxDate(inst, "min"), maxDate = this._getMinMaxDate(inst, "max"), newDate = (minDate && date < minDate ? minDate : date);
            return (maxDate && newDate > maxDate ? maxDate : newDate);
        },_notifyChange: function(inst) {
            var onChange = this._get(inst, "onChangeMonthYear");
            if (onChange) {
                onChange.apply((inst.input ? inst.input[0] : null), [inst.selectedYear, inst.selectedMonth + 1, inst]);
            }
        },_getNumberOfMonths: function(inst) {
            var numMonths = this._get(inst, "numberOfMonths");
            return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
        },_getMinMaxDate: function(inst, minMax) {
            return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
        },_getDaysInMonth: function(year, month) {
            return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
        },_getFirstDayOfMonth: function(year, month) {
            return new Date(year, month, 1).getDay();
        },_canAdjustMonth: function(inst, offset, curYear, curMonth) {
            var numMonths = this._getNumberOfMonths(inst), date = this._daylightSavingAdjust(new Date(curYear, curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));
            if (offset < 0) {
                date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
            }
            return this._isInRange(inst, date);
        },_isInRange: function(inst, date) {
            var yearSplit, currentYear, minDate = this._getMinMaxDate(inst, "min"), maxDate = this._getMinMaxDate(inst, "max"), minYear = null, maxYear = null, years = this._get(inst, "yearRange");
            if (years) {
                yearSplit = years.split(":");
                currentYear = new Date().getFullYear();
                minYear = parseInt(yearSplit[0], 10);
                maxYear = parseInt(yearSplit[1], 10);
                if (yearSplit[0].match(/[+\-].*/)) {
                    minYear += currentYear;
                }
                if (yearSplit[1].match(/[+\-].*/)) {
                    maxYear += currentYear;
                }
            }
            return ((!minDate || date.getTime() >= minDate.getTime()) && (!maxDate || date.getTime() <= maxDate.getTime()) && (!minYear || date.getFullYear() >= minYear) && (!maxYear || date.getFullYear() <= maxYear));
        },_getFormatConfig: function(inst) {
            var shortYearCutoff = this._get(inst, "shortYearCutoff");
            shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff : new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
            return {shortYearCutoff: shortYearCutoff,dayNamesShort: this._get(inst, "dayNamesShort"),dayNames: this._get(inst, "dayNames"),monthNamesShort: this._get(inst, "monthNamesShort"),monthNames: this._get(inst, "monthNames")};
        },_formatDate: function(inst, day, month, year) {
            if (!day) {
                inst.currentDay = inst.selectedDay;
                inst.currentMonth = inst.selectedMonth;
                inst.currentYear = inst.selectedYear;
            }
            var date = (day ? (typeof day === "object" ? day : this._daylightSavingAdjust(new Date(year, month, day))) : this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
            return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
        }});
    function bindHover(dpDiv) {
        var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return dpDiv.delegate(selector, "mouseout", function() {
            $(this).removeClass("ui-state-hover");
            if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                $(this).removeClass("ui-datepicker-prev-hover");
            }
            if (this.className.indexOf("ui-datepicker-next") !== -1) {
                $(this).removeClass("ui-datepicker-next-hover");
            }
        }).delegate(selector, "mouseover", function() {
            if (!$.datepicker._isDisabledDatepicker(instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
                $(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
                $(this).addClass("ui-state-hover");
                if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                    $(this).addClass("ui-datepicker-prev-hover");
                }
                if (this.className.indexOf("ui-datepicker-next") !== -1) {
                    $(this).addClass("ui-datepicker-next-hover");
                }
            }
        });
    }
    function extendRemove(target, props) {
        $.extend(target, props);
        for (var name in props) {
            if (props[name] == null) {
                target[name] = props[name];
            }
        }
        return target;
    }
    $.fn.datepicker = function(options) {
        if (!this.length) {
            return this;
        }
        if (!$.datepicker.initialized) {
            $(document).mousedown($.datepicker._checkExternalClick);
            $.datepicker.initialized = true;
        }
        if ($("#" + $.datepicker._mainDivId).length === 0) {
            $("body").append($.datepicker.dpDiv);
        }
        var otherArgs = Array.prototype.slice.call(arguments, 1);
        if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
            return $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this[0]].concat(otherArgs));
        }
        if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
            return $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this[0]].concat(otherArgs));
        }
        return this.each(function() {
            typeof options === "string" ? $.datepicker["_" + options + "Datepicker"].apply($.datepicker, [this].concat(otherArgs)) : $.datepicker._attachDatepicker(this, options);
        });
    };
    $.datepicker = new Datepicker();
    $.datepicker.initialized = false;
    $.datepicker.uuid = new Date().getTime();
    $.datepicker.version = "1.10.3";
})(jQuery);
(function($, undefined) {
    var sizeRelatedOptions = {buttons: true,height: true,maxHeight: true,maxWidth: true,minHeight: true,minWidth: true,width: true}, resizableRelatedOptions = {maxHeight: true,maxWidth: true,minHeight: true,minWidth: true};
    $.widget("ui.dialog", {version: "1.10.3",options: {appendTo: "body",autoOpen: true,buttons: [],closeOnEscape: true,closeText: "close",dialogClass: "",draggable: true,hide: null,height: "auto",maxHeight: null,maxWidth: null,minHeight: 150,minWidth: 150,modal: false,position: {my: "center",at: "center",of: window,collision: "fit",using: function(pos) {
                    var topOffset = $(this).css(pos).offset().top;
                    if (topOffset < 0) {
                        $(this).css("top", pos.top - topOffset);
                    }
                }},resizable: true,show: null,title: null,width: 300,beforeClose: null,close: null,drag: null,dragStart: null,dragStop: null,focus: null,open: null,resize: null,resizeStart: null,resizeStop: null},_create: function() {
            this.originalCss = {display: this.element[0].style.display,width: this.element[0].style.width,minHeight: this.element[0].style.minHeight,maxHeight: this.element[0].style.maxHeight,height: this.element[0].style.height};
            this.originalPosition = {parent: this.element.parent(),index: this.element.parent().children().index(this.element)};
            this.originalTitle = this.element.attr("title");
            this.options.title = this.options.title || this.originalTitle;
            this._createWrapper();
            this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);
            this._createTitlebar();
            this._createButtonPane();
            if (this.options.draggable && $.fn.draggable) {
                this._makeDraggable();
            }
            if (this.options.resizable && $.fn.resizable) {
                this._makeResizable();
            }
            this._isOpen = false;
        },_init: function() {
            if (this.options.autoOpen) {
                this.open();
            }
        },_appendTo: function() {
            var element = this.options.appendTo;
            if (element && (element.jquery || element.nodeType)) {
                return $(element);
            }
            return this.document.find(element || "body").eq(0);
        },_destroy: function() {
            var next, originalPosition = this.originalPosition;
            this._destroyOverlay();
            this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();
            this.uiDialog.stop(true, true).remove();
            if (this.originalTitle) {
                this.element.attr("title", this.originalTitle);
            }
            next = originalPosition.parent.children().eq(originalPosition.index);
            if (next.length && next[0] !== this.element[0]) {
                next.before(this.element);
            } else {
                originalPosition.parent.append(this.element);
            }
        },widget: function() {
            return this.uiDialog;
        },disable: $.noop,enable: $.noop,close: function(event) {
            var that = this;
            if (!this._isOpen || this._trigger("beforeClose", event) === false) {
                return;
            }
            this._isOpen = false;
            this._destroyOverlay();
            if (!this.opener.filter(":focusable").focus().length) {
                $(this.document[0].activeElement).blur();
            }
            this._hide(this.uiDialog, this.options.hide, function() {
                that._trigger("close", event);
            });
        },isOpen: function() {
            return this._isOpen;
        },moveToTop: function() {
            this._moveToTop();
        },_moveToTop: function(event, silent) {
            var moved = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            if (moved && !silent) {
                this._trigger("focus", event);
            }
            return moved;
        },open: function() {
            var that = this;
            if (this._isOpen) {
                if (this._moveToTop()) {
                    this._focusTabbable();
                }
                return;
            }
            this._isOpen = true;
            this.opener = $(this.document[0].activeElement);
            this._size();
            this._position();
            this._createOverlay();
            this._moveToTop(null, true);
            this._show(this.uiDialog, this.options.show, function() {
                that._focusTabbable();
                that._trigger("focus");
            });
            this._trigger("open");
        },_focusTabbable: function() {
            var hasFocus = this.element.find("[autofocus]");
            if (!hasFocus.length) {
                hasFocus = this.element.find(":tabbable");
            }
            if (!hasFocus.length) {
                hasFocus = this.uiDialogButtonPane.find(":tabbable");
            }
            if (!hasFocus.length) {
                hasFocus = this.uiDialogTitlebarClose.filter(":tabbable");
            }
            if (!hasFocus.length) {
                hasFocus = this.uiDialog;
            }
            hasFocus.eq(0).focus();
        },_keepFocus: function(event) {
            function checkFocus() {
                var activeElement = this.document[0].activeElement, isActive = this.uiDialog[0] === activeElement || $.contains(this.uiDialog[0], activeElement);
                if (!isActive) {
                    this._focusTabbable();
                }
            }
            event.preventDefault();
            checkFocus.call(this);
            this._delay(checkFocus);
        },_createWrapper: function() {
            this.uiDialog = $("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({tabIndex: -1,role: "dialog"}).appendTo(this._appendTo());
            this._on(this.uiDialog, {keydown: function(event) {
                    if (this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode && event.keyCode === $.ui.keyCode.ESCAPE) {
                        event.preventDefault();
                        this.close(event);
                        return;
                    }
                    if (event.keyCode !== $.ui.keyCode.TAB) {
                        return;
                    }
                    var tabbables = this.uiDialog.find(":tabbable"), first = tabbables.filter(":first"), last = tabbables.filter(":last");
                    if ((event.target === last[0] || event.target === this.uiDialog[0]) && !event.shiftKey) {
                        first.focus(1);
                        event.preventDefault();
                    } else {
                        if ((event.target === first[0] || event.target === this.uiDialog[0]) && event.shiftKey) {
                            last.focus(1);
                            event.preventDefault();
                        }
                    }
                },mousedown: function(event) {
                    if (this._moveToTop(event)) {
                        this._focusTabbable();
                    }
                }});
            if (!this.element.find("[aria-describedby]").length) {
                this.uiDialog.attr({"aria-describedby": this.element.uniqueId().attr("id")});
            }
        },_createTitlebar: function() {
            var uiDialogTitle;
            this.uiDialogTitlebar = $("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);
            this._on(this.uiDialogTitlebar, {mousedown: function(event) {
                    if (!$(event.target).closest(".ui-dialog-titlebar-close")) {
                        this.uiDialog.focus();
                    }
                }});
            this.uiDialogTitlebarClose = $("<button></button>").button({label: this.options.closeText,icons: {primary: "ui-icon-closethick"},text: false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
            this._on(this.uiDialogTitlebarClose, {click: function(event) {
                    event.preventDefault();
                    this.close(event);
                }});
            uiDialogTitle = $("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
            this._title(uiDialogTitle);
            this.uiDialog.attr({"aria-labelledby": uiDialogTitle.attr("id")});
        },_title: function(title) {
            if (!this.options.title) {
                title.html("&#160;");
            }
            title.text(this.options.title);
        },_createButtonPane: function() {
            this.uiDialogButtonPane = $("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");
            this.uiButtonSet = $("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);
            this._createButtons();
        },_createButtons: function() {
            var that = this, buttons = this.options.buttons;
            this.uiDialogButtonPane.remove();
            this.uiButtonSet.empty();
            if ($.isEmptyObject(buttons) || ($.isArray(buttons) && !buttons.length)) {
                this.uiDialog.removeClass("ui-dialog-buttons");
                return;
            }
            $.each(buttons, function(name, props) {
                var click, buttonOptions;
                props = $.isFunction(props) ? {click: props,text: name} : props;
                props = $.extend({type: "button"}, props);
                click = props.click;
                props.click = function() {
                    click.apply(that.element[0], arguments);
                };
                buttonOptions = {icons: props.icons,text: props.showText};
                delete props.icons;
                delete props.showText;
                $("<button></button>", props).button(buttonOptions).appendTo(that.uiButtonSet);
            });
            this.uiDialog.addClass("ui-dialog-buttons");
            this.uiDialogButtonPane.appendTo(this.uiDialog);
        },_makeDraggable: function() {
            var that = this, options = this.options;
            function filteredUi(ui) {
                return {position: ui.position,offset: ui.offset};
            }
            this.uiDialog.draggable({cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",handle: ".ui-dialog-titlebar",containment: "document",start: function(event, ui) {
                    $(this).addClass("ui-dialog-dragging");
                    that._blockFrames();
                    that._trigger("dragStart", event, filteredUi(ui));
                },drag: function(event, ui) {
                    that._trigger("drag", event, filteredUi(ui));
                },stop: function(event, ui) {
                    options.position = [ui.position.left - that.document.scrollLeft(), ui.position.top - that.document.scrollTop()];
                    $(this).removeClass("ui-dialog-dragging");
                    that._unblockFrames();
                    that._trigger("dragStop", event, filteredUi(ui));
                }});
        },_makeResizable: function() {
            var that = this, options = this.options, handles = options.resizable, position = this.uiDialog.css("position"), resizeHandles = typeof handles === "string" ? handles : "n,e,s,w,se,sw,ne,nw";
            function filteredUi(ui) {
                return {originalPosition: ui.originalPosition,originalSize: ui.originalSize,position: ui.position,size: ui.size};
            }
            this.uiDialog.resizable({cancel: ".ui-dialog-content",containment: "document",alsoResize: this.element,maxWidth: options.maxWidth,maxHeight: options.maxHeight,minWidth: options.minWidth,minHeight: this._minHeight(),handles: resizeHandles,start: function(event, ui) {
                    $(this).addClass("ui-dialog-resizing");
                    that._blockFrames();
                    that._trigger("resizeStart", event, filteredUi(ui));
                },resize: function(event, ui) {
                    that._trigger("resize", event, filteredUi(ui));
                },stop: function(event, ui) {
                    options.height = $(this).height();
                    options.width = $(this).width();
                    $(this).removeClass("ui-dialog-resizing");
                    that._unblockFrames();
                    that._trigger("resizeStop", event, filteredUi(ui));
                }}).css("position", position);
        },_minHeight: function() {
            var options = this.options;
            return options.height === "auto" ? options.minHeight : Math.min(options.minHeight, options.height);
        },_position: function() {
            var isVisible = this.uiDialog.is(":visible");
            if (!isVisible) {
                this.uiDialog.show();
            }
            this.uiDialog.position(this.options.position);
            if (!isVisible) {
                this.uiDialog.hide();
            }
        },_setOptions: function(options) {
            var that = this, resize = false, resizableOptions = {};
            $.each(options, function(key, value) {
                that._setOption(key, value);
                if (key in sizeRelatedOptions) {
                    resize = true;
                }
                if (key in resizableRelatedOptions) {
                    resizableOptions[key] = value;
                }
            });
            if (resize) {
                this._size();
                this._position();
            }
            if (this.uiDialog.is(":data(ui-resizable)")) {
                this.uiDialog.resizable("option", resizableOptions);
            }
        },_setOption: function(key, value) {
            var isDraggable, isResizable, uiDialog = this.uiDialog;
            if (key === "dialogClass") {
                uiDialog.removeClass(this.options.dialogClass).addClass(value);
            }
            if (key === "disabled") {
                return;
            }
            this._super(key, value);
            if (key === "appendTo") {
                this.uiDialog.appendTo(this._appendTo());
            }
            if (key === "buttons") {
                this._createButtons();
            }
            if (key === "closeText") {
                this.uiDialogTitlebarClose.button({label: "" + value});
            }
            if (key === "draggable") {
                isDraggable = uiDialog.is(":data(ui-draggable)");
                if (isDraggable && !value) {
                    uiDialog.draggable("destroy");
                }
                if (!isDraggable && value) {
                    this._makeDraggable();
                }
            }
            if (key === "position") {
                this._position();
            }
            if (key === "resizable") {
                isResizable = uiDialog.is(":data(ui-resizable)");
                if (isResizable && !value) {
                    uiDialog.resizable("destroy");
                }
                if (isResizable && typeof value === "string") {
                    uiDialog.resizable("option", "handles", value);
                }
                if (!isResizable && value !== false) {
                    this._makeResizable();
                }
            }
            if (key === "title") {
                this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));
            }
        },_size: function() {
            var nonContentHeight, minContentHeight, maxContentHeight, options = this.options;
            this.element.show().css({width: "auto",minHeight: 0,maxHeight: "none",height: 0});
            if (options.minWidth > options.width) {
                options.width = options.minWidth;
            }
            nonContentHeight = this.uiDialog.css({height: "auto",width: options.width}).outerHeight();
            minContentHeight = Math.max(0, options.minHeight - nonContentHeight);
            maxContentHeight = typeof options.maxHeight === "number" ? Math.max(0, options.maxHeight - nonContentHeight) : "none";
            if (options.height === "auto") {
                this.element.css({minHeight: minContentHeight,maxHeight: maxContentHeight,height: "auto"});
            } else {
                this.element.height(Math.max(0, options.height - nonContentHeight));
            }
            if (this.uiDialog.is(":data(ui-resizable)")) {
                this.uiDialog.resizable("option", "minHeight", this._minHeight());
            }
        },_blockFrames: function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var iframe = $(this);
                return $("<div>").css({position: "absolute",width: iframe.outerWidth(),height: iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];
            });
        },_unblockFrames: function() {
            if (this.iframeBlocks) {
                this.iframeBlocks.remove();
                delete this.iframeBlocks;
            }
        },_allowInteraction: function(event) {
            if ($(event.target).closest(".ui-dialog").length) {
                return true;
            }
            return !!$(event.target).closest(".ui-datepicker").length;
        },_createOverlay: function() {
            if (!this.options.modal) {
                return;
            }
            var that = this, widgetFullName = this.widgetFullName;
            if (!$.ui.dialog.overlayInstances) {
                this._delay(function() {
                    if ($.ui.dialog.overlayInstances) {
                        this.document.bind("focusin.dialog", function(event) {
                            if (!that._allowInteraction(event)) {
                                event.preventDefault();
                                $(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable();
                            }
                        });
                    }
                });
            }
            this.overlay = $("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());
            this._on(this.overlay, {mousedown: "_keepFocus"});
            $.ui.dialog.overlayInstances++;
        },_destroyOverlay: function() {
            if (!this.options.modal) {
                return;
            }
            if (this.overlay) {
                $.ui.dialog.overlayInstances--;
                if (!$.ui.dialog.overlayInstances) {
                    this.document.unbind("focusin.dialog");
                }
                this.overlay.remove();
                this.overlay = null;
            }
        }});
    $.ui.dialog.overlayInstances = 0;
    if ($.uiBackCompat !== false) {
        $.widget("ui.dialog", $.ui.dialog, {_position: function() {
                var position = this.options.position, myAt = [], offset = [0, 0], isVisible;
                if (position) {
                    if (typeof position === "string" || (typeof position === "object" && "0" in position)) {
                        myAt = position.split ? position.split(" ") : [position[0], position[1]];
                        if (myAt.length === 1) {
                            myAt[1] = myAt[0];
                        }
                        $.each(["left", "top"], function(i, offsetPosition) {
                            if (+myAt[i] === myAt[i]) {
                                offset[i] = myAt[i];
                                myAt[i] = offsetPosition;
                            }
                        });
                        position = {my: myAt[0] + (offset[0] < 0 ? offset[0] : "+" + offset[0]) + " " + myAt[1] + (offset[1] < 0 ? offset[1] : "+" + offset[1]),at: myAt.join(" ")};
                    }
                    position = $.extend({}, $.ui.dialog.prototype.options.position, position);
                } else {
                    position = $.ui.dialog.prototype.options.position;
                }
                isVisible = this.uiDialog.is(":visible");
                if (!isVisible) {
                    this.uiDialog.show();
                }
                this.uiDialog.position(position);
                if (!isVisible) {
                    this.uiDialog.hide();
                }
            }});
    }
}(jQuery));
(function($, undefined) {
    $.widget("ui.menu", {version: "1.10.3",defaultElement: "<ul>",delay: 300,options: {icons: {submenu: "ui-icon-carat-1-e"},menus: "ul",position: {my: "left top",at: "right top"},role: "menu",blur: null,focus: null,select: null},_create: function() {
            this.activeMenu = this.element;
            this.mouseHandled = false;
            this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({role: this.options.role,tabIndex: 0}).bind("click" + this.eventNamespace, $.proxy(function(event) {
                if (this.options.disabled) {
                    event.preventDefault();
                }
            }, this));
            if (this.options.disabled) {
                this.element.addClass("ui-state-disabled").attr("aria-disabled", "true");
            }
            this._on({"mousedown .ui-menu-item > a": function(event) {
                    event.preventDefault();
                },"click .ui-state-disabled > a": function(event) {
                    event.preventDefault();
                },"click .ui-menu-item:has(a)": function(event) {
                    var target = $(event.target).closest(".ui-menu-item");
                    if (!this.mouseHandled && target.not(".ui-state-disabled").length) {
                        this.mouseHandled = true;
                        this.select(event);
                        if (target.has(".ui-menu").length) {
                            this.expand(event);
                        } else {
                            if (!this.element.is(":focus")) {
                                this.element.trigger("focus", [true]);
                                if (this.active && this.active.parents(".ui-menu").length === 1) {
                                    clearTimeout(this.timer);
                                }
                            }
                        }
                    }
                },"mouseenter .ui-menu-item": function(event) {
                    var target = $(event.currentTarget);
                    target.siblings().children(".ui-state-active").removeClass("ui-state-active");
                    this.focus(event, target);
                },mouseleave: "collapseAll","mouseleave .ui-menu": "collapseAll",focus: function(event, keepActiveItem) {
                    var item = this.active || this.element.children(".ui-menu-item").eq(0);
                    if (!keepActiveItem) {
                        this.focus(event, item);
                    }
                },blur: function(event) {
                    this._delay(function() {
                        if (!$.contains(this.element[0], this.document[0].activeElement)) {
                            this.collapseAll(event);
                        }
                    });
                },keydown: "_keydown"});
            this.refresh();
            this._on(this.document, {click: function(event) {
                    if (!$(event.target).closest(".ui-menu").length) {
                        this.collapseAll(event);
                    }
                    this.mouseHandled = false;
                }});
        },_destroy: function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var elem = $(this);
                if (elem.data("ui-menu-submenu-carat")) {
                    elem.remove();
                }
            });
            this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");
        },_keydown: function(event) {
            var match, prev, character, skip, regex, preventDefault = true;
            function escape(value) {
                return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            }
            switch (event.keyCode) {
                case $.ui.keyCode.PAGE_UP:
                    this.previousPage(event);
                    break;
                case $.ui.keyCode.PAGE_DOWN:
                    this.nextPage(event);
                    break;
                case $.ui.keyCode.HOME:
                    this._move("first", "first", event);
                    break;
                case $.ui.keyCode.END:
                    this._move("last", "last", event);
                    break;
                case $.ui.keyCode.UP:
                    this.previous(event);
                    break;
                case $.ui.keyCode.DOWN:
                    this.next(event);
                    break;
                case $.ui.keyCode.LEFT:
                    this.collapse(event);
                    break;
                case $.ui.keyCode.RIGHT:
                    if (this.active && !this.active.is(".ui-state-disabled")) {
                        this.expand(event);
                    }
                    break;
                case $.ui.keyCode.ENTER:
                case $.ui.keyCode.SPACE:
                    this._activate(event);
                    break;
                case $.ui.keyCode.ESCAPE:
                    this.collapse(event);
                    break;
                default:
                    preventDefault = false;
                    prev = this.previousFilter || "";
                    character = String.fromCharCode(event.keyCode);
                    skip = false;
                    clearTimeout(this.filterTimer);
                    if (character === prev) {
                        skip = true;
                    } else {
                        character = prev + character;
                    }
                    regex = new RegExp("^" + escape(character), "i");
                    match = this.activeMenu.children(".ui-menu-item").filter(function() {
                        return regex.test($(this).children("a").text());
                    });
                    match = skip && match.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : match;
                    if (!match.length) {
                        character = String.fromCharCode(event.keyCode);
                        regex = new RegExp("^" + escape(character), "i");
                        match = this.activeMenu.children(".ui-menu-item").filter(function() {
                            return regex.test($(this).children("a").text());
                        });
                    }
                    if (match.length) {
                        this.focus(event, match);
                        if (match.length > 1) {
                            this.previousFilter = character;
                            this.filterTimer = this._delay(function() {
                                delete this.previousFilter;
                            }, 1000);
                        } else {
                            delete this.previousFilter;
                        }
                    } else {
                        delete this.previousFilter;
                    }
            }
            if (preventDefault) {
                event.preventDefault();
            }
        },_activate: function(event) {
            if (!this.active.is(".ui-state-disabled")) {
                if (this.active.children("a[aria-haspopup='true']").length) {
                    this.expand(event);
                } else {
                    this.select(event);
                }
            }
        },refresh: function() {
            var menus, icon = this.options.icons.submenu, submenus = this.element.find(this.options.menus);
            submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role: this.options.role,"aria-hidden": "true","aria-expanded": "false"}).each(function() {
                var menu = $(this), item = menu.prev("a"), submenuCarat = $("<span>").addClass("ui-menu-icon ui-icon " + icon).data("ui-menu-submenu-carat", true);
                item.attr("aria-haspopup", "true").prepend(submenuCarat);
                menu.attr("aria-labelledby", item.attr("id"));
            });
            menus = submenus.add(this.element);
            menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex: -1,role: this._itemRole()});
            menus.children(":not(.ui-menu-item)").each(function() {
                var item = $(this);
                if (!/[^\-\u2014\u2013\s]/.test(item.text())) {
                    item.addClass("ui-widget-content ui-menu-divider");
                }
            });
            menus.children(".ui-state-disabled").attr("aria-disabled", "true");
            if (this.active && !$.contains(this.element[0], this.active[0])) {
                this.blur();
            }
        },_itemRole: function() {
            return {menu: "menuitem",listbox: "option"}[this.options.role];
        },_setOption: function(key, value) {
            if (key === "icons") {
                this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);
            }
            this._super(key, value);
        },focus: function(event, item) {
            var nested, focused;
            this.blur(event, event && event.type === "focus");
            this._scrollIntoView(item);
            this.active = item.first();
            focused = this.active.children("a").addClass("ui-state-focus");
            if (this.options.role) {
                this.element.attr("aria-activedescendant", focused.attr("id"));
            }
            this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");
            if (event && event.type === "keydown") {
                this._close();
            } else {
                this.timer = this._delay(function() {
                    this._close();
                }, this.delay);
            }
            nested = item.children(".ui-menu");
            if (nested.length && (/^mouse/.test(event.type))) {
                this._startOpening(nested);
            }
            this.activeMenu = item.parent();
            this._trigger("focus", event, {item: item});
        },_scrollIntoView: function(item) {
            var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
            if (this._hasScroll()) {
                borderTop = parseFloat($.css(this.activeMenu[0], "borderTopWidth")) || 0;
                paddingTop = parseFloat($.css(this.activeMenu[0], "paddingTop")) || 0;
                offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
                scroll = this.activeMenu.scrollTop();
                elementHeight = this.activeMenu.height();
                itemHeight = item.height();
                if (offset < 0) {
                    this.activeMenu.scrollTop(scroll + offset);
                } else {
                    if (offset + itemHeight > elementHeight) {
                        this.activeMenu.scrollTop(scroll + offset - elementHeight + itemHeight);
                    }
                }
            }
        },blur: function(event, fromFocus) {
            if (!fromFocus) {
                clearTimeout(this.timer);
            }
            if (!this.active) {
                return;
            }
            this.active.children("a").removeClass("ui-state-focus");
            this.active = null;
            this._trigger("blur", event, {item: this.active});
        },_startOpening: function(submenu) {
            clearTimeout(this.timer);
            if (submenu.attr("aria-hidden") !== "true") {
                return;
            }
            this.timer = this._delay(function() {
                this._close();
                this._open(submenu);
            }, this.delay);
        },_open: function(submenu) {
            var position = $.extend({of: this.active}, this.options.position);
            clearTimeout(this.timer);
            this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden", "true");
            submenu.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(position);
        },collapseAll: function(event, all) {
            clearTimeout(this.timer);
            this.timer = this._delay(function() {
                var currentMenu = all ? this.element : $(event && event.target).closest(this.element.find(".ui-menu"));
                if (!currentMenu.length) {
                    currentMenu = this.element;
                }
                this._close(currentMenu);
                this.blur(event);
                this.activeMenu = currentMenu;
            }, this.delay);
        },_close: function(startMenu) {
            if (!startMenu) {
                startMenu = this.active ? this.active.parent() : this.element;
            }
            startMenu.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active");
        },collapse: function(event) {
            var newItem = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            if (newItem && newItem.length) {
                this._close();
                this.focus(event, newItem);
            }
        },expand: function(event) {
            var newItem = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            if (newItem && newItem.length) {
                this._open(newItem.parent());
                this._delay(function() {
                    this.focus(event, newItem);
                });
            }
        },next: function(event) {
            this._move("next", "first", event);
        },previous: function(event) {
            this._move("prev", "last", event);
        },isFirstItem: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length;
        },isLastItem: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length;
        },_move: function(direction, filter, event) {
            var next;
            if (this.active) {
                if (direction === "first" || direction === "last") {
                    next = this.active[direction === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1);
                } else {
                    next = this.active[direction + "All"](".ui-menu-item").eq(0);
                }
            }
            if (!next || !next.length || !this.active) {
                next = this.activeMenu.children(".ui-menu-item")[filter]();
            }
            this.focus(event, next);
        },nextPage: function(event) {
            var item, base, height;
            if (!this.active) {
                this.next(event);
                return;
            }
            if (this.isLastItem()) {
                return;
            }
            if (this._hasScroll()) {
                base = this.active.offset().top;
                height = this.element.height();
                this.active.nextAll(".ui-menu-item").each(function() {
                    item = $(this);
                    return item.offset().top - base - height < 0;
                });
                this.focus(event, item);
            } else {
                this.focus(event, this.activeMenu.children(".ui-menu-item")[!this.active ? "first" : "last"]());
            }
        },previousPage: function(event) {
            var item, base, height;
            if (!this.active) {
                this.next(event);
                return;
            }
            if (this.isFirstItem()) {
                return;
            }
            if (this._hasScroll()) {
                base = this.active.offset().top;
                height = this.element.height();
                this.active.prevAll(".ui-menu-item").each(function() {
                    item = $(this);
                    return item.offset().top - base + height > 0;
                });
                this.focus(event, item);
            } else {
                this.focus(event, this.activeMenu.children(".ui-menu-item").first());
            }
        },_hasScroll: function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight");
        },select: function(event) {
            this.active = this.active || $(event.target).closest(".ui-menu-item");
            var ui = {item: this.active};
            if (!this.active.has(".ui-menu").length) {
                this.collapseAll(event, true);
            }
            this._trigger("select", event, ui);
        }});
}(jQuery));
(function($, undefined) {
    $.widget("ui.progressbar", {version: "1.10.3",options: {max: 100,value: 0,change: null,complete: null},min: 0,_create: function() {
            this.oldValue = this.options.value = this._constrainedValue();
            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role: "progressbar","aria-valuemin": this.min});
            this.valueDiv = $("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);
            this._refreshValue();
        },_destroy: function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.valueDiv.remove();
        },value: function(newValue) {
            if (newValue === undefined) {
                return this.options.value;
            }
            this.options.value = this._constrainedValue(newValue);
            this._refreshValue();
        },_constrainedValue: function(newValue) {
            if (newValue === undefined) {
                newValue = this.options.value;
            }
            this.indeterminate = newValue === false;
            if (typeof newValue !== "number") {
                newValue = 0;
            }
            return this.indeterminate ? false : Math.min(this.options.max, Math.max(this.min, newValue));
        },_setOptions: function(options) {
            var value = options.value;
            delete options.value;
            this._super(options);
            this.options.value = this._constrainedValue(value);
            this._refreshValue();
        },_setOption: function(key, value) {
            if (key === "max") {
                value = Math.max(this.min, value);
            }
            this._super(key, value);
        },_percentage: function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min);
        },_refreshValue: function() {
            var value = this.options.value, percentage = this._percentage();
            this.valueDiv.toggle(this.indeterminate || value > this.min).toggleClass("ui-corner-right", value === this.options.max).width(percentage.toFixed(0) + "%");
            this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate);
            if (this.indeterminate) {
                this.element.removeAttr("aria-valuenow");
                if (!this.overlayDiv) {
                    this.overlayDiv = $("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv);
                }
            } else {
                this.element.attr({"aria-valuemax": this.options.max,"aria-valuenow": value});
                if (this.overlayDiv) {
                    this.overlayDiv.remove();
                    this.overlayDiv = null;
                }
            }
            if (this.oldValue !== value) {
                this.oldValue = value;
                this._trigger("change");
            }
            if (value === this.options.max) {
                this._trigger("complete");
            }
        }});
})(jQuery);
(function($, undefined) {
    var numPages = 5;
    $.widget("ui.slider", $.ui.mouse, {version: "1.10.3",widgetEventPrefix: "slide",options: {animate: false,distance: 0,max: 100,min: 0,orientation: "horizontal",range: false,step: 1,value: 0,values: null,change: null,slide: null,start: null,stop: null},_create: function() {
            this._keySliding = false;
            this._mouseSliding = false;
            this._animateOff = true;
            this._handleIndex = null;
            this._detectOrientation();
            this._mouseInit();
            this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all");
            this._refresh();
            this._setOption("disabled", this.options.disabled);
            this._animateOff = false;
        },_refresh: function() {
            this._createRange();
            this._createHandles();
            this._setupEvents();
            this._refreshValue();
        },_createHandles: function() {
            var i, handleCount, options = this.options, existingHandles = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), handle = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>", handles = [];
            handleCount = (options.values && options.values.length) || 1;
            if (existingHandles.length > handleCount) {
                existingHandles.slice(handleCount).remove();
                existingHandles = existingHandles.slice(0, handleCount);
            }
            for (i = existingHandles.length; i < handleCount; i++) {
                handles.push(handle);
            }
            this.handles = existingHandles.add($(handles.join("")).appendTo(this.element));
            this.handle = this.handles.eq(0);
            this.handles.each(function(i) {
                $(this).data("ui-slider-handle-index", i);
            });
        },_createRange: function() {
            var options = this.options, classes = "";
            if (options.range) {
                if (options.range === true) {
                    if (!options.values) {
                        options.values = [this._valueMin(), this._valueMin()];
                    } else {
                        if (options.values.length && options.values.length !== 2) {
                            options.values = [options.values[0], options.values[0]];
                        } else {
                            if ($.isArray(options.values)) {
                                options.values = options.values.slice(0);
                            }
                        }
                    }
                }
                if (!this.range || !this.range.length) {
                    this.range = $("<div></div>").appendTo(this.element);
                    classes = "ui-slider-range ui-widget-header ui-corner-all";
                } else {
                    this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left: "",bottom: ""});
                }
                this.range.addClass(classes + ((options.range === "min" || options.range === "max") ? " ui-slider-range-" + options.range : ""));
            } else {
                this.range = $([]);
            }
        },_setupEvents: function() {
            var elements = this.handles.add(this.range).filter("a");
            this._off(elements);
            this._on(elements, this._handleEvents);
            this._hoverable(elements);
            this._focusable(elements);
        },_destroy: function() {
            this.handles.remove();
            this.range.remove();
            this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
            this._mouseDestroy();
        },_mouseCapture: function(event) {
            var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle, that = this, o = this.options;
            if (o.disabled) {
                return false;
            }
            this.elementSize = {width: this.element.outerWidth(),height: this.element.outerHeight()};
            this.elementOffset = this.element.offset();
            position = {x: event.pageX,y: event.pageY};
            normValue = this._normValueFromMouse(position);
            distance = this._valueMax() - this._valueMin() + 1;
            this.handles.each(function(i) {
                var thisDistance = Math.abs(normValue - that.values(i));
                if ((distance > thisDistance) || (distance === thisDistance && (i === that._lastChangedValue || that.values(i) === o.min))) {
                    distance = thisDistance;
                    closestHandle = $(this);
                    index = i;
                }
            });
            allowed = this._start(event, index);
            if (allowed === false) {
                return false;
            }
            this._mouseSliding = true;
            this._handleIndex = index;
            closestHandle.addClass("ui-state-active").focus();
            offset = closestHandle.offset();
            mouseOverHandle = !$(event.target).parents().addBack().is(".ui-slider-handle");
            this._clickOffset = mouseOverHandle ? {left: 0,top: 0} : {left: event.pageX - offset.left - (closestHandle.width() / 2),top: event.pageY - offset.top - (closestHandle.height() / 2) - (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) - (parseInt(closestHandle.css("borderBottomWidth"), 10) || 0) + (parseInt(closestHandle.css("marginTop"), 10) || 0)};
            if (!this.handles.hasClass("ui-state-hover")) {
                this._slide(event, index, normValue);
            }
            this._animateOff = true;
            return true;
        },_mouseStart: function() {
            return true;
        },_mouseDrag: function(event) {
            var position = {x: event.pageX,y: event.pageY}, normValue = this._normValueFromMouse(position);
            this._slide(event, this._handleIndex, normValue);
            return false;
        },_mouseStop: function(event) {
            this.handles.removeClass("ui-state-active");
            this._mouseSliding = false;
            this._stop(event, this._handleIndex);
            this._change(event, this._handleIndex);
            this._handleIndex = null;
            this._clickOffset = null;
            this._animateOff = false;
            return false;
        },_detectOrientation: function() {
            this.orientation = (this.options.orientation === "vertical") ? "vertical" : "horizontal";
        },_normValueFromMouse: function(position) {
            var pixelTotal, pixelMouse, percentMouse, valueTotal, valueMouse;
            if (this.orientation === "horizontal") {
                pixelTotal = this.elementSize.width;
                pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0);
            } else {
                pixelTotal = this.elementSize.height;
                pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0);
            }
            percentMouse = (pixelMouse / pixelTotal);
            if (percentMouse > 1) {
                percentMouse = 1;
            }
            if (percentMouse < 0) {
                percentMouse = 0;
            }
            if (this.orientation === "vertical") {
                percentMouse = 1 - percentMouse;
            }
            valueTotal = this._valueMax() - this._valueMin();
            valueMouse = this._valueMin() + percentMouse * valueTotal;
            return this._trimAlignValue(valueMouse);
        },_start: function(event, index) {
            var uiHash = {handle: this.handles[index],value: this.value()};
            if (this.options.values && this.options.values.length) {
                uiHash.value = this.values(index);
                uiHash.values = this.values();
            }
            return this._trigger("start", event, uiHash);
        },_slide: function(event, index, newVal) {
            var otherVal, newValues, allowed;
            if (this.options.values && this.options.values.length) {
                otherVal = this.values(index ? 0 : 1);
                if ((this.options.values.length === 2 && this.options.range === true) && ((index === 0 && newVal > otherVal) || (index === 1 && newVal < otherVal))) {
                    newVal = otherVal;
                }
                if (newVal !== this.values(index)) {
                    newValues = this.values();
                    newValues[index] = newVal;
                    allowed = this._trigger("slide", event, {handle: this.handles[index],value: newVal,values: newValues});
                    otherVal = this.values(index ? 0 : 1);
                    if (allowed !== false) {
                        this.values(index, newVal, true);
                    }
                }
            } else {
                if (newVal !== this.value()) {
                    allowed = this._trigger("slide", event, {handle: this.handles[index],value: newVal});
                    if (allowed !== false) {
                        this.value(newVal);
                    }
                }
            }
        },_stop: function(event, index) {
            var uiHash = {handle: this.handles[index],value: this.value()};
            if (this.options.values && this.options.values.length) {
                uiHash.value = this.values(index);
                uiHash.values = this.values();
            }
            this._trigger("stop", event, uiHash);
        },_change: function(event, index) {
            if (!this._keySliding && !this._mouseSliding) {
                var uiHash = {handle: this.handles[index],value: this.value()};
                if (this.options.values && this.options.values.length) {
                    uiHash.value = this.values(index);
                    uiHash.values = this.values();
                }
                this._lastChangedValue = index;
                this._trigger("change", event, uiHash);
            }
        },value: function(newValue) {
            if (arguments.length) {
                this.options.value = this._trimAlignValue(newValue);
                this._refreshValue();
                this._change(null, 0);
                return;
            }
            return this._value();
        },values: function(index, newValue) {
            var vals, newValues, i;
            if (arguments.length > 1) {
                this.options.values[index] = this._trimAlignValue(newValue);
                this._refreshValue();
                this._change(null, index);
                return;
            }
            if (arguments.length) {
                if ($.isArray(arguments[0])) {
                    vals = this.options.values;
                    newValues = arguments[0];
                    for (i = 0; i < vals.length; i += 1) {
                        vals[i] = this._trimAlignValue(newValues[i]);
                        this._change(null, i);
                    }
                    this._refreshValue();
                } else {
                    if (this.options.values && this.options.values.length) {
                        return this._values(index);
                    } else {
                        return this.value();
                    }
                }
            } else {
                return this._values();
            }
        },_setOption: function(key, value) {
            var i, valsLength = 0;
            if (key === "range" && this.options.range === true) {
                if (value === "min") {
                    this.options.value = this._values(0);
                    this.options.values = null;
                } else {
                    if (value === "max") {
                        this.options.value = this._values(this.options.values.length - 1);
                        this.options.values = null;
                    }
                }
            }
            if ($.isArray(this.options.values)) {
                valsLength = this.options.values.length;
            }
            $.Widget.prototype._setOption.apply(this, arguments);
            switch (key) {
                case "orientation":
                    this._detectOrientation();
                    this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);
                    this._refreshValue();
                    break;
                case "value":
                    this._animateOff = true;
                    this._refreshValue();
                    this._change(null, 0);
                    this._animateOff = false;
                    break;
                case "values":
                    this._animateOff = true;
                    this._refreshValue();
                    for (i = 0; i < valsLength; i += 1) {
                        this._change(null, i);
                    }
                    this._animateOff = false;
                    break;
                case "min":
                case "max":
                    this._animateOff = true;
                    this._refreshValue();
                    this._animateOff = false;
                    break;
                case "range":
                    this._animateOff = true;
                    this._refresh();
                    this._animateOff = false;
                    break;
            }
        },_value: function() {
            var val = this.options.value;
            val = this._trimAlignValue(val);
            return val;
        },_values: function(index) {
            var val, vals, i;
            if (arguments.length) {
                val = this.options.values[index];
                val = this._trimAlignValue(val);
                return val;
            } else {
                if (this.options.values && this.options.values.length) {
                    vals = this.options.values.slice();
                    for (i = 0; i < vals.length; i += 1) {
                        vals[i] = this._trimAlignValue(vals[i]);
                    }
                    return vals;
                } else {
                    return [];
                }
            }
        },_trimAlignValue: function(val) {
            if (val <= this._valueMin()) {
                return this._valueMin();
            }
            if (val >= this._valueMax()) {
                return this._valueMax();
            }
            var step = (this.options.step > 0) ? this.options.step : 1, valModStep = (val - this._valueMin()) % step, alignValue = val - valModStep;
            if (Math.abs(valModStep) * 2 >= step) {
                alignValue += (valModStep > 0) ? step : (-step);
            }
            return parseFloat(alignValue.toFixed(5));
        },_valueMin: function() {
            return this.options.min;
        },_valueMax: function() {
            return this.options.max;
        },_refreshValue: function() {
            var lastValPercent, valPercent, value, valueMin, valueMax, oRange = this.options.range, o = this.options, that = this, animate = (!this._animateOff) ? o.animate : false, _set = {};
            if (this.options.values && this.options.values.length) {
                this.handles.each(function(i) {
                    valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100;
                    _set[that.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";
                    $(this).stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);
                    if (that.options.range === true) {
                        if (that.orientation === "horizontal") {
                            if (i === 0) {
                                that.range.stop(1, 1)[animate ? "animate" : "css"]({left: valPercent + "%"}, o.animate);
                            }
                            if (i === 1) {
                                that.range[animate ? "animate" : "css"]({width: (valPercent - lastValPercent) + "%"}, {queue: false,duration: o.animate});
                            }
                        } else {
                            if (i === 0) {
                                that.range.stop(1, 1)[animate ? "animate" : "css"]({bottom: (valPercent) + "%"}, o.animate);
                            }
                            if (i === 1) {
                                that.range[animate ? "animate" : "css"]({height: (valPercent - lastValPercent) + "%"}, {queue: false,duration: o.animate});
                            }
                        }
                    }
                    lastValPercent = valPercent;
                });
            } else {
                value = this.value();
                valueMin = this._valueMin();
                valueMax = this._valueMax();
                valPercent = (valueMax !== valueMin) ? (value - valueMin) / (valueMax - valueMin) * 100 : 0;
                _set[this.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";
                this.handle.stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);
                if (oRange === "min" && this.orientation === "horizontal") {
                    this.range.stop(1, 1)[animate ? "animate" : "css"]({width: valPercent + "%"}, o.animate);
                }
                if (oRange === "max" && this.orientation === "horizontal") {
                    this.range[animate ? "animate" : "css"]({width: (100 - valPercent) + "%"}, {queue: false,duration: o.animate});
                }
                if (oRange === "min" && this.orientation === "vertical") {
                    this.range.stop(1, 1)[animate ? "animate" : "css"]({height: valPercent + "%"}, o.animate);
                }
                if (oRange === "max" && this.orientation === "vertical") {
                    this.range[animate ? "animate" : "css"]({height: (100 - valPercent) + "%"}, {queue: false,duration: o.animate});
                }
            }
        },_handleEvents: {keydown: function(event) {
                var allowed, curVal, newVal, step, index = $(event.target).data("ui-slider-handle-index");
                switch (event.keyCode) {
                    case $.ui.keyCode.HOME:
                    case $.ui.keyCode.END:
                    case $.ui.keyCode.PAGE_UP:
                    case $.ui.keyCode.PAGE_DOWN:
                    case $.ui.keyCode.UP:
                    case $.ui.keyCode.RIGHT:
                    case $.ui.keyCode.DOWN:
                    case $.ui.keyCode.LEFT:
                        event.preventDefault();
                        if (!this._keySliding) {
                            this._keySliding = true;
                            $(event.target).addClass("ui-state-active");
                            allowed = this._start(event, index);
                            if (allowed === false) {
                                return;
                            }
                        }
                        break;
                }
                step = this.options.step;
                if (this.options.values && this.options.values.length) {
                    curVal = newVal = this.values(index);
                } else {
                    curVal = newVal = this.value();
                }
                switch (event.keyCode) {
                    case $.ui.keyCode.HOME:
                        newVal = this._valueMin();
                        break;
                    case $.ui.keyCode.END:
                        newVal = this._valueMax();
                        break;
                    case $.ui.keyCode.PAGE_UP:
                        newVal = this._trimAlignValue(curVal + ((this._valueMax() - this._valueMin()) / numPages));
                        break;
                    case $.ui.keyCode.PAGE_DOWN:
                        newVal = this._trimAlignValue(curVal - ((this._valueMax() - this._valueMin()) / numPages));
                        break;
                    case $.ui.keyCode.UP:
                    case $.ui.keyCode.RIGHT:
                        if (curVal === this._valueMax()) {
                            return;
                        }
                        newVal = this._trimAlignValue(curVal + step);
                        break;
                    case $.ui.keyCode.DOWN:
                    case $.ui.keyCode.LEFT:
                        if (curVal === this._valueMin()) {
                            return;
                        }
                        newVal = this._trimAlignValue(curVal - step);
                        break;
                }
                this._slide(event, index, newVal);
            },click: function(event) {
                event.preventDefault();
            },keyup: function(event) {
                var index = $(event.target).data("ui-slider-handle-index");
                if (this._keySliding) {
                    this._keySliding = false;
                    this._stop(event, index);
                    this._change(event, index);
                    $(event.target).removeClass("ui-state-active");
                }
            }}});
}(jQuery));
(function($) {
    function modifier(fn) {
        return function() {
            var previous = this.element.val();
            fn.apply(this, arguments);
            this._refresh();
            if (previous !== this.element.val()) {
                this._trigger("change");
            }
        };
    }
    $.widget("ui.spinner", {version: "1.10.3",defaultElement: "<input>",widgetEventPrefix: "spin",options: {culture: null,icons: {down: "ui-icon-triangle-1-s",up: "ui-icon-triangle-1-n"},incremental: true,max: null,min: null,numberFormat: null,page: 10,step: 1,change: null,spin: null,start: null,stop: null},_create: function() {
            this._setOption("max", this.options.max);
            this._setOption("min", this.options.min);
            this._setOption("step", this.options.step);
            this._value(this.element.val(), true);
            this._draw();
            this._on(this._events);
            this._refresh();
            this._on(this.window, {beforeunload: function() {
                    this.element.removeAttr("autocomplete");
                }});
        },_getCreateOptions: function() {
            var options = {}, element = this.element;
            $.each(["min", "max", "step"], function(i, option) {
                var value = element.attr(option);
                if (value !== undefined && value.length) {
                    options[option] = value;
                }
            });
            return options;
        },_events: {keydown: function(event) {
                if (this._start(event) && this._keydown(event)) {
                    event.preventDefault();
                }
            },keyup: "_stop",focus: function() {
                this.previous = this.element.val();
            },blur: function(event) {
                if (this.cancelBlur) {
                    delete this.cancelBlur;
                    return;
                }
                this._stop();
                this._refresh();
                if (this.previous !== this.element.val()) {
                    this._trigger("change", event);
                }
            },mousewheel: function(event, delta) {
                if (!delta) {
                    return;
                }
                if (!this.spinning && !this._start(event)) {
                    return false;
                }
                this._spin((delta > 0 ? 1 : -1) * this.options.step, event);
                clearTimeout(this.mousewheelTimer);
                this.mousewheelTimer = this._delay(function() {
                    if (this.spinning) {
                        this._stop(event);
                    }
                }, 100);
                event.preventDefault();
            },"mousedown .ui-spinner-button": function(event) {
                var previous;
                previous = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val();
                function checkFocus() {
                    var isActive = this.element[0] === this.document[0].activeElement;
                    if (!isActive) {
                        this.element.focus();
                        this.previous = previous;
                        this._delay(function() {
                            this.previous = previous;
                        });
                    }
                }
                event.preventDefault();
                checkFocus.call(this);
                this.cancelBlur = true;
                this._delay(function() {
                    delete this.cancelBlur;
                    checkFocus.call(this);
                });
                if (this._start(event) === false) {
                    return;
                }
                this._repeat(null, $(event.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, event);
            },"mouseup .ui-spinner-button": "_stop","mouseenter .ui-spinner-button": function(event) {
                if (!$(event.currentTarget).hasClass("ui-state-active")) {
                    return;
                }
                if (this._start(event) === false) {
                    return false;
                }
                this._repeat(null, $(event.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, event);
            },"mouseleave .ui-spinner-button": "_stop"},_draw: function() {
            var uiSpinner = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton");
            this.buttons = uiSpinner.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all");
            if (this.buttons.height() > Math.ceil(uiSpinner.height() * 0.5) && uiSpinner.height() > 0) {
                uiSpinner.height(uiSpinner.height());
            }
            if (this.options.disabled) {
                this.disable();
            }
        },_keydown: function(event) {
            var options = this.options, keyCode = $.ui.keyCode;
            switch (event.keyCode) {
                case keyCode.UP:
                    this._repeat(null, 1, event);
                    return true;
                case keyCode.DOWN:
                    this._repeat(null, -1, event);
                    return true;
                case keyCode.PAGE_UP:
                    this._repeat(null, options.page, event);
                    return true;
                case keyCode.PAGE_DOWN:
                    this._repeat(null, -options.page, event);
                    return true;
            }
            return false;
        },_uiSpinnerHtml: function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
        },_buttonHtml: function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>";
        },_start: function(event) {
            if (!this.spinning && this._trigger("start", event) === false) {
                return false;
            }
            if (!this.counter) {
                this.counter = 1;
            }
            this.spinning = true;
            return true;
        },_repeat: function(i, steps, event) {
            i = i || 500;
            clearTimeout(this.timer);
            this.timer = this._delay(function() {
                this._repeat(40, steps, event);
            }, i);
            this._spin(steps * this.options.step, event);
        },_spin: function(step, event) {
            var value = this.value() || 0;
            if (!this.counter) {
                this.counter = 1;
            }
            value = this._adjustValue(value + step * this._increment(this.counter));
            if (!this.spinning || this._trigger("spin", event, {value: value}) !== false) {
                this._value(value);
                this.counter++;
            }
        },_increment: function(i) {
            var incremental = this.options.incremental;
            if (incremental) {
                return $.isFunction(incremental) ? incremental(i) : Math.floor(i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1);
            }
            return 1;
        },_precision: function() {
            var precision = this._precisionOf(this.options.step);
            if (this.options.min !== null) {
                precision = Math.max(precision, this._precisionOf(this.options.min));
            }
            return precision;
        },_precisionOf: function(num) {
            var str = num.toString(), decimal = str.indexOf(".");
            return decimal === -1 ? 0 : str.length - decimal - 1;
        },_adjustValue: function(value) {
            var base, aboveMin, options = this.options;
            base = options.min !== null ? options.min : 0;
            aboveMin = value - base;
            aboveMin = Math.round(aboveMin / options.step) * options.step;
            value = base + aboveMin;
            value = parseFloat(value.toFixed(this._precision()));
            if (options.max !== null && value > options.max) {
                return options.max;
            }
            if (options.min !== null && value < options.min) {
                return options.min;
            }
            return value;
        },_stop: function(event) {
            if (!this.spinning) {
                return;
            }
            clearTimeout(this.timer);
            clearTimeout(this.mousewheelTimer);
            this.counter = 0;
            this.spinning = false;
            this._trigger("stop", event);
        },_setOption: function(key, value) {
            if (key === "culture" || key === "numberFormat") {
                var prevValue = this._parse(this.element.val());
                this.options[key] = value;
                this.element.val(this._format(prevValue));
                return;
            }
            if (key === "max" || key === "min" || key === "step") {
                if (typeof value === "string") {
                    value = this._parse(value);
                }
            }
            if (key === "icons") {
                this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);
                this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down);
            }
            this._super(key, value);
            if (key === "disabled") {
                if (value) {
                    this.element.prop("disabled", true);
                    this.buttons.button("disable");
                } else {
                    this.element.prop("disabled", false);
                    this.buttons.button("enable");
                }
            }
        },_setOptions: modifier(function(options) {
            this._super(options);
            this._value(this.element.val());
        }),_parse: function(val) {
            if (typeof val === "string" && val !== "") {
                val = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(val, 10, this.options.culture) : +val;
            }
            return val === "" || isNaN(val) ? null : val;
        },_format: function(value) {
            if (value === "") {
                return "";
            }
            return window.Globalize && this.options.numberFormat ? Globalize.format(value, this.options.numberFormat, this.options.culture) : value;
        },_refresh: function() {
            this.element.attr({"aria-valuemin": this.options.min,"aria-valuemax": this.options.max,"aria-valuenow": this._parse(this.element.val())});
        },_value: function(value, allowAny) {
            var parsed;
            if (value !== "") {
                parsed = this._parse(value);
                if (parsed !== null) {
                    if (!allowAny) {
                        parsed = this._adjustValue(parsed);
                    }
                    value = this._format(parsed);
                }
            }
            this.element.val(value);
            this._refresh();
        },_destroy: function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.uiSpinner.replaceWith(this.element);
        },stepUp: modifier(function(steps) {
            this._stepUp(steps);
        }),_stepUp: function(steps) {
            if (this._start()) {
                this._spin((steps || 1) * this.options.step);
                this._stop();
            }
        },stepDown: modifier(function(steps) {
            this._stepDown(steps);
        }),_stepDown: function(steps) {
            if (this._start()) {
                this._spin((steps || 1) * -this.options.step);
                this._stop();
            }
        },pageUp: modifier(function(pages) {
            this._stepUp((pages || 1) * this.options.page);
        }),pageDown: modifier(function(pages) {
            this._stepDown((pages || 1) * this.options.page);
        }),value: function(newVal) {
            if (!arguments.length) {
                return this._parse(this.element.val());
            }
            modifier(this._value).call(this, newVal);
        },widget: function() {
            return this.uiSpinner;
        }});
}(jQuery));
(function($, undefined) {
    var tabId = 0, rhash = /#.*$/;
    function getNextTabId() {
        return ++tabId;
    }
    function isLocal(anchor) {
        return anchor.hash.length > 1 && decodeURIComponent(anchor.href.replace(rhash, "")) === decodeURIComponent(location.href.replace(rhash, ""));
    }
    $.widget("ui.tabs", {version: "1.10.3",delay: 300,options: {active: null,collapsible: false,event: "click",heightStyle: "content",hide: null,show: null,activate: null,beforeActivate: null,beforeLoad: null,load: null},_create: function() {
            var that = this, options = this.options;
            this.running = false;
            this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", options.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(event) {
                if ($(this).is(".ui-state-disabled")) {
                    event.preventDefault();
                }
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                if ($(this).closest("li").is(".ui-state-disabled")) {
                    this.blur();
                }
            });
            this._processTabs();
            options.active = this._initialActive();
            if ($.isArray(options.disabled)) {
                options.disabled = $.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"), function(li) {
                    return that.tabs.index(li);
                }))).sort();
            }
            if (this.options.active !== false && this.anchors.length) {
                this.active = this._findActive(options.active);
            } else {
                this.active = $();
            }
            this._refresh();
            if (this.active.length) {
                this.load(options.active);
            }
        },_initialActive: function() {
            var active = this.options.active, collapsible = this.options.collapsible, locationHash = location.hash.substring(1);
            if (active === null) {
                if (locationHash) {
                    this.tabs.each(function(i, tab) {
                        if ($(tab).attr("aria-controls") === locationHash) {
                            active = i;
                            return false;
                        }
                    });
                }
                if (active === null) {
                    active = this.tabs.index(this.tabs.filter(".ui-tabs-active"));
                }
                if (active === null || active === -1) {
                    active = this.tabs.length ? 0 : false;
                }
            }
            if (active !== false) {
                active = this.tabs.index(this.tabs.eq(active));
                if (active === -1) {
                    active = collapsible ? false : 0;
                }
            }
            if (!collapsible && active === false && this.anchors.length) {
                active = 0;
            }
            return active;
        },_getCreateEventData: function() {
            return {tab: this.active,panel: !this.active.length ? $() : this._getPanelForTab(this.active)};
        },_tabKeydown: function(event) {
            var focusedTab = $(this.document[0].activeElement).closest("li"), selectedIndex = this.tabs.index(focusedTab), goingForward = true;
            if (this._handlePageNav(event)) {
                return;
            }
            switch (event.keyCode) {
                case $.ui.keyCode.RIGHT:
                case $.ui.keyCode.DOWN:
                    selectedIndex++;
                    break;
                case $.ui.keyCode.UP:
                case $.ui.keyCode.LEFT:
                    goingForward = false;
                    selectedIndex--;
                    break;
                case $.ui.keyCode.END:
                    selectedIndex = this.anchors.length - 1;
                    break;
                case $.ui.keyCode.HOME:
                    selectedIndex = 0;
                    break;
                case $.ui.keyCode.SPACE:
                    event.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(selectedIndex);
                    return;
                case $.ui.keyCode.ENTER:
                    event.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(selectedIndex === this.options.active ? false : selectedIndex);
                    return;
                default:
                    return;
            }
            event.preventDefault();
            clearTimeout(this.activating);
            selectedIndex = this._focusNextTab(selectedIndex, goingForward);
            if (!event.ctrlKey) {
                focusedTab.attr("aria-selected", "false");
                this.tabs.eq(selectedIndex).attr("aria-selected", "true");
                this.activating = this._delay(function() {
                    this.option("active", selectedIndex);
                }, this.delay);
            }
        },_panelKeydown: function(event) {
            if (this._handlePageNav(event)) {
                return;
            }
            if (event.ctrlKey && event.keyCode === $.ui.keyCode.UP) {
                event.preventDefault();
                this.active.focus();
            }
        },_handlePageNav: function(event) {
            if (event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP) {
                this._activate(this._focusNextTab(this.options.active - 1, false));
                return true;
            }
            if (event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN) {
                this._activate(this._focusNextTab(this.options.active + 1, true));
                return true;
            }
        },_findNextTab: function(index, goingForward) {
            var lastTabIndex = this.tabs.length - 1;
            function constrain() {
                if (index > lastTabIndex) {
                    index = 0;
                }
                if (index < 0) {
                    index = lastTabIndex;
                }
                return index;
            }
            while ($.inArray(constrain(), this.options.disabled) !== -1) {
                index = goingForward ? index + 1 : index - 1;
            }
            return index;
        },_focusNextTab: function(index, goingForward) {
            index = this._findNextTab(index, goingForward);
            this.tabs.eq(index).focus();
            return index;
        },_setOption: function(key, value) {
            if (key === "active") {
                this._activate(value);
                return;
            }
            if (key === "disabled") {
                this._setupDisabled(value);
                return;
            }
            this._super(key, value);
            if (key === "collapsible") {
                this.element.toggleClass("ui-tabs-collapsible", value);
                if (!value && this.options.active === false) {
                    this._activate(0);
                }
            }
            if (key === "event") {
                this._setupEvents(value);
            }
            if (key === "heightStyle") {
                this._setupHeightStyle(value);
            }
        },_tabId: function(tab) {
            return tab.attr("aria-controls") || "ui-tabs-" + getNextTabId();
        },_sanitizeSelector: function(hash) {
            return hash ? hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "";
        },refresh: function() {
            var options = this.options, lis = this.tablist.children(":has(a[href])");
            options.disabled = $.map(lis.filter(".ui-state-disabled"), function(tab) {
                return lis.index(tab);
            });
            this._processTabs();
            if (options.active === false || !this.anchors.length) {
                options.active = false;
                this.active = $();
            } else {
                if (this.active.length && !$.contains(this.tablist[0], this.active[0])) {
                    if (this.tabs.length === options.disabled.length) {
                        options.active = false;
                        this.active = $();
                    } else {
                        this._activate(this._findNextTab(Math.max(0, options.active - 1), false));
                    }
                } else {
                    options.active = this.tabs.index(this.active);
                }
            }
            this._refresh();
        },_refresh: function() {
            this._setupDisabled(this.options.disabled);
            this._setupEvents(this.options.event);
            this._setupHeightStyle(this.options.heightStyle);
            this.tabs.not(this.active).attr({"aria-selected": "false",tabIndex: -1});
            this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded": "false","aria-hidden": "true"});
            if (!this.active.length) {
                this.tabs.eq(0).attr("tabIndex", 0);
            } else {
                this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected": "true",tabIndex: 0});
                this._getPanelForTab(this.active).show().attr({"aria-expanded": "true","aria-hidden": "false"});
            }
        },_processTabs: function() {
            var that = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist");
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role: "tab",tabIndex: -1});
            this.anchors = this.tabs.map(function() {
                return $("a", this)[0];
            }).addClass("ui-tabs-anchor").attr({role: "presentation",tabIndex: -1});
            this.panels = $();
            this.anchors.each(function(i, anchor) {
                var selector, panel, panelId, anchorId = $(anchor).uniqueId().attr("id"), tab = $(anchor).closest("li"), originalAriaControls = tab.attr("aria-controls");
                if (isLocal(anchor)) {
                    selector = anchor.hash;
                    panel = that.element.find(that._sanitizeSelector(selector));
                } else {
                    panelId = that._tabId(tab);
                    selector = "#" + panelId;
                    panel = that.element.find(selector);
                    if (!panel.length) {
                        panel = that._createPanel(panelId);
                        panel.insertAfter(that.panels[i - 1] || that.tablist);
                    }
                    panel.attr("aria-live", "polite");
                }
                if (panel.length) {
                    that.panels = that.panels.add(panel);
                }
                if (originalAriaControls) {
                    tab.data("ui-tabs-aria-controls", originalAriaControls);
                }
                tab.attr({"aria-controls": selector.substring(1),"aria-labelledby": anchorId});
                panel.attr("aria-labelledby", anchorId);
            });
            this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel");
        },_getList: function() {
            return this.element.find("ol,ul").eq(0);
        },_createPanel: function(id) {
            return $("<div>").attr("id", id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", true);
        },_setupDisabled: function(disabled) {
            if ($.isArray(disabled)) {
                if (!disabled.length) {
                    disabled = false;
                } else {
                    if (disabled.length === this.anchors.length) {
                        disabled = true;
                    }
                }
            }
            for (var i = 0, li; (li = this.tabs[i]); i++) {
                if (disabled === true || $.inArray(i, disabled) !== -1) {
                    $(li).addClass("ui-state-disabled").attr("aria-disabled", "true");
                } else {
                    $(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");
                }
            }
            this.options.disabled = disabled;
        },_setupEvents: function(event) {
            var events = {click: function(event) {
                    event.preventDefault();
                }};
            if (event) {
                $.each(event.split(" "), function(index, eventName) {
                    events[eventName] = "_eventHandler";
                });
            }
            this._off(this.anchors.add(this.tabs).add(this.panels));
            this._on(this.anchors, events);
            this._on(this.tabs, {keydown: "_tabKeydown"});
            this._on(this.panels, {keydown: "_panelKeydown"});
            this._focusable(this.tabs);
            this._hoverable(this.tabs);
        },_setupHeightStyle: function(heightStyle) {
            var maxHeight, parent = this.element.parent();
            if (heightStyle === "fill") {
                maxHeight = parent.height();
                maxHeight -= this.element.outerHeight() - this.element.height();
                this.element.siblings(":visible").each(function() {
                    var elem = $(this), position = elem.css("position");
                    if (position === "absolute" || position === "fixed") {
                        return;
                    }
                    maxHeight -= elem.outerHeight(true);
                });
                this.element.children().not(this.panels).each(function() {
                    maxHeight -= $(this).outerHeight(true);
                });
                this.panels.each(function() {
                    $(this).height(Math.max(0, maxHeight - $(this).innerHeight() + $(this).height()));
                }).css("overflow", "auto");
            } else {
                if (heightStyle === "auto") {
                    maxHeight = 0;
                    this.panels.each(function() {
                        maxHeight = Math.max(maxHeight, $(this).height("").height());
                    }).height(maxHeight);
                }
            }
        },_eventHandler: function(event) {
            var options = this.options, active = this.active, anchor = $(event.currentTarget), tab = anchor.closest("li"), clickedIsActive = tab[0] === active[0], collapsing = clickedIsActive && options.collapsible, toShow = collapsing ? $() : this._getPanelForTab(tab), toHide = !active.length ? $() : this._getPanelForTab(active), eventData = {oldTab: active,oldPanel: toHide,newTab: collapsing ? $() : tab,newPanel: toShow};
            event.preventDefault();
            if (tab.hasClass("ui-state-disabled") || tab.hasClass("ui-tabs-loading") || this.running || (clickedIsActive && !options.collapsible) || (this._trigger("beforeActivate", event, eventData) === false)) {
                return;
            }
            options.active = collapsing ? false : this.tabs.index(tab);
            this.active = clickedIsActive ? $() : tab;
            if (this.xhr) {
                this.xhr.abort();
            }
            if (!toHide.length && !toShow.length) {
                $.error("jQuery UI Tabs: Mismatching fragment identifier.");
            }
            if (toShow.length) {
                this.load(this.tabs.index(tab), event);
            }
            this._toggle(event, eventData);
        },_toggle: function(event, eventData) {
            var that = this, toShow = eventData.newPanel, toHide = eventData.oldPanel;
            this.running = true;
            function complete() {
                that.running = false;
                that._trigger("activate", event, eventData);
            }
            function show() {
                eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");
                if (toShow.length && that.options.show) {
                    that._show(toShow, that.options.show, complete);
                } else {
                    toShow.show();
                    complete();
                }
            }
            if (toHide.length && this.options.hide) {
                this._hide(toHide, this.options.hide, function() {
                    eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
                    show();
                });
            } else {
                eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
                toHide.hide();
                show();
            }
            toHide.attr({"aria-expanded": "false","aria-hidden": "true"});
            eventData.oldTab.attr("aria-selected", "false");
            if (toShow.length && toHide.length) {
                eventData.oldTab.attr("tabIndex", -1);
            } else {
                if (toShow.length) {
                    this.tabs.filter(function() {
                        return $(this).attr("tabIndex") === 0;
                    }).attr("tabIndex", -1);
                }
            }
            toShow.attr({"aria-expanded": "true","aria-hidden": "false"});
            eventData.newTab.attr({"aria-selected": "true",tabIndex: 0});
        },_activate: function(index) {
            var anchor, active = this._findActive(index);
            if (active[0] === this.active[0]) {
                return;
            }
            if (!active.length) {
                active = this.active;
            }
            anchor = active.find(".ui-tabs-anchor")[0];
            this._eventHandler({target: anchor,currentTarget: anchor,preventDefault: $.noop});
        },_findActive: function(index) {
            return index === false ? $() : this.tabs.eq(index);
        },_getIndex: function(index) {
            if (typeof index === "string") {
                index = this.anchors.index(this.anchors.filter("[href$='" + index + "']"));
            }
            return index;
        },_destroy: function() {
            if (this.xhr) {
                this.xhr.abort();
            }
            this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
            this.tabs.add(this.panels).each(function() {
                if ($.data(this, "ui-tabs-destroy")) {
                    $(this).remove();
                } else {
                    $(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");
                }
            });
            this.tabs.each(function() {
                var li = $(this), prev = li.data("ui-tabs-aria-controls");
                if (prev) {
                    li.attr("aria-controls", prev).removeData("ui-tabs-aria-controls");
                } else {
                    li.removeAttr("aria-controls");
                }
            });
            this.panels.show();
            if (this.options.heightStyle !== "content") {
                this.panels.css("height", "");
            }
        },enable: function(index) {
            var disabled = this.options.disabled;
            if (disabled === false) {
                return;
            }
            if (index === undefined) {
                disabled = false;
            } else {
                index = this._getIndex(index);
                if ($.isArray(disabled)) {
                    disabled = $.map(disabled, function(num) {
                        return num !== index ? num : null;
                    });
                } else {
                    disabled = $.map(this.tabs, function(li, num) {
                        return num !== index ? num : null;
                    });
                }
            }
            this._setupDisabled(disabled);
        },disable: function(index) {
            var disabled = this.options.disabled;
            if (disabled === true) {
                return;
            }
            if (index === undefined) {
                disabled = true;
            } else {
                index = this._getIndex(index);
                if ($.inArray(index, disabled) !== -1) {
                    return;
                }
                if ($.isArray(disabled)) {
                    disabled = $.merge([index], disabled).sort();
                } else {
                    disabled = [index];
                }
            }
            this._setupDisabled(disabled);
        },load: function(index, event) {
            index = this._getIndex(index);
            var that = this, tab = this.tabs.eq(index), anchor = tab.find(".ui-tabs-anchor"), panel = this._getPanelForTab(tab), eventData = {tab: tab,panel: panel};
            if (isLocal(anchor[0])) {
                return;
            }
            this.xhr = $.ajax(this._ajaxSettings(anchor, event, eventData));
            if (this.xhr && this.xhr.statusText !== "canceled") {
                tab.addClass("ui-tabs-loading");
                panel.attr("aria-busy", "true");
                this.xhr.success(function(response) {
                    setTimeout(function() {
                        panel.html(response);
                        that._trigger("load", event, eventData);
                    }, 1);
                }).complete(function(jqXHR, status) {
                    setTimeout(function() {
                        if (status === "abort") {
                            that.panels.stop(false, true);
                        }
                        tab.removeClass("ui-tabs-loading");
                        panel.removeAttr("aria-busy");
                        if (jqXHR === that.xhr) {
                            delete that.xhr;
                        }
                    }, 1);
                });
            }
        },_ajaxSettings: function(anchor, event, eventData) {
            var that = this;
            return {url: anchor.attr("href"),beforeSend: function(jqXHR, settings) {
                    return that._trigger("beforeLoad", event, $.extend({jqXHR: jqXHR,ajaxSettings: settings}, eventData));
                }};
        },_getPanelForTab: function(tab) {
            var id = $(tab).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + id));
        }});
})(jQuery);
(function($) {
    var increments = 0;
    function addDescribedBy(elem, id) {
        var describedby = (elem.attr("aria-describedby") || "").split(/\s+/);
        describedby.push(id);
        elem.data("ui-tooltip-id", id).attr("aria-describedby", $.trim(describedby.join(" ")));
    }
    function removeDescribedBy(elem) {
        var id = elem.data("ui-tooltip-id"), describedby = (elem.attr("aria-describedby") || "").split(/\s+/), index = $.inArray(id, describedby);
        if (index !== -1) {
            describedby.splice(index, 1);
        }
        elem.removeData("ui-tooltip-id");
        describedby = $.trim(describedby.join(" "));
        if (describedby) {
            elem.attr("aria-describedby", describedby);
        } else {
            elem.removeAttr("aria-describedby");
        }
    }
    $.widget("ui.tooltip", {version: "1.10.3",options: {content: function() {
                var title = $(this).attr("title") || "";
                return $("<a>").text(title).html();
            },hide: true,items: "[title]:not([disabled])",position: {my: "left top+15",at: "left bottom",collision: "flipfit flip"},show: true,tooltipClass: null,track: false,close: null,open: null},_create: function() {
            this._on({mouseover: "open",focusin: "open"});
            this.tooltips = {};
            this.parents = {};
            if (this.options.disabled) {
                this._disable();
            }
        },_setOption: function(key, value) {
            var that = this;
            if (key === "disabled") {
                this[value ? "_disable" : "_enable"]();
                this.options[key] = value;
                return;
            }
            this._super(key, value);
            if (key === "content") {
                $.each(this.tooltips, function(id, element) {
                    that._updateContent(element);
                });
            }
        },_disable: function() {
            var that = this;
            $.each(this.tooltips, function(id, element) {
                var event = $.Event("blur");
                event.target = event.currentTarget = element[0];
                that.close(event, true);
            });
            this.element.find(this.options.items).addBack().each(function() {
                var element = $(this);
                if (element.is("[title]")) {
                    element.data("ui-tooltip-title", element.attr("title")).attr("title", "");
                }
            });
        },_enable: function() {
            this.element.find(this.options.items).addBack().each(function() {
                var element = $(this);
                if (element.data("ui-tooltip-title")) {
                    element.attr("title", element.data("ui-tooltip-title"));
                }
            });
        },open: function(event) {
            var that = this, target = $(event ? event.target : this.element).closest(this.options.items);
            if (!target.length || target.data("ui-tooltip-id")) {
                return;
            }
            if (target.attr("title")) {
                target.data("ui-tooltip-title", target.attr("title"));
            }
            target.data("ui-tooltip-open", true);
            if (event && event.type === "mouseover") {
                target.parents().each(function() {
                    var parent = $(this), blurEvent;
                    if (parent.data("ui-tooltip-open")) {
                        blurEvent = $.Event("blur");
                        blurEvent.target = blurEvent.currentTarget = this;
                        that.close(blurEvent, true);
                    }
                    if (parent.attr("title")) {
                        parent.uniqueId();
                        that.parents[this.id] = {element: this,title: parent.attr("title")};
                        parent.attr("title", "");
                    }
                });
            }
            this._updateContent(target, event);
        },_updateContent: function(target, event) {
            var content, contentOption = this.options.content, that = this, eventType = event ? event.type : null;
            if (typeof contentOption === "string") {
                return this._open(event, target, contentOption);
            }
            content = contentOption.call(target[0], function(response) {
                if (!target.data("ui-tooltip-open")) {
                    return;
                }
                that._delay(function() {
                    if (event) {
                        event.type = eventType;
                    }
                    this._open(event, target, response);
                });
            });
            if (content) {
                this._open(event, target, content);
            }
        },_open: function(event, target, content) {
            var tooltip, events, delayedShow, positionOption = $.extend({}, this.options.position);
            if (!content) {
                return;
            }
            tooltip = this._find(target);
            if (tooltip.length) {
                tooltip.find(".ui-tooltip-content").html(content);
                return;
            }
            if (target.is("[title]")) {
                if (event && event.type === "mouseover") {
                    target.attr("title", "");
                } else {
                    target.removeAttr("title");
                }
            }
            tooltip = this._tooltip(target);
            addDescribedBy(target, tooltip.attr("id"));
            tooltip.find(".ui-tooltip-content").html(content);
            function position(event) {
                positionOption.of = event;
                if (tooltip.is(":hidden")) {
                    return;
                }
                tooltip.position(positionOption);
            }
            if (this.options.track && event && /^mouse/.test(event.type)) {
                this._on(this.document, {mousemove: position});
                position(event);
            } else {
                tooltip.position($.extend({of: target}, this.options.position));
            }
            tooltip.hide();
            this._show(tooltip, this.options.show);
            if (this.options.show && this.options.show.delay) {
                delayedShow = this.delayedShow = setInterval(function() {
                    if (tooltip.is(":visible")) {
                        position(positionOption.of);
                        clearInterval(delayedShow);
                    }
                }, $.fx.interval);
            }
            this._trigger("open", event, {tooltip: tooltip});
            events = {keyup: function(event) {
                    if (event.keyCode === $.ui.keyCode.ESCAPE) {
                        var fakeEvent = $.Event(event);
                        fakeEvent.currentTarget = target[0];
                        this.close(fakeEvent, true);
                    }
                },remove: function() {
                    this._removeTooltip(tooltip);
                }};
            if (!event || event.type === "mouseover") {
                events.mouseleave = "close";
            }
            if (!event || event.type === "focusin") {
                events.focusout = "close";
            }
            this._on(true, target, events);
        },close: function(event) {
            var that = this, target = $(event ? event.currentTarget : this.element), tooltip = this._find(target);
            if (this.closing) {
                return;
            }
            clearInterval(this.delayedShow);
            if (target.data("ui-tooltip-title")) {
                target.attr("title", target.data("ui-tooltip-title"));
            }
            removeDescribedBy(target);
            tooltip.stop(true);
            this._hide(tooltip, this.options.hide, function() {
                that._removeTooltip($(this));
            });
            target.removeData("ui-tooltip-open");
            this._off(target, "mouseleave focusout keyup");
            if (target[0] !== this.element[0]) {
                this._off(target, "remove");
            }
            this._off(this.document, "mousemove");
            if (event && event.type === "mouseleave") {
                $.each(this.parents, function(id, parent) {
                    $(parent.element).attr("title", parent.title);
                    delete that.parents[id];
                });
            }
            this.closing = true;
            this._trigger("close", event, {tooltip: tooltip});
            this.closing = false;
        },_tooltip: function(element) {
            var id = "ui-tooltip-" + increments++, tooltip = $("<div>").attr({id: id,role: "tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            $("<div>").addClass("ui-tooltip-content").appendTo(tooltip);
            tooltip.appendTo(this.document[0].body);
            this.tooltips[id] = element;
            return tooltip;
        },_find: function(target) {
            var id = target.data("ui-tooltip-id");
            return id ? $("#" + id) : $();
        },_removeTooltip: function(tooltip) {
            tooltip.remove();
            delete this.tooltips[tooltip.attr("id")];
        },_destroy: function() {
            var that = this;
            $.each(this.tooltips, function(id, element) {
                var event = $.Event("blur");
                event.target = event.currentTarget = element[0];
                that.close(event, true);
                $("#" + id).remove();
                if (element.data("ui-tooltip-title")) {
                    element.attr("title", element.data("ui-tooltip-title"));
                    element.removeData("ui-tooltip-title");
                }
            });
        }});
}(jQuery));
(function($, undefined) {
    var dataSpace = "ui-effects-";
    $.effects = {effect: {}};
    (function(jQuery, undefined) {
        var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor", rplusequals = /^([\-+])=\s*(\d+\.?\d*)/, stringParsers = [{re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse: function(execResult) {
                    return [execResult[1], execResult[2], execResult[3], execResult[4]];
                }}, {re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse: function(execResult) {
                    return [execResult[1] * 2.55, execResult[2] * 2.55, execResult[3] * 2.55, execResult[4]];
                }}, {re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse: function(execResult) {
                    return [parseInt(execResult[1], 16), parseInt(execResult[2], 16), parseInt(execResult[3], 16)];
                }}, {re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,parse: function(execResult) {
                    return [parseInt(execResult[1] + execResult[1], 16), parseInt(execResult[2] + execResult[2], 16), parseInt(execResult[3] + execResult[3], 16)];
                }}, {re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space: "hsla",parse: function(execResult) {
                    return [execResult[1], execResult[2] / 100, execResult[3] / 100, execResult[4]];
                }}], color = jQuery.Color = function(color, green, blue, alpha) {
            return new jQuery.Color.fn.parse(color, green, blue, alpha);
        }, spaces = {rgba: {props: {red: {idx: 0,type: "byte"},green: {idx: 1,type: "byte"},blue: {idx: 2,type: "byte"}}},hsla: {props: {hue: {idx: 0,type: "degrees"},saturation: {idx: 1,type: "percent"},lightness: {idx: 2,type: "percent"}}}}, propTypes = {"byte": {floor: true,max: 255},percent: {max: 1},degrees: {mod: 360,floor: true}}, support = color.support = {}, supportElem = jQuery("<p>")[0], colors, each = jQuery.each;
        supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
        support.rgba = supportElem.style.backgroundColor.indexOf("rgba") > -1;
        each(spaces, function(spaceName, space) {
            space.cache = "_" + spaceName;
            space.props.alpha = {idx: 3,type: "percent",def: 1};
        });
        function clamp(value, prop, allowEmpty) {
            var type = propTypes[prop.type] || {};
            if (value == null) {
                return (allowEmpty || !prop.def) ? null : prop.def;
            }
            value = type.floor ? ~~value : parseFloat(value);
            if (isNaN(value)) {
                return prop.def;
            }
            if (type.mod) {
                return (value + type.mod) % type.mod;
            }
            return 0 > value ? 0 : type.max < value ? type.max : value;
        }
        function stringParse(string) {
            var inst = color(), rgba = inst._rgba = [];
            string = string.toLowerCase();
            each(stringParsers, function(i, parser) {
                var parsed, match = parser.re.exec(string), values = match && parser.parse(match), spaceName = parser.space || "rgba";
                if (values) {
                    parsed = inst[spaceName](values);
                    inst[spaces[spaceName].cache] = parsed[spaces[spaceName].cache];
                    rgba = inst._rgba = parsed._rgba;
                    return false;
                }
            });
            if (rgba.length) {
                if (rgba.join() === "0,0,0,0") {
                    jQuery.extend(rgba, colors.transparent);
                }
                return inst;
            }
            return colors[string];
        }
        color.fn = jQuery.extend(color.prototype, {parse: function(red, green, blue, alpha) {
                if (red === undefined) {
                    this._rgba = [null, null, null, null];
                    return this;
                }
                if (red.jquery || red.nodeType) {
                    red = jQuery(red).css(green);
                    green = undefined;
                }
                var inst = this, type = jQuery.type(red), rgba = this._rgba = [];
                if (green !== undefined) {
                    red = [red, green, blue, alpha];
                    type = "array";
                }
                if (type === "string") {
                    return this.parse(stringParse(red) || colors._default);
                }
                if (type === "array") {
                    each(spaces.rgba.props, function(key, prop) {
                        rgba[prop.idx] = clamp(red[prop.idx], prop);
                    });
                    return this;
                }
                if (type === "object") {
                    if (red instanceof color) {
                        each(spaces, function(spaceName, space) {
                            if (red[space.cache]) {
                                inst[space.cache] = red[space.cache].slice();
                            }
                        });
                    } else {
                        each(spaces, function(spaceName, space) {
                            var cache = space.cache;
                            each(space.props, function(key, prop) {
                                if (!inst[cache] && space.to) {
                                    if (key === "alpha" || red[key] == null) {
                                        return;
                                    }
                                    inst[cache] = space.to(inst._rgba);
                                }
                                inst[cache][prop.idx] = clamp(red[key], prop, true);
                            });
                            if (inst[cache] && jQuery.inArray(null, inst[cache].slice(0, 3)) < 0) {
                                inst[cache][3] = 1;
                                if (space.from) {
                                    inst._rgba = space.from(inst[cache]);
                                }
                            }
                        });
                    }
                    return this;
                }
            },is: function(compare) {
                var is = color(compare), same = true, inst = this;
                each(spaces, function(_, space) {
                    var localCache, isCache = is[space.cache];
                    if (isCache) {
                        localCache = inst[space.cache] || space.to && space.to(inst._rgba) || [];
                        each(space.props, function(_, prop) {
                            if (isCache[prop.idx] != null) {
                                same = (isCache[prop.idx] === localCache[prop.idx]);
                                return same;
                            }
                        });
                    }
                    return same;
                });
                return same;
            },_space: function() {
                var used = [], inst = this;
                each(spaces, function(spaceName, space) {
                    if (inst[space.cache]) {
                        used.push(spaceName);
                    }
                });
                return used.pop();
            },transition: function(other, distance) {
                var end = color(other), spaceName = end._space(), space = spaces[spaceName], startColor = this.alpha() === 0 ? color("transparent") : this, start = startColor[space.cache] || space.to(startColor._rgba), result = start.slice();
                end = end[space.cache];
                each(space.props, function(key, prop) {
                    var index = prop.idx, startValue = start[index], endValue = end[index], type = propTypes[prop.type] || {};
                    if (endValue === null) {
                        return;
                    }
                    if (startValue === null) {
                        result[index] = endValue;
                    } else {
                        if (type.mod) {
                            if (endValue - startValue > type.mod / 2) {
                                startValue += type.mod;
                            } else {
                                if (startValue - endValue > type.mod / 2) {
                                    startValue -= type.mod;
                                }
                            }
                        }
                        result[index] = clamp((endValue - startValue) * distance + startValue, prop);
                    }
                });
                return this[spaceName](result);
            },blend: function(opaque) {
                if (this._rgba[3] === 1) {
                    return this;
                }
                var rgb = this._rgba.slice(), a = rgb.pop(), blend = color(opaque)._rgba;
                return color(jQuery.map(rgb, function(v, i) {
                    return (1 - a) * blend[i] + a * v;
                }));
            },toRgbaString: function() {
                var prefix = "rgba(", rgba = jQuery.map(this._rgba, function(v, i) {
                    return v == null ? (i > 2 ? 1 : 0) : v;
                });
                if (rgba[3] === 1) {
                    rgba.pop();
                    prefix = "rgb(";
                }
                return prefix + rgba.join() + ")";
            },toHslaString: function() {
                var prefix = "hsla(", hsla = jQuery.map(this.hsla(), function(v, i) {
                    if (v == null) {
                        v = i > 2 ? 1 : 0;
                    }
                    if (i && i < 3) {
                        v = Math.round(v * 100) + "%";
                    }
                    return v;
                });
                if (hsla[3] === 1) {
                    hsla.pop();
                    prefix = "hsl(";
                }
                return prefix + hsla.join() + ")";
            },toHexString: function(includeAlpha) {
                var rgba = this._rgba.slice(), alpha = rgba.pop();
                if (includeAlpha) {
                    rgba.push(~~(alpha * 255));
                }
                return "#" + jQuery.map(rgba, function(v) {
                    v = (v || 0).toString(16);
                    return v.length === 1 ? "0" + v : v;
                }).join("");
            },toString: function() {
                return this._rgba[3] === 0 ? "transparent" : this.toRgbaString();
            }});
        color.fn.parse.prototype = color.fn;
        function hue2rgb(p, q, h) {
            h = (h + 1) % 1;
            if (h * 6 < 1) {
                return p + (q - p) * h * 6;
            }
            if (h * 2 < 1) {
                return q;
            }
            if (h * 3 < 2) {
                return p + (q - p) * ((2 / 3) - h) * 6;
            }
            return p;
        }
        spaces.hsla.to = function(rgba) {
            if (rgba[0] == null || rgba[1] == null || rgba[2] == null) {
                return [null, null, null, rgba[3]];
            }
            var r = rgba[0] / 255, g = rgba[1] / 255, b = rgba[2] / 255, a = rgba[3], max = Math.max(r, g, b), min = Math.min(r, g, b), diff = max - min, add = max + min, l = add * 0.5, h, s;
            if (min === max) {
                h = 0;
            } else {
                if (r === max) {
                    h = (60 * (g - b) / diff) + 360;
                } else {
                    if (g === max) {
                        h = (60 * (b - r) / diff) + 120;
                    } else {
                        h = (60 * (r - g) / diff) + 240;
                    }
                }
            }
            if (diff === 0) {
                s = 0;
            } else {
                if (l <= 0.5) {
                    s = diff / add;
                } else {
                    s = diff / (2 - add);
                }
            }
            return [Math.round(h) % 360, s, l, a == null ? 1 : a];
        };
        spaces.hsla.from = function(hsla) {
            if (hsla[0] == null || hsla[1] == null || hsla[2] == null) {
                return [null, null, null, hsla[3]];
            }
            var h = hsla[0] / 360, s = hsla[1], l = hsla[2], a = hsla[3], q = l <= 0.5 ? l * (1 + s) : l + s - l * s, p = 2 * l - q;
            return [Math.round(hue2rgb(p, q, h + (1 / 3)) * 255), Math.round(hue2rgb(p, q, h) * 255), Math.round(hue2rgb(p, q, h - (1 / 3)) * 255), a];
        };
        each(spaces, function(spaceName, space) {
            var props = space.props, cache = space.cache, to = space.to, from = space.from;
            color.fn[spaceName] = function(value) {
                if (to && !this[cache]) {
                    this[cache] = to(this._rgba);
                }
                if (value === undefined) {
                    return this[cache].slice();
                }
                var ret, type = jQuery.type(value), arr = (type === "array" || type === "object") ? value : arguments, local = this[cache].slice();
                each(props, function(key, prop) {
                    var val = arr[type === "object" ? key : prop.idx];
                    if (val == null) {
                        val = local[prop.idx];
                    }
                    local[prop.idx] = clamp(val, prop);
                });
                if (from) {
                    ret = color(from(local));
                    ret[cache] = local;
                    return ret;
                } else {
                    return color(local);
                }
            };
            each(props, function(key, prop) {
                if (color.fn[key]) {
                    return;
                }
                color.fn[key] = function(value) {
                    var vtype = jQuery.type(value), fn = (key === "alpha" ? (this._hsla ? "hsla" : "rgba") : spaceName), local = this[fn](), cur = local[prop.idx], match;
                    if (vtype === "undefined") {
                        return cur;
                    }
                    if (vtype === "function") {
                        value = value.call(this, cur);
                        vtype = jQuery.type(value);
                    }
                    if (value == null && prop.empty) {
                        return this;
                    }
                    if (vtype === "string") {
                        match = rplusequals.exec(value);
                        if (match) {
                            value = cur + parseFloat(match[2]) * (match[1] === "+" ? 1 : -1);
                        }
                    }
                    local[prop.idx] = value;
                    return this[fn](local);
                };
            });
        });
        color.hook = function(hook) {
            var hooks = hook.split(" ");
            each(hooks, function(i, hook) {
                jQuery.cssHooks[hook] = {set: function(elem, value) {
                        var parsed, curElem, backgroundColor = "";
                        if (value !== "transparent" && (jQuery.type(value) !== "string" || (parsed = stringParse(value)))) {
                            value = color(parsed || value);
                            if (!support.rgba && value._rgba[3] !== 1) {
                                curElem = hook === "backgroundColor" ? elem.parentNode : elem;
                                while ((backgroundColor === "" || backgroundColor === "transparent") && curElem && curElem.style) {
                                    try {
                                        backgroundColor = jQuery.css(curElem, "backgroundColor");
                                        curElem = curElem.parentNode;
                                    } catch (e) {
                                    }
                                }
                                value = value.blend(backgroundColor && backgroundColor !== "transparent" ? backgroundColor : "_default");
                            }
                            value = value.toRgbaString();
                        }
                        try {
                            elem.style[hook] = value;
                        } catch (e) {
                        }
                    }};
                jQuery.fx.step[hook] = function(fx) {
                    if (!fx.colorInit) {
                        fx.start = color(fx.elem, hook);
                        fx.end = color(fx.end);
                        fx.colorInit = true;
                    }
                    jQuery.cssHooks[hook].set(fx.elem, fx.start.transition(fx.end, fx.pos));
                };
            });
        };
        color.hook(stepHooks);
        jQuery.cssHooks.borderColor = {expand: function(value) {
                var expanded = {};
                each(["Top", "Right", "Bottom", "Left"], function(i, part) {
                    expanded["border" + part + "Color"] = value;
                });
                return expanded;
            }};
        colors = jQuery.Color.names = {aqua: "#00ffff",black: "#000000",blue: "#0000ff",fuchsia: "#ff00ff",gray: "#808080",green: "#008000",lime: "#00ff00",maroon: "#800000",navy: "#000080",olive: "#808000",purple: "#800080",red: "#ff0000",silver: "#c0c0c0",teal: "#008080",white: "#ffffff",yellow: "#ffff00",transparent: [null, null, null, 0],_default: "#ffffff"};
    })(jQuery);
    (function() {
        var classAnimationActions = ["add", "remove", "toggle"], shorthandStyles = {border: 1,borderBottom: 1,borderColor: 1,borderLeft: 1,borderRight: 1,borderTop: 1,borderWidth: 1,margin: 1,padding: 1};
        $.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(_, prop) {
            $.fx.step[prop] = function(fx) {
                if (fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr) {
                    jQuery.style(fx.elem, prop, fx.end);
                    fx.setAttr = true;
                }
            };
        });
        function getElementStyles(elem) {
            var key, len, style = elem.ownerDocument.defaultView ? elem.ownerDocument.defaultView.getComputedStyle(elem, null) : elem.currentStyle, styles = {};
            if (style && style.length && style[0] && style[style[0]]) {
                len = style.length;
                while (len--) {
                    key = style[len];
                    if (typeof style[key] === "string") {
                        styles[$.camelCase(key)] = style[key];
                    }
                }
            } else {
                for (key in style) {
                    if (typeof style[key] === "string") {
                        styles[key] = style[key];
                    }
                }
            }
            return styles;
        }
        function styleDifference(oldStyle, newStyle) {
            var diff = {}, name, value;
            for (name in newStyle) {
                value = newStyle[name];
                if (oldStyle[name] !== value) {
                    if (!shorthandStyles[name]) {
                        if ($.fx.step[name] || !isNaN(parseFloat(value))) {
                            diff[name] = value;
                        }
                    }
                }
            }
            return diff;
        }
        if (!$.fn.addBack) {
            $.fn.addBack = function(selector) {
                return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
            };
        }
        $.effects.animateClass = function(value, duration, easing, callback) {
            var o = $.speed(duration, easing, callback);
            return this.queue(function() {
                var animated = $(this), baseClass = animated.attr("class") || "", applyClassChange, allAnimations = o.children ? animated.find("*").addBack() : animated;
                allAnimations = allAnimations.map(function() {
                    var el = $(this);
                    return {el: el,start: getElementStyles(this)};
                });
                applyClassChange = function() {
                    $.each(classAnimationActions, function(i, action) {
                        if (value[action]) {
                            animated[action + "Class"](value[action]);
                        }
                    });
                };
                applyClassChange();
                allAnimations = allAnimations.map(function() {
                    this.end = getElementStyles(this.el[0]);
                    this.diff = styleDifference(this.start, this.end);
                    return this;
                });
                animated.attr("class", baseClass);
                allAnimations = allAnimations.map(function() {
                    var styleInfo = this, dfd = $.Deferred(), opts = $.extend({}, o, {queue: false,complete: function() {
                            dfd.resolve(styleInfo);
                        }});
                    this.el.animate(this.diff, opts);
                    return dfd.promise();
                });
                $.when.apply($, allAnimations.get()).done(function() {
                    applyClassChange();
                    $.each(arguments, function() {
                        var el = this.el;
                        $.each(this.diff, function(key) {
                            el.css(key, "");
                        });
                    });
                    o.complete.call(animated[0]);
                });
            });
        };
        $.fn.extend({addClass: (function(orig) {
                return function(classNames, speed, easing, callback) {
                    return speed ? $.effects.animateClass.call(this, {add: classNames}, speed, easing, callback) : orig.apply(this, arguments);
                };
            })($.fn.addClass),removeClass: (function(orig) {
                return function(classNames, speed, easing, callback) {
                    return arguments.length > 1 ? $.effects.animateClass.call(this, {remove: classNames}, speed, easing, callback) : orig.apply(this, arguments);
                };
            })($.fn.removeClass),toggleClass: (function(orig) {
                return function(classNames, force, speed, easing, callback) {
                    if (typeof force === "boolean" || force === undefined) {
                        if (!speed) {
                            return orig.apply(this, arguments);
                        } else {
                            return $.effects.animateClass.call(this, (force ? {add: classNames} : {remove: classNames}), speed, easing, callback);
                        }
                    } else {
                        return $.effects.animateClass.call(this, {toggle: classNames}, force, speed, easing);
                    }
                };
            })($.fn.toggleClass),switchClass: function(remove, add, speed, easing, callback) {
                return $.effects.animateClass.call(this, {add: add,remove: remove}, speed, easing, callback);
            }});
    })();
    (function() {
        $.extend($.effects, {version: "1.10.3",save: function(element, set) {
                for (var i = 0; i < set.length; i++) {
                    if (set[i] !== null) {
                        element.data(dataSpace + set[i], element[0].style[set[i]]);
                    }
                }
            },restore: function(element, set) {
                var val, i;
                for (i = 0; i < set.length; i++) {
                    if (set[i] !== null) {
                        val = element.data(dataSpace + set[i]);
                        if (val === undefined) {
                            val = "";
                        }
                        element.css(set[i], val);
                    }
                }
            },setMode: function(el, mode) {
                if (mode === "toggle") {
                    mode = el.is(":hidden") ? "show" : "hide";
                }
                return mode;
            },getBaseline: function(origin, original) {
                var y, x;
                switch (origin[0]) {
                    case "top":
                        y = 0;
                        break;
                    case "middle":
                        y = 0.5;
                        break;
                    case "bottom":
                        y = 1;
                        break;
                    default:
                        y = origin[0] / original.height;
                }
                switch (origin[1]) {
                    case "left":
                        x = 0;
                        break;
                    case "center":
                        x = 0.5;
                        break;
                    case "right":
                        x = 1;
                        break;
                    default:
                        x = origin[1] / original.width;
                }
                return {x: x,y: y};
            },createWrapper: function(element) {
                if (element.parent().is(".ui-effects-wrapper")) {
                    return element.parent();
                }
                var props = {width: element.outerWidth(true),height: element.outerHeight(true),"float": element.css("float")}, wrapper = $("<div></div>").addClass("ui-effects-wrapper").css({fontSize: "100%",background: "transparent",border: "none",margin: 0,padding: 0}), size = {width: element.width(),height: element.height()}, active = document.activeElement;
                try {
                    active.id;
                } catch (e) {
                    active = document.body;
                }
                element.wrap(wrapper);
                if (element[0] === active || $.contains(element[0], active)) {
                    $(active).focus();
                }
                wrapper = element.parent();
                if (element.css("position") === "static") {
                    wrapper.css({position: "relative"});
                    element.css({position: "relative"});
                } else {
                    $.extend(props, {position: element.css("position"),zIndex: element.css("z-index")});
                    $.each(["top", "left", "bottom", "right"], function(i, pos) {
                        props[pos] = element.css(pos);
                        if (isNaN(parseInt(props[pos], 10))) {
                            props[pos] = "auto";
                        }
                    });
                    element.css({position: "relative",top: 0,left: 0,right: "auto",bottom: "auto"});
                }
                element.css(size);
                return wrapper.css(props).show();
            },removeWrapper: function(element) {
                var active = document.activeElement;
                if (element.parent().is(".ui-effects-wrapper")) {
                    element.parent().replaceWith(element);
                    if (element[0] === active || $.contains(element[0], active)) {
                        $(active).focus();
                    }
                }
                return element;
            },setTransition: function(element, list, factor, value) {
                value = value || {};
                $.each(list, function(i, x) {
                    var unit = element.cssUnit(x);
                    if (unit[0] > 0) {
                        value[x] = unit[0] * factor + unit[1];
                    }
                });
                return value;
            }});
        function _normalizeArguments(effect, options, speed, callback) {
            if ($.isPlainObject(effect)) {
                options = effect;
                effect = effect.effect;
            }
            effect = {effect: effect};
            if (options == null) {
                options = {};
            }
            if ($.isFunction(options)) {
                callback = options;
                speed = null;
                options = {};
            }
            if (typeof options === "number" || $.fx.speeds[options]) {
                callback = speed;
                speed = options;
                options = {};
            }
            if ($.isFunction(speed)) {
                callback = speed;
                speed = null;
            }
            if (options) {
                $.extend(effect, options);
            }
            speed = speed || options.duration;
            effect.duration = $.fx.off ? 0 : typeof speed === "number" ? speed : speed in $.fx.speeds ? $.fx.speeds[speed] : $.fx.speeds._default;
            effect.complete = callback || options.complete;
            return effect;
        }
        function standardAnimationOption(option) {
            if (!option || typeof option === "number" || $.fx.speeds[option]) {
                return true;
            }
            if (typeof option === "string" && !$.effects.effect[option]) {
                return true;
            }
            if ($.isFunction(option)) {
                return true;
            }
            if (typeof option === "object" && !option.effect) {
                return true;
            }
            return false;
        }
        $.fn.extend({effect: function() {
                var args = _normalizeArguments.apply(this, arguments), mode = args.mode, queue = args.queue, effectMethod = $.effects.effect[args.effect];
                if ($.fx.off || !effectMethod) {
                    if (mode) {
                        return this[mode](args.duration, args.complete);
                    } else {
                        return this.each(function() {
                            if (args.complete) {
                                args.complete.call(this);
                            }
                        });
                    }
                }
                function run(next) {
                    var elem = $(this), complete = args.complete, mode = args.mode;
                    function done() {
                        if ($.isFunction(complete)) {
                            complete.call(elem[0]);
                        }
                        if ($.isFunction(next)) {
                            next();
                        }
                    }
                    if (elem.is(":hidden") ? mode === "hide" : mode === "show") {
                        elem[mode]();
                        done();
                    } else {
                        effectMethod.call(elem[0], args, done);
                    }
                }
                return queue === false ? this.each(run) : this.queue(queue || "fx", run);
            },show: (function(orig) {
                return function(option) {
                    if (standardAnimationOption(option)) {
                        return orig.apply(this, arguments);
                    } else {
                        var args = _normalizeArguments.apply(this, arguments);
                        args.mode = "show";
                        return this.effect.call(this, args);
                    }
                };
            })($.fn.show),hide: (function(orig) {
                return function(option) {
                    if (standardAnimationOption(option)) {
                        return orig.apply(this, arguments);
                    } else {
                        var args = _normalizeArguments.apply(this, arguments);
                        args.mode = "hide";
                        return this.effect.call(this, args);
                    }
                };
            })($.fn.hide),toggle: (function(orig) {
                return function(option) {
                    if (standardAnimationOption(option) || typeof option === "boolean") {
                        return orig.apply(this, arguments);
                    } else {
                        var args = _normalizeArguments.apply(this, arguments);
                        args.mode = "toggle";
                        return this.effect.call(this, args);
                    }
                };
            })($.fn.toggle),cssUnit: function(key) {
                var style = this.css(key), val = [];
                $.each(["em", "px", "%", "pt"], function(i, unit) {
                    if (style.indexOf(unit) > 0) {
                        val = [parseFloat(style), unit];
                    }
                });
                return val;
            }});
    })();
    (function() {
        var baseEasings = {};
        $.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(i, name) {
            baseEasings[name] = function(p) {
                return Math.pow(p, i + 2);
            };
        });
        $.extend(baseEasings, {Sine: function(p) {
                return 1 - Math.cos(p * Math.PI / 2);
            },Circ: function(p) {
                return 1 - Math.sqrt(1 - p * p);
            },Elastic: function(p) {
                return p === 0 || p === 1 ? p : -Math.pow(2, 8 * (p - 1)) * Math.sin(((p - 1) * 80 - 7.5) * Math.PI / 15);
            },Back: function(p) {
                return p * p * (3 * p - 2);
            },Bounce: function(p) {
                var pow2, bounce = 4;
                while (p < ((pow2 = Math.pow(2, --bounce)) - 1) / 11) {
                }
                return 1 / Math.pow(4, 3 - bounce) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - p, 2);
            }});
        $.each(baseEasings, function(name, easeIn) {
            $.easing["easeIn" + name] = easeIn;
            $.easing["easeOut" + name] = function(p) {
                return 1 - easeIn(1 - p);
            };
            $.easing["easeInOut" + name] = function(p) {
                return p < 0.5 ? easeIn(p * 2) / 2 : 1 - easeIn(p * -2 + 2) / 2;
            };
        });
    })();
})(jQuery);
(function($, undefined) {
    var rvertical = /up|down|vertical/, rpositivemotion = /up|left|vertical|horizontal/;
    $.effects.effect.blind = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "height", "width"], mode = $.effects.setMode(el, o.mode || "hide"), direction = o.direction || "up", vertical = rvertical.test(direction), ref = vertical ? "height" : "width", ref2 = vertical ? "top" : "left", motion = rpositivemotion.test(direction), animation = {}, show = mode === "show", wrapper, distance, margin;
        if (el.parent().is(".ui-effects-wrapper")) {
            $.effects.save(el.parent(), props);
        } else {
            $.effects.save(el, props);
        }
        el.show();
        wrapper = $.effects.createWrapper(el).css({overflow: "hidden"});
        distance = wrapper[ref]();
        margin = parseFloat(wrapper.css(ref2)) || 0;
        animation[ref] = show ? distance : 0;
        if (!motion) {
            el.css(vertical ? "bottom" : "right", 0).css(vertical ? "top" : "left", "auto").css({position: "absolute"});
            animation[ref2] = show ? margin : distance + margin;
        }
        if (show) {
            wrapper.css(ref, 0);
            if (!motion) {
                wrapper.css(ref2, margin + distance);
            }
        }
        wrapper.animate(animation, {duration: o.duration,easing: o.easing,queue: false,complete: function() {
                if (mode === "hide") {
                    el.hide();
                }
                $.effects.restore(el, props);
                $.effects.removeWrapper(el);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.bounce = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "height", "width"], mode = $.effects.setMode(el, o.mode || "effect"), hide = mode === "hide", show = mode === "show", direction = o.direction || "up", distance = o.distance, times = o.times || 5, anims = times * 2 + (show || hide ? 1 : 0), speed = o.duration / anims, easing = o.easing, ref = (direction === "up" || direction === "down") ? "top" : "left", motion = (direction === "up" || direction === "left"), i, upAnim, downAnim, queue = el.queue(), queuelen = queue.length;
        if (show || hide) {
            props.push("opacity");
        }
        $.effects.save(el, props);
        el.show();
        $.effects.createWrapper(el);
        if (!distance) {
            distance = el[ref === "top" ? "outerHeight" : "outerWidth"]() / 3;
        }
        if (show) {
            downAnim = {opacity: 1};
            downAnim[ref] = 0;
            el.css("opacity", 0).css(ref, motion ? -distance * 2 : distance * 2).animate(downAnim, speed, easing);
        }
        if (hide) {
            distance = distance / Math.pow(2, times - 1);
        }
        downAnim = {};
        downAnim[ref] = 0;
        for (i = 0; i < times; i++) {
            upAnim = {};
            upAnim[ref] = (motion ? "-=" : "+=") + distance;
            el.animate(upAnim, speed, easing).animate(downAnim, speed, easing);
            distance = hide ? distance * 2 : distance / 2;
        }
        if (hide) {
            upAnim = {opacity: 0};
            upAnim[ref] = (motion ? "-=" : "+=") + distance;
            el.animate(upAnim, speed, easing);
        }
        el.queue(function() {
            if (hide) {
                el.hide();
            }
            $.effects.restore(el, props);
            $.effects.removeWrapper(el);
            done();
        });
        if (queuelen > 1) {
            queue.splice.apply(queue, [1, 0].concat(queue.splice(queuelen, anims + 1)));
        }
        el.dequeue();
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.clip = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "height", "width"], mode = $.effects.setMode(el, o.mode || "hide"), show = mode === "show", direction = o.direction || "vertical", vert = direction === "vertical", size = vert ? "height" : "width", position = vert ? "top" : "left", animation = {}, wrapper, animate, distance;
        $.effects.save(el, props);
        el.show();
        wrapper = $.effects.createWrapper(el).css({overflow: "hidden"});
        animate = (el[0].tagName === "IMG") ? wrapper : el;
        distance = animate[size]();
        if (show) {
            animate.css(size, 0);
            animate.css(position, distance / 2);
        }
        animation[size] = show ? distance : 0;
        animation[position] = show ? 0 : distance / 2;
        animate.animate(animation, {queue: false,duration: o.duration,easing: o.easing,complete: function() {
                if (!show) {
                    el.hide();
                }
                $.effects.restore(el, props);
                $.effects.removeWrapper(el);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.drop = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"], mode = $.effects.setMode(el, o.mode || "hide"), show = mode === "show", direction = o.direction || "left", ref = (direction === "up" || direction === "down") ? "top" : "left", motion = (direction === "up" || direction === "left") ? "pos" : "neg", animation = {opacity: show ? 1 : 0}, distance;
        $.effects.save(el, props);
        el.show();
        $.effects.createWrapper(el);
        distance = o.distance || el[ref === "top" ? "outerHeight" : "outerWidth"](true) / 2;
        if (show) {
            el.css("opacity", 0).css(ref, motion === "pos" ? -distance : distance);
        }
        animation[ref] = (show ? (motion === "pos" ? "+=" : "-=") : (motion === "pos" ? "-=" : "+=")) + distance;
        el.animate(animation, {queue: false,duration: o.duration,easing: o.easing,complete: function() {
                if (mode === "hide") {
                    el.hide();
                }
                $.effects.restore(el, props);
                $.effects.removeWrapper(el);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.explode = function(o, done) {
        var rows = o.pieces ? Math.round(Math.sqrt(o.pieces)) : 3, cells = rows, el = $(this), mode = $.effects.setMode(el, o.mode || "hide"), show = mode === "show", offset = el.show().css("visibility", "hidden").offset(), width = Math.ceil(el.outerWidth() / cells), height = Math.ceil(el.outerHeight() / rows), pieces = [], i, j, left, top, mx, my;
        function childComplete() {
            pieces.push(this);
            if (pieces.length === rows * cells) {
                animComplete();
            }
        }
        for (i = 0; i < rows; i++) {
            top = offset.top + i * height;
            my = i - (rows - 1) / 2;
            for (j = 0; j < cells; j++) {
                left = offset.left + j * width;
                mx = j - (cells - 1) / 2;
                el.clone().appendTo("body").wrap("<div></div>").css({position: "absolute",visibility: "visible",left: -j * width,top: -i * height}).parent().addClass("ui-effects-explode").css({position: "absolute",overflow: "hidden",width: width,height: height,left: left + (show ? mx * width : 0),top: top + (show ? my * height : 0),opacity: show ? 0 : 1}).animate({left: left + (show ? 0 : mx * width),top: top + (show ? 0 : my * height),opacity: show ? 1 : 0}, o.duration || 500, o.easing, childComplete);
            }
        }
        function animComplete() {
            el.css({visibility: "visible"});
            $(pieces).remove();
            if (!show) {
                el.hide();
            }
            done();
        }
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.fade = function(o, done) {
        var el = $(this), mode = $.effects.setMode(el, o.mode || "toggle");
        el.animate({opacity: mode}, {queue: false,duration: o.duration,easing: o.easing,complete: done});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.fold = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "height", "width"], mode = $.effects.setMode(el, o.mode || "hide"), show = mode === "show", hide = mode === "hide", size = o.size || 15, percent = /([0-9]+)%/.exec(size), horizFirst = !!o.horizFirst, widthFirst = show !== horizFirst, ref = widthFirst ? ["width", "height"] : ["height", "width"], duration = o.duration / 2, wrapper, distance, animation1 = {}, animation2 = {};
        $.effects.save(el, props);
        el.show();
        wrapper = $.effects.createWrapper(el).css({overflow: "hidden"});
        distance = widthFirst ? [wrapper.width(), wrapper.height()] : [wrapper.height(), wrapper.width()];
        if (percent) {
            size = parseInt(percent[1], 10) / 100 * distance[hide ? 0 : 1];
        }
        if (show) {
            wrapper.css(horizFirst ? {height: 0,width: size} : {height: size,width: 0});
        }
        animation1[ref[0]] = show ? distance[0] : size;
        animation2[ref[1]] = show ? distance[1] : 0;
        wrapper.animate(animation1, duration, o.easing).animate(animation2, duration, o.easing, function() {
            if (hide) {
                el.hide();
            }
            $.effects.restore(el, props);
            $.effects.removeWrapper(el);
            done();
        });
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.highlight = function(o, done) {
        var elem = $(this), props = ["backgroundImage", "backgroundColor", "opacity"], mode = $.effects.setMode(elem, o.mode || "show"), animation = {backgroundColor: elem.css("backgroundColor")};
        if (mode === "hide") {
            animation.opacity = 0;
        }
        $.effects.save(elem, props);
        elem.show().css({backgroundImage: "none",backgroundColor: o.color || "#ffff99"}).animate(animation, {queue: false,duration: o.duration,easing: o.easing,complete: function() {
                if (mode === "hide") {
                    elem.hide();
                }
                $.effects.restore(elem, props);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.pulsate = function(o, done) {
        var elem = $(this), mode = $.effects.setMode(elem, o.mode || "show"), show = mode === "show", hide = mode === "hide", showhide = (show || mode === "hide"), anims = ((o.times || 5) * 2) + (showhide ? 1 : 0), duration = o.duration / anims, animateTo = 0, queue = elem.queue(), queuelen = queue.length, i;
        if (show || !elem.is(":visible")) {
            elem.css("opacity", 0).show();
            animateTo = 1;
        }
        for (i = 1; i < anims; i++) {
            elem.animate({opacity: animateTo}, duration, o.easing);
            animateTo = 1 - animateTo;
        }
        elem.animate({opacity: animateTo}, duration, o.easing);
        elem.queue(function() {
            if (hide) {
                elem.hide();
            }
            done();
        });
        if (queuelen > 1) {
            queue.splice.apply(queue, [1, 0].concat(queue.splice(queuelen, anims + 1)));
        }
        elem.dequeue();
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.puff = function(o, done) {
        var elem = $(this), mode = $.effects.setMode(elem, o.mode || "hide"), hide = mode === "hide", percent = parseInt(o.percent, 10) || 150, factor = percent / 100, original = {height: elem.height(),width: elem.width(),outerHeight: elem.outerHeight(),outerWidth: elem.outerWidth()};
        $.extend(o, {effect: "scale",queue: false,fade: true,mode: mode,complete: done,percent: hide ? percent : 100,from: hide ? original : {height: original.height * factor,width: original.width * factor,outerHeight: original.outerHeight * factor,outerWidth: original.outerWidth * factor}});
        elem.effect(o);
    };
    $.effects.effect.scale = function(o, done) {
        var el = $(this), options = $.extend(true, {}, o), mode = $.effects.setMode(el, o.mode || "effect"), percent = parseInt(o.percent, 10) || (parseInt(o.percent, 10) === 0 ? 0 : (mode === "hide" ? 0 : 100)), direction = o.direction || "both", origin = o.origin, original = {height: el.height(),width: el.width(),outerHeight: el.outerHeight(),outerWidth: el.outerWidth()}, factor = {y: direction !== "horizontal" ? (percent / 100) : 1,x: direction !== "vertical" ? (percent / 100) : 1};
        options.effect = "size";
        options.queue = false;
        options.complete = done;
        if (mode !== "effect") {
            options.origin = origin || ["middle", "center"];
            options.restore = true;
        }
        options.from = o.from || (mode === "show" ? {height: 0,width: 0,outerHeight: 0,outerWidth: 0} : original);
        options.to = {height: original.height * factor.y,width: original.width * factor.x,outerHeight: original.outerHeight * factor.y,outerWidth: original.outerWidth * factor.x};
        if (options.fade) {
            if (mode === "show") {
                options.from.opacity = 0;
                options.to.opacity = 1;
            }
            if (mode === "hide") {
                options.from.opacity = 1;
                options.to.opacity = 0;
            }
        }
        el.effect(options);
    };
    $.effects.effect.size = function(o, done) {
        var original, baseline, factor, el = $(this), props0 = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"], props1 = ["position", "top", "bottom", "left", "right", "overflow", "opacity"], props2 = ["width", "height", "overflow"], cProps = ["fontSize"], vProps = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], hProps = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], mode = $.effects.setMode(el, o.mode || "effect"), restore = o.restore || mode !== "effect", scale = o.scale || "both", origin = o.origin || ["middle", "center"], position = el.css("position"), props = restore ? props0 : props1, zero = {height: 0,width: 0,outerHeight: 0,outerWidth: 0};
        if (mode === "show") {
            el.show();
        }
        original = {height: el.height(),width: el.width(),outerHeight: el.outerHeight(),outerWidth: el.outerWidth()};
        if (o.mode === "toggle" && mode === "show") {
            el.from = o.to || zero;
            el.to = o.from || original;
        } else {
            el.from = o.from || (mode === "show" ? zero : original);
            el.to = o.to || (mode === "hide" ? zero : original);
        }
        factor = {from: {y: el.from.height / original.height,x: el.from.width / original.width},to: {y: el.to.height / original.height,x: el.to.width / original.width}};
        if (scale === "box" || scale === "both") {
            if (factor.from.y !== factor.to.y) {
                props = props.concat(vProps);
                el.from = $.effects.setTransition(el, vProps, factor.from.y, el.from);
                el.to = $.effects.setTransition(el, vProps, factor.to.y, el.to);
            }
            if (factor.from.x !== factor.to.x) {
                props = props.concat(hProps);
                el.from = $.effects.setTransition(el, hProps, factor.from.x, el.from);
                el.to = $.effects.setTransition(el, hProps, factor.to.x, el.to);
            }
        }
        if (scale === "content" || scale === "both") {
            if (factor.from.y !== factor.to.y) {
                props = props.concat(cProps).concat(props2);
                el.from = $.effects.setTransition(el, cProps, factor.from.y, el.from);
                el.to = $.effects.setTransition(el, cProps, factor.to.y, el.to);
            }
        }
        $.effects.save(el, props);
        el.show();
        $.effects.createWrapper(el);
        el.css("overflow", "hidden").css(el.from);
        if (origin) {
            baseline = $.effects.getBaseline(origin, original);
            el.from.top = (original.outerHeight - el.outerHeight()) * baseline.y;
            el.from.left = (original.outerWidth - el.outerWidth()) * baseline.x;
            el.to.top = (original.outerHeight - el.to.outerHeight) * baseline.y;
            el.to.left = (original.outerWidth - el.to.outerWidth) * baseline.x;
        }
        el.css(el.from);
        if (scale === "content" || scale === "both") {
            vProps = vProps.concat(["marginTop", "marginBottom"]).concat(cProps);
            hProps = hProps.concat(["marginLeft", "marginRight"]);
            props2 = props0.concat(vProps).concat(hProps);
            el.find("*[width]").each(function() {
                var child = $(this), c_original = {height: child.height(),width: child.width(),outerHeight: child.outerHeight(),outerWidth: child.outerWidth()};
                if (restore) {
                    $.effects.save(child, props2);
                }
                child.from = {height: c_original.height * factor.from.y,width: c_original.width * factor.from.x,outerHeight: c_original.outerHeight * factor.from.y,outerWidth: c_original.outerWidth * factor.from.x};
                child.to = {height: c_original.height * factor.to.y,width: c_original.width * factor.to.x,outerHeight: c_original.height * factor.to.y,outerWidth: c_original.width * factor.to.x};
                if (factor.from.y !== factor.to.y) {
                    child.from = $.effects.setTransition(child, vProps, factor.from.y, child.from);
                    child.to = $.effects.setTransition(child, vProps, factor.to.y, child.to);
                }
                if (factor.from.x !== factor.to.x) {
                    child.from = $.effects.setTransition(child, hProps, factor.from.x, child.from);
                    child.to = $.effects.setTransition(child, hProps, factor.to.x, child.to);
                }
                child.css(child.from);
                child.animate(child.to, o.duration, o.easing, function() {
                    if (restore) {
                        $.effects.restore(child, props2);
                    }
                });
            });
        }
        el.animate(el.to, {queue: false,duration: o.duration,easing: o.easing,complete: function() {
                if (el.to.opacity === 0) {
                    el.css("opacity", el.from.opacity);
                }
                if (mode === "hide") {
                    el.hide();
                }
                $.effects.restore(el, props);
                if (!restore) {
                    if (position === "static") {
                        el.css({position: "relative",top: el.to.top,left: el.to.left});
                    } else {
                        $.each(["top", "left"], function(idx, pos) {
                            el.css(pos, function(_, str) {
                                var val = parseInt(str, 10), toRef = idx ? el.to.left : el.to.top;
                                if (str === "auto") {
                                    return toRef + "px";
                                }
                                return val + toRef + "px";
                            });
                        });
                    }
                }
                $.effects.removeWrapper(el);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.shake = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "height", "width"], mode = $.effects.setMode(el, o.mode || "effect"), direction = o.direction || "left", distance = o.distance || 20, times = o.times || 3, anims = times * 2 + 1, speed = Math.round(o.duration / anims), ref = (direction === "up" || direction === "down") ? "top" : "left", positiveMotion = (direction === "up" || direction === "left"), animation = {}, animation1 = {}, animation2 = {}, i, queue = el.queue(), queuelen = queue.length;
        $.effects.save(el, props);
        el.show();
        $.effects.createWrapper(el);
        animation[ref] = (positiveMotion ? "-=" : "+=") + distance;
        animation1[ref] = (positiveMotion ? "+=" : "-=") + distance * 2;
        animation2[ref] = (positiveMotion ? "-=" : "+=") + distance * 2;
        el.animate(animation, speed, o.easing);
        for (i = 1; i < times; i++) {
            el.animate(animation1, speed, o.easing).animate(animation2, speed, o.easing);
        }
        el.animate(animation1, speed, o.easing).animate(animation, speed / 2, o.easing).queue(function() {
            if (mode === "hide") {
                el.hide();
            }
            $.effects.restore(el, props);
            $.effects.removeWrapper(el);
            done();
        });
        if (queuelen > 1) {
            queue.splice.apply(queue, [1, 0].concat(queue.splice(queuelen, anims + 1)));
        }
        el.dequeue();
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.slide = function(o, done) {
        var el = $(this), props = ["position", "top", "bottom", "left", "right", "width", "height"], mode = $.effects.setMode(el, o.mode || "show"), show = mode === "show", direction = o.direction || "left", ref = (direction === "up" || direction === "down") ? "top" : "left", positiveMotion = (direction === "up" || direction === "left"), distance, animation = {};
        $.effects.save(el, props);
        el.show();
        distance = o.distance || el[ref === "top" ? "outerHeight" : "outerWidth"](true);
        $.effects.createWrapper(el).css({overflow: "hidden"});
        if (show) {
            el.css(ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance);
        }
        animation[ref] = (show ? (positiveMotion ? "+=" : "-=") : (positiveMotion ? "-=" : "+=")) + distance;
        el.animate(animation, {queue: false,duration: o.duration,easing: o.easing,complete: function() {
                if (mode === "hide") {
                    el.hide();
                }
                $.effects.restore(el, props);
                $.effects.removeWrapper(el);
                done();
            }});
    };
})(jQuery);
(function($, undefined) {
    $.effects.effect.transfer = function(o, done) {
        var elem = $(this), target = $(o.to), targetFixed = target.css("position") === "fixed", body = $("body"), fixTop = targetFixed ? body.scrollTop() : 0, fixLeft = targetFixed ? body.scrollLeft() : 0, endPosition = target.offset(), animation = {top: endPosition.top - fixTop,left: endPosition.left - fixLeft,height: target.innerHeight(),width: target.innerWidth()}, startPosition = elem.offset(), transfer = $("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(o.className).css({top: startPosition.top - fixTop,left: startPosition.left - fixLeft,height: elem.innerHeight(),width: elem.innerWidth(),position: targetFixed ? "fixed" : "absolute"}).animate(animation, o.duration, o.easing, function() {
            transfer.remove();
            done();
        });
    };
})(jQuery);
if ("undefined" == typeof jQuery) {
    throw new Error("Bootstrap requires jQuery");
}
+function(a) {
    function b() {
        var a = document.createElement("bootstrap"), b = {WebkitTransition: "webkitTransitionEnd",MozTransition: "transitionend",OTransition: "oTransitionEnd otransitionend",transition: "transitionend"};
        for (var c in b) {
            if (void 0 !== a.style[c]) {
                return {end: b[c]};
            }
        }
    }
    a.fn.emulateTransitionEnd = function(b) {
        var c = !1, d = this;
        a(this).one(a.support.transition.end, function() {
            c = !0;
        });
        var e = function() {
            c || a(d).trigger(a.support.transition.end);
        };
        return setTimeout(e, b), this;
    }, a(function() {
        a.support.transition = b();
    });
}(jQuery), +function(a) {
    var b = '[data-dismiss="alert"]', c = function(c) {
        a(c).on("click", b, this.close);
    };
    c.prototype.close = function(b) {
        function c() {
            f.trigger("closed.bs.alert").remove();
        }
        var d = a(this), e = d.attr("data-target");
        e || (e = d.attr("href"), e = e && e.replace(/.*(?=#[^\s]*$)/, ""));
        var f = a(e);
        b && b.preventDefault(), f.length || (f = d.hasClass("alert") ? d : d.parent()), f.trigger(b = a.Event("close.bs.alert")), b.isDefaultPrevented() || (f.removeClass("in"), a.support.transition && f.hasClass("fade") ? f.one(a.support.transition.end, c).emulateTransitionEnd(150) : c());
    };
    var d = a.fn.alert;
    a.fn.alert = function(b) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.alert");
            e || d.data("bs.alert", e = new c(this)), "string" == typeof b && e[b].call(d);
        });
    }, a.fn.alert.Constructor = c, a.fn.alert.noConflict = function() {
        return a.fn.alert = d, this;
    }, a(document).on("click.bs.alert.data-api", b, c.prototype.close);
}(jQuery), +function(a) {
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d);
    };
    b.DEFAULTS = {loadingText: "loading..."}, b.prototype.setState = function(a) {
        var b = "disabled", c = this.$element, d = c.is("input") ? "val" : "html", e = c.data();
        a += "Text", e.resetText || c.data("resetText", c[d]()), c[d](e[a] || this.options[a]), setTimeout(function() {
            "loadingText" == a ? c.addClass(b).attr(b, b) : c.removeClass(b).removeAttr(b);
        }, 0);
    }, b.prototype.toggle = function() {
        var a = this.$element.closest('[data-toggle="buttons"]'), b = !0;
        if (a.length) {
            var c = this.$element.find("input");
            "radio" === c.prop("type") && (c.prop("checked") && this.$element.hasClass("active") ? b = !1 : a.find(".active").removeClass("active")), b && c.prop("checked", !this.$element.hasClass("active")).trigger("change");
        }
        b && this.$element.toggleClass("active");
    };
    var c = a.fn.button;
    a.fn.button = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.button"), f = "object" == typeof c && c;
            e || d.data("bs.button", e = new b(this, f)), "toggle" == c ? e.toggle() : c && e.setState(c);
        });
    }, a.fn.button.Constructor = b, a.fn.button.noConflict = function() {
        return a.fn.button = c, this;
    }, a(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(b) {
        var c = a(b.target);
        c.hasClass("btn") || (c = c.closest(".btn")), c.button("toggle"), b.preventDefault();
    });
}(jQuery), +function(a) {
    var b = function(b, c) {
        this.$element = a(b), this.$indicators = this.$element.find(".carousel-indicators"), this.options = c, this.paused = this.sliding = this.interval = this.$active = this.$items = null, "hover" == this.options.pause && this.$element.on("mouseenter", a.proxy(this.pause, this)).on("mouseleave", a.proxy(this.cycle, this));
    };
    b.DEFAULTS = {interval: 5000,pause: "hover",wrap: !0}, b.prototype.cycle = function(b) {
        return b || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(a.proxy(this.next, this), this.options.interval)), this;
    }, b.prototype.getActiveIndex = function() {
        return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), this.$items.index(this.$active);
    }, b.prototype.to = function(b) {
        var c = this, d = this.getActiveIndex();
        return b > this.$items.length - 1 || 0 > b ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            c.to(b);
        }) : d == b ? this.pause().cycle() : this.slide(b > d ? "next" : "prev", a(this.$items[b]));
    }, b.prototype.pause = function(b) {
        return b || (this.paused = !0), this.$element.find(".next, .prev").length && a.support.transition.end && (this.$element.trigger(a.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this;
    }, b.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next");
    }, b.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev");
    }, b.prototype.slide = function(b, c) {
        var d = this.$element.find(".item.active"), e = c || d[b](), f = this.interval, g = "next" == b ? "left" : "right", h = "next" == b ? "first" : "last", i = this;
        if (!e.length) {
            if (!this.options.wrap) {
                return;
            }
            e = this.$element.find(".item")[h]();
        }
        this.sliding = !0, f && this.pause();
        var j = a.Event("slide.bs.carousel", {relatedTarget: e[0],direction: g});
        if (!e.hasClass("active")) {
            if (this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), this.$element.one("slid.bs.carousel", function() {
                var b = a(i.$indicators.children()[i.getActiveIndex()]);
                b && b.addClass("active");
            })), a.support.transition && this.$element.hasClass("slide")) {
                if (this.$element.trigger(j), j.isDefaultPrevented()) {
                    return;
                }
                e.addClass(b), e[0].offsetWidth, d.addClass(g), e.addClass(g), d.one(a.support.transition.end, function() {
                    e.removeClass([b, g].join(" ")).addClass("active"), d.removeClass(["active", g].join(" ")), i.sliding = !1, setTimeout(function() {
                        i.$element.trigger("slid.bs.carousel");
                    }, 0);
                }).emulateTransitionEnd(600);
            } else {
                if (this.$element.trigger(j), j.isDefaultPrevented()) {
                    return;
                }
                d.removeClass("active"), e.addClass("active"), this.sliding = !1, this.$element.trigger("slid.bs.carousel");
            }
            return f && this.cycle(), this;
        }
    };
    var c = a.fn.carousel;
    a.fn.carousel = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.carousel"), f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c), g = "string" == typeof c ? c : f.slide;
            e || d.data("bs.carousel", e = new b(this, f)), "number" == typeof c ? e.to(c) : g ? e[g]() : f.interval && e.pause().cycle();
        });
    }, a.fn.carousel.Constructor = b, a.fn.carousel.noConflict = function() {
        return a.fn.carousel = c, this;
    }, a(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function(b) {
        var c, d = a(this), e = a(d.attr("data-target") || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, "")), f = a.extend({}, e.data(), d.data()), g = d.attr("data-slide-to");
        g && (f.interval = !1), e.carousel(f), (g = d.attr("data-slide-to")) && e.data("bs.carousel").to(g), b.preventDefault();
    }), a(window).on("load", function() {
        a('[data-ride="carousel"]').each(function() {
            var b = a(this);
            b.carousel(b.data());
        });
    });
}(jQuery), +function(a) {
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d), this.transitioning = null, this.options.parent && (this.$parent = a(this.options.parent)), this.options.toggle && this.toggle();
    };
    b.DEFAULTS = {toggle: !0}, b.prototype.dimension = function() {
        var a = this.$element.hasClass("width");
        return a ? "width" : "height";
    }, b.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var b = a.Event("show.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.$parent && this.$parent.find("> .panel > .in");
                if (c && c.length) {
                    var d = c.data("bs.collapse");
                    if (d && d.transitioning) {
                        return;
                    }
                    c.collapse("hide"), d || c.data("bs.collapse", null);
                }
                var e = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[e](0), this.transitioning = 1;
                var f = function() {
                    this.$element.removeClass("collapsing").addClass("in")[e]("auto"), this.transitioning = 0, this.$element.trigger("shown.bs.collapse");
                };
                if (!a.support.transition) {
                    return f.call(this);
                }
                var g = a.camelCase(["scroll", e].join("-"));
                this.$element.one(a.support.transition.end, a.proxy(f, this)).emulateTransitionEnd(350)[e](this.$element[0][g]);
            }
        }
    }, b.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var b = a.Event("hide.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.dimension();
                this.$element[c](this.$element[c]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), this.transitioning = 1;
                var d = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse");
                };
                return a.support.transition ? (this.$element[c](0).one(a.support.transition.end, a.proxy(d, this)).emulateTransitionEnd(350), void 0) : d.call(this);
            }
        }
    }, b.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
    };
    var c = a.fn.collapse;
    a.fn.collapse = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.collapse"), f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c);
            e || d.data("bs.collapse", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.collapse.Constructor = b, a.fn.collapse.noConflict = function() {
        return a.fn.collapse = c, this;
    }, a(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(b) {
        var c, d = a(this), e = d.attr("data-target") || b.preventDefault() || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, ""), f = a(e), g = f.data("bs.collapse"), h = g ? "toggle" : d.data(), i = d.attr("data-parent"), j = i && a(i);
        g && g.transitioning || (j && j.find('[data-toggle=collapse][data-parent="' + i + '"]').not(d).addClass("collapsed"), d[f.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), f.collapse(h);
    });
}(jQuery), +function(a) {
    function b() {
        a(d).remove(), a(e).each(function(b) {
            var d = c(a(this));
            d.hasClass("open") && (d.trigger(b = a.Event("hide.bs.dropdown")), b.isDefaultPrevented() || d.removeClass("open").trigger("hidden.bs.dropdown"));
        });
    }
    function c(b) {
        var c = b.attr("data-target");
        c || (c = b.attr("href"), c = c && /#/.test(c) && c.replace(/.*(?=#[^\s]*$)/, ""));
        var d = c && a(c);
        return d && d.length ? d : b.parent();
    }
    var d = ".dropdown-backdrop", e = "[data-toggle=dropdown]", f = function(b) {
        a(b).on("click.bs.dropdown", this.toggle);
    };
    f.prototype.toggle = function(d) {
        var e = a(this);
        if (!e.is(".disabled, :disabled")) {
            var f = c(e), g = f.hasClass("open");
            if (b(), !g) {
                if ("ontouchstart" in document.documentElement && !f.closest(".navbar-nav").length && a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click", b), f.trigger(d = a.Event("show.bs.dropdown")), d.isDefaultPrevented()) {
                    return;
                }
                f.toggleClass("open").trigger("shown.bs.dropdown"), e.focus();
            }
            return !1;
        }
    }, f.prototype.keydown = function(b) {
        if (/(38|40|27)/.test(b.keyCode)) {
            var d = a(this);
            if (b.preventDefault(), b.stopPropagation(), !d.is(".disabled, :disabled")) {
                var f = c(d), g = f.hasClass("open");
                if (!g || g && 27 == b.keyCode) {
                    return 27 == b.which && f.find(e).focus(), d.click();
                }
                var h = a("[role=menu] li:not(.divider):visible a", f);
                if (h.length) {
                    var i = h.index(h.filter(":focus"));
                    38 == b.keyCode && i > 0 && i--, 40 == b.keyCode && i < h.length - 1 && i++, ~i || (i = 0), h.eq(i).focus();
                }
            }
        }
    };
    var g = a.fn.dropdown;
    a.fn.dropdown = function(b) {
        return this.each(function() {
            var c = a(this), d = c.data("bs.dropdown");
            d || c.data("bs.dropdown", d = new f(this)), "string" == typeof b && d[b].call(c);
        });
    }, a.fn.dropdown.Constructor = f, a.fn.dropdown.noConflict = function() {
        return a.fn.dropdown = g, this;
    }, a(document).on("click.bs.dropdown.data-api", b).on("click.bs.dropdown.data-api", ".dropdown form", function(a) {
        a.stopPropagation();
    }).on("click.bs.dropdown.data-api", e, f.prototype.toggle).on("keydown.bs.dropdown.data-api", e + ", [role=menu]", f.prototype.keydown);
}(jQuery), +function(a) {
    var b = function(b, c) {
        this.options = c, this.$element = a(b), this.$backdrop = this.isShown = null, this.options.remote && this.$element.load(this.options.remote);
    };
    b.DEFAULTS = {backdrop: !0,keyboard: !0,show: !0}, b.prototype.toggle = function(a) {
        return this[this.isShown ? "hide" : "show"](a);
    }, b.prototype.show = function(b) {
        var c = this, d = a.Event("show.bs.modal", {relatedTarget: b});
        this.$element.trigger(d), this.isShown || d.isDefaultPrevented() || (this.isShown = !0, this.escape(), this.$element.on("click.dismiss.modal", '[data-dismiss="modal"]', a.proxy(this.hide, this)), this.backdrop(function() {
            var d = a.support.transition && c.$element.hasClass("fade");
            c.$element.parent().length || c.$element.appendTo(document.body), c.$element.show(), d && c.$element[0].offsetWidth, c.$element.addClass("in").attr("aria-hidden", !1), c.enforceFocus();
            var e = a.Event("shown.bs.modal", {relatedTarget: b});
            d ? c.$element.find(".modal-dialog").one(a.support.transition.end, function() {
                c.$element.focus().trigger(e);
            }).emulateTransitionEnd(300) : c.$element.focus().trigger(e);
        }));
    }, b.prototype.hide = function(b) {
        b && b.preventDefault(), b = a.Event("hide.bs.modal"), this.$element.trigger(b), this.isShown && !b.isDefaultPrevented() && (this.isShown = !1, this.escape(), a(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.modal"), a.support.transition && this.$element.hasClass("fade") ? this.$element.one(a.support.transition.end, a.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal());
    }, b.prototype.enforceFocus = function() {
        a(document).off("focusin.bs.modal").on("focusin.bs.modal", a.proxy(function(a) {
            this.$element[0] === a.target || this.$element.has(a.target).length || this.$element.focus();
        }, this));
    }, b.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", a.proxy(function(a) {
            27 == a.which && this.hide();
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal");
    }, b.prototype.hideModal = function() {
        var a = this;
        this.$element.hide(), this.backdrop(function() {
            a.removeBackdrop(), a.$element.trigger("hidden.bs.modal");
        });
    }, b.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null;
    }, b.prototype.backdrop = function(b) {
        var c = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var d = a.support.transition && c;
            if (this.$backdrop = a('<div class="modal-backdrop ' + c + '" />').appendTo(document.body), this.$element.on("click.dismiss.modal", a.proxy(function(a) {
                a.target === a.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this));
            }, this)), d && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !b) {
                return;
            }
            d ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b();
        } else {
            !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), a.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b()) : b && b();
        }
    };
    var c = a.fn.modal;
    a.fn.modal = function(c, d) {
        return this.each(function() {
            var e = a(this), f = e.data("bs.modal"), g = a.extend({}, b.DEFAULTS, e.data(), "object" == typeof c && c);
            f || e.data("bs.modal", f = new b(this, g)), "string" == typeof c ? f[c](d) : g.show && f.show(d);
        });
    }, a.fn.modal.Constructor = b, a.fn.modal.noConflict = function() {
        return a.fn.modal = c, this;
    }, a(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(b) {
        var c = a(this), d = c.attr("href"), e = a(c.attr("data-target") || d && d.replace(/.*(?=#[^\s]+$)/, "")), f = e.data("modal") ? "toggle" : a.extend({remote: !/#/.test(d) && d}, e.data(), c.data());
        b.preventDefault(), e.modal(f, this).one("hide", function() {
            c.is(":visible") && c.focus();
        });
    }), a(document).on("show.bs.modal", ".modal", function() {
        a(document.body).addClass("modal-open");
    }).on("hidden.bs.modal", ".modal", function() {
        a(document.body).removeClass("modal-open");
    });
}(jQuery), +function(a) {
    var b = function(a, b) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, this.init("tooltip", a, b);
    };
    b.DEFAULTS = {animation: !0,placement: "top",selector: !1,template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger: "hover focus",title: "",delay: 0,html: !1,container: !1}, b.prototype.init = function(b, c, d) {
        this.enabled = !0, this.type = b, this.$element = a(c), this.options = this.getOptions(d);
        for (var e = this.options.trigger.split(" "), f = e.length; f--; ) {
            var g = e[f];
            if ("click" == g) {
                this.$element.on("click." + this.type, this.options.selector, a.proxy(this.toggle, this));
            } else {
                if ("manual" != g) {
                    var h = "hover" == g ? "mouseenter" : "focus", i = "hover" == g ? "mouseleave" : "blur";
                    this.$element.on(h + "." + this.type, this.options.selector, a.proxy(this.enter, this)), this.$element.on(i + "." + this.type, this.options.selector, a.proxy(this.leave, this));
                }
            }
        }
        this.options.selector ? this._options = a.extend({}, this.options, {trigger: "manual",selector: ""}) : this.fixTitle();
    }, b.prototype.getDefaults = function() {
        return b.DEFAULTS;
    }, b.prototype.getOptions = function(b) {
        return b = a.extend({}, this.getDefaults(), this.$element.data(), b), b.delay && "number" == typeof b.delay && (b.delay = {show: b.delay,hide: b.delay}), b;
    }, b.prototype.getDelegateOptions = function() {
        var b = {}, c = this.getDefaults();
        return this._options && a.each(this._options, function(a, d) {
            c[a] != d && (b[a] = d);
        }), b;
    }, b.prototype.enter = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "in", c.options.delay && c.options.delay.show ? (c.timeout = setTimeout(function() {
            "in" == c.hoverState && c.show();
        }, c.options.delay.show), void 0) : c.show();
    }, b.prototype.leave = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "out", c.options.delay && c.options.delay.hide ? (c.timeout = setTimeout(function() {
            "out" == c.hoverState && c.hide();
        }, c.options.delay.hide), void 0) : c.hide();
    }, b.prototype.show = function() {
        var b = a.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(b), b.isDefaultPrevented()) {
                return;
            }
            var c = this.tip();
            this.setContent(), this.options.animation && c.addClass("fade");
            var d = "function" == typeof this.options.placement ? this.options.placement.call(this, c[0], this.$element[0]) : this.options.placement, e = /\s?auto?\s?/i, f = e.test(d);
            f && (d = d.replace(e, "") || "top"), c.detach().css({top: 0,left: 0,display: "block"}).addClass(d), this.options.container ? c.appendTo(this.options.container) : c.insertAfter(this.$element);
            var g = this.getPosition(), h = c[0].offsetWidth, i = c[0].offsetHeight;
            if (f) {
                var j = this.$element.parent(), k = d, l = document.documentElement.scrollTop || document.body.scrollTop, m = "body" == this.options.container ? window.innerWidth : j.outerWidth(), n = "body" == this.options.container ? window.innerHeight : j.outerHeight(), o = "body" == this.options.container ? 0 : j.offset().left;
                d = "bottom" == d && g.top + g.height + i - l > n ? "top" : "top" == d && g.top - l - i < 0 ? "bottom" : "right" == d && g.right + h > m ? "left" : "left" == d && g.left - h < o ? "right" : d, c.removeClass(k).addClass(d);
            }
            var p = this.getCalculatedOffset(d, g, h, i);
            this.applyPlacement(p, d), this.$element.trigger("shown.bs." + this.type);
        }
    }, b.prototype.applyPlacement = function(a, b) {
        var c, d = this.tip(), e = d[0].offsetWidth, f = d[0].offsetHeight, g = parseInt(d.css("margin-top"), 10), h = parseInt(d.css("margin-left"), 10);
        isNaN(g) && (g = 0), isNaN(h) && (h = 0), a.top = a.top + g, a.left = a.left + h, d.offset(a).addClass("in");
        var i = d[0].offsetWidth, j = d[0].offsetHeight;
        if ("top" == b && j != f && (c = !0, a.top = a.top + f - j), /bottom|top/.test(b)) {
            var k = 0;
            a.left < 0 && (k = -2 * a.left, a.left = 0, d.offset(a), i = d[0].offsetWidth, j = d[0].offsetHeight), this.replaceArrow(k - e + i, i, "left");
        } else {
            this.replaceArrow(j - f, j, "top");
        }
        c && d.offset(a);
    }, b.prototype.replaceArrow = function(a, b, c) {
        this.arrow().css(c, a ? 50 * (1 - a / b) + "%" : "");
    }, b.prototype.setContent = function() {
        var a = this.tip(), b = this.getTitle();
        a.find(".tooltip-inner")[this.options.html ? "html" : "text"](b), a.removeClass("fade in top bottom left right");
    }, b.prototype.hide = function() {
        function b() {
            "in" != c.hoverState && d.detach();
        }
        var c = this, d = this.tip(), e = a.Event("hide.bs." + this.type);
        return this.$element.trigger(e), e.isDefaultPrevented() ? void 0 : (d.removeClass("in"), a.support.transition && this.$tip.hasClass("fade") ? d.one(a.support.transition.end, b).emulateTransitionEnd(150) : b(), this.$element.trigger("hidden.bs." + this.type), this);
    }, b.prototype.fixTitle = function() {
        var a = this.$element;
        (a.attr("title") || "string" != typeof a.attr("data-original-title")) && a.attr("data-original-title", a.attr("title") || "").attr("title", "");
    }, b.prototype.hasContent = function() {
        return this.getTitle();
    }, b.prototype.getPosition = function() {
        var b = this.$element[0];
        return a.extend({}, "function" == typeof b.getBoundingClientRect ? b.getBoundingClientRect() : {width: b.offsetWidth,height: b.offsetHeight}, this.$element.offset());
    }, b.prototype.getCalculatedOffset = function(a, b, c, d) {
        return "bottom" == a ? {top: b.top + b.height,left: b.left + b.width / 2 - c / 2} : "top" == a ? {top: b.top - d,left: b.left + b.width / 2 - c / 2} : "left" == a ? {top: b.top + b.height / 2 - d / 2,left: b.left - c} : {top: b.top + b.height / 2 - d / 2,left: b.left + b.width};
    }, b.prototype.getTitle = function() {
        var a, b = this.$element, c = this.options;
        return a = b.attr("data-original-title") || ("function" == typeof c.title ? c.title.call(b[0]) : c.title);
    }, b.prototype.tip = function() {
        return this.$tip = this.$tip || a(this.options.template);
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");
    }, b.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null);
    }, b.prototype.enable = function() {
        this.enabled = !0;
    }, b.prototype.disable = function() {
        this.enabled = !1;
    }, b.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled;
    }, b.prototype.toggle = function(b) {
        var c = b ? a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        c.tip().hasClass("in") ? c.leave(c) : c.enter(c);
    }, b.prototype.destroy = function() {
        this.hide().$element.off("." + this.type).removeData("bs." + this.type);
    };
    var c = a.fn.tooltip;
    a.fn.tooltip = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.tooltip"), f = "object" == typeof c && c;
            e || d.data("bs.tooltip", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.tooltip.Constructor = b, a.fn.tooltip.noConflict = function() {
        return a.fn.tooltip = c, this;
    };
}(jQuery), +function(a) {
    var b = function(a, b) {
        this.init("popover", a, b);
    };
    if (!a.fn.tooltip) {
        throw new Error("Popover requires tooltip.js");
    }
    b.DEFAULTS = a.extend({}, a.fn.tooltip.Constructor.DEFAULTS, {placement: "right",trigger: "click",content: "",template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}), b.prototype = a.extend({}, a.fn.tooltip.Constructor.prototype), b.prototype.constructor = b, b.prototype.getDefaults = function() {
        return b.DEFAULTS;
    }, b.prototype.setContent = function() {
        var a = this.tip(), b = this.getTitle(), c = this.getContent();
        a.find(".popover-title")[this.options.html ? "html" : "text"](b), a.find(".popover-content")[this.options.html ? "html" : "text"](c), a.removeClass("fade top bottom left right in"), a.find(".popover-title").html() || a.find(".popover-title").hide();
    }, b.prototype.hasContent = function() {
        return this.getTitle() || this.getContent();
    }, b.prototype.getContent = function() {
        var a = this.$element, b = this.options;
        return a.attr("data-content") || ("function" == typeof b.content ? b.content.call(a[0]) : b.content);
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow");
    }, b.prototype.tip = function() {
        return this.$tip || (this.$tip = a(this.options.template)), this.$tip;
    };
    var c = a.fn.popover;
    a.fn.popover = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.popover"), f = "object" == typeof c && c;
            e || d.data("bs.popover", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.popover.Constructor = b, a.fn.popover.noConflict = function() {
        return a.fn.popover = c, this;
    };
}(jQuery), +function(a) {
    function b(c, d) {
        var e, f = a.proxy(this.process, this);
        this.$element = a(c).is("body") ? a(window) : a(c), this.$body = a("body"), this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", f), this.options = a.extend({}, b.DEFAULTS, d), this.selector = (this.options.target || (e = a(c).attr("href")) && e.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", this.offsets = a([]), this.targets = a([]), this.activeTarget = null, this.refresh(), this.process();
    }
    b.DEFAULTS = {offset: 10}, b.prototype.refresh = function() {
        var b = this.$element[0] == window ? "offset" : "position";
        this.offsets = a([]), this.targets = a([]);
        var c = this;
        this.$body.find(this.selector).map(function() {
            var d = a(this), e = d.data("target") || d.attr("href"), f = /^#\w/.test(e) && a(e);
            return f && f.length && [[f[b]().top + (!a.isWindow(c.$scrollElement.get(0)) && c.$scrollElement.scrollTop()), e]] || null;
        }).sort(function(a, b) {
            return a[0] - b[0];
        }).each(function() {
            c.offsets.push(this[0]), c.targets.push(this[1]);
        });
    }, b.prototype.process = function() {
        var a, b = this.$scrollElement.scrollTop() + this.options.offset, c = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight, d = c - this.$scrollElement.height(), e = this.offsets, f = this.targets, g = this.activeTarget;
        if (b >= d) {
            return g != (a = f.last()[0]) && this.activate(a);
        }
        for (a = e.length; a--; ) {
            g != f[a] && b >= e[a] && (!e[a + 1] || b <= e[a + 1]) && this.activate(f[a]);
        }
    }, b.prototype.activate = function(b) {
        this.activeTarget = b, a(this.selector).parents(".active").removeClass("active");
        var c = this.selector + '[data-target="' + b + '"],' + this.selector + '[href="' + b + '"]', d = a(c).parents("li").addClass("active");
        d.parent(".dropdown-menu").length && (d = d.closest("li.dropdown").addClass("active")), d.trigger("activate.bs.scrollspy");
    };
    var c = a.fn.scrollspy;
    a.fn.scrollspy = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.scrollspy"), f = "object" == typeof c && c;
            e || d.data("bs.scrollspy", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.scrollspy.Constructor = b, a.fn.scrollspy.noConflict = function() {
        return a.fn.scrollspy = c, this;
    }, a(window).on("load", function() {
        a('[data-spy="scroll"]').each(function() {
            var b = a(this);
            b.scrollspy(b.data());
        });
    });
}(jQuery), +function(a) {
    var b = function(b) {
        this.element = a(b);
    };
    b.prototype.show = function() {
        var b = this.element, c = b.closest("ul:not(.dropdown-menu)"), d = b.data("target");
        if (d || (d = b.attr("href"), d = d && d.replace(/.*(?=#[^\s]*$)/, "")), !b.parent("li").hasClass("active")) {
            var e = c.find(".active:last a")[0], f = a.Event("show.bs.tab", {relatedTarget: e});
            if (b.trigger(f), !f.isDefaultPrevented()) {
                var g = a(d);
                this.activate(b.parent("li"), c), this.activate(g, g.parent(), function() {
                    b.trigger({type: "shown.bs.tab",relatedTarget: e});
                });
            }
        }
    }, b.prototype.activate = function(b, c, d) {
        function e() {
            f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), b.addClass("active"), g ? (b[0].offsetWidth, b.addClass("in")) : b.removeClass("fade"), b.parent(".dropdown-menu") && b.closest("li.dropdown").addClass("active"), d && d();
        }
        var f = c.find("> .active"), g = d && a.support.transition && f.hasClass("fade");
        g ? f.one(a.support.transition.end, e).emulateTransitionEnd(150) : e(), f.removeClass("in");
    };
    var c = a.fn.tab;
    a.fn.tab = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.tab");
            e || d.data("bs.tab", e = new b(this)), "string" == typeof c && e[c]();
        });
    }, a.fn.tab.Constructor = b, a.fn.tab.noConflict = function() {
        return a.fn.tab = c, this;
    }, a(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(b) {
        b.preventDefault(), a(this).tab("show");
    });
}(jQuery), +function(a) {
    var b = function(c, d) {
        this.options = a.extend({}, b.DEFAULTS, d), this.$window = a(window).on("scroll.bs.affix.data-api", a.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", a.proxy(this.checkPositionWithEventLoop, this)), this.$element = a(c), this.affixed = this.unpin = null, this.checkPosition();
    };
    b.RESET = "affix affix-top affix-bottom", b.DEFAULTS = {offset: 0}, b.prototype.checkPositionWithEventLoop = function() {
        setTimeout(a.proxy(this.checkPosition, this), 1);
    }, b.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var c = a(document).height(), d = this.$window.scrollTop(), e = this.$element.offset(), f = this.options.offset, g = f.top, h = f.bottom;
            "object" != typeof f && (h = g = f), "function" == typeof g && (g = f.top()), "function" == typeof h && (h = f.bottom());
            var i = null != this.unpin && d + this.unpin <= e.top ? !1 : null != h && e.top + this.$element.height() >= c - h ? "bottom" : null != g && g >= d ? "top" : !1;
            this.affixed !== i && (this.unpin && this.$element.css("top", ""), this.affixed = i, this.unpin = "bottom" == i ? e.top - d : null, this.$element.removeClass(b.RESET).addClass("affix" + (i ? "-" + i : "")), "bottom" == i && this.$element.offset({top: document.body.offsetHeight - h - this.$element.height()}));
        }
    };
    var c = a.fn.affix;
    a.fn.affix = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.affix"), f = "object" == typeof c && c;
            e || d.data("bs.affix", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.affix.Constructor = b, a.fn.affix.noConflict = function() {
        return a.fn.affix = c, this;
    }, a(window).on("load", function() {
        a('[data-spy="affix"]').each(function() {
            var b = a(this), c = b.data();
            c.offset = c.offset || {}, c.offsetBottom && (c.offset.bottom = c.offsetBottom), c.offsetTop && (c.offset.top = c.offsetTop), b.affix(c);
        });
    });
}(jQuery);
!function(a) {
    a.matchMedia = a.matchMedia || function(a) {
        var b, c = a.documentElement, d = c.firstElementChild || c.firstChild, e = a.createElement("body"), f = a.createElement("div");
        return f.id = "mq-test-1", f.style.cssText = "position:absolute;top:-100em", e.style.background = "none", e.appendChild(f), function(a) {
            return f.innerHTML = '&shy;<style media="' + a + '"> #mq-test-1 { width: 42px; }</style>', c.insertBefore(e, d), b = 42 === f.offsetWidth, c.removeChild(e), {matches: b,media: a};
        };
    }(a.document);
}(this), function(a) {
    function b() {
        v(!0);
    }
    var c = {};
    a.respond = c, c.update = function() {
    };
    var d = [], e = function() {
        var b = !1;
        try {
            b = new a.XMLHttpRequest;
        } catch (c) {
            b = new a.ActiveXObject("Microsoft.XMLHTTP");
        }
        return function() {
            return b;
        };
    }(), f = function(a, b) {
        var c = e();
        c && (c.open("GET", a, !0), c.onreadystatechange = function() {
            4 !== c.readyState || 200 !== c.status && 304 !== c.status || b(c.responseText);
        }, 4 !== c.readyState && c.send(null));
    }, g = function(a) {
        return a.replace(c.regex.minmaxwh, "").match(c.regex.other);
    };
    if (c.ajax = f, c.queue = d, c.unsupportedmq = g, c.regex = {media: /@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes: /@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments: /\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls: /(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles: /@media *([^\{]+)\{([\S\s]+?)$/,only: /(only\s+)?([a-zA-Z]+)\s?/,minw: /\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw: /\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh: /\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other: /\([^\)]*\)/g}, c.mediaQueriesSupported = a.matchMedia && null !== a.matchMedia("only all") && a.matchMedia("only all").matches, !c.mediaQueriesSupported) {
        var h, i, j, k = a.document, l = k.documentElement, m = [], n = [], o = [], p = {}, q = 30, r = k.getElementsByTagName("head")[0] || l, s = k.getElementsByTagName("base")[0], t = r.getElementsByTagName("link"), u = function() {
            var a, b = k.createElement("div"), c = k.body, d = l.style.fontSize, e = c && c.style.fontSize, f = !1;
            return b.style.cssText = "position:absolute;font-size:1em;width:1em", c || (c = f = k.createElement("body"), c.style.background = "none"), l.style.fontSize = "100%", c.style.fontSize = "100%", c.appendChild(b), f && l.insertBefore(c, l.firstChild), a = b.offsetWidth, f ? l.removeChild(c) : c.removeChild(b), l.style.fontSize = d, e && (c.style.fontSize = e), a = j = parseFloat(a);
        }, v = function(b) {
            var c = "clientWidth", d = l[c], e = "CSS1Compat" === k.compatMode && d || k.body[c] || d, f = {}, g = t[t.length - 1], p = (new Date).getTime();
            if (b && h && q > p - h) {
                return a.clearTimeout(i), i = a.setTimeout(v, q), void 0;
            }
            h = p;
            for (var s in m) {
                if (m.hasOwnProperty(s)) {
                    var w = m[s], x = w.minw, y = w.maxw, z = null === x, A = null === y, B = "em";
                    x && (x = parseFloat(x) * (x.indexOf(B) > -1 ? j || u() : 1)), y && (y = parseFloat(y) * (y.indexOf(B) > -1 ? j || u() : 1)), w.hasquery && (z && A || !(z || e >= x) || !(A || y >= e)) || (f[w.media] || (f[w.media] = []), f[w.media].push(n[w.rules]));
                }
            }
            for (var C in o) {
                o.hasOwnProperty(C) && o[C] && o[C].parentNode === r && r.removeChild(o[C]);
            }
            o.length = 0;
            for (var D in f) {
                if (f.hasOwnProperty(D)) {
                    var E = k.createElement("style"), F = f[D].join("\n");
                    E.type = "text/css", E.media = D, r.insertBefore(E, g.nextSibling), E.styleSheet ? E.styleSheet.cssText = F : E.appendChild(k.createTextNode(F)), o.push(E);
                }
            }
        }, w = function(a, b, d) {
            var e = a.replace(c.regex.comments, "").replace(c.regex.keyframes, "").match(c.regex.media), f = e && e.length || 0;
            b = b.substring(0, b.lastIndexOf("/"));
            var h = function(a) {
                return a.replace(c.regex.urls, "$1" + b + "$2$3");
            }, i = !f && d;
            b.length && (b += "/"), i && (f = 1);
            for (var j = 0; f > j; j++) {
                var k, l, o, p;
                i ? (k = d, n.push(h(a))) : (k = e[j].match(c.regex.findStyles) && RegExp.$1, n.push(RegExp.$2 && h(RegExp.$2))), o = k.split(","), p = o.length;
                for (var q = 0; p > q; q++) {
                    l = o[q], g(l) || m.push({media: l.split("(")[0].match(c.regex.only) && RegExp.$2 || "all",rules: n.length - 1,hasquery: l.indexOf("(") > -1,minw: l.match(c.regex.minw) && parseFloat(RegExp.$1) + (RegExp.$2 || ""),maxw: l.match(c.regex.maxw) && parseFloat(RegExp.$1) + (RegExp.$2 || "")});
                }
            }
            v();
        }, x = function() {
            if (d.length) {
                var b = d.shift();
                f(b.href, function(c) {
                    w(c, b.href, b.media), p[b.href] = !0, a.setTimeout(function() {
                        x();
                    }, 0);
                });
            }
        }, y = function() {
            for (var b = 0; b < t.length; b++) {
                var c = t[b], e = c.href, f = c.media, g = c.rel && "stylesheet" === c.rel.toLowerCase();
                e && g && !p[e] && (c.styleSheet && c.styleSheet.rawCssText ? (w(c.styleSheet.rawCssText, e, f), p[e] = !0) : (!/^([a-zA-Z:]*\/\/)/.test(e) && !s || e.replace(RegExp.$1, "").split("/")[0] === a.location.host) && ("//" === e.substring(0, 2) && (e = a.location.protocol + e), d.push({href: e,media: f})));
            }
            x();
        };
        y(), c.update = y, c.getEmValue = u, a.addEventListener ? a.addEventListener("resize", b, !1) : a.attachEvent && a.attachEvent("onresize", b);
    }
}(this);
(function($) {
    $.extend($.fn, {validate: function(options) {
            if (!this.length) {
                if (options && options.debug && window.console) {
                    console.warn("Nothing selected, can't validate, returning nothing.");
                }
                return;
            }
            var validator = $.data(this[0], "validator");
            if (validator) {
                return validator;
            }
            this.attr("novalidate", "novalidate");
            validator = new $.validator(options, this[0]);
            $.data(this[0], "validator", validator);
            if (validator.settings.onsubmit) {
                this.validateDelegate(":submit", "click", function(event) {
                    if (validator.settings.submitHandler) {
                        validator.submitButton = event.target;
                    }
                    if ($(event.target).hasClass("cancel")) {
                        validator.cancelSubmit = true;
                    }
                    if ($(event.target).attr("formnovalidate") !== undefined) {
                        validator.cancelSubmit = true;
                    }
                });
                this.submit(function(event) {
                    if (validator.settings.debug) {
                        event.preventDefault();
                    }
                    function handle() {
                        var hidden;
                        if (validator.settings.submitHandler) {
                            if (validator.submitButton) {
                                hidden = $("<input type='hidden'/>").attr("name", validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm);
                            }
                            validator.settings.submitHandler.call(validator, validator.currentForm, event);
                            if (validator.submitButton) {
                                hidden.remove();
                            }
                            return false;
                        }
                        return true;
                    }
                    if (validator.cancelSubmit) {
                        validator.cancelSubmit = false;
                        return handle();
                    }
                    if (validator.form()) {
                        if (validator.pendingRequest) {
                            validator.formSubmitted = true;
                            return false;
                        }
                        return handle();
                    } else {
                        validator.focusInvalid();
                        return false;
                    }
                });
            }
            return validator;
        },valid: function() {
            if ($(this[0]).is("form")) {
                return this.validate().form();
            } else {
                var valid = true;
                var validator = $(this[0].form).validate();
                this.each(function() {
                    valid = valid && validator.element(this);
                });
                return valid;
            }
        },removeAttrs: function(attributes) {
            var result = {}, $element = this;
            $.each(attributes.split(/\s/), function(index, value) {
                result[value] = $element.attr(value);
                $element.removeAttr(value);
            });
            return result;
        },rules: function(command, argument) {
            var element = this[0];
            if (command) {
                var settings = $.data(element.form, "validator").settings;
                var staticRules = settings.rules;
                var existingRules = $.validator.staticRules(element);
                switch (command) {
                    case "add":
                        $.extend(existingRules, $.validator.normalizeRule(argument));
                        delete existingRules.messages;
                        staticRules[element.name] = existingRules;
                        if (argument.messages) {
                            settings.messages[element.name] = $.extend(settings.messages[element.name], argument.messages);
                        }
                        break;
                    case "remove":
                        if (!argument) {
                            delete staticRules[element.name];
                            return existingRules;
                        }
                        var filtered = {};
                        $.each(argument.split(/\s/), function(index, method) {
                            filtered[method] = existingRules[method];
                            delete existingRules[method];
                        });
                        return filtered;
                }
            }
            var data = $.validator.normalizeRules($.extend({}, $.validator.classRules(element), $.validator.attributeRules(element), $.validator.dataRules(element), $.validator.staticRules(element)), element);
            if (data.required) {
                var param = data.required;
                delete data.required;
                data = $.extend({required: param}, data);
            }
            return data;
        }});
    $.extend($.expr[":"], {blank: function(a) {
            return !$.trim("" + $(a).val());
        },filled: function(a) {
            return !!$.trim("" + $(a).val());
        },unchecked: function(a) {
            return !$(a).prop("checked");
        }});
    $.validator = function(options, form) {
        this.settings = $.extend(true, {}, $.validator.defaults, options);
        this.currentForm = form;
        this.init();
    };
    $.validator.format = function(source, params) {
        if (arguments.length === 1) {
            return function() {
                var args = $.makeArray(arguments);
                args.unshift(source);
                return $.validator.format.apply(this, args);
            };
        }
        if (arguments.length > 2 && params.constructor !== Array) {
            params = $.makeArray(arguments).slice(1);
        }
        if (params.constructor !== Array) {
            params = [params];
        }
        $.each(params, function(i, n) {
            source = source.replace(new RegExp("\\{" + i + "\\}", "g"), function() {
                return n;
            });
        });
        return source;
    };
    $.extend($.validator, {defaults: {messages: {},groups: {},rules: {},errorClass: "error",validClass: "valid",errorElement: "label",focusInvalid: true,errorContainer: $([]),errorLabelContainer: $([]),onsubmit: true,ignore: ":hidden",ignoreTitle: false,onfocusin: function(element, event) {
                this.lastActive = element;
                if (this.settings.focusCleanup && !this.blockFocusCleanup) {
                    if (this.settings.unhighlight) {
                        this.settings.unhighlight.call(this, element, this.settings.errorClass, this.settings.validClass);
                    }
                    this.addWrapper(this.errorsFor(element)).hide();
                }
            },onfocusout: function(element, event) {
                if (!this.checkable(element) && (element.name in this.submitted || !this.optional(element))) {
                    this.element(element);
                }
            },onkeyup: function(element, event) {
                if (event.which === 9 && this.elementValue(element) === "") {
                    return;
                } else {
                    if (element.name in this.submitted || element === this.lastElement) {
                        this.element(element);
                    }
                }
            },onclick: function(element, event) {
                if (element.name in this.submitted) {
                    this.element(element);
                } else {
                    if (element.parentNode.name in this.submitted) {
                        this.element(element.parentNode);
                    }
                }
            },highlight: function(element, errorClass, validClass) {
                if (element.type === "radio") {
                    this.findByName(element.name).addClass(errorClass).removeClass(validClass);
                } else {
                    $(element).addClass(errorClass).removeClass(validClass);
                }
            },unhighlight: function(element, errorClass, validClass) {
                if (element.type === "radio") {
                    this.findByName(element.name).removeClass(errorClass).addClass(validClass);
                } else {
                    $(element).removeClass(errorClass).addClass(validClass);
                }
            }},setDefaults: function(settings) {
            $.extend($.validator.defaults, settings);
        },messages: {required: "This field is required.",remote: "Please fix this field.",email: "Please enter a valid email address.",url: "Please enter a valid URL.",date: "Please enter a valid date.",dateISO: "Please enter a valid date (ISO).",number: "Please enter a valid number.",digits: "Please enter only digits.",creditcard: "Please enter a valid credit card number.",equalTo: "Please enter the same value again.",maxlength: $.validator.format("Please enter no more than {0} characters."),minlength: $.validator.format("Please enter at least {0} characters."),rangelength: $.validator.format("Please enter a value between {0} and {1} characters long."),range: $.validator.format("Please enter a value between {0} and {1}."),max: $.validator.format("Please enter a value less than or equal to {0}."),min: $.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges: false,prototype: {init: function() {
                this.labelContainer = $(this.settings.errorLabelContainer);
                this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);
                this.containers = $(this.settings.errorContainer).add(this.settings.errorLabelContainer);
                this.submitted = {};
                this.valueCache = {};
                this.pendingRequest = 0;
                this.pending = {};
                this.invalid = {};
                this.reset();
                var groups = (this.groups = {});
                $.each(this.settings.groups, function(key, value) {
                    if (typeof value === "string") {
                        value = value.split(/\s/);
                    }
                    $.each(value, function(index, name) {
                        groups[name] = key;
                    });
                });
                var rules = this.settings.rules;
                $.each(rules, function(key, value) {
                    rules[key] = $.validator.normalizeRule(value);
                });
                function delegate(event) {
                    var validator = $.data(this[0].form, "validator"), eventType = "on" + event.type.replace(/^validate/, "");
                    if (validator.settings[eventType]) {
                        validator.settings[eventType].call(validator, this[0], event);
                    }
                }
                $(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ", "focusin focusout keyup", delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option", "click", delegate);
                if (this.settings.invalidHandler) {
                    $(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler);
                }
            },form: function() {
                this.checkForm();
                $.extend(this.submitted, this.errorMap);
                this.invalid = $.extend({}, this.errorMap);
                if (!this.valid()) {
                    $(this.currentForm).triggerHandler("invalid-form", [this]);
                }
                this.showErrors();
                return this.valid();
            },checkForm: function() {
                this.prepareForm();
                for (var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++) {
                    this.check(elements[i]);
                }
                return this.valid();
            },element: function(element) {
                element = this.validationTargetFor(this.clean(element));
                this.lastElement = element;
                this.prepareElement(element);
                this.currentElements = $(element);
                var result = this.check(element) !== false;
                if (result) {
                    delete this.invalid[element.name];
                } else {
                    this.invalid[element.name] = true;
                }
                if (!this.numberOfInvalids()) {
                    this.toHide = this.toHide.add(this.containers);
                }
                this.showErrors();
                return result;
            },showErrors: function(errors) {
                if (errors) {
                    $.extend(this.errorMap, errors);
                    this.errorList = [];
                    for (var name in errors) {
                        this.errorList.push({message: errors[name],element: this.findByName(name)[0]});
                    }
                    this.successList = $.grep(this.successList, function(element) {
                        return !(element.name in errors);
                    });
                }
                if (this.settings.showErrors) {
                    this.settings.showErrors.call(this, this.errorMap, this.errorList);
                } else {
                    this.defaultShowErrors();
                }
            },resetForm: function() {
                if ($.fn.resetForm) {
                    $(this.currentForm).resetForm();
                }
                this.submitted = {};
                this.lastElement = null;
                this.prepareForm();
                this.hideErrors();
                this.elements().removeClass(this.settings.errorClass).removeData("previousValue");
            },numberOfInvalids: function() {
                return this.objectLength(this.invalid);
            },objectLength: function(obj) {
                var count = 0;
                for (var i in obj) {
                    count++;
                }
                return count;
            },hideErrors: function() {
                this.addWrapper(this.toHide).hide();
            },valid: function() {
                return this.size() === 0;
            },size: function() {
                return this.errorList.length;
            },focusInvalid: function() {
                if (this.settings.focusInvalid) {
                    try {
                        $(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin");
                    } catch (e) {
                    }
                }
            },findLastActive: function() {
                var lastActive = this.lastActive;
                return lastActive && $.grep(this.errorList, function(n) {
                    return n.element.name === lastActive.name;
                }).length === 1 && lastActive;
            },elements: function() {
                var validator = this, rulesCache = {};
                return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function() {
                    if (!this.name && validator.settings.debug && window.console) {
                        console.error("%o has no name assigned", this);
                    }
                    if (this.name in rulesCache || !validator.objectLength($(this).rules())) {
                        return false;
                    }
                    rulesCache[this.name] = true;
                    return true;
                });
            },clean: function(selector) {
                return $(selector)[0];
            },errors: function() {
                var errorClass = this.settings.errorClass.replace(" ", ".");
                return $(this.settings.errorElement + "." + errorClass, this.errorContext);
            },reset: function() {
                this.successList = [];
                this.errorList = [];
                this.errorMap = {};
                this.toShow = $([]);
                this.toHide = $([]);
                this.currentElements = $([]);
            },prepareForm: function() {
                this.reset();
                this.toHide = this.errors().add(this.containers);
            },prepareElement: function(element) {
                this.reset();
                this.toHide = this.errorsFor(element);
            },elementValue: function(element) {
                var type = $(element).attr("type"), val = $(element).val();
                if (type === "radio" || type === "checkbox") {
                    return $("input[name='" + $(element).attr("name") + "']:checked").val();
                }
                if (typeof val === "string") {
                    return val.replace(/\r/g, "");
                }
                return val;
            },check: function(element) {
                element = this.validationTargetFor(this.clean(element));
                var rules = $(element).rules();
                var dependencyMismatch = false;
                var val = this.elementValue(element);
                var result;
                for (var method in rules) {
                    var rule = {method: method,parameters: rules[method]};
                    try {
                        result = $.validator.methods[method].call(this, val, element, rule.parameters);
                        if (result === "dependency-mismatch") {
                            dependencyMismatch = true;
                            continue;
                        }
                        dependencyMismatch = false;
                        if (result === "pending") {
                            this.toHide = this.toHide.not(this.errorsFor(element));
                            return;
                        }
                        if (!result) {
                            this.formatAndAdd(element, rule);
                            return false;
                        }
                    } catch (e) {
                        if (this.settings.debug && window.console) {
                            console.log("Exception occurred when checking element " + element.id + ", check the '" + rule.method + "' method.", e);
                        }
                        throw e;
                    }
                }
                if (dependencyMismatch) {
                    return;
                }
                if (this.objectLength(rules)) {
                    this.successList.push(element);
                }
                return true;
            },customDataMessage: function(element, method) {
                return $(element).data("msg-" + method.toLowerCase()) || (element.attributes && $(element).attr("data-msg-" + method.toLowerCase()));
            },customMessage: function(name, method) {
                var m = this.settings.messages[name];
                return m && (m.constructor === String ? m : m[method]);
            },findDefined: function() {
                for (var i = 0; i < arguments.length; i++) {
                    if (arguments[i] !== undefined) {
                        return arguments[i];
                    }
                }
                return undefined;
            },defaultMessage: function(element, method) {
                return this.findDefined(this.customMessage(element.name, method), this.customDataMessage(element, method), !this.settings.ignoreTitle && element.title || undefined, $.validator.messages[method], "<strong>Warning: No message defined for " + element.name + "</strong>");
            },formatAndAdd: function(element, rule) {
                var message = this.defaultMessage(element, rule.method), theregex = /\$?\{(\d+)\}/g;
                if (typeof message === "function") {
                    message = message.call(this, rule.parameters, element);
                } else {
                    if (theregex.test(message)) {
                        message = $.validator.format(message.replace(theregex, "{$1}"), rule.parameters);
                    }
                }
                this.errorList.push({message: message,element: element});
                this.errorMap[element.name] = message;
                this.submitted[element.name] = message;
            },addWrapper: function(toToggle) {
                if (this.settings.wrapper) {
                    toToggle = toToggle.add(toToggle.parent(this.settings.wrapper));
                }
                return toToggle;
            },defaultShowErrors: function() {
                var i, elements;
                for (i = 0; this.errorList[i]; i++) {
                    var error = this.errorList[i];
                    if (this.settings.highlight) {
                        this.settings.highlight.call(this, error.element, this.settings.errorClass, this.settings.validClass);
                    }
                    this.showLabel(error.element, error.message);
                }
                if (this.errorList.length) {
                    this.toShow = this.toShow.add(this.containers);
                }
                if (this.settings.success) {
                    for (i = 0; this.successList[i]; i++) {
                        this.showLabel(this.successList[i]);
                    }
                }
                if (this.settings.unhighlight) {
                    for (i = 0, elements = this.validElements(); elements[i]; i++) {
                        this.settings.unhighlight.call(this, elements[i], this.settings.errorClass, this.settings.validClass);
                    }
                }
                this.toHide = this.toHide.not(this.toShow);
                this.hideErrors();
                this.addWrapper(this.toShow).show();
            },validElements: function() {
                return this.currentElements.not(this.invalidElements());
            },invalidElements: function() {
                return $(this.errorList).map(function() {
                    return this.element;
                });
            },showLabel: function(element, message) {
                var label = this.errorsFor(element);
                if (label.length) {
                    label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);
                    label.html(message);
                } else {
                    label = $("<" + this.settings.errorElement + ">").attr("for", this.idOrName(element)).addClass(this.settings.errorClass).html(message || "");
                    if (this.settings.wrapper) {
                        label = label.hide().show().wrap("<" + this.settings.wrapper + "/>").parent();
                    }
                    if (!this.labelContainer.append(label).length) {
                        if (this.settings.errorPlacement) {
                            this.settings.errorPlacement(label, $(element));
                        } else {
                            label.insertAfter(element);
                        }
                    }
                }
                if (!message && this.settings.success) {
                    label.text("");
                    if (typeof this.settings.success === "string") {
                        label.addClass(this.settings.success);
                    } else {
                        this.settings.success(label, element);
                    }
                }
                this.toShow = this.toShow.add(label);
            },errorsFor: function(element) {
                var name = this.idOrName(element);
                return this.errors().filter(function() {
                    return $(this).attr("for") === name;
                });
            },idOrName: function(element) {
                return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);
            },validationTargetFor: function(element) {
                if (this.checkable(element)) {
                    element = this.findByName(element.name).not(this.settings.ignore)[0];
                }
                return element;
            },checkable: function(element) {
                return (/radio|checkbox/i).test(element.type);
            },findByName: function(name) {
                return $(this.currentForm).find("[name='" + name + "']");
            },getLength: function(value, element) {
                switch (element.nodeName.toLowerCase()) {
                    case "select":
                        return $("option:selected", element).length;
                    case "input":
                        if (this.checkable(element)) {
                            return this.findByName(element.name).filter(":checked").length;
                        }
                }
                return value.length;
            },depend: function(param, element) {
                return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true;
            },dependTypes: {"boolean": function(param, element) {
                    return param;
                },string: function(param, element) {
                    return !!$(param, element.form).length;
                },"function": function(param, element) {
                    return param(element);
                }},optional: function(element) {
                var val = this.elementValue(element);
                return !$.validator.methods.required.call(this, val, element) && "dependency-mismatch";
            },startRequest: function(element) {
                if (!this.pending[element.name]) {
                    this.pendingRequest++;
                    this.pending[element.name] = true;
                }
            },stopRequest: function(element, valid) {
                this.pendingRequest--;
                if (this.pendingRequest < 0) {
                    this.pendingRequest = 0;
                }
                delete this.pending[element.name];
                if (valid && this.pendingRequest === 0 && this.formSubmitted && this.form()) {
                    $(this.currentForm).submit();
                    this.formSubmitted = false;
                } else {
                    if (!valid && this.pendingRequest === 0 && this.formSubmitted) {
                        $(this.currentForm).triggerHandler("invalid-form", [this]);
                        this.formSubmitted = false;
                    }
                }
            },previousValue: function(element) {
                return $.data(element, "previousValue") || $.data(element, "previousValue", {old: null,valid: true,message: this.defaultMessage(element, "remote")});
            }},classRuleSettings: {required: {required: true},email: {email: true},url: {url: true},date: {date: true},dateISO: {dateISO: true},number: {number: true},digits: {digits: true},creditcard: {creditcard: true}},addClassRules: function(className, rules) {
            if (className.constructor === String) {
                this.classRuleSettings[className] = rules;
            } else {
                $.extend(this.classRuleSettings, className);
            }
        },classRules: function(element) {
            var rules = {};
            var classes = $(element).attr("class");
            if (classes) {
                $.each(classes.split(" "), function() {
                    if (this in $.validator.classRuleSettings) {
                        $.extend(rules, $.validator.classRuleSettings[this]);
                    }
                });
            }
            return rules;
        },attributeRules: function(element) {
            var rules = {};
            var $element = $(element);
            var type = $element[0].getAttribute("type");
            for (var method in $.validator.methods) {
                var value;
                if (method === "required") {
                    value = $element.get(0).getAttribute(method);
                    if (value === "") {
                        value = true;
                    }
                    value = !!value;
                } else {
                    value = $element.attr(method);
                }
                if (/min|max/.test(method) && (type === null || /number|range|text/.test(type))) {
                    value = Number(value);
                }
                if (value) {
                    rules[method] = value;
                } else {
                    if (type === method && type !== "range") {
                        rules[method] = true;
                    }
                }
            }
            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
                delete rules.maxlength;
            }
            return rules;
        },dataRules: function(element) {
            var method, value, rules = {}, $element = $(element);
            for (method in $.validator.methods) {
                value = $element.data("rule-" + method.toLowerCase());
                if (value !== undefined) {
                    rules[method] = value;
                }
            }
            return rules;
        },staticRules: function(element) {
            var rules = {};
            var validator = $.data(element.form, "validator");
            if (validator.settings.rules) {
                rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};
            }
            return rules;
        },normalizeRules: function(rules, element) {
            $.each(rules, function(prop, val) {
                if (val === false) {
                    delete rules[prop];
                    return;
                }
                if (val.param || val.depends) {
                    var keepRule = true;
                    switch (typeof val.depends) {
                        case "string":
                            keepRule = !!$(val.depends, element.form).length;
                            break;
                        case "function":
                            keepRule = val.depends.call(element, element);
                            break;
                    }
                    if (keepRule) {
                        rules[prop] = val.param !== undefined ? val.param : true;
                    } else {
                        delete rules[prop];
                    }
                }
            });
            $.each(rules, function(rule, parameter) {
                rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;
            });
            $.each(["minlength", "maxlength"], function() {
                if (rules[this]) {
                    rules[this] = Number(rules[this]);
                }
            });
            $.each(["rangelength", "range"], function() {
                var parts;
                if (rules[this]) {
                    if ($.isArray(rules[this])) {
                        rules[this] = [Number(rules[this][0]), Number(rules[this][1])];
                    } else {
                        if (typeof rules[this] === "string") {
                            parts = rules[this].split(/[\s,]+/);
                            rules[this] = [Number(parts[0]), Number(parts[1])];
                        }
                    }
                }
            });
            if ($.validator.autoCreateRanges) {
                if (rules.min && rules.max) {
                    rules.range = [rules.min, rules.max];
                    delete rules.min;
                    delete rules.max;
                }
                if (rules.minlength && rules.maxlength) {
                    rules.rangelength = [rules.minlength, rules.maxlength];
                    delete rules.minlength;
                    delete rules.maxlength;
                }
            }
            return rules;
        },normalizeRule: function(data) {
            if (typeof data === "string") {
                var transformed = {};
                $.each(data.split(/\s/), function() {
                    transformed[this] = true;
                });
                data = transformed;
            }
            return data;
        },addMethod: function(name, method, message) {
            $.validator.methods[name] = method;
            $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];
            if (method.length < 3) {
                $.validator.addClassRules(name, $.validator.normalizeRule(name));
            }
        },methods: {required: function(value, element, param) {
                if (!this.depend(param, element)) {
                    return "dependency-mismatch";
                }
                if (element.nodeName.toLowerCase() === "select") {
                    var val = $(element).val();
                    return val && val.length > 0;
                }
                if (this.checkable(element)) {
                    return this.getLength(value, element) > 0;
                }
                return $.trim(value).length > 0;
            },email: function(value, element) {
                return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);
            },url: function(value, element) {
                return this.optional(element) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
            },date: function(value, element) {
                return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());
            },dateISO: function(value, element) {
                return this.optional(element) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value);
            },number: function(value, element) {
                return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
            },digits: function(value, element) {
                return this.optional(element) || /^\d+$/.test(value);
            },creditcard: function(value, element) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (/[^0-9 \-]+/.test(value)) {
                    return false;
                }
                var nCheck = 0, nDigit = 0, bEven = false;
                value = value.replace(/\D/g, "");
                for (var n = value.length - 1; n >= 0; n--) {
                    var cDigit = value.charAt(n);
                    nDigit = parseInt(cDigit, 10);
                    if (bEven) {
                        if ((nDigit *= 2) > 9) {
                            nDigit -= 9;
                        }
                    }
                    nCheck += nDigit;
                    bEven = !bEven;
                }
                return (nCheck % 10) === 0;
            },minlength: function(value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);
                return this.optional(element) || length >= param;
            },maxlength: function(value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);
                return this.optional(element) || length <= param;
            },rangelength: function(value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);
                return this.optional(element) || (length >= param[0] && length <= param[1]);
            },min: function(value, element, param) {
                return this.optional(element) || value >= param;
            },max: function(value, element, param) {
                return this.optional(element) || value <= param;
            },range: function(value, element, param) {
                return this.optional(element) || (value >= param[0] && value <= param[1]);
            },equalTo: function(value, element, param) {
                var target = $(param);
                if (this.settings.onfocusout) {
                    target.unbind(".validate-equalTo").bind("blur.validate-equalTo", function() {
                        $(element).valid();
                    });
                }
                return value === target.val();
            },remote: function(value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var previous = this.previousValue(element);
                if (!this.settings.messages[element.name]) {
                    this.settings.messages[element.name] = {};
                }
                previous.originalMessage = this.settings.messages[element.name].remote;
                this.settings.messages[element.name].remote = previous.message;
                param = typeof param === "string" && {url: param} || param;
                if (previous.old === value) {
                    return previous.valid;
                }
                previous.old = value;
                var validator = this;
                this.startRequest(element);
                var data = {};
                data[element.name] = value;
                $.ajax($.extend(true, {url: param,mode: "abort",port: "validate" + element.name,dataType: "json",data: data,success: function(response) {
                        validator.settings.messages[element.name].remote = previous.originalMessage;
                        var valid = response === true || response === "true";
                        if (valid) {
                            var submitted = validator.formSubmitted;
                            validator.prepareElement(element);
                            validator.formSubmitted = submitted;
                            validator.successList.push(element);
                            delete validator.invalid[element.name];
                            validator.showErrors();
                        } else {
                            var errors = {};
                            var message = response || validator.defaultMessage(element, "remote");
                            errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;
                            validator.invalid[element.name] = true;
                            validator.showErrors(errors);
                        }
                        previous.valid = valid;
                        validator.stopRequest(element, valid);
                    }}, param));
                return "pending";
            }}});
    $.format = $.validator.format;
}(jQuery));
(function($) {
    var pendingRequests = {};
    if ($.ajaxPrefilter) {
        $.ajaxPrefilter(function(settings, _, xhr) {
            var port = settings.port;
            if (settings.mode === "abort") {
                if (pendingRequests[port]) {
                    pendingRequests[port].abort();
                }
                pendingRequests[port] = xhr;
            }
        });
    } else {
        var ajax = $.ajax;
        $.ajax = function(settings) {
            var mode = ("mode" in settings ? settings : $.ajaxSettings).mode, port = ("port" in settings ? settings : $.ajaxSettings).port;
            if (mode === "abort") {
                if (pendingRequests[port]) {
                    pendingRequests[port].abort();
                }
                pendingRequests[port] = ajax.apply(this, arguments);
                return pendingRequests[port];
            }
            return ajax.apply(this, arguments);
        };
    }
}(jQuery));
(function($) {
    $.extend($.fn, {validateDelegate: function(delegate, type, handler) {
            return this.bind(type, function(event) {
                var target = $(event.target);
                if (target.is(delegate)) {
                    return handler.apply(target, arguments);
                }
            });
        }});
}(jQuery));
(function() {
    function stripHtml(value) {
        return value.replace(/<.[^<>]*?>/g, " ").replace(/&nbsp;|&#160;/gi, " ").replace(/[.(),;:!?%#$'"_+=\/\-]*/g, "");
    }
    jQuery.validator.addMethod("maxWords", function(value, element, params) {
        return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length <= params;
    }, jQuery.validator.format("Please enter {0} words or less."));
    jQuery.validator.addMethod("minWords", function(value, element, params) {
        return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length >= params;
    }, jQuery.validator.format("Please enter at least {0} words."));
    jQuery.validator.addMethod("rangeWords", function(value, element, params) {
        var valueStripped = stripHtml(value);
        var regex = /\b\w+\b/g;
        return this.optional(element) || valueStripped.match(regex).length >= params[0] && valueStripped.match(regex).length <= params[1];
    }, jQuery.validator.format("Please enter between {0} and {1} words."));
}());
jQuery.validator.addMethod("letterswithbasicpunc", function(value, element) {
    return this.optional(element) || /^[a-z\-.,()'"\s]+$/i.test(value);
}, "Letters or punctuation only please");
jQuery.validator.addMethod("alphanumeric", function(value, element) {
    return this.optional(element) || /^\w+$/i.test(value);
}, "Letters, numbers, and underscores only please");
jQuery.validator.addMethod("lettersonly", function(value, element) {
    return this.optional(element) || /^[a-z]+$/i.test(value);
}, "Letters only please");
jQuery.validator.addMethod("nowhitespace", function(value, element) {
    return this.optional(element) || /^\S+$/i.test(value);
}, "No white space please");
jQuery.validator.addMethod("ziprange", function(value, element) {
    return this.optional(element) || /^90[2-5]\d\{2\}-\d{4}$/.test(value);
}, "Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");
jQuery.validator.addMethod("zipcodeUS", function(value, element) {
    return this.optional(element) || /\d{5}-\d{4}$|^\d{5}$/.test(value);
}, "The specified US ZIP Code is invalid");
jQuery.validator.addMethod("integer", function(value, element) {
    return this.optional(element) || /^-?\d+$/.test(value);
}, "A positive or negative non-decimal number please");
jQuery.validator.addMethod("vinUS", function(v) {
    if (v.length !== 17) {
        return false;
    }
    var i, n, d, f, cd, cdv;
    var LL = ["A", "B", "C", "D", "E", "F", "G", "H", "J", "K", "L", "M", "N", "P", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
    var VL = [1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 7, 9, 2, 3, 4, 5, 6, 7, 8, 9];
    var FL = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2];
    var rs = 0;
    for (i = 0; i < 17; i++) {
        f = FL[i];
        d = v.slice(i, i + 1);
        if (i === 8) {
            cdv = d;
        }
        if (!isNaN(d)) {
            d *= f;
        } else {
            for (n = 0; n < LL.length; n++) {
                if (d.toUpperCase() === LL[n]) {
                    d = VL[n];
                    d *= f;
                    if (isNaN(cdv) && n === 8) {
                        cdv = LL[n];
                    }
                    break;
                }
            }
        }
        rs += d;
    }
    cd = rs % 11;
    if (cd === 10) {
        cd = "X";
    }
    if (cd === cdv) {
        return true;
    }
    return false;
}, "The specified vehicle identification number (VIN) is invalid.");
jQuery.validator.addMethod("dateITA", function(value, element) {
    var check = false;
    var re = /^\d{1,2}\/\d{1,2}\/\d{4}$/;
    if (re.test(value)) {
        var adata = value.split("/");
        var gg = parseInt(adata[0], 10);
        var mm = parseInt(adata[1], 10);
        var aaaa = parseInt(adata[2], 10);
        var xdata = new Date(aaaa, mm - 1, gg);
        if ((xdata.getFullYear() === aaaa) && (xdata.getMonth() === mm - 1) && (xdata.getDate() === gg)) {
            check = true;
        } else {
            check = false;
        }
    } else {
        check = false;
    }
    return this.optional(element) || check;
}, "Please enter a correct date");
jQuery.validator.addMethod("iban", function(value, element) {
    if (this.optional(element)) {
        return true;
    }
    if (!(/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(value))) {
        return false;
    }
    var iban = value.replace(/ /g, "").toUpperCase();
    var countrycode = iban.substring(0, 2);
    var bbancountrypatterns = {AL: "\\d{8}[\\dA-Z]{16}",AD: "\\d{8}[\\dA-Z]{12}",AT: "\\d{16}",AZ: "[\\dA-Z]{4}\\d{20}",BE: "\\d{12}",BH: "[A-Z]{4}[\\dA-Z]{14}",BA: "\\d{16}",BR: "\\d{23}[A-Z][\\dA-Z]",BG: "[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR: "\\d{17}",HR: "\\d{17}",CY: "\\d{8}[\\dA-Z]{16}",CZ: "\\d{20}",DK: "\\d{14}",DO: "[A-Z]{4}\\d{20}",EE: "\\d{16}",FO: "\\d{14}",FI: "\\d{14}",FR: "\\d{10}[\\dA-Z]{11}\\d{2}",GE: "[\\dA-Z]{2}\\d{16}",DE: "\\d{18}",GI: "[A-Z]{4}[\\dA-Z]{15}",GR: "\\d{7}[\\dA-Z]{16}",GL: "\\d{14}",GT: "[\\dA-Z]{4}[\\dA-Z]{20}",HU: "\\d{24}",IS: "\\d{22}",IE: "[\\dA-Z]{4}\\d{14}",IL: "\\d{19}",IT: "[A-Z]\\d{10}[\\dA-Z]{12}",KZ: "\\d{3}[\\dA-Z]{13}",KW: "[A-Z]{4}[\\dA-Z]{22}",LV: "[A-Z]{4}[\\dA-Z]{13}",LB: "\\d{4}[\\dA-Z]{20}",LI: "\\d{5}[\\dA-Z]{12}",LT: "\\d{16}",LU: "\\d{3}[\\dA-Z]{13}",MK: "\\d{3}[\\dA-Z]{10}\\d{2}",MT: "[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR: "\\d{23}",MU: "[A-Z]{4}\\d{19}[A-Z]{3}",MC: "\\d{10}[\\dA-Z]{11}\\d{2}",MD: "[\\dA-Z]{2}\\d{18}",ME: "\\d{18}",NL: "[A-Z]{4}\\d{10}",NO: "\\d{11}",PK: "[\\dA-Z]{4}\\d{16}",PS: "[\\dA-Z]{4}\\d{21}",PL: "\\d{24}",PT: "\\d{21}",RO: "[A-Z]{4}[\\dA-Z]{16}",SM: "[A-Z]\\d{10}[\\dA-Z]{12}",SA: "\\d{2}[\\dA-Z]{18}",RS: "\\d{18}",SK: "\\d{20}",SI: "\\d{15}",ES: "\\d{20}",SE: "\\d{20}",CH: "\\d{5}[\\dA-Z]{12}",TN: "\\d{20}",TR: "\\d{5}[\\dA-Z]{17}",AE: "\\d{3}\\d{16}",GB: "[A-Z]{4}\\d{14}",VG: "[\\dA-Z]{4}\\d{16}"};
    var bbanpattern = bbancountrypatterns[countrycode];
    if (typeof bbanpattern !== "undefined") {
        var ibanregexp = new RegExp("^[A-Z]{2}\\d{2}" + bbanpattern + "$", "");
        if (!(ibanregexp.test(iban))) {
            return false;
        }
    }
    var ibancheck = iban.substring(4, iban.length) + iban.substring(0, 4);
    var ibancheckdigits = "";
    var leadingZeroes = true;
    var charAt;
    for (var i = 0; i < ibancheck.length; i++) {
        charAt = ibancheck.charAt(i);
        if (charAt !== "0") {
            leadingZeroes = false;
        }
        if (!leadingZeroes) {
            ibancheckdigits += "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(charAt);
        }
    }
    var cRest = "";
    var cOperator = "";
    for (var p = 0; p < ibancheckdigits.length; p++) {
        var cChar = ibancheckdigits.charAt(p);
        cOperator = "" + cRest + "" + cChar;
        cRest = cOperator % 97;
    }
    return cRest === 1;
}, "Please specify a valid IBAN");
jQuery.validator.addMethod("dateNL", function(value, element) {
    return this.optional(element) || /^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(value);
}, "Please enter a correct date");
jQuery.validator.addMethod("phoneNL", function(value, element) {
    return this.optional(element) || /^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(value);
}, "Please specify a valid phone number.");
jQuery.validator.addMethod("mobileNL", function(value, element) {
    return this.optional(element) || /^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(value);
}, "Please specify a valid mobile number");
jQuery.validator.addMethod("postalcodeNL", function(value, element) {
    return this.optional(element) || /^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(value);
}, "Please specify a valid postal code");
jQuery.validator.addMethod("bankaccountNL", function(value, element) {
    if (this.optional(element)) {
        return true;
    }
    if (!(/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(value))) {
        return false;
    }
    var account = value.replace(/ /g, "");
    var sum = 0;
    var len = account.length;
    for (var pos = 0; pos < len; pos++) {
        var factor = len - pos;
        var digit = account.substring(pos, pos + 1);
        sum = sum + factor * digit;
    }
    return sum % 11 === 0;
}, "Please specify a valid bank account number");
jQuery.validator.addMethod("giroaccountNL", function(value, element) {
    return this.optional(element) || /^[0-9]{1,7}$/.test(value);
}, "Please specify a valid giro account number");
jQuery.validator.addMethod("bankorgiroaccountNL", function(value, element) {
    return this.optional(element) || ($.validator.methods.bankaccountNL.call(this, value, element)) || ($.validator.methods.giroaccountNL.call(this, value, element));
}, "Please specify a valid bank or giro account number");
jQuery.validator.addMethod("time", function(value, element) {
    return this.optional(element) || /^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(value);
}, "Please enter a valid time, between 00:00 and 23:59");
jQuery.validator.addMethod("time12h", function(value, element) {
    return this.optional(element) || /^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(value);
}, "Please enter a valid time in 12-hour am/pm format");
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");
jQuery.validator.addMethod("phoneUK", function(phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/);
}, "Please specify a valid phone number");
jQuery.validator.addMethod("mobileUK", function(phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/);
}, "Please specify a valid mobile number");
jQuery.validator.addMethod("phonesUK", function(phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/);
}, "Please specify a valid uk phone number");
jQuery.validator.addMethod("postcodeUK", function(value, element) {
    return this.optional(element) || /^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(value);
}, "Please specify a valid UK postcode");
jQuery.validator.addMethod("strippedminlength", function(value, element, param) {
    return jQuery(value).text().length >= param;
}, jQuery.validator.format("Please enter at least {0} characters"));
jQuery.validator.addMethod("email2", function(value, element, param) {
    return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);
}, jQuery.validator.messages.email);
jQuery.validator.addMethod("url2", function(value, element, param) {
    return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
}, jQuery.validator.messages.url);
jQuery.validator.addMethod("creditcardtypes", function(value, element, param) {
    if (/[^0-9\-]+/.test(value)) {
        return false;
    }
    value = value.replace(/\D/g, "");
    var validTypes = 0;
    if (param.mastercard) {
        validTypes |= 1;
    }
    if (param.visa) {
        validTypes |= 2;
    }
    if (param.amex) {
        validTypes |= 4;
    }
    if (param.dinersclub) {
        validTypes |= 8;
    }
    if (param.enroute) {
        validTypes |= 16;
    }
    if (param.discover) {
        validTypes |= 32;
    }
    if (param.jcb) {
        validTypes |= 64;
    }
    if (param.unknown) {
        validTypes |= 128;
    }
    if (param.all) {
        validTypes = 1 | 2 | 4 | 8 | 16 | 32 | 64 | 128;
    }
    if (validTypes & 1 && /^(5[12345])/.test(value)) {
        return value.length === 16;
    }
    if (validTypes & 2 && /^(4)/.test(value)) {
        return value.length === 16;
    }
    if (validTypes & 4 && /^(3[47])/.test(value)) {
        return value.length === 15;
    }
    if (validTypes & 8 && /^(3(0[012345]|[68]))/.test(value)) {
        return value.length === 14;
    }
    if (validTypes & 16 && /^(2(014|149))/.test(value)) {
        return value.length === 15;
    }
    if (validTypes & 32 && /^(6011)/.test(value)) {
        return value.length === 16;
    }
    if (validTypes & 64 && /^(3)/.test(value)) {
        return value.length === 16;
    }
    if (validTypes & 64 && /^(2131|1800)/.test(value)) {
        return value.length === 15;
    }
    if (validTypes & 128) {
        return true;
    }
    return false;
}, "Please enter a valid credit card number.");
jQuery.validator.addMethod("ipv4", function(value, element, param) {
    return this.optional(element) || /^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(value);
}, "Please enter a valid IP v4 address.");
jQuery.validator.addMethod("ipv6", function(value, element, param) {
    return this.optional(element) || /^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value);
}, "Please enter a valid IP v6 address.");
jQuery.validator.addMethod("pattern", function(value, element, param) {
    if (this.optional(element)) {
        return true;
    }
    if (typeof param === "string") {
        param = new RegExp("^(?:" + param + ")$");
    }
    return param.test(value);
}, "Invalid format.");
jQuery.validator.addMethod("require_from_group", function(value, element, options) {
    var validator = this;
    var selector = options[1];
    var validOrNot = $(selector, element.form).filter(function() {
        return validator.elementValue(this);
    }).length >= options[0];
    if (!$(element).data("being_validated")) {
        var fields = $(selector, element.form);
        fields.data("being_validated", true);
        fields.valid();
        fields.data("being_validated", false);
    }
    return validOrNot;
}, jQuery.format("Please fill at least {0} of these fields."));
jQuery.validator.addMethod("skip_or_fill_minimum", function(value, element, options) {
    var validator = this, numberRequired = options[0], selector = options[1];
    var numberFilled = $(selector, element.form).filter(function() {
        return validator.elementValue(this);
    }).length;
    var valid = numberFilled >= numberRequired || numberFilled === 0;
    if (!$(element).data("being_validated")) {
        var fields = $(selector, element.form);
        fields.data("being_validated", true);
        fields.valid();
        fields.data("being_validated", false);
    }
    return valid;
}, jQuery.format("Please either skip these fields or fill at least {0} of them."));
jQuery.validator.addMethod("accept", function(value, element, param) {
    var typeParam = typeof param === "string" ? param.replace(/\s/g, "").replace(/,/g, "|") : "image/*", optionalValue = this.optional(element), i, file;
    if (optionalValue) {
        return optionalValue;
    }
    if ($(element).attr("type") === "file") {
        typeParam = typeParam.replace(/\*/g, ".*");
        if (element.files && element.files.length) {
            for (i = 0; i < element.files.length; i++) {
                file = element.files[i];
                if (!file.type.match(new RegExp(".?(" + typeParam + ")$", "i"))) {
                    return false;
                }
            }
        }
    }
    return true;
}, jQuery.format("Please enter a value with a valid mimetype."));
jQuery.validator.addMethod("extension", function(value, element, param) {
    param = typeof param === "string" ? param.replace(/,/g, "|") : "png|jpe?g|gif";
    return this.optional(element) || value.match(new RegExp(".(" + param + ")$", "i"));
}, jQuery.format("Please enter a value with a valid extension."));
(function($) {
    function getPasteEvent() {
        var el = document.createElement("input"), name = "onpaste";
        el.setAttribute(name, "");
        return (typeof el[name] === "function") ? "paste" : "input";
    }
    var pasteEventName = getPasteEvent() + ".mask", ua = navigator.userAgent, iPhone = /iphone/i.test(ua), android = /android/i.test(ua), caretTimeoutId;
    $.mask = {definitions: {"9": "[0-9]",a: "[A-Za-z]","*": "[A-Za-z0-9]"},dataName: "rawMaskFn",placeholder: "_"};
    $.fn.extend({caret: function(begin, end) {
            var range;
            if (this.length === 0 || this.is(":hidden")) {
                return;
            }
            if (typeof begin == "number") {
                end = (typeof end === "number") ? end : begin;
                return this.each(function() {
                    if (this.setSelectionRange) {
                        this.setSelectionRange(begin, end);
                    } else {
                        if (this.createTextRange) {
                            range = this.createTextRange();
                            range.collapse(true);
                            range.moveEnd("character", end);
                            range.moveStart("character", begin);
                            range.select();
                        }
                    }
                });
            } else {
                if (this[0].setSelectionRange) {
                    begin = this[0].selectionStart;
                    end = this[0].selectionEnd;
                } else {
                    if (document.selection && document.selection.createRange) {
                        range = document.selection.createRange();
                        begin = 0 - range.duplicate().moveStart("character", -100000);
                        end = begin + range.text.length;
                    }
                }
                return {begin: begin,end: end};
            }
        },unmask: function() {
            return this.trigger("unmask");
        },mask: function(mask, settings) {
            var input, defs, tests, partialPosition, firstNonMaskPos, len;
            if (!mask && this.length > 0) {
                input = $(this[0]);
                return input.data($.mask.dataName)();
            }
            settings = $.extend({placeholder: $.mask.placeholder,completed: null}, settings);
            defs = $.mask.definitions;
            tests = [];
            partialPosition = len = mask.length;
            firstNonMaskPos = null;
            $.each(mask.split(""), function(i, c) {
                if (c == "?") {
                    len--;
                    partialPosition = i;
                } else {
                    if (defs[c]) {
                        tests.push(new RegExp(defs[c]));
                        if (firstNonMaskPos === null) {
                            firstNonMaskPos = tests.length - 1;
                        }
                    } else {
                        tests.push(null);
                    }
                }
            });
            return this.trigger("unmask").each(function() {
                var input = $(this), buffer = $.map(mask.split(""), function(c, i) {
                    if (c != "?") {
                        return defs[c] ? settings.placeholder : c;
                    }
                }), focusText = input.val();
                function seekNext(pos) {
                    while (++pos < len && !tests[pos]) {
                    }
                    return pos;
                }
                function seekPrev(pos) {
                    while (--pos >= 0 && !tests[pos]) {
                    }
                    return pos;
                }
                function shiftL(begin, end) {
                    var i, j;
                    if (begin < 0) {
                        return;
                    }
                    for (i = begin, j = seekNext(end); i < len; i++) {
                        if (tests[i]) {
                            if (j < len && tests[i].test(buffer[j])) {
                                buffer[i] = buffer[j];
                                buffer[j] = settings.placeholder;
                            } else {
                                break;
                            }
                            j = seekNext(j);
                        }
                    }
                    writeBuffer();
                    input.caret(Math.max(firstNonMaskPos, begin));
                }
                function shiftR(pos) {
                    var i, c, j, t;
                    for (i = pos, c = settings.placeholder; i < len; i++) {
                        if (tests[i]) {
                            j = seekNext(i);
                            t = buffer[i];
                            buffer[i] = c;
                            if (j < len && tests[j].test(t)) {
                                c = t;
                            } else {
                                break;
                            }
                        }
                    }
                }
                function keydownEvent(e) {
                    var k = e.which, pos, begin, end;
                    if (k === 8 || k === 46 || (iPhone && k === 127)) {
                        pos = input.caret();
                        begin = pos.begin;
                        end = pos.end;
                        if (end - begin === 0) {
                            begin = k !== 46 ? seekPrev(begin) : (end = seekNext(begin - 1));
                            end = k === 46 ? seekNext(end) : end;
                        }
                        clearBuffer(begin, end);
                        shiftL(begin, end - 1);
                        e.preventDefault();
                    } else {
                        if (k == 27) {
                            input.val(focusText);
                            input.caret(0, checkVal());
                            e.preventDefault();
                        }
                    }
                }
                function keypressEvent(e) {
                    var k = e.which, pos = input.caret(), p, c, next;
                    if (e.ctrlKey || e.altKey || e.metaKey || k < 32) {
                        return;
                    } else {
                        if (k) {
                            if (pos.end - pos.begin !== 0) {
                                clearBuffer(pos.begin, pos.end);
                                shiftL(pos.begin, pos.end - 1);
                            }
                            p = seekNext(pos.begin - 1);
                            if (p < len) {
                                c = String.fromCharCode(k);
                                if (tests[p].test(c)) {
                                    shiftR(p);
                                    buffer[p] = c;
                                    writeBuffer();
                                    next = seekNext(p);
                                    if (android) {
                                        setTimeout($.proxy($.fn.caret, input, next), 0);
                                    } else {
                                        input.caret(next);
                                    }
                                    if (settings.completed && next >= len) {
                                        settings.completed.call(input);
                                    }
                                }
                            }
                            e.preventDefault();
                        }
                    }
                }
                function clearBuffer(start, end) {
                    var i;
                    for (i = start; i < end && i < len; i++) {
                        if (tests[i]) {
                            buffer[i] = settings.placeholder;
                        }
                    }
                }
                function writeBuffer() {
                    input.val(buffer.join(""));
                }
                function checkVal(allow) {
                    var test = input.val(), lastMatch = -1, i, c;
                    for (i = 0, pos = 0; i < len; i++) {
                        if (tests[i]) {
                            buffer[i] = settings.placeholder;
                            while (pos++ < test.length) {
                                c = test.charAt(pos - 1);
                                if (tests[i].test(c)) {
                                    buffer[i] = c;
                                    lastMatch = i;
                                    break;
                                }
                            }
                            if (pos > test.length) {
                                break;
                            }
                        } else {
                            if (buffer[i] === test.charAt(pos) && i !== partialPosition) {
                                pos++;
                                lastMatch = i;
                            }
                        }
                    }
                    if (allow) {
                        writeBuffer();
                    } else {
                        if (lastMatch + 1 < partialPosition) {
                            input.val("");
                            clearBuffer(0, len);
                        } else {
                            writeBuffer();
                            input.val(input.val().substring(0, lastMatch + 1));
                        }
                    }
                    return (partialPosition ? i : firstNonMaskPos);
                }
                input.data($.mask.dataName, function() {
                    return $.map(buffer, function(c, i) {
                        return tests[i] && c != settings.placeholder ? c : null;
                    }).join("");
                });
                if (!input.attr("readonly")) {
                    input.one("unmask", function() {
                        input.unbind(".mask").removeData($.mask.dataName);
                    }).bind("focus.mask", function() {
                        clearTimeout(caretTimeoutId);
                        var pos, moveCaret;
                        focusText = input.val();
                        pos = checkVal();
                        caretTimeoutId = setTimeout(function() {
                            writeBuffer();
                            if (pos == mask.length) {
                                input.caret(0, pos);
                            } else {
                                input.caret(pos);
                            }
                        }, 10);
                    }).bind("blur.mask", function() {
                        checkVal();
                        if (input.val() != focusText) {
                            input.change();
                        }
                    }).bind("keydown.mask", keydownEvent).bind("keypress.mask", keypressEvent).bind(pasteEventName, function() {
                        setTimeout(function() {
                            var pos = checkVal(true);
                            input.caret(pos);
                            if (settings.completed && pos == input.val().length) {
                                settings.completed.call(input);
                            }
                        }, 0);
                    });
                }
                checkVal();
            });
        }});
})(jQuery);
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], factory);
    } else {
        if (typeof exports === "object") {
            module.exports = factory;
        } else {
            factory(jQuery);
        }
    }
}(function($) {
    var toFix = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], toBind = ("onwheel" in document || document.documentMode >= 9) ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], slice = Array.prototype.slice, nullLowestDeltaTimeout, lowestDelta;
    if ($.event.fixHooks) {
        for (var i = toFix.length; i; ) {
            $.event.fixHooks[toFix[--i]] = $.event.mouseHooks;
        }
    }
    $.event.special.mousewheel = {version: "3.1.6",setup: function() {
            if (this.addEventListener) {
                for (var i = toBind.length; i; ) {
                    this.addEventListener(toBind[--i], handler, false);
                }
            } else {
                this.onmousewheel = handler;
            }
        },teardown: function() {
            if (this.removeEventListener) {
                for (var i = toBind.length; i; ) {
                    this.removeEventListener(toBind[--i], handler, false);
                }
            } else {
                this.onmousewheel = null;
            }
        }};
    $.fn.extend({mousewheel: function(fn) {
            return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
        },unmousewheel: function(fn) {
            return this.unbind("mousewheel", fn);
        }});
    function handler(event) {
        var orgEvent = event || window.event, args = slice.call(arguments, 1), delta = 0, deltaX = 0, deltaY = 0, absDelta = 0;
        event = $.event.fix(orgEvent);
        event.type = "mousewheel";
        if ("detail" in orgEvent) {
            deltaY = orgEvent.detail * -1;
        }
        if ("wheelDelta" in orgEvent) {
            deltaY = orgEvent.wheelDelta;
        }
        if ("wheelDeltaY" in orgEvent) {
            deltaY = orgEvent.wheelDeltaY;
        }
        if ("wheelDeltaX" in orgEvent) {
            deltaX = orgEvent.wheelDeltaX * -1;
        }
        if ("axis" in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }
        delta = deltaY === 0 ? deltaX : deltaY;
        if ("deltaY" in orgEvent) {
            deltaY = orgEvent.deltaY * -1;
            delta = deltaY;
        }
        if ("deltaX" in orgEvent) {
            deltaX = orgEvent.deltaX;
            if (deltaY === 0) {
                delta = deltaX * -1;
            }
        }
        if (deltaY === 0 && deltaX === 0) {
            return;
        }
        absDelta = Math.max(Math.abs(deltaY), Math.abs(deltaX));
        if (!lowestDelta || absDelta < lowestDelta) {
            lowestDelta = absDelta;
        }
        delta = Math[delta >= 1 ? "floor" : "ceil"](delta / lowestDelta);
        deltaX = Math[deltaX >= 1 ? "floor" : "ceil"](deltaX / lowestDelta);
        deltaY = Math[deltaY >= 1 ? "floor" : "ceil"](deltaY / lowestDelta);
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        args.unshift(event, delta, deltaX, deltaY);
        if (nullLowestDeltaTimeout) {
            clearTimeout(nullLowestDeltaTimeout);
        }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);
        return ($.event.dispatch || $.event.handle).apply(this, args);
    }
    function nullLowestDelta() {
        lowestDelta = null;
    }
}));
(function(jQuery) {
    var domfocus = false;
    var mousefocus = false;
    var zoomactive = false;
    var tabindexcounter = 5000;
    var ascrailcounter = 2000;
    var globalmaxzindex = 0;
    var $ = jQuery;
    function getScriptPath() {
        var scripts = document.getElementsByTagName("script");
        var path = scripts[scripts.length - 1].src.split("?")[0];
        return (path.split("/").length > 0) ? path.split("/").slice(0, -1).join("/") + "/" : "";
    }
    var scriptpath = getScriptPath();
    var vendors = ["ms", "moz", "webkit", "o"];
    var setAnimationFrame = window.requestAnimationFrame || false;
    var clearAnimationFrame = window.cancelAnimationFrame || false;
    if (!setAnimationFrame) {
        for (var vx in vendors) {
            var v = vendors[vx];
            if (!setAnimationFrame) {
                setAnimationFrame = window[v + "RequestAnimationFrame"];
            }
            if (!clearAnimationFrame) {
                clearAnimationFrame = window[v + "CancelAnimationFrame"] || window[v + "CancelRequestAnimationFrame"];
            }
        }
    }
    var clsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;
    var _globaloptions = {zindex: "auto",cursoropacitymin: 0,cursoropacitymax: 1,cursorcolor: "#424242",cursorwidth: "5px",cursorborder: "1px solid #fff",cursorborderradius: "5px",scrollspeed: 60,mousescrollstep: 8 * 3,touchbehavior: false,hwacceleration: true,usetransition: true,boxzoom: false,dblclickzoom: true,gesturezoom: true,grabcursorenabled: true,autohidemode: true,background: "",iframeautoresize: true,cursorminheight: 32,preservenativescrolling: true,railoffset: false,bouncescroll: true,spacebarenabled: true,railpadding: {top: 0,right: 0,left: 0,bottom: 0},disableoutline: true,horizrailenabled: true,railalign: "right",railvalign: "bottom",enabletranslate3d: true,enablemousewheel: true,enablekeyboard: true,smoothscroll: true,sensitiverail: true,enablemouselockapi: true,cursorfixedheight: false,directionlockdeadzone: 6,hidecursordelay: 400,nativeparentscrolling: true,enablescrollonselection: true,overflowx: true,overflowy: true,cursordragspeed: 0.3,rtlmode: false,cursordragontouch: false,oneaxismousemode: "auto"};
    var browserdetected = false;
    var getBrowserDetection = function() {
        if (browserdetected) {
            return browserdetected;
        }
        var domtest = document.createElement("DIV");
        var d = {};
        d.haspointerlock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document;
        d.isopera = ("opera" in window);
        d.isopera12 = (d.isopera && ("getUserMedia" in navigator));
        d.isoperamini = (Object.prototype.toString.call(window.operamini) === "[object OperaMini]");
        d.isie = (("all" in document) && ("attachEvent" in domtest) && !d.isopera);
        d.isieold = (d.isie && !("msInterpolationMode" in domtest.style));
        d.isie7 = d.isie && !d.isieold && (!("documentMode" in document) || (document.documentMode == 7));
        d.isie8 = d.isie && ("documentMode" in document) && (document.documentMode == 8);
        d.isie9 = d.isie && ("performance" in window) && (document.documentMode >= 9);
        d.isie10 = d.isie && ("performance" in window) && (document.documentMode >= 10);
        d.isie9mobile = /iemobile.9/i.test(navigator.userAgent);
        if (d.isie9mobile) {
            d.isie9 = false;
        }
        d.isie7mobile = (!d.isie9mobile && d.isie7) && /iemobile/i.test(navigator.userAgent);
        d.ismozilla = ("MozAppearance" in domtest.style);
        d.iswebkit = ("WebkitAppearance" in domtest.style);
        d.ischrome = ("chrome" in window);
        d.ischrome22 = (d.ischrome && d.haspointerlock);
        d.ischrome26 = (d.ischrome && ("transition" in domtest.style));
        d.cantouch = ("ontouchstart" in document.documentElement) || ("ontouchstart" in window);
        d.hasmstouch = (window.navigator.msPointerEnabled || false);
        d.ismac = /^mac$/i.test(navigator.platform);
        d.isios = (d.cantouch && /iphone|ipad|ipod/i.test(navigator.platform));
        d.isios4 = ((d.isios) && !("seal" in Object));
        d.isandroid = (/android/i.test(navigator.userAgent));
        d.trstyle = false;
        d.hastransform = false;
        d.hastranslate3d = false;
        d.transitionstyle = false;
        d.hastransition = false;
        d.transitionend = false;
        var check = ["transform", "msTransform", "webkitTransform", "MozTransform", "OTransform"];
        for (var a = 0; a < check.length; a++) {
            if (typeof domtest.style[check[a]] != "undefined") {
                d.trstyle = check[a];
                break;
            }
        }
        d.hastransform = (d.trstyle != false);
        if (d.hastransform) {
            domtest.style[d.trstyle] = "translate3d(1px,2px,3px)";
            d.hastranslate3d = /translate3d/.test(domtest.style[d.trstyle]);
        }
        d.transitionstyle = false;
        d.prefixstyle = "";
        d.transitionend = false;
        var check = ["transition", "webkitTransition", "MozTransition", "OTransition", "OTransition", "msTransition", "KhtmlTransition"];
        var prefix = ["", "-webkit-", "-moz-", "-o-", "-o", "-ms-", "-khtml-"];
        var evs = ["transitionend", "webkitTransitionEnd", "transitionend", "otransitionend", "oTransitionEnd", "msTransitionEnd", "KhtmlTransitionEnd"];
        for (var a = 0; a < check.length; a++) {
            if (check[a] in domtest.style) {
                d.transitionstyle = check[a];
                d.prefixstyle = prefix[a];
                d.transitionend = evs[a];
                break;
            }
        }
        if (d.ischrome26) {
            d.prefixstyle = prefix[1];
        }
        d.hastransition = (d.transitionstyle);
        function detectCursorGrab() {
            var lst = ["-moz-grab", "-webkit-grab", "grab"];
            if ((d.ischrome && !d.ischrome22) || d.isie) {
                lst = [];
            }
            for (var a = 0; a < lst.length; a++) {
                var p = lst[a];
                domtest.style.cursor = p;
                if (domtest.style.cursor == p) {
                    return p;
                }
            }
            return "url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize";
        }
        d.cursorgrabvalue = detectCursorGrab();
        d.hasmousecapture = ("setCapture" in domtest);
        d.hasMutationObserver = (clsMutationObserver !== false);
        domtest = null;
        browserdetected = d;
        return d;
    };
    var NiceScrollClass = function(myopt, me) {
        var self = this;
        this.version = "3.5.0 BETA5";
        this.name = "nicescroll";
        this.me = me;
        this.opt = {doc: $("body"),win: false};
        $.extend(this.opt, _globaloptions);
        this.opt.snapbackspeed = 80;
        if (myopt || false) {
            for (var a in self.opt) {
                if (typeof myopt[a] != "undefined") {
                    self.opt[a] = myopt[a];
                }
            }
        }
        this.doc = self.opt.doc;
        this.iddoc = (this.doc && this.doc[0]) ? this.doc[0].id || "" : "";
        this.ispage = /BODY|HTML/.test((self.opt.win) ? self.opt.win[0].nodeName : this.doc[0].nodeName);
        this.haswrapper = (self.opt.win !== false);
        this.win = self.opt.win || (this.ispage ? $(window) : this.doc);
        this.docscroll = (this.ispage && !this.haswrapper) ? $(window) : this.win;
        this.body = $("body");
        this.viewport = false;
        this.isfixed = false;
        this.iframe = false;
        this.isiframe = ((this.doc[0].nodeName == "IFRAME") && (this.win[0].nodeName == "IFRAME"));
        this.istextarea = (this.win[0].nodeName == "TEXTAREA");
        this.forcescreen = false;
        this.canshowonmouseevent = (self.opt.autohidemode != "scroll");
        this.onmousedown = false;
        this.onmouseup = false;
        this.onmousemove = false;
        this.onmousewheel = false;
        this.onkeypress = false;
        this.ongesturezoom = false;
        this.onclick = false;
        this.onscrollstart = false;
        this.onscrollend = false;
        this.onscrollcancel = false;
        this.onzoomin = false;
        this.onzoomout = false;
        this.view = false;
        this.page = false;
        this.scroll = {x: 0,y: 0};
        this.scrollratio = {x: 0,y: 0};
        this.cursorheight = 20;
        this.scrollvaluemax = 0;
        this.checkrtlmode = false;
        this.scrollrunning = false;
        this.scrollmom = false;
        this.observer = false;
        this.observerremover = false;
        do {
            this.id = "ascrail" + (ascrailcounter++);
        } while (document.getElementById(this.id));
        this.rail = false;
        this.cursor = false;
        this.cursorfreezed = false;
        this.selectiondrag = false;
        this.zoom = false;
        this.zoomactive = false;
        this.hasfocus = false;
        this.hasmousefocus = false;
        this.visibility = true;
        this.locked = false;
        this.hidden = false;
        this.cursoractive = true;
        this.overflowx = self.opt.overflowx;
        this.overflowy = self.opt.overflowy;
        this.nativescrollingarea = false;
        this.checkarea = 0;
        this.events = [];
        this.saved = {};
        this.delaylist = {};
        this.synclist = {};
        this.lastdeltax = 0;
        this.lastdeltay = 0;
        this.detected = getBrowserDetection();
        var cap = $.extend({}, this.detected);
        this.canhwscroll = (cap.hastransform && self.opt.hwacceleration);
        this.ishwscroll = (this.canhwscroll && self.haswrapper);
        this.istouchcapable = false;
        if (cap.cantouch && cap.ischrome && !cap.isios && !cap.isandroid) {
            this.istouchcapable = true;
            cap.cantouch = false;
        }
        if (cap.cantouch && cap.ismozilla && !cap.isios && !cap.isandroid) {
            this.istouchcapable = true;
            cap.cantouch = false;
        }
        if (!self.opt.enablemouselockapi) {
            cap.hasmousecapture = false;
            cap.haspointerlock = false;
        }
        this.delayed = function(name, fn, tm, lazy) {
            var dd = self.delaylist[name];
            var nw = (new Date()).getTime();
            if (!lazy && dd && dd.tt) {
                return false;
            }
            if (dd && dd.tt) {
                clearTimeout(dd.tt);
            }
            if (dd && dd.last + tm > nw && !dd.tt) {
                self.delaylist[name] = {last: nw + tm,tt: setTimeout(function() {
                        self.delaylist[name].tt = 0;
                        fn.call();
                    }, tm)};
            } else {
                if (!dd || !dd.tt) {
                    self.delaylist[name] = {last: nw,tt: 0};
                    setTimeout(function() {
                        fn.call();
                    }, 0);
                }
            }
        };
        this.debounced = function(name, fn, tm) {
            var dd = self.delaylist[name];
            var nw = (new Date()).getTime();
            self.delaylist[name] = fn;
            if (!dd) {
                setTimeout(function() {
                    var fn = self.delaylist[name];
                    self.delaylist[name] = false;
                    fn.call();
                }, tm);
            }
        };
        this.synched = function(name, fn) {
            function requestSync() {
                if (self.onsync) {
                    return;
                }
                setAnimationFrame(function() {
                    self.onsync = false;
                    for (name in self.synclist) {
                        var fn = self.synclist[name];
                        if (fn) {
                            fn.call(self);
                        }
                        self.synclist[name] = false;
                    }
                });
                self.onsync = true;
            }
            self.synclist[name] = fn;
            requestSync();
            return name;
        };
        this.unsynched = function(name) {
            if (self.synclist[name]) {
                self.synclist[name] = false;
            }
        };
        this.css = function(el, pars) {
            for (var n in pars) {
                self.saved.css.push([el, n, el.css(n)]);
                el.css(n, pars[n]);
            }
        };
        this.scrollTop = function(val) {
            return (typeof val == "undefined") ? self.getScrollTop() : self.setScrollTop(val);
        };
        this.scrollLeft = function(val) {
            return (typeof val == "undefined") ? self.getScrollLeft() : self.setScrollLeft(val);
        };
        BezierClass = function(st, ed, spd, p1, p2, p3, p4) {
            this.st = st;
            this.ed = ed;
            this.spd = spd;
            this.p1 = p1 || 0;
            this.p2 = p2 || 1;
            this.p3 = p3 || 0;
            this.p4 = p4 || 1;
            this.ts = (new Date()).getTime();
            this.df = this.ed - this.st;
        };
        BezierClass.prototype = {B2: function(t) {
                return 3 * t * t * (1 - t);
            },B3: function(t) {
                return 3 * t * (1 - t) * (1 - t);
            },B4: function(t) {
                return (1 - t) * (1 - t) * (1 - t);
            },getNow: function() {
                var nw = (new Date()).getTime();
                var pc = 1 - ((nw - this.ts) / this.spd);
                var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);
                return (pc < 0) ? this.ed : this.st + Math.round(this.df * bz);
            },update: function(ed, spd) {
                this.st = this.getNow();
                this.ed = ed;
                this.spd = spd;
                this.ts = (new Date()).getTime();
                this.df = this.ed - this.st;
                return this;
            }};
        if (this.ishwscroll) {
            this.doc.translate = {x: 0,y: 0,tx: "0px",ty: "0px"};
            if (cap.hastranslate3d && cap.isios) {
                this.doc.css("-webkit-backface-visibility", "hidden");
            }
            function getMatrixValues() {
                var tr = self.doc.css(cap.trstyle);
                if (tr && (tr.substr(0, 6) == "matrix")) {
                    return tr.replace(/^.*\((.*)\)$/g, "$1").replace(/px/g, "").split(/, +/);
                }
                return false;
            }
            this.getScrollTop = function(last) {
                if (!last) {
                    var mtx = getMatrixValues();
                    if (mtx) {
                        return (mtx.length == 16) ? -mtx[13] : -mtx[5];
                    }
                    if (self.timerscroll && self.timerscroll.bz) {
                        return self.timerscroll.bz.getNow();
                    }
                }
                return self.doc.translate.y;
            };
            this.getScrollLeft = function(last) {
                if (!last) {
                    var mtx = getMatrixValues();
                    if (mtx) {
                        return (mtx.length == 16) ? -mtx[12] : -mtx[4];
                    }
                    if (self.timerscroll && self.timerscroll.bh) {
                        return self.timerscroll.bh.getNow();
                    }
                }
                return self.doc.translate.x;
            };
            if (document.createEvent) {
                this.notifyScrollEvent = function(el) {
                    var e = document.createEvent("UIEvents");
                    e.initUIEvent("scroll", false, true, window, 1);
                    el.dispatchEvent(e);
                };
            } else {
                if (document.fireEvent) {
                    this.notifyScrollEvent = function(el) {
                        var e = document.createEventObject();
                        el.fireEvent("onscroll");
                        e.cancelBubble = true;
                    };
                } else {
                    this.notifyScrollEvent = function(el, add) {
                    };
                }
            }
            if (cap.hastranslate3d && self.opt.enabletranslate3d) {
                this.setScrollTop = function(val, silent) {
                    self.doc.translate.y = val;
                    self.doc.translate.ty = (val * -1) + "px";
                    self.doc.css(cap.trstyle, "translate3d(" + self.doc.translate.tx + "," + self.doc.translate.ty + ",0px)");
                    if (!silent) {
                        self.notifyScrollEvent(self.win[0]);
                    }
                };
                this.setScrollLeft = function(val, silent) {
                    self.doc.translate.x = val;
                    self.doc.translate.tx = (val * -1) + "px";
                    self.doc.css(cap.trstyle, "translate3d(" + self.doc.translate.tx + "," + self.doc.translate.ty + ",0px)");
                    if (!silent) {
                        self.notifyScrollEvent(self.win[0]);
                    }
                };
            } else {
                this.setScrollTop = function(val, silent) {
                    self.doc.translate.y = val;
                    self.doc.translate.ty = (val * -1) + "px";
                    self.doc.css(cap.trstyle, "translate(" + self.doc.translate.tx + "," + self.doc.translate.ty + ")");
                    if (!silent) {
                        self.notifyScrollEvent(self.win[0]);
                    }
                };
                this.setScrollLeft = function(val, silent) {
                    self.doc.translate.x = val;
                    self.doc.translate.tx = (val * -1) + "px";
                    self.doc.css(cap.trstyle, "translate(" + self.doc.translate.tx + "," + self.doc.translate.ty + ")");
                    if (!silent) {
                        self.notifyScrollEvent(self.win[0]);
                    }
                };
            }
        } else {
            this.getScrollTop = function() {
                return self.docscroll.scrollTop();
            };
            this.setScrollTop = function(val) {
                return self.docscroll.scrollTop(val);
            };
            this.getScrollLeft = function() {
                return self.docscroll.scrollLeft();
            };
            this.setScrollLeft = function(val) {
                return self.docscroll.scrollLeft(val);
            };
        }
        this.getTarget = function(e) {
            if (!e) {
                return false;
            }
            if (e.target) {
                return e.target;
            }
            if (e.srcElement) {
                return e.srcElement;
            }
            return false;
        };
        this.hasParent = function(e, id) {
            if (!e) {
                return false;
            }
            var el = e.target || e.srcElement || e || false;
            while (el && el.id != id) {
                el = el.parentNode || false;
            }
            return (el !== false);
        };
        function getZIndex() {
            var dom = self.win;
            if ("zIndex" in dom) {
                return dom.zIndex();
            }
            while (dom.length > 0) {
                if (dom[0].nodeType == 9) {
                    return false;
                }
                var zi = dom.css("zIndex");
                if (!isNaN(zi) && zi != 0) {
                    return parseInt(zi);
                }
                dom = dom.parent();
            }
            return false;
        }
        var _convertBorderWidth = {thin: 1,medium: 3,thick: 5};
        function getWidthToPixel(dom, prop, chkheight) {
            var wd = dom.css(prop);
            var px = parseFloat(wd);
            if (isNaN(px)) {
                px = _convertBorderWidth[wd] || 0;
                var brd = (px == 3) ? ((chkheight) ? (self.win.outerHeight() - self.win.innerHeight()) : (self.win.outerWidth() - self.win.innerWidth())) : 1;
                if (self.isie8 && px) {
                    px += 1;
                }
                return (brd) ? px : 0;
            }
            return px;
        }
        this.getOffset = function() {
            if (self.isfixed) {
                return {top: parseFloat(self.win.css("top")),left: parseFloat(self.win.css("left"))};
            }
            if (!self.viewport) {
                return self.win.offset();
            }
            var ww = self.win.offset();
            var vp = self.viewport.offset();
            return {top: ww.top - vp.top + self.viewport.scrollTop(),left: ww.left - vp.left + self.viewport.scrollLeft()};
        };
        this.updateScrollBar = function(len) {
            if (self.ishwscroll) {
                self.rail.css({height: self.win.innerHeight()});
                if (self.railh) {
                    self.railh.css({width: self.win.innerWidth()});
                }
            } else {
                var wpos = self.getOffset();
                var pos = {top: wpos.top,left: wpos.left};
                pos.top += getWidthToPixel(self.win, "border-top-width", true);
                var brd = (self.win.outerWidth() - self.win.innerWidth()) / 2;
                pos.left += (self.rail.align) ? self.win.outerWidth() - getWidthToPixel(self.win, "border-right-width") - self.rail.width : getWidthToPixel(self.win, "border-left-width");
                var off = self.opt.railoffset;
                if (off) {
                    if (off.top) {
                        pos.top += off.top;
                    }
                    if (self.rail.align && off.left) {
                        pos.left += off.left;
                    }
                }
                if (!self.locked) {
                    self.rail.css({top: pos.top,left: pos.left,height: (len) ? len.h : self.win.innerHeight()});
                }
                if (self.zoom) {
                    self.zoom.css({top: pos.top + 1,left: (self.rail.align == 1) ? pos.left - 20 : pos.left + self.rail.width + 4});
                }
                if (self.railh && !self.locked) {
                    var pos = {top: wpos.top,left: wpos.left};
                    var y = (self.railh.align) ? pos.top + getWidthToPixel(self.win, "border-top-width", true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win, "border-top-width", true);
                    var x = pos.left + getWidthToPixel(self.win, "border-left-width");
                    self.railh.css({top: y,left: x,width: self.railh.width});
                }
            }
        };
        this.doRailClick = function(e, dbl, hr) {
            var fn, pg, cur, pos;
            if (self.locked) {
                return;
            }
            self.cancelEvent(e);
            if (dbl) {
                fn = (hr) ? self.doScrollLeft : self.doScrollTop;
                cur = (hr) ? ((e.pageX - self.railh.offset().left - (self.cursorwidth / 2)) * self.scrollratio.x) : ((e.pageY - self.rail.offset().top - (self.cursorheight / 2)) * self.scrollratio.y);
                fn(cur);
            } else {
                fn = (hr) ? self.doScrollLeftBy : self.doScrollBy;
                cur = (hr) ? self.scroll.x : self.scroll.y;
                pos = (hr) ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;
                pg = (hr) ? self.view.w : self.view.h;
                (cur >= pos) ? fn(pg) : fn(-pg);
            }
        };
        self.hasanimationframe = (setAnimationFrame);
        self.hascancelanimationframe = (clearAnimationFrame);
        if (!self.hasanimationframe) {
            setAnimationFrame = function(fn) {
                return setTimeout(fn, 15 - Math.floor((+new Date) / 1000) % 16);
            };
            clearAnimationFrame = clearInterval;
        } else {
            if (!self.hascancelanimationframe) {
                clearAnimationFrame = function() {
                    self.cancelAnimationFrame = true;
                };
            }
        }
        this.init = function() {
            self.saved.css = [];
            if (cap.isie7mobile) {
                return true;
            }
            if (cap.isoperamini) {
                return true;
            }
            if (cap.hasmstouch) {
                self.css((self.ispage) ? $("html") : self.win, {"-ms-touch-action": "none"});
            }
            self.zindex = "auto";
            if (!self.ispage && self.opt.zindex == "auto") {
                self.zindex = getZIndex() || "auto";
            } else {
                self.zindex = self.opt.zindex;
            }
            if (!self.ispage && self.zindex != "auto") {
                if (self.zindex > globalmaxzindex) {
                    globalmaxzindex = self.zindex;
                }
            }
            if (self.isie && self.zindex == 0 && self.opt.zindex == "auto") {
                self.zindex = "auto";
            }
            if (!self.ispage || (!cap.cantouch && !cap.isieold && !cap.isie9mobile)) {
                var cont = self.docscroll;
                if (self.ispage) {
                    cont = (self.haswrapper) ? self.win : self.doc;
                }
                if (!cap.isie9mobile) {
                    self.css(cont, {"overflow-y": "hidden"});
                }
                if (self.ispage && cap.isie7) {
                    if (self.doc[0].nodeName == "BODY") {
                        self.css($("html"), {"overflow-y": "hidden"});
                    } else {
                        if (self.doc[0].nodeName == "HTML") {
                            self.css($("body"), {"overflow-y": "hidden"});
                        }
                    }
                }
                if (cap.isios && !self.ispage && !self.haswrapper) {
                    self.css($("body"), {"-webkit-overflow-scrolling": "touch"});
                }
                var cursor = $(document.createElement("div"));
                cursor.css({position: "relative",top: 0,"float": "right",width: self.opt.cursorwidth,height: "0px","background-color": self.opt.cursorcolor,border: self.opt.cursorborder,"background-clip": "padding-box","-webkit-border-radius": self.opt.cursorborderradius,"-moz-border-radius": self.opt.cursorborderradius,"border-radius": self.opt.cursorborderradius});
                cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());
                self.cursor = cursor;
                var rail = $(document.createElement("div"));
                rail.attr("id", self.id);
                rail.addClass("nicescroll-rails");
                var v, a, kp = ["left", "right"];
                for (var n in kp) {
                    a = kp[n];
                    v = self.opt.railpadding[a];
                    (v) ? rail.css("padding-" + a, v + "px") : self.opt.railpadding[a] = 0;
                }
                rail.append(cursor);
                rail.width = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerWidth()) + self.opt.railpadding.left + self.opt.railpadding.right;
                rail.css({width: rail.width + "px",zIndex: self.zindex,background: self.opt.background,cursor: "default"});
                rail.visibility = true;
                rail.scrollable = true;
                rail.align = (self.opt.railalign == "left") ? 0 : 1;
                self.rail = rail;
                self.rail.drag = false;
                var zoom = false;
                if (self.opt.boxzoom && !self.ispage && !cap.isieold) {
                    zoom = document.createElement("div");
                    self.bind(zoom, "click", self.doZoom);
                    self.zoom = $(zoom);
                    self.zoom.css({cursor: "pointer","z-index": self.zindex,backgroundImage: "url(" + scriptpath + "zoomico.png)",height: 18,width: 18,backgroundPosition: "0px 0px"});
                    if (self.opt.dblclickzoom) {
                        self.bind(self.win, "dblclick", self.doZoom);
                    }
                    if (cap.cantouch && self.opt.gesturezoom) {
                        self.ongesturezoom = function(e) {
                            if (e.scale > 1.5) {
                                self.doZoomIn(e);
                            }
                            if (e.scale < 0.8) {
                                self.doZoomOut(e);
                            }
                            return self.cancelEvent(e);
                        };
                        self.bind(self.win, "gestureend", self.ongesturezoom);
                    }
                }
                self.railh = false;
                if (self.opt.horizrailenabled) {
                    self.css(cont, {"overflow-x": "hidden"});
                    var cursor = $(document.createElement("div"));
                    cursor.css({position: "relative",top: 0,height: self.opt.cursorwidth,width: "0px","background-color": self.opt.cursorcolor,border: self.opt.cursorborder,"background-clip": "padding-box","-webkit-border-radius": self.opt.cursorborderradius,"-moz-border-radius": self.opt.cursorborderradius,"border-radius": self.opt.cursorborderradius});
                    cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());
                    self.cursorh = cursor;
                    var railh = $(document.createElement("div"));
                    railh.attr("id", self.id + "-hr");
                    railh.addClass("nicescroll-rails");
                    railh.height = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerHeight());
                    railh.css({height: railh.height + "px",zIndex: self.zindex,background: self.opt.background});
                    railh.append(cursor);
                    railh.visibility = true;
                    railh.scrollable = true;
                    railh.align = (self.opt.railvalign == "top") ? 0 : 1;
                    self.railh = railh;
                    self.railh.drag = false;
                }
                if (self.ispage) {
                    rail.css({position: "fixed",top: "0px",height: "100%"});
                    (rail.align) ? rail.css({right: "0px"}) : rail.css({left: "0px"});
                    self.body.append(rail);
                    if (self.railh) {
                        railh.css({position: "fixed",left: "0px",width: "100%"});
                        (railh.align) ? railh.css({bottom: "0px"}) : railh.css({top: "0px"});
                        self.body.append(railh);
                    }
                } else {
                    if (self.ishwscroll) {
                        if (self.win.css("position") == "static") {
                            self.css(self.win, {position: "relative"});
                        }
                        var bd = (self.win[0].nodeName == "HTML") ? self.body : self.win;
                        if (self.zoom) {
                            self.zoom.css({position: "absolute",top: 1,right: 0,"margin-right": rail.width + 4});
                            bd.append(self.zoom);
                        }
                        rail.css({position: "absolute",top: 0});
                        (rail.align) ? rail.css({right: 0}) : rail.css({left: 0});
                        bd.append(rail);
                        if (railh) {
                            railh.css({position: "absolute",left: 0,bottom: 0});
                            (railh.align) ? railh.css({bottom: 0}) : railh.css({top: 0});
                            bd.append(railh);
                        }
                    } else {
                        self.isfixed = (self.win.css("position") == "fixed");
                        var rlpos = (self.isfixed) ? "fixed" : "absolute";
                        if (!self.isfixed) {
                            self.viewport = self.getViewport(self.win[0]);
                        }
                        if (self.viewport) {
                            self.body = self.viewport;
                            if ((/relative|absolute/.test(self.viewport.css("position"))) == false) {
                                self.css(self.viewport, {position: "relative"});
                            }
                        }
                        rail.css({position: rlpos});
                        if (self.zoom) {
                            self.zoom.css({position: rlpos});
                        }
                        self.updateScrollBar();
                        self.body.append(rail);
                        if (self.zoom) {
                            self.body.append(self.zoom);
                        }
                        if (self.railh) {
                            railh.css({position: rlpos});
                            self.body.append(railh);
                        }
                    }
                    if (cap.isios) {
                        self.css(self.win, {"-webkit-tap-highlight-color": "rgba(0,0,0,0)","-webkit-touch-callout": "none"});
                    }
                    if (cap.isie && self.opt.disableoutline) {
                        self.win.attr("hideFocus", "true");
                    }
                    if (cap.iswebkit && self.opt.disableoutline) {
                        self.win.css({outline: "none"});
                    }
                }
                if (self.opt.autohidemode === false) {
                    self.autohidedom = false;
                    self.rail.css({opacity: self.opt.cursoropacitymax});
                    if (self.railh) {
                        self.railh.css({opacity: self.opt.cursoropacitymax});
                    }
                } else {
                    if (self.opt.autohidemode === true) {
                        self.autohidedom = $().add(self.rail);
                        if (cap.isie8) {
                            self.autohidedom = self.autohidedom.add(self.cursor);
                        }
                        if (self.railh) {
                            self.autohidedom = self.autohidedom.add(self.railh);
                        }
                        if (self.railh && cap.isie8) {
                            self.autohidedom = self.autohidedom.add(self.cursorh);
                        }
                    } else {
                        if (self.opt.autohidemode == "scroll") {
                            self.autohidedom = $().add(self.rail);
                            if (self.railh) {
                                self.autohidedom = self.autohidedom.add(self.railh);
                            }
                        } else {
                            if (self.opt.autohidemode == "cursor") {
                                self.autohidedom = $().add(self.cursor);
                                if (self.railh) {
                                    self.autohidedom = self.autohidedom.add(self.cursorh);
                                }
                            } else {
                                if (self.opt.autohidemode == "hidden") {
                                    self.autohidedom = false;
                                    self.hide();
                                    self.locked = false;
                                }
                            }
                        }
                    }
                }
                if (cap.isie9mobile) {
                    self.scrollmom = new ScrollMomentumClass2D(self);
                    self.onmangotouch = function(e) {
                        var py = self.getScrollTop();
                        var px = self.getScrollLeft();
                        if ((py == self.scrollmom.lastscrolly) && (px == self.scrollmom.lastscrollx)) {
                            return true;
                        }
                        var dfy = py - self.mangotouch.sy;
                        var dfx = px - self.mangotouch.sx;
                        var df = Math.round(Math.sqrt(Math.pow(dfx, 2) + Math.pow(dfy, 2)));
                        if (df == 0) {
                            return;
                        }
                        var dry = (dfy < 0) ? -1 : 1;
                        var drx = (dfx < 0) ? -1 : 1;
                        var tm = +new Date();
                        if (self.mangotouch.lazy) {
                            clearTimeout(self.mangotouch.lazy);
                        }
                        if (((tm - self.mangotouch.tm) > 80) || (self.mangotouch.dry != dry) || (self.mangotouch.drx != drx)) {
                            self.scrollmom.stop();
                            self.scrollmom.reset(px, py);
                            self.mangotouch.sy = py;
                            self.mangotouch.ly = py;
                            self.mangotouch.sx = px;
                            self.mangotouch.lx = px;
                            self.mangotouch.dry = dry;
                            self.mangotouch.drx = drx;
                            self.mangotouch.tm = tm;
                        } else {
                            self.scrollmom.stop();
                            self.scrollmom.update(self.mangotouch.sx - dfx, self.mangotouch.sy - dfy);
                            var gap = tm - self.mangotouch.tm;
                            self.mangotouch.tm = tm;
                            var ds = Math.max(Math.abs(self.mangotouch.ly - py), Math.abs(self.mangotouch.lx - px));
                            self.mangotouch.ly = py;
                            self.mangotouch.lx = px;
                            if (ds > 2) {
                                self.mangotouch.lazy = setTimeout(function() {
                                    self.mangotouch.lazy = false;
                                    self.mangotouch.dry = 0;
                                    self.mangotouch.drx = 0;
                                    self.mangotouch.tm = 0;
                                    self.scrollmom.doMomentum(30);
                                }, 100);
                            }
                        }
                    };
                    var top = self.getScrollTop();
                    var lef = self.getScrollLeft();
                    self.mangotouch = {sy: top,ly: top,dry: 0,sx: lef,lx: lef,drx: 0,lazy: false,tm: 0};
                    self.bind(self.docscroll, "scroll", self.onmangotouch);
                } else {
                    if (cap.cantouch || self.istouchcapable || self.opt.touchbehavior || cap.hasmstouch) {
                        self.scrollmom = new ScrollMomentumClass2D(self);
                        self.ontouchstart = function(e) {
                            if (e.pointerType && e.pointerType != 2) {
                                return false;
                            }
                            if (!self.locked) {
                                if (cap.hasmstouch) {
                                    var tg = (e.target) ? e.target : false;
                                    while (tg) {
                                        var nc = $(tg).getNiceScroll();
                                        if ((nc.length > 0) && (nc[0].me == self.me)) {
                                            break;
                                        }
                                        if (nc.length > 0) {
                                            return false;
                                        }
                                        if ((tg.nodeName == "DIV") && (tg.id == self.id)) {
                                            break;
                                        }
                                        tg = (tg.parentNode) ? tg.parentNode : false;
                                    }
                                }
                                self.cancelScroll();
                                var tg = self.getTarget(e);
                                if (tg) {
                                    var skp = (/INPUT/i.test(tg.nodeName)) && (/range/i.test(tg.type));
                                    if (skp) {
                                        return self.stopPropagation(e);
                                    }
                                }
                                if (!("clientX" in e) && ("changedTouches" in e)) {
                                    e.clientX = e.changedTouches[0].clientX;
                                    e.clientY = e.changedTouches[0].clientY;
                                }
                                if (self.forcescreen) {
                                    var le = e;
                                    var e = {original: (e.original) ? e.original : e};
                                    e.clientX = le.screenX;
                                    e.clientY = le.screenY;
                                }
                                self.rail.drag = {x: e.clientX,y: e.clientY,sx: self.scroll.x,sy: self.scroll.y,st: self.getScrollTop(),sl: self.getScrollLeft(),pt: 2,dl: false};
                                if (self.ispage || !self.opt.directionlockdeadzone) {
                                    self.rail.drag.dl = "f";
                                } else {
                                    var view = {w: $(window).width(),h: $(window).height()};
                                    var page = {w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)};
                                    var maxh = Math.max(0, page.h - view.h);
                                    var maxw = Math.max(0, page.w - view.w);
                                    if (!self.rail.scrollable && self.railh.scrollable) {
                                        self.rail.drag.ck = (maxh > 0) ? "v" : false;
                                    } else {
                                        if (self.rail.scrollable && !self.railh.scrollable) {
                                            self.rail.drag.ck = (maxw > 0) ? "h" : false;
                                        } else {
                                            self.rail.drag.ck = false;
                                        }
                                    }
                                    if (!self.rail.drag.ck) {
                                        self.rail.drag.dl = "f";
                                    }
                                }
                                if (self.opt.touchbehavior && self.isiframe && cap.isie) {
                                    var wp = self.win.position();
                                    self.rail.drag.x += wp.left;
                                    self.rail.drag.y += wp.top;
                                }
                                self.hasmoving = false;
                                self.lastmouseup = false;
                                self.scrollmom.reset(e.clientX, e.clientY);
                                if (!cap.cantouch && !this.istouchcapable && !cap.hasmstouch) {
                                    var ip = (tg) ? /INPUT|SELECT|TEXTAREA/i.test(tg.nodeName) : false;
                                    if (!ip) {
                                        if (!self.ispage && cap.hasmousecapture) {
                                            tg.setCapture();
                                        }
                                        return (self.opt.touchbehavior) ? self.cancelEvent(e) : self.stopPropagation(e);
                                    }
                                    if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr("type"))) {
                                        pc = {tg: tg,click: false};
                                        self.preventclick = pc;
                                    }
                                }
                            }
                        };
                        self.ontouchend = function(e) {
                            if (e.pointerType && e.pointerType != 2) {
                                return false;
                            }
                            if (self.rail.drag && (self.rail.drag.pt == 2)) {
                                self.scrollmom.doMomentum();
                                self.rail.drag = false;
                                if (self.hasmoving) {
                                    self.hasmoving = false;
                                    self.lastmouseup = true;
                                    self.hideCursor();
                                    if (cap.hasmousecapture) {
                                        document.releaseCapture();
                                    }
                                    if (!cap.cantouch) {
                                        return self.cancelEvent(e);
                                    }
                                }
                            }
                        };
                        var moveneedoffset = (self.opt.touchbehavior && self.isiframe && !cap.hasmousecapture);
                        self.ontouchmove = function(e, byiframe) {
                            if (e.pointerType && e.pointerType != 2) {
                                return false;
                            }
                            if (self.rail.drag && (self.rail.drag.pt == 2)) {
                                if (cap.cantouch && (typeof e.original == "undefined")) {
                                    return true;
                                }
                                self.hasmoving = true;
                                if (self.preventclick && !self.preventclick.click) {
                                    self.preventclick.click = self.preventclick.tg.onclick || false;
                                    self.preventclick.tg.onclick = self.onpreventclick;
                                }
                                var ev = $.extend({original: e}, e);
                                e = ev;
                                if (("changedTouches" in e)) {
                                    e.clientX = e.changedTouches[0].clientX;
                                    e.clientY = e.changedTouches[0].clientY;
                                }
                                if (self.forcescreen) {
                                    var le = e;
                                    var e = {original: (e.original) ? e.original : e};
                                    e.clientX = le.screenX;
                                    e.clientY = le.screenY;
                                }
                                var ofx = ofy = 0;
                                if (moveneedoffset && !byiframe) {
                                    var wp = self.win.position();
                                    ofx = -wp.left;
                                    ofy = -wp.top;
                                }
                                var fy = e.clientY + ofy;
                                var my = (fy - self.rail.drag.y);
                                var fx = e.clientX + ofx;
                                var mx = (fx - self.rail.drag.x);
                                var ny = self.rail.drag.st - my;
                                if (self.ishwscroll && self.opt.bouncescroll) {
                                    if (ny < 0) {
                                        ny = Math.round(ny / 2);
                                    } else {
                                        if (ny > self.page.maxh) {
                                            ny = self.page.maxh + Math.round((ny - self.page.maxh) / 2);
                                        }
                                    }
                                } else {
                                    if (ny < 0) {
                                        ny = 0;
                                        fy = 0;
                                    }
                                    if (ny > self.page.maxh) {
                                        ny = self.page.maxh;
                                        fy = 0;
                                    }
                                }
                                if (self.railh && self.railh.scrollable) {
                                    var nx = self.rail.drag.sl - mx;
                                    if (self.ishwscroll && self.opt.bouncescroll) {
                                        if (nx < 0) {
                                            nx = Math.round(nx / 2);
                                        } else {
                                            if (nx > self.page.maxw) {
                                                nx = self.page.maxw + Math.round((nx - self.page.maxw) / 2);
                                            }
                                        }
                                    } else {
                                        if (nx < 0) {
                                            nx = 0;
                                            fx = 0;
                                        }
                                        if (nx > self.page.maxw) {
                                            nx = self.page.maxw;
                                            fx = 0;
                                        }
                                    }
                                }
                                var grabbed = false;
                                if (self.rail.drag.dl) {
                                    grabbed = true;
                                    if (self.rail.drag.dl == "v") {
                                        nx = self.rail.drag.sl;
                                    } else {
                                        if (self.rail.drag.dl == "h") {
                                            ny = self.rail.drag.st;
                                        }
                                    }
                                } else {
                                    var ay = Math.abs(my);
                                    var ax = Math.abs(mx);
                                    var dz = self.opt.directionlockdeadzone;
                                    if (self.rail.drag.ck == "v") {
                                        if (ay > dz && (ax <= (ay * 0.3))) {
                                            self.rail.drag = false;
                                            return true;
                                        } else {
                                            if (ax > dz) {
                                                self.rail.drag.dl = "f";
                                                $("body").scrollTop($("body").scrollTop());
                                            }
                                        }
                                    } else {
                                        if (self.rail.drag.ck == "h") {
                                            if (ax > dz && (ay <= (ax * 0.3))) {
                                                self.rail.drag = false;
                                                return true;
                                            } else {
                                                if (ay > dz) {
                                                    self.rail.drag.dl = "f";
                                                    $("body").scrollLeft($("body").scrollLeft());
                                                }
                                            }
                                        }
                                    }
                                }
                                self.synched("touchmove", function() {
                                    if (self.rail.drag && (self.rail.drag.pt == 2)) {
                                        if (self.prepareTransition) {
                                            self.prepareTransition(0);
                                        }
                                        if (self.rail.scrollable) {
                                            self.setScrollTop(ny);
                                        }
                                        self.scrollmom.update(fx, fy);
                                        if (self.railh && self.railh.scrollable) {
                                            self.setScrollLeft(nx);
                                            self.showCursor(ny, nx);
                                        } else {
                                            self.showCursor(ny);
                                        }
                                        if (cap.isie10) {
                                            document.selection.clear();
                                        }
                                    }
                                });
                                if (cap.ischrome && self.istouchcapable) {
                                    grabbed = false;
                                }
                                if (grabbed) {
                                    return self.cancelEvent(e);
                                }
                            }
                        };
                    }
                    self.onmousedown = function(e, hronly) {
                        if (self.rail.drag && self.rail.drag.pt != 1) {
                            return;
                        }
                        if (self.locked) {
                            return self.cancelEvent(e);
                        }
                        self.cancelScroll();
                        self.rail.drag = {x: e.clientX,y: e.clientY,sx: self.scroll.x,sy: self.scroll.y,pt: 1,hr: (!!hronly)};
                        var tg = self.getTarget(e);
                        if (!self.ispage && cap.hasmousecapture) {
                            tg.setCapture();
                        }
                        if (self.isiframe && !cap.hasmousecapture) {
                            self.saved.csspointerevents = self.doc.css("pointer-events");
                            self.css(self.doc, {"pointer-events": "none"});
                        }
                        return self.cancelEvent(e);
                    };
                    self.onmouseup = function(e) {
                        if (self.rail.drag) {
                            if (cap.hasmousecapture) {
                                document.releaseCapture();
                            }
                            if (self.isiframe && !cap.hasmousecapture) {
                                self.doc.css("pointer-events", self.saved.csspointerevents);
                            }
                            if (self.rail.drag.pt != 1) {
                                return;
                            }
                            self.rail.drag = false;
                            return self.cancelEvent(e);
                        }
                    };
                    self.onmousemove = function(e) {
                        if (self.rail.drag) {
                            if (self.rail.drag.pt != 1) {
                                return;
                            }
                            if (cap.ischrome && e.which == 0) {
                                return self.onmouseup(e);
                            }
                            self.cursorfreezed = true;
                            if (self.rail.drag.hr) {
                                self.scroll.x = self.rail.drag.sx + (e.clientX - self.rail.drag.x);
                                if (self.scroll.x < 0) {
                                    self.scroll.x = 0;
                                }
                                var mw = self.scrollvaluemaxw;
                                if (self.scroll.x > mw) {
                                    self.scroll.x = mw;
                                }
                            } else {
                                self.scroll.y = self.rail.drag.sy + (e.clientY - self.rail.drag.y);
                                if (self.scroll.y < 0) {
                                    self.scroll.y = 0;
                                }
                                var my = self.scrollvaluemax;
                                if (self.scroll.y > my) {
                                    self.scroll.y = my;
                                }
                            }
                            self.synched("mousemove", function() {
                                if (self.rail.drag && (self.rail.drag.pt == 1)) {
                                    self.showCursor();
                                    if (self.rail.drag.hr) {
                                        self.doScrollLeft(Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);
                                    } else {
                                        self.doScrollTop(Math.round(self.scroll.y * self.scrollratio.y), self.opt.cursordragspeed);
                                    }
                                }
                            });
                            return self.cancelEvent(e);
                        }
                    };
                    if (cap.cantouch || self.opt.touchbehavior) {
                        self.onpreventclick = function(e) {
                            if (self.preventclick) {
                                self.preventclick.tg.onclick = self.preventclick.click;
                                self.preventclick = false;
                                return self.cancelEvent(e);
                            }
                        };
                        self.bind(self.win, "mousedown", self.ontouchstart);
                        self.onclick = (cap.isios) ? false : function(e) {
                            if (self.lastmouseup) {
                                self.lastmouseup = false;
                                return self.cancelEvent(e);
                            } else {
                                return true;
                            }
                        };
                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {
                            self.css((self.ispage) ? self.doc : self.win, {cursor: cap.cursorgrabvalue});
                            self.css(self.rail, {cursor: cap.cursorgrabvalue});
                        }
                    } else {
                        function checkSelectionScroll(e) {
                            if (!self.selectiondrag) {
                                return;
                            }
                            if (e) {
                                var ww = self.win.outerHeight();
                                var df = (e.pageY - self.selectiondrag.top);
                                if (df > 0 && df < ww) {
                                    df = 0;
                                }
                                if (df >= ww) {
                                    df -= ww;
                                }
                                self.selectiondrag.df = df;
                            }
                            if (self.selectiondrag.df == 0) {
                                return;
                            }
                            var rt = -Math.floor(self.selectiondrag.df / 6) * 2;
                            self.doScrollBy(rt);
                            self.debounced("doselectionscroll", function() {
                                checkSelectionScroll();
                            }, 50);
                        }
                        if ("getSelection" in document) {
                            self.hasTextSelected = function() {
                                return (document.getSelection().rangeCount > 0);
                            };
                        } else {
                            if ("selection" in document) {
                                self.hasTextSelected = function() {
                                    return (document.selection.type != "None");
                                };
                            } else {
                                self.hasTextSelected = function() {
                                    return false;
                                };
                            }
                        }
                        self.onselectionstart = function(e) {
                            if (self.ispage) {
                                return;
                            }
                            self.selectiondrag = self.win.offset();
                        };
                        self.onselectionend = function(e) {
                            self.selectiondrag = false;
                        };
                        self.onselectiondrag = function(e) {
                            if (!self.selectiondrag) {
                                return;
                            }
                            if (self.hasTextSelected()) {
                                self.debounced("selectionscroll", function() {
                                    checkSelectionScroll(e);
                                }, 250);
                            }
                        };
                    }
                    if (cap.hasmstouch) {
                        self.css(self.rail, {"-ms-touch-action": "none"});
                        self.css(self.cursor, {"-ms-touch-action": "none"});
                        self.bind(self.win, "MSPointerDown", self.ontouchstart);
                        self.bind(document, "MSPointerUp", self.ontouchend);
                        self.bind(document, "MSPointerMove", self.ontouchmove);
                        self.bind(self.cursor, "MSGestureHold", function(e) {
                            e.preventDefault();
                        });
                        self.bind(self.cursor, "contextmenu", function(e) {
                            e.preventDefault();
                        });
                    }
                    if (this.istouchcapable) {
                        self.bind(self.win, "touchstart", self.ontouchstart);
                        self.bind(document, "touchend", self.ontouchend);
                        self.bind(document, "touchcancel", self.ontouchend);
                        self.bind(document, "touchmove", self.ontouchmove);
                    }
                    self.bind(self.cursor, "mousedown", self.onmousedown);
                    self.bind(self.cursor, "mouseup", self.onmouseup);
                    if (self.railh) {
                        self.bind(self.cursorh, "mousedown", function(e) {
                            self.onmousedown(e, true);
                        });
                        self.bind(self.cursorh, "mouseup", function(e) {
                            if (self.rail.drag && self.rail.drag.pt == 2) {
                                return;
                            }
                            self.rail.drag = false;
                            self.hasmoving = false;
                            self.hideCursor();
                            if (cap.hasmousecapture) {
                                document.releaseCapture();
                            }
                            return self.cancelEvent(e);
                        });
                    }
                    if (self.opt.cursordragontouch || !cap.cantouch && !self.opt.touchbehavior) {
                        self.rail.css({cursor: "default"});
                        self.railh && self.railh.css({cursor: "default"});
                        self.jqbind(self.rail, "mouseenter", function() {
                            if (self.canshowonmouseevent) {
                                self.showCursor();
                            }
                            self.rail.active = true;
                        });
                        self.jqbind(self.rail, "mouseleave", function() {
                            self.rail.active = false;
                            if (!self.rail.drag) {
                                self.hideCursor();
                            }
                        });
                        if (self.opt.sensitiverail) {
                            self.bind(self.rail, "click", function(e) {
                                self.doRailClick(e, false, false);
                            });
                            self.bind(self.rail, "dblclick", function(e) {
                                self.doRailClick(e, true, false);
                            });
                            self.bind(self.cursor, "click", function(e) {
                                self.cancelEvent(e);
                            });
                            self.bind(self.cursor, "dblclick", function(e) {
                                self.cancelEvent(e);
                            });
                        }
                        if (self.railh) {
                            self.jqbind(self.railh, "mouseenter", function() {
                                if (self.canshowonmouseevent) {
                                    self.showCursor();
                                }
                                self.rail.active = true;
                            });
                            self.jqbind(self.railh, "mouseleave", function() {
                                self.rail.active = false;
                                if (!self.rail.drag) {
                                    self.hideCursor();
                                }
                            });
                            if (self.opt.sensitiverail) {
                                self.bind(self.railh, "click", function(e) {
                                    self.doRailClick(e, false, true);
                                });
                                self.bind(self.railh, "dblclick", function(e) {
                                    self.doRailClick(e, true, true);
                                });
                                self.bind(self.cursorh, "click", function(e) {
                                    self.cancelEvent(e);
                                });
                                self.bind(self.cursorh, "dblclick", function(e) {
                                    self.cancelEvent(e);
                                });
                            }
                        }
                    }
                    if (!cap.cantouch && !self.opt.touchbehavior) {
                        self.bind((cap.hasmousecapture) ? self.win : document, "mouseup", self.onmouseup);
                        self.bind(document, "mousemove", self.onmousemove);
                        if (self.onclick) {
                            self.bind(document, "click", self.onclick);
                        }
                        if (!self.ispage && self.opt.enablescrollonselection) {
                            self.bind(self.win[0], "mousedown", self.onselectionstart);
                            self.bind(document, "mouseup", self.onselectionend);
                            self.bind(self.cursor, "mouseup", self.onselectionend);
                            if (self.cursorh) {
                                self.bind(self.cursorh, "mouseup", self.onselectionend);
                            }
                            self.bind(document, "mousemove", self.onselectiondrag);
                        }
                        if (self.zoom) {
                            self.jqbind(self.zoom, "mouseenter", function() {
                                if (self.canshowonmouseevent) {
                                    self.showCursor();
                                }
                                self.rail.active = true;
                            });
                            self.jqbind(self.zoom, "mouseleave", function() {
                                self.rail.active = false;
                                if (!self.rail.drag) {
                                    self.hideCursor();
                                }
                            });
                        }
                    } else {
                        self.bind((cap.hasmousecapture) ? self.win : document, "mouseup", self.ontouchend);
                        self.bind(document, "mousemove", self.ontouchmove);
                        if (self.onclick) {
                            self.bind(document, "click", self.onclick);
                        }
                        if (self.opt.cursordragontouch) {
                            self.bind(self.cursor, "mousedown", self.onmousedown);
                            self.bind(self.cursor, "mousemove", self.onmousemove);
                            self.cursorh && self.bind(self.cursorh, "mousedown", self.onmousedown);
                            self.cursorh && self.bind(self.cursorh, "mousemove", self.onmousemove);
                        }
                    }
                    if (self.opt.enablemousewheel) {
                        if (!self.isiframe) {
                            self.bind((cap.isie && self.ispage) ? document : self.win, "mousewheel", self.onmousewheel);
                        }
                        self.bind(self.rail, "mousewheel", self.onmousewheel);
                        if (self.railh) {
                            self.bind(self.railh, "mousewheel", self.onmousewheelhr);
                        }
                    }
                    if (!self.ispage && !cap.cantouch && !(/HTML|BODY/.test(self.win[0].nodeName))) {
                        if (!self.win.attr("tabindex")) {
                            self.win.attr({tabindex: tabindexcounter++});
                        }
                        self.jqbind(self.win, "focus", function(e) {
                            domfocus = (self.getTarget(e)).id || true;
                            self.hasfocus = true;
                            if (self.canshowonmouseevent) {
                                self.noticeCursor();
                            }
                        });
                        self.jqbind(self.win, "blur", function(e) {
                            domfocus = false;
                            self.hasfocus = false;
                        });
                        self.jqbind(self.win, "mouseenter", function(e) {
                            mousefocus = (self.getTarget(e)).id || true;
                            self.hasmousefocus = true;
                            if (self.canshowonmouseevent) {
                                self.noticeCursor();
                            }
                        });
                        self.jqbind(self.win, "mouseleave", function() {
                            mousefocus = false;
                            self.hasmousefocus = false;
                        });
                    }
                }
                self.onkeypress = function(e) {
                    if (self.locked && self.page.maxh == 0) {
                        return true;
                    }
                    e = (e) ? e : window.e;
                    var tg = self.getTarget(e);
                    if (tg && /INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {
                        var tp = tg.getAttribute("type") || tg.type || false;
                        if ((!tp) || !(/submit|button|cancel/i.tp)) {
                            return true;
                        }
                    }
                    if (self.hasfocus || (self.hasmousefocus && !domfocus) || (self.ispage && !domfocus && !mousefocus)) {
                        var key = e.keyCode;
                        if (self.locked && key != 27) {
                            return self.cancelEvent(e);
                        }
                        var ctrl = e.ctrlKey || false;
                        var shift = e.shiftKey || false;
                        var ret = false;
                        switch (key) {
                            case 38:
                            case 63233:
                                self.doScrollBy(24 * 3);
                                ret = true;
                                break;
                            case 40:
                            case 63235:
                                self.doScrollBy(-24 * 3);
                                ret = true;
                                break;
                            case 37:
                            case 63232:
                                if (self.railh) {
                                    (ctrl) ? self.doScrollLeft(0) : self.doScrollLeftBy(24 * 3);
                                    ret = true;
                                }
                                break;
                            case 39:
                            case 63234:
                                if (self.railh) {
                                    (ctrl) ? self.doScrollLeft(self.page.maxw) : self.doScrollLeftBy(-24 * 3);
                                    ret = true;
                                }
                                break;
                            case 33:
                            case 63276:
                                self.doScrollBy(self.view.h);
                                ret = true;
                                break;
                            case 34:
                            case 63277:
                                self.doScrollBy(-self.view.h);
                                ret = true;
                                break;
                            case 36:
                            case 63273:
                                (self.railh && ctrl) ? self.doScrollPos(0, 0) : self.doScrollTo(0);
                                ret = true;
                                break;
                            case 35:
                            case 63275:
                                (self.railh && ctrl) ? self.doScrollPos(self.page.maxw, self.page.maxh) : self.doScrollTo(self.page.maxh);
                                ret = true;
                                break;
                            case 32:
                                if (self.opt.spacebarenabled) {
                                    (shift) ? self.doScrollBy(self.view.h) : self.doScrollBy(-self.view.h);
                                    ret = true;
                                }
                                break;
                            case 27:
                                if (self.zoomactive) {
                                    self.doZoom();
                                    ret = true;
                                }
                                break;
                        }
                        if (ret) {
                            return self.cancelEvent(e);
                        }
                    }
                };
                if (self.opt.enablekeyboard) {
                    self.bind(document, (cap.isopera && !cap.isopera12) ? "keypress" : "keydown", self.onkeypress);
                }
                self.bind(window, "resize", self.lazyResize);
                self.bind(window, "orientationchange", self.lazyResize);
                self.bind(window, "load", self.lazyResize);
                if (cap.ischrome && !self.ispage && !self.haswrapper) {
                    var tmp = self.win.attr("style");
                    var ww = parseFloat(self.win.css("width")) + 1;
                    self.win.css("width", ww);
                    self.synched("chromefix", function() {
                        self.win.attr("style", tmp);
                    });
                }
                self.onAttributeChange = function(e) {
                    self.lazyResize(250);
                };
                if (!self.ispage && !self.haswrapper) {
                    if (clsMutationObserver !== false) {
                        self.observer = new clsMutationObserver(function(mutations) {
                            mutations.forEach(self.onAttributeChange);
                        });
                        self.observer.observe(self.win[0], {childList: true,characterData: false,attributes: true,subtree: false});
                        self.observerremover = new clsMutationObserver(function(mutations) {
                            mutations.forEach(function(mo) {
                                if (mo.removedNodes.length > 0) {
                                    for (var dd in mo.removedNodes) {
                                        if (mo.removedNodes[dd] == self.win[0]) {
                                            return self.remove();
                                        }
                                    }
                                }
                            });
                        });
                        self.observerremover.observe(self.win[0].parentNode, {childList: true,characterData: false,attributes: false,subtree: false});
                    } else {
                        self.bind(self.win, (cap.isie && !cap.isie9) ? "propertychange" : "DOMAttrModified", self.onAttributeChange);
                        if (cap.isie9) {
                            self.win[0].attachEvent("onpropertychange", self.onAttributeChange);
                        }
                        self.bind(self.win, "DOMNodeRemoved", function(e) {
                            if (e.target == self.win[0]) {
                                self.remove();
                            }
                        });
                    }
                }
                if (!self.ispage && self.opt.boxzoom) {
                    self.bind(window, "resize", self.resizeZoom);
                }
                if (self.istextarea) {
                    self.bind(self.win, "mouseup", self.lazyResize);
                }
                self.checkrtlmode = true;
                self.lazyResize(30);
            }
            if (this.doc[0].nodeName == "IFRAME") {
                function oniframeload(e) {
                    self.iframexd = false;
                    try {
                        var doc = "contentDocument" in this ? this.contentDocument : this.contentWindow.document;
                        var a = doc.domain;
                    } catch (e) {
                        self.iframexd = true;
                        doc = false;
                    }
                    if (self.iframexd) {
                        if ("console" in window) {
                            console.log("NiceScroll error: policy restriced iframe");
                        }
                        return true;
                    }
                    self.forcescreen = true;
                    if (self.isiframe) {
                        self.iframe = {doc: $(doc),html: self.doc.contents().find("html")[0],body: self.doc.contents().find("body")[0]};
                        self.getContentSize = function() {
                            return {w: Math.max(self.iframe.html.scrollWidth, self.iframe.body.scrollWidth),h: Math.max(self.iframe.html.scrollHeight, self.iframe.body.scrollHeight)};
                        };
                        self.docscroll = $(self.iframe.body);
                    }
                    if (!cap.isios && self.opt.iframeautoresize && !self.isiframe) {
                        self.win.scrollTop(0);
                        self.doc.height("");
                        var hh = Math.max(doc.getElementsByTagName("html")[0].scrollHeight, doc.body.scrollHeight);
                        self.doc.height(hh);
                    }
                    self.lazyResize(30);
                    if (cap.isie7) {
                        self.css($(self.iframe.html), {"overflow-y": "hidden"});
                    }
                    self.css($(self.iframe.body), {"overflow-y": "hidden"});
                    if (cap.isios && self.haswrapper) {
                        self.css($(doc.body), {"-webkit-transform": "translate3d(0,0,0)"});
                        console.log(1);
                    }
                    if ("contentWindow" in this) {
                        self.bind(this.contentWindow, "scroll", self.onscroll);
                    } else {
                        self.bind(doc, "scroll", self.onscroll);
                    }
                    if (self.opt.enablemousewheel) {
                        self.bind(doc, "mousewheel", self.onmousewheel);
                    }
                    if (self.opt.enablekeyboard) {
                        self.bind(doc, (cap.isopera) ? "keypress" : "keydown", self.onkeypress);
                    }
                    if (cap.cantouch || self.opt.touchbehavior) {
                        self.bind(doc, "mousedown", self.ontouchstart);
                        self.bind(doc, "mousemove", function(e) {
                            self.ontouchmove(e, true);
                        });
                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {
                            self.css($(doc.body), {cursor: cap.cursorgrabvalue});
                        }
                    }
                    self.bind(doc, "mouseup", self.ontouchend);
                    if (self.zoom) {
                        if (self.opt.dblclickzoom) {
                            self.bind(doc, "dblclick", self.doZoom);
                        }
                        if (self.ongesturezoom) {
                            self.bind(doc, "gestureend", self.ongesturezoom);
                        }
                    }
                }
                if (this.doc[0].readyState && this.doc[0].readyState == "complete") {
                    setTimeout(function() {
                        oniframeload.call(self.doc[0], false);
                    }, 500);
                }
                self.bind(this.doc, "load", oniframeload);
            }
        };
        this.showCursor = function(py, px) {
            if (self.cursortimeout) {
                clearTimeout(self.cursortimeout);
                self.cursortimeout = 0;
            }
            if (!self.rail) {
                return;
            }
            if (self.autohidedom) {
                self.autohidedom.stop().css({opacity: self.opt.cursoropacitymax});
                self.cursoractive = true;
            }
            if (!self.rail.drag || self.rail.drag.pt != 1) {
                if ((typeof py != "undefined") && (py !== false)) {
                    self.scroll.y = Math.round(py * 1 / self.scrollratio.y);
                }
                if (typeof px != "undefined") {
                    self.scroll.x = Math.round(px * 1 / self.scrollratio.x);
                }
            }
            self.cursor.css({height: self.cursorheight,top: self.scroll.y});
            if (self.cursorh) {
                (!self.rail.align && self.rail.visibility) ? self.cursorh.css({width: self.cursorwidth,left: self.scroll.x + self.rail.width}) : self.cursorh.css({width: self.cursorwidth,left: self.scroll.x});
                self.cursoractive = true;
            }
            if (self.zoom) {
                self.zoom.stop().css({opacity: self.opt.cursoropacitymax});
            }
        };
        this.hideCursor = function(tm) {
            if (self.cursortimeout) {
                return;
            }
            if (!self.rail) {
                return;
            }
            if (!self.autohidedom) {
                return;
            }
            self.cursortimeout = setTimeout(function() {
                if (!self.rail.active || !self.showonmouseevent) {
                    self.autohidedom.stop().animate({opacity: self.opt.cursoropacitymin});
                    if (self.zoom) {
                        self.zoom.stop().animate({opacity: self.opt.cursoropacitymin});
                    }
                    self.cursoractive = false;
                }
                self.cursortimeout = 0;
            }, tm || self.opt.hidecursordelay);
        };
        this.noticeCursor = function(tm, py, px) {
            self.showCursor(py, px);
            if (!self.rail.active) {
                self.hideCursor(tm);
            }
        };
        this.getContentSize = (self.ispage) ? function() {
            return {w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)};
        } : (self.haswrapper) ? function() {
            return {w: self.doc.outerWidth() + parseInt(self.win.css("paddingLeft")) + parseInt(self.win.css("paddingRight")),h: self.doc.outerHeight() + parseInt(self.win.css("paddingTop")) + parseInt(self.win.css("paddingBottom"))};
        } : function() {
            return {w: self.docscroll[0].scrollWidth,h: self.docscroll[0].scrollHeight};
        };
        this.onResize = function(e, page) {
            if (!self.win) {
                return false;
            }
            if (!self.haswrapper && !self.ispage) {
                if (self.win.css("display") == "none") {
                    if (self.visibility) {
                        self.hideRail().hideRailHr();
                    }
                    return false;
                } else {
                    if (!self.hidden && !self.visibility) {
                        self.showRail().showRailHr();
                    }
                }
            }
            var premaxh = self.page.maxh;
            var premaxw = self.page.maxw;
            var preview = {h: self.view.h,w: self.view.w};
            self.view = {w: (self.ispage) ? self.win.width() : parseInt(self.win[0].clientWidth),h: (self.ispage) ? self.win.height() : parseInt(self.win[0].clientHeight)};
            self.page = (page) ? page : self.getContentSize();
            self.page.maxh = Math.max(0, self.page.h - self.view.h);
            self.page.maxw = Math.max(0, self.page.w - self.view.w);
            if ((self.page.maxh == premaxh) && (self.page.maxw == premaxw) && (self.view.w == preview.w)) {
                if (!self.ispage) {
                    var pos = self.win.offset();
                    if (self.lastposition) {
                        var lst = self.lastposition;
                        if ((lst.top == pos.top) && (lst.left == pos.left)) {
                            return self;
                        }
                    }
                    self.lastposition = pos;
                } else {
                    return self;
                }
            }
            if (self.page.maxh == 0) {
                self.hideRail();
                self.scrollvaluemax = 0;
                self.scroll.y = 0;
                self.scrollratio.y = 0;
                self.cursorheight = 0;
                self.setScrollTop(0);
                self.rail.scrollable = false;
            } else {
                self.rail.scrollable = true;
            }
            if (self.page.maxw == 0) {
                self.hideRailHr();
                self.scrollvaluemaxw = 0;
                self.scroll.x = 0;
                self.scrollratio.x = 0;
                self.cursorwidth = 0;
                self.setScrollLeft(0);
                self.railh.scrollable = false;
            } else {
                self.railh.scrollable = true;
            }
            self.locked = (self.page.maxh == 0) && (self.page.maxw == 0);
            if (self.locked) {
                if (!self.ispage) {
                    self.updateScrollBar(self.view);
                }
                return false;
            }
            if (!self.hidden && !self.visibility) {
                self.showRail().showRailHr();
            } else {
                if (!self.hidden && !self.railh.visibility) {
                    self.showRailHr();
                }
            }
            if (self.istextarea && self.win.css("resize") && self.win.css("resize") != "none") {
                self.view.h -= 20;
            }
            self.cursorheight = Math.min(self.view.h, Math.round(self.view.h * (self.view.h / self.page.h)));
            self.cursorheight = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorheight);
            self.cursorwidth = Math.min(self.view.w, Math.round(self.view.w * (self.view.w / self.page.w)));
            self.cursorwidth = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorwidth);
            self.scrollvaluemax = self.view.h - self.cursorheight - self.cursor.hborder;
            if (self.railh) {
                self.railh.width = (self.page.maxh > 0) ? (self.view.w - self.rail.width) : self.view.w;
                self.scrollvaluemaxw = self.railh.width - self.cursorwidth - self.cursorh.wborder;
            }
            if (self.checkrtlmode && self.railh) {
                self.checkrtlmode = false;
                if (self.opt.rtlmode && self.scroll.x == 0) {
                    self.setScrollLeft(self.page.maxw);
                }
            }
            if (!self.ispage) {
                self.updateScrollBar(self.view);
            }
            self.scrollratio = {x: (self.page.maxw / self.scrollvaluemaxw),y: (self.page.maxh / self.scrollvaluemax)};
            var sy = self.getScrollTop();
            if (sy > self.page.maxh) {
                self.doScrollTop(self.page.maxh);
            } else {
                self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));
                self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));
                if (self.cursoractive) {
                    self.noticeCursor();
                }
            }
            if (self.scroll.y && (self.getScrollTop() == 0)) {
                self.doScrollTo(Math.floor(self.scroll.y * self.scrollratio.y));
            }
            return self;
        };
        this.resize = self.onResize;
        this.lazyResize = function(tm) {
            tm = (isNaN(tm)) ? 30 : tm;
            self.delayed("resize", self.resize, tm);
            return self;
        };
        function _modernWheelEvent(dom, name, fn, bubble) {
            self._bind(dom, name, function(e) {
                var e = (e) ? e : window.event;
                var event = {original: e,target: e.target || e.srcElement,type: "wheel",deltaMode: e.type == "MozMousePixelScroll" ? 0 : 1,deltaX: 0,deltaZ: 0,preventDefault: function() {
                        e.preventDefault ? e.preventDefault() : e.returnValue = false;
                        return false;
                    },stopImmediatePropagation: function() {
                        (e.stopImmediatePropagation) ? e.stopImmediatePropagation() : e.cancelBubble = true;
                    }};
                if (name == "mousewheel") {
                    event.deltaY = -1 / 40 * e.wheelDelta;
                    e.wheelDeltaX && (event.deltaX = -1 / 40 * e.wheelDeltaX);
                } else {
                    event.deltaY = e.detail;
                }
                return fn.call(dom, event);
            }, bubble);
        }
        this._bind = function(el, name, fn, bubble) {
            self.events.push({e: el,n: name,f: fn,b: bubble,q: false});
            if (el.addEventListener) {
                el.addEventListener(name, fn, bubble || false);
            } else {
                if (el.attachEvent) {
                    el.attachEvent("on" + name, fn);
                } else {
                    el["on" + name] = fn;
                }
            }
        };
        this.jqbind = function(dom, name, fn) {
            self.events.push({e: dom,n: name,f: fn,q: true});
            $(dom).bind(name, fn);
        };
        this.bind = function(dom, name, fn, bubble) {
            var el = ("jquery" in dom) ? dom[0] : dom;
            if (name == "mousewheel") {
                if ("onwheel" in self.win) {
                    self._bind(el, "wheel", fn, bubble || false);
                } else {
                    var wname = (typeof document.onmousewheel != "undefined") ? "mousewheel" : "DOMMouseScroll";
                    _modernWheelEvent(el, wname, fn, bubble || false);
                    if (wname == "DOMMouseScroll") {
                        _modernWheelEvent(el, "MozMousePixelScroll", fn, bubble || false);
                    }
                }
            } else {
                if (el.addEventListener) {
                    if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) {
                        var tt = (name == "mousedown") ? "touchstart" : (name == "mouseup") ? "touchend" : "touchmove";
                        self._bind(el, tt, function(e) {
                            if (e.touches) {
                                if (e.touches.length < 2) {
                                    var ev = (e.touches.length) ? e.touches[0] : e;
                                    ev.original = e;
                                    fn.call(this, ev);
                                }
                            } else {
                                if (e.changedTouches) {
                                    var ev = e.changedTouches[0];
                                    ev.original = e;
                                    fn.call(this, ev);
                                }
                            }
                        }, bubble || false);
                    }
                    self._bind(el, name, fn, bubble || false);
                    if (cap.cantouch && name == "mouseup") {
                        self._bind(el, "touchcancel", fn, bubble || false);
                    }
                } else {
                    self._bind(el, name, function(e) {
                        e = e || window.event || false;
                        if (e) {
                            if (e.srcElement) {
                                e.target = e.srcElement;
                            }
                        }
                        if (!("pageY" in e)) {
                            e.pageX = e.clientX + document.documentElement.scrollLeft;
                            e.pageY = e.clientY + document.documentElement.scrollTop;
                        }
                        return ((fn.call(el, e) === false) || bubble === false) ? self.cancelEvent(e) : true;
                    });
                }
            }
        };
        this._unbind = function(el, name, fn, bub) {
            if (el.removeEventListener) {
                el.removeEventListener(name, fn, bub);
            } else {
                if (el.detachEvent) {
                    el.detachEvent("on" + name, fn);
                } else {
                    el["on" + name] = false;
                }
            }
        };
        this.unbindAll = function() {
            for (var a = 0; a < self.events.length; a++) {
                var r = self.events[a];
                (r.q) ? r.e.unbind(r.n, r.f) : self._unbind(r.e, r.n, r.f, r.b);
            }
        };
        this.cancelEvent = function(e) {
            var e = (e.original) ? e.original : (e) ? e : window.event || false;
            if (!e) {
                return false;
            }
            if (e.preventDefault) {
                e.preventDefault();
            }
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            if (e.preventManipulation) {
                e.preventManipulation();
            }
            e.cancelBubble = true;
            e.cancel = true;
            e.returnValue = false;
            return false;
        };
        this.stopPropagation = function(e) {
            var e = (e.original) ? e.original : (e) ? e : window.event || false;
            if (!e) {
                return false;
            }
            if (e.stopPropagation) {
                return e.stopPropagation();
            }
            if (e.cancelBubble) {
                e.cancelBubble = true;
            }
            return false;
        };
        this.showRail = function() {
            if ((self.page.maxh != 0) && (self.ispage || self.win.css("display") != "none")) {
                self.visibility = true;
                self.rail.visibility = true;
                self.rail.css("display", "block");
            }
            return self;
        };
        this.showRailHr = function() {
            if (!self.railh) {
                return self;
            }
            if ((self.page.maxw != 0) && (self.ispage || self.win.css("display") != "none")) {
                self.railh.visibility = true;
                self.railh.css("display", "block");
            }
            return self;
        };
        this.hideRail = function() {
            self.visibility = false;
            self.rail.visibility = false;
            self.rail.css("display", "none");
            return self;
        };
        this.hideRailHr = function() {
            if (!self.railh) {
                return self;
            }
            self.railh.visibility = false;
            self.railh.css("display", "none");
            return self;
        };
        this.show = function() {
            self.hidden = false;
            self.locked = false;
            return self.showRail().showRailHr();
        };
        this.hide = function() {
            self.hidden = true;
            self.locked = true;
            return self.hideRail().hideRailHr();
        };
        this.toggle = function() {
            return (self.hidden) ? self.show() : self.hide();
        };
        this.remove = function() {
            self.stop();
            if (self.cursortimeout) {
                clearTimeout(self.cursortimeout);
            }
            self.doZoomOut();
            self.unbindAll();
            if (cap.isie9) {
                self.win[0].detachEvent("onpropertychange", self.onAttributeChange);
            }
            if (self.observer !== false) {
                self.observer.disconnect();
            }
            if (self.observerremover !== false) {
                self.observerremover.disconnect();
            }
            self.events = null;
            if (self.cursor) {
                self.cursor.remove();
            }
            if (self.cursorh) {
                self.cursorh.remove();
            }
            if (self.rail) {
                self.rail.remove();
            }
            if (self.railh) {
                self.railh.remove();
            }
            if (self.zoom) {
                self.zoom.remove();
            }
            for (var a = 0; a < self.saved.css.length; a++) {
                var d = self.saved.css[a];
                d[0].css(d[1], (typeof d[2] == "undefined") ? "" : d[2]);
            }
            self.saved = false;
            self.me.data("__nicescroll", "");
            var lst = $.nicescroll;
            lst.each(function(i) {
                if (!this) {
                    return;
                }
                if (this.id === self.id) {
                    delete lst[i];
                    for (var b = ++i; b < lst.length; b++, i++) {
                        lst[i] = lst[b];
                    }
                    lst.length--;
                    if (lst.length) {
                        delete lst[lst.length];
                    }
                }
            });
            for (var i in self) {
                self[i] = null;
                delete self[i];
            }
            self = null;
        };
        this.scrollstart = function(fn) {
            this.onscrollstart = fn;
            return self;
        };
        this.scrollend = function(fn) {
            this.onscrollend = fn;
            return self;
        };
        this.scrollcancel = function(fn) {
            this.onscrollcancel = fn;
            return self;
        };
        this.zoomin = function(fn) {
            this.onzoomin = fn;
            return self;
        };
        this.zoomout = function(fn) {
            this.onzoomout = fn;
            return self;
        };
        this.isScrollable = function(e) {
            var dom = (e.target) ? e.target : e;
            if (dom.nodeName == "OPTION") {
                return true;
            }
            while (dom && (dom.nodeType == 1) && !(/BODY|HTML/.test(dom.nodeName))) {
                var dd = $(dom);
                var ov = dd.css("overflowY") || dd.css("overflowX") || dd.css("overflow") || "";
                if (/scroll|auto/.test(ov)) {
                    return (dom.clientHeight != dom.scrollHeight);
                }
                dom = (dom.parentNode) ? dom.parentNode : false;
            }
            return false;
        };
        this.getViewport = function(me) {
            var dom = (me && me.parentNode) ? me.parentNode : false;
            while (dom && (dom.nodeType == 1) && !(/BODY|HTML/.test(dom.nodeName))) {
                var dd = $(dom);
                var ov = dd.css("overflowY") || dd.css("overflowX") || dd.css("overflow") || "";
                if ((/scroll|auto/.test(ov)) && (dom.clientHeight != dom.scrollHeight)) {
                    return dd;
                }
                if (dd.getNiceScroll().length > 0) {
                    return dd;
                }
                dom = (dom.parentNode) ? dom.parentNode : false;
            }
            return false;
        };
        function execScrollWheel(e, hr, chkscroll) {
            var px, py;
            var rt = 1;
            if (e.deltaMode == 0) {
                px = -Math.floor(e.deltaX * (self.opt.mousescrollstep / (18 * 3)));
                py = -Math.floor(e.deltaY * (self.opt.mousescrollstep / (18 * 3)));
            } else {
                if (e.deltaMode == 1) {
                    px = -Math.floor(e.deltaX * self.opt.mousescrollstep);
                    py = -Math.floor(e.deltaY * self.opt.mousescrollstep);
                }
            }
            if (hr && self.opt.oneaxismousemode && (px == 0) && py) {
                px = py;
                py = 0;
            }
            if (px) {
                if (self.scrollmom) {
                    self.scrollmom.stop();
                }
                self.lastdeltax += px;
                self.debounced("mousewheelx", function() {
                    var dt = self.lastdeltax;
                    self.lastdeltax = 0;
                    if (!self.rail.drag) {
                        self.doScrollLeftBy(dt);
                    }
                }, 120);
            }
            if (py) {
                if (self.opt.nativeparentscrolling && chkscroll && !self.ispage && !self.zoomactive) {
                    if (py < 0) {
                        if (self.getScrollTop() >= self.page.maxh) {
                            return true;
                        }
                    } else {
                        if (self.getScrollTop() <= 0) {
                            return true;
                        }
                    }
                }
                if (self.scrollmom) {
                    self.scrollmom.stop();
                }
                self.lastdeltay += py;
                self.debounced("mousewheely", function() {
                    var dt = self.lastdeltay;
                    self.lastdeltay = 0;
                    if (!self.rail.drag) {
                        self.doScrollBy(dt);
                    }
                }, 120);
            }
            e.stopImmediatePropagation();
            return e.preventDefault();
        }
        this.onmousewheel = function(e) {
            if (self.locked) {
                self.debounced("checkunlock", self.resize, 250);
                return true;
            }
            if (self.rail.drag) {
                return self.cancelEvent(e);
            }
            if (self.opt.oneaxismousemode == "auto" && e.deltaX != 0) {
                self.opt.oneaxismousemode = false;
            }
            if (self.opt.oneaxismousemode && e.deltaX == 0) {
                if (!self.rail.scrollable) {
                    if (self.railh && self.railh.scrollable) {
                        return self.onmousewheelhr(e);
                    } else {
                        return true;
                    }
                }
            }
            var nw = +(new Date());
            var chk = false;
            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {
                self.nativescrollingarea = self.isScrollable(e);
                chk = true;
            }
            self.checkarea = nw;
            if (self.nativescrollingarea) {
                return true;
            }
            var ret = execScrollWheel(e, false, chk);
            if (ret) {
                self.checkarea = 0;
            }
            return ret;
        };
        this.onmousewheelhr = function(e) {
            if (self.locked || !self.railh.scrollable) {
                return true;
            }
            if (self.rail.drag) {
                return self.cancelEvent(e);
            }
            var nw = +(new Date());
            var chk = false;
            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {
                self.nativescrollingarea = self.isScrollable(e);
                chk = true;
            }
            self.checkarea = nw;
            if (self.nativescrollingarea) {
                return true;
            }
            if (self.locked) {
                return self.cancelEvent(e);
            }
            return execScrollWheel(e, true, chk);
        };
        this.stop = function() {
            self.cancelScroll();
            if (self.scrollmon) {
                self.scrollmon.stop();
            }
            self.cursorfreezed = false;
            self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));
            self.noticeCursor();
            return self;
        };
        this.getTransitionSpeed = function(dif) {
            var sp = Math.round(self.opt.scrollspeed * 10);
            var ex = Math.min(sp, Math.round((dif / 20) * self.opt.scrollspeed));
            return (ex > 20) ? ex : 0;
        };
        if (!self.opt.smoothscroll) {
            this.doScrollLeft = function(x, spd) {
                var y = self.getScrollTop();
                self.doScrollPos(x, y, spd);
            };
            this.doScrollTop = function(y, spd) {
                var x = self.getScrollLeft();
                self.doScrollPos(x, y, spd);
            };
            this.doScrollPos = function(x, y, spd) {
                var nx = (x > self.page.maxw) ? self.page.maxw : x;
                if (nx < 0) {
                    nx = 0;
                }
                var ny = (y > self.page.maxh) ? self.page.maxh : y;
                if (ny < 0) {
                    ny = 0;
                }
                self.synched("scroll", function() {
                    self.setScrollTop(ny);
                    self.setScrollLeft(nx);
                });
            };
            this.cancelScroll = function() {
            };
        } else {
            if (self.ishwscroll && cap.hastransition && self.opt.usetransition) {
                this.prepareTransition = function(dif, istime) {
                    var ex = (istime) ? ((dif > 20) ? dif : 0) : self.getTransitionSpeed(dif);
                    var trans = (ex) ? cap.prefixstyle + "transform " + ex + "ms ease-out" : "";
                    if (!self.lasttransitionstyle || self.lasttransitionstyle != trans) {
                        self.lasttransitionstyle = trans;
                        self.doc.css(cap.transitionstyle, trans);
                    }
                    return ex;
                };
                this.doScrollLeft = function(x, spd) {
                    var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();
                    self.doScrollPos(x, y, spd);
                };
                this.doScrollTop = function(y, spd) {
                    var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();
                    self.doScrollPos(x, y, spd);
                };
                this.doScrollPos = function(x, y, spd) {
                    var py = self.getScrollTop();
                    var px = self.getScrollLeft();
                    if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) {
                        self.cancelScroll();
                    }
                    if (self.opt.bouncescroll == false) {
                        if (y < 0) {
                            y = 0;
                        } else {
                            if (y > self.page.maxh) {
                                y = self.page.maxh;
                            }
                        }
                        if (x < 0) {
                            x = 0;
                        } else {
                            if (x > self.page.maxw) {
                                x = self.page.maxw;
                            }
                        }
                    }
                    if (self.scrollrunning && x == self.newscrollx && y == self.newscrolly) {
                        return false;
                    }
                    self.newscrolly = y;
                    self.newscrollx = x;
                    self.newscrollspeed = spd || false;
                    if (self.timer) {
                        return false;
                    }
                    self.timer = setTimeout(function() {
                        var top = self.getScrollTop();
                        var lft = self.getScrollLeft();
                        var dst = {};
                        dst.x = x - lft;
                        dst.y = y - top;
                        dst.px = lft;
                        dst.py = top;
                        var dd = Math.round(Math.sqrt(Math.pow(dst.x, 2) + Math.pow(dst.y, 2)));
                        var ms = (self.newscrollspeed && self.newscrollspeed > 1) ? self.newscrollspeed : self.getTransitionSpeed(dd);
                        if (self.newscrollspeed && self.newscrollspeed <= 1) {
                            ms *= self.newscrollspeed;
                        }
                        self.prepareTransition(ms, true);
                        if (self.timerscroll && self.timerscroll.tm) {
                            clearInterval(self.timerscroll.tm);
                        }
                        if (ms > 0) {
                            if (!self.scrollrunning && self.onscrollstart) {
                                var info = {type: "scrollstart",current: {x: lft,y: top},request: {x: x,y: y},end: {x: self.newscrollx,y: self.newscrolly},speed: ms};
                                self.onscrollstart.call(self, info);
                            }
                            if (cap.transitionend) {
                                if (!self.scrollendtrapped) {
                                    self.scrollendtrapped = true;
                                    self.bind(self.doc, cap.transitionend, self.onScrollEnd, false);
                                }
                            } else {
                                if (self.scrollendtrapped) {
                                    clearTimeout(self.scrollendtrapped);
                                }
                                self.scrollendtrapped = setTimeout(self.onScrollEnd, ms);
                            }
                            var py = top;
                            var px = lft;
                            self.timerscroll = {bz: new BezierClass(py, self.newscrolly, ms, 0, 0, 0.58, 1),bh: new BezierClass(px, self.newscrollx, ms, 0, 0, 0.58, 1)};
                            if (!self.cursorfreezed) {
                                self.timerscroll.tm = setInterval(function() {
                                    self.showCursor(self.getScrollTop(), self.getScrollLeft());
                                }, 60);
                            }
                        }
                        self.synched("doScroll-set", function() {
                            self.timer = 0;
                            if (self.scrollendtrapped) {
                                self.scrollrunning = true;
                            }
                            self.setScrollTop(self.newscrolly);
                            self.setScrollLeft(self.newscrollx);
                            if (!self.scrollendtrapped) {
                                self.onScrollEnd();
                            }
                        });
                    }, 50);
                };
                this.cancelScroll = function() {
                    if (!self.scrollendtrapped) {
                        return true;
                    }
                    var py = self.getScrollTop();
                    var px = self.getScrollLeft();
                    self.scrollrunning = false;
                    if (!cap.transitionend) {
                        clearTimeout(cap.transitionend);
                    }
                    self.scrollendtrapped = false;
                    self._unbind(self.doc, cap.transitionend, self.onScrollEnd);
                    self.prepareTransition(0);
                    self.setScrollTop(py);
                    if (self.railh) {
                        self.setScrollLeft(px);
                    }
                    if (self.timerscroll && self.timerscroll.tm) {
                        clearInterval(self.timerscroll.tm);
                    }
                    self.timerscroll = false;
                    self.cursorfreezed = false;
                    self.showCursor(py, px);
                    return self;
                };
                this.onScrollEnd = function() {
                    if (self.scrollendtrapped) {
                        self._unbind(self.doc, cap.transitionend, self.onScrollEnd);
                    }
                    self.scrollendtrapped = false;
                    self.prepareTransition(0);
                    if (self.timerscroll && self.timerscroll.tm) {
                        clearInterval(self.timerscroll.tm);
                    }
                    self.timerscroll = false;
                    var py = self.getScrollTop();
                    var px = self.getScrollLeft();
                    self.setScrollTop(py);
                    if (self.railh) {
                        self.setScrollLeft(px);
                    }
                    self.noticeCursor(false, py, px);
                    self.cursorfreezed = false;
                    if (py < 0) {
                        py = 0;
                    } else {
                        if (py > self.page.maxh) {
                            py = self.page.maxh;
                        }
                    }
                    if (px < 0) {
                        px = 0;
                    } else {
                        if (px > self.page.maxw) {
                            px = self.page.maxw;
                        }
                    }
                    if ((py != self.newscrolly) || (px != self.newscrollx)) {
                        return self.doScrollPos(px, py, self.opt.snapbackspeed);
                    }
                    if (self.onscrollend && self.scrollrunning) {
                        var info = {type: "scrollend",current: {x: px,y: py},end: {x: self.newscrollx,y: self.newscrolly}};
                        self.onscrollend.call(self, info);
                    }
                    self.scrollrunning = false;
                };
            } else {
                this.doScrollLeft = function(x, spd) {
                    var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();
                    self.doScrollPos(x, y, spd);
                };
                this.doScrollTop = function(y, spd) {
                    var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();
                    self.doScrollPos(x, y, spd);
                };
                this.doScrollPos = function(x, y, spd) {
                    var y = ((typeof y == "undefined") || (y === false)) ? self.getScrollTop(true) : y;
                    if ((self.timer) && (self.newscrolly == y) && (self.newscrollx == x)) {
                        return true;
                    }
                    if (self.timer) {
                        clearAnimationFrame(self.timer);
                    }
                    self.timer = 0;
                    var py = self.getScrollTop();
                    var px = self.getScrollLeft();
                    if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) {
                        self.cancelScroll();
                    }
                    self.newscrolly = y;
                    self.newscrollx = x;
                    if (!self.bouncescroll || !self.rail.visibility) {
                        if (self.newscrolly < 0) {
                            self.newscrolly = 0;
                        } else {
                            if (self.newscrolly > self.page.maxh) {
                                self.newscrolly = self.page.maxh;
                            }
                        }
                    }
                    if (!self.bouncescroll || !self.railh.visibility) {
                        if (self.newscrollx < 0) {
                            self.newscrollx = 0;
                        } else {
                            if (self.newscrollx > self.page.maxw) {
                                self.newscrollx = self.page.maxw;
                            }
                        }
                    }
                    self.dst = {};
                    self.dst.x = x - px;
                    self.dst.y = y - py;
                    self.dst.px = px;
                    self.dst.py = py;
                    var dst = Math.round(Math.sqrt(Math.pow(self.dst.x, 2) + Math.pow(self.dst.y, 2)));
                    self.dst.ax = self.dst.x / dst;
                    self.dst.ay = self.dst.y / dst;
                    var pa = 0;
                    var pe = dst;
                    if (self.dst.x == 0) {
                        pa = py;
                        pe = y;
                        self.dst.ay = 1;
                        self.dst.py = 0;
                    } else {
                        if (self.dst.y == 0) {
                            pa = px;
                            pe = x;
                            self.dst.ax = 1;
                            self.dst.px = 0;
                        }
                    }
                    var ms = self.getTransitionSpeed(dst);
                    if (spd && spd <= 1) {
                        ms *= spd;
                    }
                    if (ms > 0) {
                        self.bzscroll = (self.bzscroll) ? self.bzscroll.update(pe, ms) : new BezierClass(pa, pe, ms, 0, 1, 0, 1);
                    } else {
                        self.bzscroll = false;
                    }
                    if (self.timer) {
                        return;
                    }
                    if ((py == self.page.maxh && y >= self.page.maxh) || (px == self.page.maxw && x >= self.page.maxw)) {
                        self.checkContentSize();
                    }
                    var sync = 1;
                    function scrolling() {
                        if (self.cancelAnimationFrame) {
                            return true;
                        }
                        self.scrollrunning = true;
                        sync = 1 - sync;
                        if (sync) {
                            return (self.timer = setAnimationFrame(scrolling) || 1);
                        }
                        var done = 0;
                        var sc = sy = self.getScrollTop();
                        if (self.dst.ay) {
                            sc = (self.bzscroll) ? self.dst.py + (self.bzscroll.getNow() * self.dst.ay) : self.newscrolly;
                            var dr = sc - sy;
                            if ((dr < 0 && sc < self.newscrolly) || (dr > 0 && sc > self.newscrolly)) {
                                sc = self.newscrolly;
                            }
                            self.setScrollTop(sc);
                            if (sc == self.newscrolly) {
                                done = 1;
                            }
                        } else {
                            done = 1;
                        }
                        var scx = sx = self.getScrollLeft();
                        if (self.dst.ax) {
                            scx = (self.bzscroll) ? self.dst.px + (self.bzscroll.getNow() * self.dst.ax) : self.newscrollx;
                            var dr = scx - sx;
                            if ((dr < 0 && scx < self.newscrollx) || (dr > 0 && scx > self.newscrollx)) {
                                scx = self.newscrollx;
                            }
                            self.setScrollLeft(scx);
                            if (scx == self.newscrollx) {
                                done += 1;
                            }
                        } else {
                            done += 1;
                        }
                        if (done == 2) {
                            self.timer = 0;
                            self.cursorfreezed = false;
                            self.bzscroll = false;
                            self.scrollrunning = false;
                            if (sc < 0) {
                                sc = 0;
                            } else {
                                if (sc > self.page.maxh) {
                                    sc = self.page.maxh;
                                }
                            }
                            if (scx < 0) {
                                scx = 0;
                            } else {
                                if (scx > self.page.maxw) {
                                    scx = self.page.maxw;
                                }
                            }
                            if ((scx != self.newscrollx) || (sc != self.newscrolly)) {
                                self.doScrollPos(scx, sc);
                            } else {
                                if (self.onscrollend) {
                                    var info = {type: "scrollend",current: {x: sx,y: sy},end: {x: self.newscrollx,y: self.newscrolly}};
                                    self.onscrollend.call(self, info);
                                }
                            }
                        } else {
                            self.timer = setAnimationFrame(scrolling) || 1;
                        }
                    }
                    self.cancelAnimationFrame = false;
                    self.timer = 1;
                    if (self.onscrollstart && !self.scrollrunning) {
                        var info = {type: "scrollstart",current: {x: px,y: py},request: {x: x,y: y},end: {x: self.newscrollx,y: self.newscrolly},speed: ms};
                        self.onscrollstart.call(self, info);
                    }
                    scrolling();
                    if ((py == self.page.maxh && y >= py) || (px == self.page.maxw && x >= px)) {
                        self.checkContentSize();
                    }
                    self.noticeCursor();
                };
                this.cancelScroll = function() {
                    if (self.timer) {
                        clearAnimationFrame(self.timer);
                    }
                    self.timer = 0;
                    self.bzscroll = false;
                    self.scrollrunning = false;
                    return self;
                };
            }
        }
        this.doScrollBy = function(stp, relative) {
            var ny = 0;
            if (relative) {
                ny = Math.floor((self.scroll.y - stp) * self.scrollratio.y);
            } else {
                var sy = (self.timer) ? self.newscrolly : self.getScrollTop(true);
                ny = sy - stp;
            }
            if (self.bouncescroll) {
                var haf = Math.round(self.view.h / 2);
                if (ny < -haf) {
                    ny = -haf;
                } else {
                    if (ny > (self.page.maxh + haf)) {
                        ny = (self.page.maxh + haf);
                    }
                }
            }
            self.cursorfreezed = false;
            py = self.getScrollTop(true);
            if (ny < 0 && py <= 0) {
                return self.noticeCursor();
            } else {
                if (ny > self.page.maxh && py >= self.page.maxh) {
                    self.checkContentSize();
                    return self.noticeCursor();
                }
            }
            self.doScrollTop(ny);
        };
        this.doScrollLeftBy = function(stp, relative) {
            var nx = 0;
            if (relative) {
                nx = Math.floor((self.scroll.x - stp) * self.scrollratio.x);
            } else {
                var sx = (self.timer) ? self.newscrollx : self.getScrollLeft(true);
                nx = sx - stp;
            }
            if (self.bouncescroll) {
                var haf = Math.round(self.view.w / 2);
                if (nx < -haf) {
                    nx = -haf;
                } else {
                    if (nx > (self.page.maxw + haf)) {
                        nx = (self.page.maxw + haf);
                    }
                }
            }
            self.cursorfreezed = false;
            px = self.getScrollLeft(true);
            if (nx < 0 && px <= 0) {
                return self.noticeCursor();
            } else {
                if (nx > self.page.maxw && px >= self.page.maxw) {
                    return self.noticeCursor();
                }
            }
            self.doScrollLeft(nx);
        };
        this.doScrollTo = function(pos, relative) {
            var ny = (relative) ? Math.round(pos * self.scrollratio.y) : pos;
            if (ny < 0) {
                ny = 0;
            } else {
                if (ny > self.page.maxh) {
                    ny = self.page.maxh;
                }
            }
            self.cursorfreezed = false;
            self.doScrollTop(pos);
        };
        this.checkContentSize = function() {
            var pg = self.getContentSize();
            if ((pg.h != self.page.h) || (pg.w != self.page.w)) {
                self.resize(false, pg);
            }
        };
        self.onscroll = function(e) {
            if (self.rail.drag) {
                return;
            }
            if (!self.cursorfreezed) {
                self.synched("scroll", function() {
                    self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));
                    if (self.railh) {
                        self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));
                    }
                    self.noticeCursor();
                });
            }
        };
        self.bind(self.docscroll, "scroll", self.onscroll);
        this.doZoomIn = function(e) {
            if (self.zoomactive) {
                return;
            }
            self.zoomactive = true;
            self.zoomrestore = {style: {}};
            var lst = ["position", "top", "left", "zIndex", "backgroundColor", "marginTop", "marginBottom", "marginLeft", "marginRight"];
            var win = self.win[0].style;
            for (var a in lst) {
                var pp = lst[a];
                self.zoomrestore.style[pp] = (typeof win[pp] != "undefined") ? win[pp] : "";
            }
            self.zoomrestore.style.width = self.win.css("width");
            self.zoomrestore.style.height = self.win.css("height");
            self.zoomrestore.padding = {w: self.win.outerWidth() - self.win.width(),h: self.win.outerHeight() - self.win.height()};
            if (cap.isios4) {
                self.zoomrestore.scrollTop = $(window).scrollTop();
                $(window).scrollTop(0);
            }
            self.win.css({position: (cap.isios4) ? "absolute" : "fixed",top: 0,left: 0,"z-index": globalmaxzindex + 100,margin: "0px"});
            var bkg = self.win.css("backgroundColor");
            if (bkg == "" || /transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(bkg)) {
                self.win.css("backgroundColor", "#fff");
            }
            self.rail.css({"z-index": globalmaxzindex + 101});
            self.zoom.css({"z-index": globalmaxzindex + 102});
            self.zoom.css("backgroundPosition", "0px -18px");
            self.resizeZoom();
            if (self.onzoomin) {
                self.onzoomin.call(self);
            }
            return self.cancelEvent(e);
        };
        this.doZoomOut = function(e) {
            if (!self.zoomactive) {
                return;
            }
            self.zoomactive = false;
            self.win.css("margin", "");
            self.win.css(self.zoomrestore.style);
            if (cap.isios4) {
                $(window).scrollTop(self.zoomrestore.scrollTop);
            }
            self.rail.css({"z-index": self.zindex});
            self.zoom.css({"z-index": self.zindex});
            self.zoomrestore = false;
            self.zoom.css("backgroundPosition", "0px 0px");
            self.onResize();
            if (self.onzoomout) {
                self.onzoomout.call(self);
            }
            return self.cancelEvent(e);
        };
        this.doZoom = function(e) {
            return (self.zoomactive) ? self.doZoomOut(e) : self.doZoomIn(e);
        };
        this.resizeZoom = function() {
            if (!self.zoomactive) {
                return;
            }
            var py = self.getScrollTop();
            self.win.css({width: $(window).width() - self.zoomrestore.padding.w + "px",height: $(window).height() - self.zoomrestore.padding.h + "px"});
            self.onResize();
            self.setScrollTop(Math.min(self.page.maxh, py));
        };
        this.init();
        $.nicescroll.push(this);
    };
    var ScrollMomentumClass2D = function(nc) {
        var self = this;
        this.nc = nc;
        this.lastx = 0;
        this.lasty = 0;
        this.speedx = 0;
        this.speedy = 0;
        this.lasttime = 0;
        this.steptime = 0;
        this.snapx = false;
        this.snapy = false;
        this.demulx = 0;
        this.demuly = 0;
        this.lastscrollx = -1;
        this.lastscrolly = -1;
        this.chkx = 0;
        this.chky = 0;
        this.timer = 0;
        this.time = function() {
            return +new Date();
        };
        this.reset = function(px, py) {
            self.stop();
            var now = self.time();
            self.steptime = 0;
            self.lasttime = now;
            self.speedx = 0;
            self.speedy = 0;
            self.lastx = px;
            self.lasty = py;
            self.lastscrollx = -1;
            self.lastscrolly = -1;
        };
        this.update = function(px, py) {
            var now = self.time();
            self.steptime = now - self.lasttime;
            self.lasttime = now;
            var dy = py - self.lasty;
            var dx = px - self.lastx;
            var sy = self.nc.getScrollTop();
            var sx = self.nc.getScrollLeft();
            var newy = sy + dy;
            var newx = sx + dx;
            self.snapx = (newx < 0) || (newx > self.nc.page.maxw);
            self.snapy = (newy < 0) || (newy > self.nc.page.maxh);
            self.speedx = dx;
            self.speedy = dy;
            self.lastx = px;
            self.lasty = py;
        };
        this.stop = function() {
            self.nc.unsynched("domomentum2d");
            if (self.timer) {
                clearTimeout(self.timer);
            }
            self.timer = 0;
            self.lastscrollx = -1;
            self.lastscrolly = -1;
        };
        this.doSnapy = function(nx, ny) {
            var snap = false;
            if (ny < 0) {
                ny = 0;
                snap = true;
            } else {
                if (ny > self.nc.page.maxh) {
                    ny = self.nc.page.maxh;
                    snap = true;
                }
            }
            if (nx < 0) {
                nx = 0;
                snap = true;
            } else {
                if (nx > self.nc.page.maxw) {
                    nx = self.nc.page.maxw;
                    snap = true;
                }
            }
            if (snap) {
                self.nc.doScrollPos(nx, ny, self.nc.opt.snapbackspeed);
            }
        };
        this.doMomentum = function(gp) {
            var t = self.time();
            var l = (gp) ? t + gp : self.lasttime;
            var sl = self.nc.getScrollLeft();
            var st = self.nc.getScrollTop();
            var pageh = self.nc.page.maxh;
            var pagew = self.nc.page.maxw;
            self.speedx = (pagew > 0) ? Math.min(60, self.speedx) : 0;
            self.speedy = (pageh > 0) ? Math.min(60, self.speedy) : 0;
            var chk = l && (t - l) <= 60;
            if ((st < 0) || (st > pageh) || (sl < 0) || (sl > pagew)) {
                chk = false;
            }
            var sy = (self.speedy && chk) ? self.speedy : false;
            var sx = (self.speedx && chk) ? self.speedx : false;
            if (sy || sx) {
                var tm = Math.max(16, self.steptime);
                if (tm > 50) {
                    var xm = tm / 50;
                    self.speedx *= xm;
                    self.speedy *= xm;
                    tm = 50;
                }
                self.demulxy = 0;
                self.lastscrollx = self.nc.getScrollLeft();
                self.chkx = self.lastscrollx;
                self.lastscrolly = self.nc.getScrollTop();
                self.chky = self.lastscrolly;
                var nx = self.lastscrollx;
                var ny = self.lastscrolly;
                var onscroll = function() {
                    var df = ((self.time() - t) > 600) ? 0.04 : 0.02;
                    if (self.speedx) {
                        nx = Math.floor(self.lastscrollx - (self.speedx * (1 - self.demulxy)));
                        self.lastscrollx = nx;
                        if ((nx < 0) || (nx > pagew)) {
                            df = 0.1;
                        }
                    }
                    if (self.speedy) {
                        ny = Math.floor(self.lastscrolly - (self.speedy * (1 - self.demulxy)));
                        self.lastscrolly = ny;
                        if ((ny < 0) || (ny > pageh)) {
                            df = 0.1;
                        }
                    }
                    self.demulxy = Math.min(1, self.demulxy + df);
                    self.nc.synched("domomentum2d", function() {
                        if (self.speedx) {
                            var scx = self.nc.getScrollLeft();
                            if (scx != self.chkx) {
                                self.stop();
                            }
                            self.chkx = nx;
                            self.nc.setScrollLeft(nx);
                        }
                        if (self.speedy) {
                            var scy = self.nc.getScrollTop();
                            if (scy != self.chky) {
                                self.stop();
                            }
                            self.chky = ny;
                            self.nc.setScrollTop(ny);
                        }
                        if (!self.timer) {
                            self.nc.hideCursor();
                            self.doSnapy(nx, ny);
                        }
                    });
                    if (self.demulxy < 1) {
                        self.timer = setTimeout(onscroll, tm);
                    } else {
                        self.stop();
                        self.nc.hideCursor();
                        self.doSnapy(nx, ny);
                    }
                };
                onscroll();
            } else {
                self.doSnapy(self.nc.getScrollLeft(), self.nc.getScrollTop());
            }
        };
    };
    var _scrollTop = jQuery.fn.scrollTop;
    jQuery.cssHooks.pageYOffset = {get: function(elem, computed, extra) {
            var nice = $.data(elem, "__nicescroll") || false;
            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(elem);
        },set: function(elem, value) {
            var nice = $.data(elem, "__nicescroll") || false;
            (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call(elem, value);
            return this;
        }};
    jQuery.fn.scrollTop = function(value) {
        if (typeof value == "undefined") {
            var nice = (this[0]) ? $.data(this[0], "__nicescroll") || false : false;
            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(this);
        } else {
            return this.each(function() {
                var nice = $.data(this, "__nicescroll") || false;
                (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call($(this), value);
            });
        }
    };
    var _scrollLeft = jQuery.fn.scrollLeft;
    $.cssHooks.pageXOffset = {get: function(elem, computed, extra) {
            var nice = $.data(elem, "__nicescroll") || false;
            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(elem);
        },set: function(elem, value) {
            var nice = $.data(elem, "__nicescroll") || false;
            (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call(elem, value);
            return this;
        }};
    jQuery.fn.scrollLeft = function(value) {
        if (typeof value == "undefined") {
            var nice = (this[0]) ? $.data(this[0], "__nicescroll") || false : false;
            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(this);
        } else {
            return this.each(function() {
                var nice = $.data(this, "__nicescroll") || false;
                (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call($(this), value);
            });
        }
    };
    var NiceScrollArray = function(doms) {
        var self = this;
        this.length = 0;
        this.name = "nicescrollarray";
        this.each = function(fn) {
            for (var a = 0, i = 0; a < self.length; a++) {
                fn.call(self[a], i++);
            }
            return self;
        };
        this.push = function(nice) {
            self[self.length] = nice;
            self.length++;
        };
        this.eq = function(idx) {
            return self[idx];
        };
        if (doms) {
            for (a = 0; a < doms.length; a++) {
                var nice = $.data(doms[a], "__nicescroll") || false;
                if (nice) {
                    this[this.length] = nice;
                    this.length++;
                }
            }
        }
        return this;
    };
    function mplex(el, lst, fn) {
        for (var a = 0; a < lst.length; a++) {
            fn(el, lst[a]);
        }
    }
    mplex(NiceScrollArray.prototype, ["show", "hide", "toggle", "onResize", "resize", "remove", "stop", "doScrollPos"], function(e, n) {
        e[n] = function() {
            var args = arguments;
            return this.each(function() {
                this[n].apply(this, args);
            });
        };
    });
    jQuery.fn.getNiceScroll = function(index) {
        if (typeof index == "undefined") {
            return new NiceScrollArray(this);
        } else {
            var nice = this[index] && $.data(this[index], "__nicescroll") || false;
            return nice;
        }
    };
    jQuery.extend(jQuery.expr[":"], {nicescroll: function(a) {
            return ($.data(a, "__nicescroll")) ? true : false;
        }});
    $.fn.niceScroll = function(wrapper, opt) {
        if (typeof opt == "undefined") {
            if ((typeof wrapper == "object") && !("jquery" in wrapper)) {
                opt = wrapper;
                wrapper = false;
            }
        }
        var ret = new NiceScrollArray();
        if (typeof opt == "undefined") {
            opt = {};
        }
        if (wrapper || false) {
            opt.doc = $(wrapper);
            opt.win = $(this);
        }
        var docundef = !("doc" in opt);
        if (!docundef && !("win" in opt)) {
            opt.win = $(this);
        }
        this.each(function() {
            var nice = $(this).data("__nicescroll") || false;
            if (!nice) {
                opt.doc = (docundef) ? $(this) : opt.doc;
                nice = new NiceScrollClass(opt, $(this));
                $(this).data("__nicescroll", nice);
            }
            ret.push(nice);
        });
        return (ret.length == 1) ? ret[0] : ret;
    };
    window.NiceScroll = {getjQuery: function() {
            return jQuery;
        }};
    if (!$.nicescroll) {
        $.nicescroll = new NiceScrollArray();
        $.nicescroll.options = _globaloptions;
    }
})(jQuery);
(function($, window, undefined) {
    $.fn.jScrollPane = function(settings) {
        function JScrollPane(elem, s) {
            var settings, jsp = this, pane, paneWidth, paneHeight, container, contentWidth, contentHeight, percentInViewH, percentInViewV, isScrollableV, isScrollableH, verticalDrag, dragMaxY, verticalDragPosition, horizontalDrag, dragMaxX, horizontalDragPosition, verticalBar, verticalTrack, scrollbarWidth, verticalTrackHeight, verticalDragHeight, arrowUp, arrowDown, horizontalBar, horizontalTrack, horizontalTrackWidth, horizontalDragWidth, arrowLeft, arrowRight, reinitialiseInterval, originalPadding, originalPaddingTotalWidth, previousContentWidth, wasAtTop = true, wasAtLeft = true, wasAtBottom = false, wasAtRight = false, originalElement = elem.clone(false, false).empty(), mwEvent = $.fn.mwheelIntent ? "mwheelIntent.jsp" : "mousewheel.jsp";
            if (elem.css("box-sizing") === "border-box") {
                originalPadding = 0;
                originalPaddingTotalWidth = 0;
            } else {
                originalPadding = elem.css("paddingTop") + " " + elem.css("paddingRight") + " " + elem.css("paddingBottom") + " " + elem.css("paddingLeft");
                originalPaddingTotalWidth = (parseInt(elem.css("paddingLeft"), 10) || 0) + (parseInt(elem.css("paddingRight"), 10) || 0);
            }
            function initialise(s) {
                var isMaintainingPositon, lastContentX, lastContentY, hasContainingSpaceChanged, originalScrollTop, originalScrollLeft, maintainAtBottom = false, maintainAtRight = false;
                settings = s;
                if (pane === undefined) {
                    originalScrollTop = elem.scrollTop();
                    originalScrollLeft = elem.scrollLeft();
                    elem.css({overflow: "hidden",padding: 0});
                    paneWidth = elem.innerWidth() + originalPaddingTotalWidth;
                    paneHeight = elem.innerHeight();
                    elem.width(paneWidth);
                    pane = $('<div class="jspPane" />').css("padding", originalPadding).append(elem.children());
                    container = $('<div class="jspContainer" />').css({width: paneWidth + "px",height: paneHeight + "px"}).append(pane).appendTo(elem);
                } else {
                    elem.css("width", "auto");
                    maintainAtBottom = settings.stickToBottom && isCloseToBottom();
                    maintainAtRight = settings.stickToRight && isCloseToRight();
                    hasContainingSpaceChanged = elem.innerWidth() + originalPaddingTotalWidth != paneWidth || elem.outerHeight() != paneHeight;
                    if (hasContainingSpaceChanged) {
                        paneWidth = elem.innerWidth() + originalPaddingTotalWidth;
                        paneHeight = elem.innerHeight();
                        container.css({width: paneWidth + "px",height: paneHeight + "px"});
                    }
                    if (!hasContainingSpaceChanged && previousContentWidth == contentWidth && pane.outerHeight() == contentHeight) {
                        elem.width(paneWidth);
                        return;
                    }
                    previousContentWidth = contentWidth;
                    pane.css("width", "");
                    elem.width(paneWidth);
                    container.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end();
                }
                pane.css("overflow", "auto");
                if (s.contentWidth) {
                    contentWidth = s.contentWidth;
                } else {
                    contentWidth = pane[0].scrollWidth;
                }
                contentHeight = pane[0].scrollHeight;
                pane.css("overflow", "");
                percentInViewH = contentWidth / paneWidth;
                percentInViewV = contentHeight / paneHeight;
                isScrollableV = percentInViewV > 1;
                isScrollableH = percentInViewH > 1;
                if (!(isScrollableH || isScrollableV)) {
                    elem.removeClass("jspScrollable");
                    pane.css({top: 0,left: 0,width: container.width() - originalPaddingTotalWidth});
                    removeMousewheel();
                    removeFocusHandler();
                    removeKeyboardNav();
                    removeClickOnTrack();
                } else {
                    elem.addClass("jspScrollable");
                    isMaintainingPositon = settings.maintainPosition && (verticalDragPosition || horizontalDragPosition);
                    if (isMaintainingPositon) {
                        lastContentX = contentPositionX();
                        lastContentY = contentPositionY();
                    }
                    initialiseVerticalScroll();
                    initialiseHorizontalScroll();
                    resizeScrollbars();
                    if (isMaintainingPositon) {
                        scrollToX(maintainAtRight ? (contentWidth - paneWidth) : lastContentX, false);
                        scrollToY(maintainAtBottom ? (contentHeight - paneHeight) : lastContentY, false);
                    }
                    initFocusHandler();
                    initMousewheel();
                    initTouch();
                    if (settings.enableKeyboardNavigation) {
                        initKeyboardNav();
                    }
                    if (settings.clickOnTrack) {
                        initClickOnTrack();
                    }
                    observeHash();
                    if (settings.hijackInternalLinks) {
                        hijackInternalLinks();
                    }
                }
                if (settings.autoReinitialise && !reinitialiseInterval) {
                    reinitialiseInterval = setInterval(function() {
                        initialise(settings);
                    }, settings.autoReinitialiseDelay);
                } else {
                    if (!settings.autoReinitialise && reinitialiseInterval) {
                        clearInterval(reinitialiseInterval);
                    }
                }
                originalScrollTop && elem.scrollTop(0) && scrollToY(originalScrollTop, false);
                originalScrollLeft && elem.scrollLeft(0) && scrollToX(originalScrollLeft, false);
                elem.trigger("jsp-initialised", [isScrollableH || isScrollableV]);
            }
            function initialiseVerticalScroll() {
                if (isScrollableV) {
                    container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'), $('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'), $('<div class="jspDragBottom" />'))), $('<div class="jspCap jspCapBottom" />')));
                    verticalBar = container.find(">.jspVerticalBar");
                    verticalTrack = verticalBar.find(">.jspTrack");
                    verticalDrag = verticalTrack.find(">.jspDrag");
                    if (settings.showArrows) {
                        arrowUp = $('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp", getArrowScroll(0, -1)).bind("click.jsp", nil);
                        arrowDown = $('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp", getArrowScroll(0, 1)).bind("click.jsp", nil);
                        if (settings.arrowScrollOnHover) {
                            arrowUp.bind("mouseover.jsp", getArrowScroll(0, -1, arrowUp));
                            arrowDown.bind("mouseover.jsp", getArrowScroll(0, 1, arrowDown));
                        }
                        appendArrows(verticalTrack, settings.verticalArrowPositions, arrowUp, arrowDown);
                    }
                    verticalTrackHeight = paneHeight;
                    container.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function() {
                        verticalTrackHeight -= $(this).outerHeight();
                    });
                    verticalDrag.hover(function() {
                        verticalDrag.addClass("jspHover");
                    }, function() {
                        verticalDrag.removeClass("jspHover");
                    }).bind("mousedown.jsp", function(e) {
                        $("html").bind("dragstart.jsp selectstart.jsp", nil);
                        verticalDrag.addClass("jspActive");
                        var startY = e.pageY - verticalDrag.position().top;
                        $("html").bind("mousemove.jsp", function(e) {
                            positionDragY(e.pageY - startY, false);
                        }).bind("mouseup.jsp mouseleave.jsp", cancelDrag);
                        return false;
                    });
                    sizeVerticalScrollbar();
                }
            }
            function sizeVerticalScrollbar() {
                verticalTrack.height(verticalTrackHeight + "px");
                verticalDragPosition = 0;
                scrollbarWidth = settings.verticalGutter + verticalTrack.outerWidth();
                pane.width(paneWidth - scrollbarWidth - originalPaddingTotalWidth);
                try {
                    if (verticalBar.position().left === 0) {
                        pane.css("margin-left", scrollbarWidth + "px");
                    }
                } catch (err) {
                }
            }
            function initialiseHorizontalScroll() {
                if (isScrollableH) {
                    container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'), $('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'), $('<div class="jspDragRight" />'))), $('<div class="jspCap jspCapRight" />')));
                    horizontalBar = container.find(">.jspHorizontalBar");
                    horizontalTrack = horizontalBar.find(">.jspTrack");
                    horizontalDrag = horizontalTrack.find(">.jspDrag");
                    if (settings.showArrows) {
                        arrowLeft = $('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp", getArrowScroll(-1, 0)).bind("click.jsp", nil);
                        arrowRight = $('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp", getArrowScroll(1, 0)).bind("click.jsp", nil);
                        if (settings.arrowScrollOnHover) {
                            arrowLeft.bind("mouseover.jsp", getArrowScroll(-1, 0, arrowLeft));
                            arrowRight.bind("mouseover.jsp", getArrowScroll(1, 0, arrowRight));
                        }
                        appendArrows(horizontalTrack, settings.horizontalArrowPositions, arrowLeft, arrowRight);
                    }
                    horizontalDrag.hover(function() {
                        horizontalDrag.addClass("jspHover");
                    }, function() {
                        horizontalDrag.removeClass("jspHover");
                    }).bind("mousedown.jsp", function(e) {
                        $("html").bind("dragstart.jsp selectstart.jsp", nil);
                        horizontalDrag.addClass("jspActive");
                        var startX = e.pageX - horizontalDrag.position().left;
                        $("html").bind("mousemove.jsp", function(e) {
                            positionDragX(e.pageX - startX, false);
                        }).bind("mouseup.jsp mouseleave.jsp", cancelDrag);
                        return false;
                    });
                    horizontalTrackWidth = container.innerWidth();
                    sizeHorizontalScrollbar();
                }
            }
            function sizeHorizontalScrollbar() {
                container.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function() {
                    horizontalTrackWidth -= $(this).outerWidth();
                });
                horizontalTrack.width(horizontalTrackWidth + "px");
                horizontalDragPosition = 0;
            }
            function resizeScrollbars() {
                if (isScrollableH && isScrollableV) {
                    var horizontalTrackHeight = horizontalTrack.outerHeight(), verticalTrackWidth = verticalTrack.outerWidth();
                    verticalTrackHeight -= horizontalTrackHeight;
                    $(horizontalBar).find(">.jspCap:visible,>.jspArrow").each(function() {
                        horizontalTrackWidth += $(this).outerWidth();
                    });
                    horizontalTrackWidth -= verticalTrackWidth;
                    paneHeight -= verticalTrackWidth;
                    paneWidth -= horizontalTrackHeight;
                    horizontalTrack.parent().append($('<div class="jspCorner" />').css("width", horizontalTrackHeight + "px"));
                    sizeVerticalScrollbar();
                    sizeHorizontalScrollbar();
                }
                if (isScrollableH) {
                    pane.width((container.outerWidth() - originalPaddingTotalWidth) + "px");
                }
                contentHeight = pane.outerHeight();
                percentInViewV = contentHeight / paneHeight;
                if (isScrollableH) {
                    horizontalDragWidth = Math.ceil(1 / percentInViewH * horizontalTrackWidth);
                    if (horizontalDragWidth > settings.horizontalDragMaxWidth) {
                        horizontalDragWidth = settings.horizontalDragMaxWidth;
                    } else {
                        if (horizontalDragWidth < settings.horizontalDragMinWidth) {
                            horizontalDragWidth = settings.horizontalDragMinWidth;
                        }
                    }
                    horizontalDrag.width(horizontalDragWidth + "px");
                    dragMaxX = horizontalTrackWidth - horizontalDragWidth;
                    _positionDragX(horizontalDragPosition);
                }
                if (isScrollableV) {
                    verticalDragHeight = Math.ceil(1 / percentInViewV * verticalTrackHeight);
                    if (verticalDragHeight > settings.verticalDragMaxHeight) {
                        verticalDragHeight = settings.verticalDragMaxHeight;
                    } else {
                        if (verticalDragHeight < settings.verticalDragMinHeight) {
                            verticalDragHeight = settings.verticalDragMinHeight;
                        }
                    }
                    verticalDrag.height(verticalDragHeight + "px");
                    dragMaxY = verticalTrackHeight - verticalDragHeight;
                    _positionDragY(verticalDragPosition);
                }
            }
            function appendArrows(ele, p, a1, a2) {
                var p1 = "before", p2 = "after", aTemp;
                if (p == "os") {
                    p = /Mac/.test(navigator.platform) ? "after" : "split";
                }
                if (p == p1) {
                    p2 = p;
                } else {
                    if (p == p2) {
                        p1 = p;
                        aTemp = a1;
                        a1 = a2;
                        a2 = aTemp;
                    }
                }
                ele[p1](a1)[p2](a2);
            }
            function getArrowScroll(dirX, dirY, ele) {
                return function() {
                    arrowScroll(dirX, dirY, this, ele);
                    this.blur();
                    return false;
                };
            }
            function arrowScroll(dirX, dirY, arrow, ele) {
                arrow = $(arrow).addClass("jspActive");
                var eve, scrollTimeout, isFirst = true, doScroll = function() {
                    if (dirX !== 0) {
                        jsp.scrollByX(dirX * settings.arrowButtonSpeed);
                    }
                    if (dirY !== 0) {
                        jsp.scrollByY(dirY * settings.arrowButtonSpeed);
                    }
                    scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.arrowRepeatFreq);
                    isFirst = false;
                };
                doScroll();
                eve = ele ? "mouseout.jsp" : "mouseup.jsp";
                ele = ele || $("html");
                ele.bind(eve, function() {
                    arrow.removeClass("jspActive");
                    scrollTimeout && clearTimeout(scrollTimeout);
                    scrollTimeout = null;
                    ele.unbind(eve);
                });
            }
            function initClickOnTrack() {
                removeClickOnTrack();
                if (isScrollableV) {
                    verticalTrack.bind("mousedown.jsp", function(e) {
                        if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) {
                            var clickedTrack = $(this), offset = clickedTrack.offset(), direction = e.pageY - offset.top - verticalDragPosition, scrollTimeout, isFirst = true, doScroll = function() {
                                var offset = clickedTrack.offset(), pos = e.pageY - offset.top - verticalDragHeight / 2, contentDragY = paneHeight * settings.scrollPagePercent, dragY = dragMaxY * contentDragY / (contentHeight - paneHeight);
                                if (direction < 0) {
                                    if (verticalDragPosition - dragY > pos) {
                                        jsp.scrollByY(-contentDragY);
                                    } else {
                                        positionDragY(pos);
                                    }
                                } else {
                                    if (direction > 0) {
                                        if (verticalDragPosition + dragY < pos) {
                                            jsp.scrollByY(contentDragY);
                                        } else {
                                            positionDragY(pos);
                                        }
                                    } else {
                                        cancelClick();
                                        return;
                                    }
                                }
                                scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq);
                                isFirst = false;
                            }, cancelClick = function() {
                                scrollTimeout && clearTimeout(scrollTimeout);
                                scrollTimeout = null;
                                $(document).unbind("mouseup.jsp", cancelClick);
                            };
                            doScroll();
                            $(document).bind("mouseup.jsp", cancelClick);
                            return false;
                        }
                    });
                }
                if (isScrollableH) {
                    horizontalTrack.bind("mousedown.jsp", function(e) {
                        if (e.originalTarget === undefined || e.originalTarget == e.currentTarget) {
                            var clickedTrack = $(this), offset = clickedTrack.offset(), direction = e.pageX - offset.left - horizontalDragPosition, scrollTimeout, isFirst = true, doScroll = function() {
                                var offset = clickedTrack.offset(), pos = e.pageX - offset.left - horizontalDragWidth / 2, contentDragX = paneWidth * settings.scrollPagePercent, dragX = dragMaxX * contentDragX / (contentWidth - paneWidth);
                                if (direction < 0) {
                                    if (horizontalDragPosition - dragX > pos) {
                                        jsp.scrollByX(-contentDragX);
                                    } else {
                                        positionDragX(pos);
                                    }
                                } else {
                                    if (direction > 0) {
                                        if (horizontalDragPosition + dragX < pos) {
                                            jsp.scrollByX(contentDragX);
                                        } else {
                                            positionDragX(pos);
                                        }
                                    } else {
                                        cancelClick();
                                        return;
                                    }
                                }
                                scrollTimeout = setTimeout(doScroll, isFirst ? settings.initialDelay : settings.trackClickRepeatFreq);
                                isFirst = false;
                            }, cancelClick = function() {
                                scrollTimeout && clearTimeout(scrollTimeout);
                                scrollTimeout = null;
                                $(document).unbind("mouseup.jsp", cancelClick);
                            };
                            doScroll();
                            $(document).bind("mouseup.jsp", cancelClick);
                            return false;
                        }
                    });
                }
            }
            function removeClickOnTrack() {
                if (horizontalTrack) {
                    horizontalTrack.unbind("mousedown.jsp");
                }
                if (verticalTrack) {
                    verticalTrack.unbind("mousedown.jsp");
                }
            }
            function cancelDrag() {
                $("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");
                if (verticalDrag) {
                    verticalDrag.removeClass("jspActive");
                }
                if (horizontalDrag) {
                    horizontalDrag.removeClass("jspActive");
                }
            }
            function positionDragY(destY, animate) {
                if (!isScrollableV) {
                    return;
                }
                if (destY < 0) {
                    destY = 0;
                } else {
                    if (destY > dragMaxY) {
                        destY = dragMaxY;
                    }
                }
                if (animate === undefined) {
                    animate = settings.animateScroll;
                }
                if (animate) {
                    jsp.animate(verticalDrag, "top", destY, _positionDragY);
                } else {
                    verticalDrag.css("top", destY);
                    _positionDragY(destY);
                }
            }
            function _positionDragY(destY) {
                if (destY === undefined) {
                    destY = verticalDrag.position().top;
                }
                container.scrollTop(0);
                verticalDragPosition = destY;
                var isAtTop = verticalDragPosition === 0, isAtBottom = verticalDragPosition == dragMaxY, percentScrolled = destY / dragMaxY, destTop = -percentScrolled * (contentHeight - paneHeight);
                if (wasAtTop != isAtTop || wasAtBottom != isAtBottom) {
                    wasAtTop = isAtTop;
                    wasAtBottom = isAtBottom;
                    elem.trigger("jsp-arrow-change", [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]);
                }
                updateVerticalArrows(isAtTop, isAtBottom);
                pane.css("top", destTop);
                elem.trigger("jsp-scroll-y", [-destTop, isAtTop, isAtBottom]).trigger("scroll");
            }
            function positionDragX(destX, animate) {
                if (!isScrollableH) {
                    return;
                }
                if (destX < 0) {
                    destX = 0;
                } else {
                    if (destX > dragMaxX) {
                        destX = dragMaxX;
                    }
                }
                if (animate === undefined) {
                    animate = settings.animateScroll;
                }
                if (animate) {
                    jsp.animate(horizontalDrag, "left", destX, _positionDragX);
                } else {
                    horizontalDrag.css("left", destX);
                    _positionDragX(destX);
                }
            }
            function _positionDragX(destX) {
                if (destX === undefined) {
                    destX = horizontalDrag.position().left;
                }
                container.scrollTop(0);
                horizontalDragPosition = destX;
                var isAtLeft = horizontalDragPosition === 0, isAtRight = horizontalDragPosition == dragMaxX, percentScrolled = destX / dragMaxX, destLeft = -percentScrolled * (contentWidth - paneWidth);
                if (wasAtLeft != isAtLeft || wasAtRight != isAtRight) {
                    wasAtLeft = isAtLeft;
                    wasAtRight = isAtRight;
                    elem.trigger("jsp-arrow-change", [wasAtTop, wasAtBottom, wasAtLeft, wasAtRight]);
                }
                updateHorizontalArrows(isAtLeft, isAtRight);
                pane.css("left", destLeft);
                elem.trigger("jsp-scroll-x", [-destLeft, isAtLeft, isAtRight]).trigger("scroll");
            }
            function updateVerticalArrows(isAtTop, isAtBottom) {
                if (settings.showArrows) {
                    arrowUp[isAtTop ? "addClass" : "removeClass"]("jspDisabled");
                    arrowDown[isAtBottom ? "addClass" : "removeClass"]("jspDisabled");
                }
            }
            function updateHorizontalArrows(isAtLeft, isAtRight) {
                if (settings.showArrows) {
                    arrowLeft[isAtLeft ? "addClass" : "removeClass"]("jspDisabled");
                    arrowRight[isAtRight ? "addClass" : "removeClass"]("jspDisabled");
                }
            }
            function scrollToY(destY, animate) {
                var percentScrolled = destY / (contentHeight - paneHeight);
                positionDragY(percentScrolled * dragMaxY, animate);
            }
            function scrollToX(destX, animate) {
                var percentScrolled = destX / (contentWidth - paneWidth);
                positionDragX(percentScrolled * dragMaxX, animate);
            }
            function scrollToElement(ele, stickToTop, animate) {
                var e, eleHeight, eleWidth, eleTop = 0, eleLeft = 0, viewportTop, viewportLeft, maxVisibleEleTop, maxVisibleEleLeft, destY, destX;
                try {
                    e = $(ele);
                } catch (err) {
                    return;
                }
                eleHeight = e.outerHeight();
                eleWidth = e.outerWidth();
                container.scrollTop(0);
                container.scrollLeft(0);
                while (!e.is(".jspPane")) {
                    eleTop += e.position().top;
                    eleLeft += e.position().left;
                    e = e.offsetParent();
                    if (/^body|html$/i.test(e[0].nodeName)) {
                        return;
                    }
                }
                viewportTop = contentPositionY();
                maxVisibleEleTop = viewportTop + paneHeight;
                if (eleTop < viewportTop || stickToTop) {
                    destY = eleTop - settings.horizontalGutter;
                } else {
                    if (eleTop + eleHeight > maxVisibleEleTop) {
                        destY = eleTop - paneHeight + eleHeight + settings.horizontalGutter;
                    }
                }
                if (!isNaN(destY)) {
                    scrollToY(destY, animate);
                }
                viewportLeft = contentPositionX();
                maxVisibleEleLeft = viewportLeft + paneWidth;
                if (eleLeft < viewportLeft || stickToTop) {
                    destX = eleLeft - settings.horizontalGutter;
                } else {
                    if (eleLeft + eleWidth > maxVisibleEleLeft) {
                        destX = eleLeft - paneWidth + eleWidth + settings.horizontalGutter;
                    }
                }
                if (!isNaN(destX)) {
                    scrollToX(destX, animate);
                }
            }
            function contentPositionX() {
                return -pane.position().left;
            }
            function contentPositionY() {
                return -pane.position().top;
            }
            function isCloseToBottom() {
                var scrollableHeight = contentHeight - paneHeight;
                return (scrollableHeight > 20) && (scrollableHeight - contentPositionY() < 10);
            }
            function isCloseToRight() {
                var scrollableWidth = contentWidth - paneWidth;
                return (scrollableWidth > 20) && (scrollableWidth - contentPositionX() < 10);
            }
            function initMousewheel() {
                container.unbind(mwEvent).bind(mwEvent, function(event, delta, deltaX, deltaY) {
                    var dX = horizontalDragPosition, dY = verticalDragPosition, factor = event.deltaFactor || settings.mouseWheelSpeed;
                    jsp.scrollBy(deltaX * factor, -deltaY * factor, false);
                    return dX == horizontalDragPosition && dY == verticalDragPosition;
                });
            }
            function removeMousewheel() {
                container.unbind(mwEvent);
            }
            function nil() {
                return false;
            }
            function initFocusHandler() {
                pane.find(":input,a").unbind("focus.jsp").bind("focus.jsp", function(e) {
                    scrollToElement(e.target, false);
                });
            }
            function removeFocusHandler() {
                pane.find(":input,a").unbind("focus.jsp");
            }
            function initKeyboardNav() {
                var keyDown, elementHasScrolled, validParents = [];
                isScrollableH && validParents.push(horizontalBar[0]);
                isScrollableV && validParents.push(verticalBar[0]);
                pane.focus(function() {
                    elem.focus();
                });
                elem.attr("tabindex", 0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp", function(e) {
                    if (e.target !== this && !(validParents.length && $(e.target).closest(validParents).length)) {
                        return;
                    }
                    var dX = horizontalDragPosition, dY = verticalDragPosition;
                    switch (e.keyCode) {
                        case 40:
                        case 38:
                        case 34:
                        case 32:
                        case 33:
                        case 39:
                        case 37:
                            keyDown = e.keyCode;
                            keyDownHandler();
                            break;
                        case 35:
                            scrollToY(contentHeight - paneHeight);
                            keyDown = null;
                            break;
                        case 36:
                            scrollToY(0);
                            keyDown = null;
                            break;
                    }
                    elementHasScrolled = e.keyCode == keyDown && dX != horizontalDragPosition || dY != verticalDragPosition;
                    return !elementHasScrolled;
                }).bind("keypress.jsp", function(e) {
                    if (e.keyCode == keyDown) {
                        keyDownHandler();
                    }
                    return !elementHasScrolled;
                });
                if (settings.hideFocus) {
                    elem.css("outline", "none");
                    if ("hideFocus" in container[0]) {
                        elem.attr("hideFocus", true);
                    }
                } else {
                    elem.css("outline", "");
                    if ("hideFocus" in container[0]) {
                        elem.attr("hideFocus", false);
                    }
                }
                function keyDownHandler() {
                    var dX = horizontalDragPosition, dY = verticalDragPosition;
                    switch (keyDown) {
                        case 40:
                            jsp.scrollByY(settings.keyboardSpeed, false);
                            break;
                        case 38:
                            jsp.scrollByY(-settings.keyboardSpeed, false);
                            break;
                        case 34:
                        case 32:
                            jsp.scrollByY(paneHeight * settings.scrollPagePercent, false);
                            break;
                        case 33:
                            jsp.scrollByY(-paneHeight * settings.scrollPagePercent, false);
                            break;
                        case 39:
                            jsp.scrollByX(settings.keyboardSpeed, false);
                            break;
                        case 37:
                            jsp.scrollByX(-settings.keyboardSpeed, false);
                            break;
                    }
                    elementHasScrolled = dX != horizontalDragPosition || dY != verticalDragPosition;
                    return elementHasScrolled;
                }
            }
            function removeKeyboardNav() {
                elem.attr("tabindex", "-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp");
            }
            function observeHash() {
                if (location.hash && location.hash.length > 1) {
                    var e, retryInt, hash = escape(location.hash.substr(1));
                    try {
                        e = $("#" + hash + ', a[name="' + hash + '"]');
                    } catch (err) {
                        return;
                    }
                    if (e.length && pane.find(hash)) {
                        if (container.scrollTop() === 0) {
                            retryInt = setInterval(function() {
                                if (container.scrollTop() > 0) {
                                    scrollToElement(e, true);
                                    $(document).scrollTop(container.position().top);
                                    clearInterval(retryInt);
                                }
                            }, 50);
                        } else {
                            scrollToElement(e, true);
                            $(document).scrollTop(container.position().top);
                        }
                    }
                }
            }
            function hijackInternalLinks() {
                if ($(document.body).data("jspHijack")) {
                    return;
                }
                $(document.body).data("jspHijack", true);
                $(document.body).delegate("a[href*=#]", "click", function(event) {
                    var href = this.href.substr(0, this.href.indexOf("#")), locationHref = location.href, hash, element, container, jsp, scrollTop, elementTop;
                    if (location.href.indexOf("#") !== -1) {
                        locationHref = location.href.substr(0, location.href.indexOf("#"));
                    }
                    if (href !== locationHref) {
                        return;
                    }
                    hash = escape(this.href.substr(this.href.indexOf("#") + 1));
                    element;
                    try {
                        element = $("#" + hash + ', a[name="' + hash + '"]');
                    } catch (e) {
                        return;
                    }
                    if (!element.length) {
                        return;
                    }
                    container = element.closest(".jspScrollable");
                    jsp = container.data("jsp");
                    jsp.scrollToElement(element, true);
                    if (container[0].scrollIntoView) {
                        scrollTop = $(window).scrollTop();
                        elementTop = element.offset().top;
                        if (elementTop < scrollTop || elementTop > scrollTop + $(window).height()) {
                            container[0].scrollIntoView();
                        }
                    }
                    event.preventDefault();
                });
            }
            function initTouch() {
                var startX, startY, touchStartX, touchStartY, moved, moving = false;
                container.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp", function(e) {
                    var touch = e.originalEvent.touches[0];
                    startX = contentPositionX();
                    startY = contentPositionY();
                    touchStartX = touch.pageX;
                    touchStartY = touch.pageY;
                    moved = false;
                    moving = true;
                }).bind("touchmove.jsp", function(ev) {
                    if (!moving) {
                        return;
                    }
                    var touchPos = ev.originalEvent.touches[0], dX = horizontalDragPosition, dY = verticalDragPosition;
                    jsp.scrollTo(startX + touchStartX - touchPos.pageX, startY + touchStartY - touchPos.pageY);
                    moved = moved || Math.abs(touchStartX - touchPos.pageX) > 5 || Math.abs(touchStartY - touchPos.pageY) > 5;
                    return dX == horizontalDragPosition && dY == verticalDragPosition;
                }).bind("touchend.jsp", function(e) {
                    moving = false;
                }).bind("click.jsp-touchclick", function(e) {
                    if (moved) {
                        moved = false;
                        return false;
                    }
                });
            }
            function destroy() {
                var currentY = contentPositionY(), currentX = contentPositionX();
                elem.removeClass("jspScrollable").unbind(".jsp");
                elem.replaceWith(originalElement.append(pane.children()));
                originalElement.scrollTop(currentY);
                originalElement.scrollLeft(currentX);
                if (reinitialiseInterval) {
                    clearInterval(reinitialiseInterval);
                }
            }
            $.extend(jsp, {reinitialise: function(s) {
                    s = $.extend({}, settings, s);
                    initialise(s);
                },scrollToElement: function(ele, stickToTop, animate) {
                    scrollToElement(ele, stickToTop, animate);
                },scrollTo: function(destX, destY, animate) {
                    scrollToX(destX, animate);
                    scrollToY(destY, animate);
                },scrollToX: function(destX, animate) {
                    scrollToX(destX, animate);
                },scrollToY: function(destY, animate) {
                    scrollToY(destY, animate);
                },scrollToPercentX: function(destPercentX, animate) {
                    scrollToX(destPercentX * (contentWidth - paneWidth), animate);
                },scrollToPercentY: function(destPercentY, animate) {
                    scrollToY(destPercentY * (contentHeight - paneHeight), animate);
                },scrollBy: function(deltaX, deltaY, animate) {
                    jsp.scrollByX(deltaX, animate);
                    jsp.scrollByY(deltaY, animate);
                },scrollByX: function(deltaX, animate) {
                    var destX = contentPositionX() + Math[deltaX < 0 ? "floor" : "ceil"](deltaX), percentScrolled = destX / (contentWidth - paneWidth);
                    positionDragX(percentScrolled * dragMaxX, animate);
                },scrollByY: function(deltaY, animate) {
                    var destY = contentPositionY() + Math[deltaY < 0 ? "floor" : "ceil"](deltaY), percentScrolled = destY / (contentHeight - paneHeight);
                    positionDragY(percentScrolled * dragMaxY, animate);
                },positionDragX: function(x, animate) {
                    positionDragX(x, animate);
                },positionDragY: function(y, animate) {
                    positionDragY(y, animate);
                },animate: function(ele, prop, value, stepCallback) {
                    var params = {};
                    params[prop] = value;
                    ele.animate(params, {duration: settings.animateDuration,easing: settings.animateEase,queue: false,step: stepCallback});
                },getContentPositionX: function() {
                    return contentPositionX();
                },getContentPositionY: function() {
                    return contentPositionY();
                },getContentWidth: function() {
                    return contentWidth;
                },getContentHeight: function() {
                    return contentHeight;
                },getPercentScrolledX: function() {
                    return contentPositionX() / (contentWidth - paneWidth);
                },getPercentScrolledY: function() {
                    return contentPositionY() / (contentHeight - paneHeight);
                },getIsScrollableH: function() {
                    return isScrollableH;
                },getIsScrollableV: function() {
                    return isScrollableV;
                },getContentPane: function() {
                    return pane;
                },scrollToBottom: function(animate) {
                    positionDragY(dragMaxY, animate);
                },hijackInternalLinks: $.noop,destroy: function() {
                    destroy();
                }});
            initialise(s);
        }
        settings = $.extend({}, $.fn.jScrollPane.defaults, settings);
        $.each(["arrowButtonSpeed", "trackClickSpeed", "keyboardSpeed"], function() {
            settings[this] = settings[this] || settings.speed;
        });
        return this.each(function() {
            var elem = $(this), jspApi = elem.data("jsp");
            if (jspApi) {
                jspApi.reinitialise(settings);
            } else {
                $("script", elem).filter('[type="text/javascript"],:not([type])').remove();
                jspApi = new JScrollPane(elem, settings);
                elem.data("jsp", jspApi);
            }
        });
    };
    $.fn.jScrollPane.defaults = {showArrows: false,maintainPosition: true,stickToBottom: false,stickToRight: false,clickOnTrack: true,autoReinitialise: false,autoReinitialiseDelay: 500,verticalDragMinHeight: 0,verticalDragMaxHeight: 99999,horizontalDragMinWidth: 0,horizontalDragMaxWidth: 99999,contentWidth: undefined,animateScroll: false,animateDuration: 300,animateEase: "linear",hijackInternalLinks: false,verticalGutter: 4,horizontalGutter: 4,mouseWheelSpeed: 3,arrowButtonSpeed: 0,arrowRepeatFreq: 50,arrowScrollOnHover: false,trackClickSpeed: 0,trackClickRepeatFreq: 70,verticalArrowPositions: "split",horizontalArrowPositions: "split",enableKeyboardNavigation: true,hideFocus: false,keyboardSpeed: 0,initialDelay: 300,speed: 30,scrollPagePercent: 0.8};
})(jQuery, this);
(function() {
    function r(a, b) {
        var c;
        a || (a = {});
        for (c in b) {
            a[c] = b[c];
        }
        return a;
    }
    function x() {
        var a, b = arguments, c, d = {}, e = function(a, b) {
            var c, d;
            typeof a !== "object" && (a = {});
            for (d in b) {
                b.hasOwnProperty(d) && (c = b[d], a[d] = c && typeof c === "object" && Object.prototype.toString.call(c) !== "[object Array]" && typeof c.nodeType !== "number" ? e(a[d] || {}, c) : b[d]);
            }
            return a;
        };
        b[0] === !0 && (d = b[1], b = Array.prototype.slice.call(b, 2));
        c = b.length;
        for (a = 0; a < c; a++) {
            d = e(d, b[a]);
        }
        return d;
    }
    function z(a, b) {
        return parseInt(a, b || 10);
    }
    function fa(a) {
        return typeof a === "string";
    }
    function S(a) {
        return typeof a === "object";
    }
    function Ka(a) {
        return Object.prototype.toString.call(a) === "[object Array]";
    }
    function wa(a) {
        return typeof a === "number";
    }
    function xa(a) {
        return P.log(a) / P.LN10;
    }
    function ga(a) {
        return P.pow(10, a);
    }
    function ha(a, b) {
        for (var c = a.length; c--; ) {
            if (a[c] === b) {
                a.splice(c, 1);
                break;
            }
        }
    }
    function t(a) {
        return a !== u && a !== null;
    }
    function v(a, b, c) {
        var d, e;
        if (fa(b)) {
            t(c) ? a.setAttribute(b, c) : a && a.getAttribute && (e = a.getAttribute(b));
        } else {
            if (t(b) && S(b)) {
                for (d in b) {
                    a.setAttribute(d, b[d]);
                }
            }
        }
        return e;
    }
    function ja(a) {
        return Ka(a) ? a : [a];
    }
    function n() {
        var a = arguments, b, c, d = a.length;
        for (b = 0; b < d; b++) {
            if (c = a[b], typeof c !== "undefined" && c !== null) {
                return c;
            }
        }
    }
    function D(a, b) {
        if (ya && b && b.opacity !== u) {
            b.filter = "alpha(opacity=" + b.opacity * 100 + ")";
        }
        r(a.style, b);
    }
    function T(a, b, c, d, e) {
        a = y.createElement(a);
        b && r(a, b);
        e && D(a, {padding: 0,border: Q,margin: 0});
        c && D(a, c);
        d && d.appendChild(a);
        return a;
    }
    function ia(a, b) {
        var c = function() {
        };
        c.prototype = new a;
        r(c.prototype, b);
        return c;
    }
    function Da(a, b, c, d) {
        var e = G.lang, a = +a || 0, f = b === -1 ? (a.toString().split(".")[1] || "").length : isNaN(b = M(b)) ? 2 : b, b = c === void 0 ? e.decimalPoint : c, d = d === void 0 ? e.thousandsSep : d, e = a < 0 ? "-" : "", c = String(z(a = M(a).toFixed(f))), g = c.length > 3 ? c.length % 3 : 0;
        return e + (g ? c.substr(0, g) + d : "") + c.substr(g).replace(/(\d{3})(?=\d)/g, "$1" + d) + (f ? b + M(a - c).toFixed(f).slice(2) : "");
    }
    function Ea(a, b) {
        return Array((b || 2) + 1 - String(a).length).join(0) + a;
    }
    function Va(a, b, c) {
        var d = a[b];
        a[b] = function() {
            var a = Array.prototype.slice.call(arguments);
            a.unshift(d);
            return c.apply(this, a);
        };
    }
    function Fa(a, b) {
        for (var c = "{", d = !1, e, f, g, h, i, j = []; (c = a.indexOf(c)) !== -1; ) {
            e = a.slice(0, c);
            if (d) {
                f = e.split(":");
                g = f.shift().split(".");
                i = g.length;
                e = b;
                for (h = 0; h < i; h++) {
                    e = e[g[h]];
                }
                if (f.length) {
                    f = f.join(":"), g = /\.([0-9])/, h = G.lang, i = void 0, /f$/.test(f) ? (i = (i = f.match(g)) ? i[1] : -1, e = Da(e, i, h.decimalPoint, f.indexOf(",") > -1 ? h.thousandsSep : "")) : e = ab(f, e);
                }
            }
            j.push(e);
            a = a.slice(c + 1);
            c = (d = !d) ? "}" : "{";
        }
        j.push(a);
        return j.join("");
    }
    function mb(a) {
        return P.pow(10, N(P.log(a) / P.LN10));
    }
    function nb(a, b, c, d) {
        var e, c = n(c, 1);
        e = a / c;
        b || (b = [1, 2, 2.5, 5, 10], d && d.allowDecimals === !1 && (c === 1 ? b = [1, 2, 5, 10] : c <= 0.1 && (b = [1 / c])));
        for (d = 0; d < b.length; d++) {
            if (a = b[d], e <= (b[d] + (b[d + 1] || b[d])) / 2) {
                break;
            }
        }
        a *= c;
        return a;
    }
    function Ab() {
        this.symbol = this.color = 0;
    }
    function ob(a, b) {
        var c = a.length, d, e;
        for (e = 0; e < c; e++) {
            a[e].ss_i = e;
        }
        a.sort(function(a, c) {
            d = b(a, c);
            return d === 0 ? a.ss_i - c.ss_i : d;
        });
        for (e = 0; e < c; e++) {
            delete a[e].ss_i;
        }
    }
    function La(a) {
        for (var b = a.length, c = a[0]; b--; ) {
            a[b] < c && (c = a[b]);
        }
        return c;
    }
    function za(a) {
        for (var b = a.length, c = a[0]; b--; ) {
            a[b] > c && (c = a[b]);
        }
        return c;
    }
    function Ma(a, b) {
        for (var c in a) {
            a[c] && a[c] !== b && a[c].destroy && a[c].destroy(), delete a[c];
        }
    }
    function Na(a) {
        bb || (bb = T(Ga));
        a && bb.appendChild(a);
        bb.innerHTML = "";
    }
    function ka(a, b) {
        var c = "Highcharts error #" + a + ": www.highcharts.com/errors/" + a;
        if (b) {
            throw c;
        } else {
            C.console && console.log(c);
        }
    }
    function aa(a) {
        return parseFloat(a.toPrecision(14));
    }
    function Oa(a, b) {
        oa = n(a, b.animation);
    }
    function Bb() {
        var a = G.global.useUTC, b = a ? "getUTC" : "get", c = a ? "setUTC" : "set";
        Pa = (a && G.global.timezoneOffset || 0) * 60000;
        cb = a ? Date.UTC : function(a, b, c, g, h, i) {
            return (new Date(a, b, n(c, 1), n(g, 0), n(h, 0), n(i, 0))).getTime();
        };
        pb = b + "Minutes";
        qb = b + "Hours";
        rb = b + "Day";
        Wa = b + "Date";
        db = b + "Month";
        eb = b + "FullYear";
        Cb = c + "Minutes";
        Db = c + "Hours";
        sb = c + "Date";
        Eb = c + "Month";
        Fb = c + "FullYear";
    }
    function pa() {
    }
    function Qa(a, b, c, d) {
        this.axis = a;
        this.pos = b;
        this.type = c || "";
        this.isNew = !0;
        !c && !d && this.addLabel();
    }
    function qa() {
        this.init.apply(this, arguments);
    }
    function Gb(a, b, c, d, e, f) {
        var g = a.chart.inverted;
        this.axis = a;
        this.isNegative = c;
        this.options = b;
        this.x = d;
        this.total = null;
        this.points = {};
        this.stack = e;
        this.percent = f === "percent";
        this.alignOptions = {align: b.align || (g ? c ? "left" : "right" : "center"),verticalAlign: b.verticalAlign || (g ? "middle" : c ? "bottom" : "top"),y: n(b.y, g ? 4 : c ? 14 : -6),x: n(b.x, g ? c ? -6 : 6 : 0)};
        this.textAlign = b.textAlign || (g ? c ? "right" : "left" : "center");
    }
    function tb() {
        this.init.apply(this, arguments);
    }
    function fb() {
        this.init.apply(this, arguments);
    }
    var u, y = document, C = window, P = Math, w = P.round, N = P.floor, Ha = P.ceil, s = P.max, I = P.min, M = P.abs, U = P.cos, ba = P.sin, Aa = P.PI, Ba = Aa * 2 / 360, ra = navigator.userAgent, Hb = C.opera, ya = /msie/i.test(ra) && !Hb, gb = y.documentMode === 8, hb = /AppleWebKit/.test(ra), Xa = /Firefox/.test(ra), Ib = /(Mobile|Android|Windows Phone)/.test(ra), Ca = "http://www.w3.org/2000/svg", V = !!y.createElementNS && !!y.createElementNS(Ca, "svg").createSVGRect, Nb = Xa && parseInt(ra.split("Firefox/")[1], 10) < 4, da = !V && !ya && !!y.createElement("canvas").getContext, Ya, ib = y.documentElement.ontouchstart !== u, Jb = {}, ub = 0, bb, G, ab, oa, vb, E, la = function() {
    }, Ia = [], Ga = "div", Q = "none", Ob = /^[0-9]+$/, Kb = "rgba(192,192,192," + (V ? 0.0001 : 0.002) + ")", Lb = "stroke-width", cb, Pa, pb, qb, rb, Wa, db, eb, Cb, Db, sb, Eb, Fb, L = {};
    C.Highcharts = C.Highcharts ? ka(16, !0) : {};
    ab = function(a, b, c) {
        if (!t(b) || isNaN(b)) {
            return "Invalid date";
        }
        var a = n(a, "%Y-%m-%d %H:%M:%S"), d = new Date(b - Pa), e, f = d[qb](), g = d[rb](), h = d[Wa](), i = d[db](), j = d[eb](), k = G.lang, l = k.weekdays, d = r({a: l[g].substr(0, 3),A: l[g],d: Ea(h),e: h,b: k.shortMonths[i],B: k.months[i],m: Ea(i + 1),y: j.toString().substr(2, 2),Y: j,H: Ea(f),I: Ea(f % 12 || 12),l: f % 12 || 12,M: Ea(d[pb]()),p: f < 12 ? "AM" : "PM",P: f < 12 ? "am" : "pm",S: Ea(d.getSeconds()),L: Ea(w(b % 1000), 3)}, Highcharts.dateFormats);
        for (e in d) {
            for (; a.indexOf("%" + e) !== -1; ) {
                a = a.replace("%" + e, typeof d[e] === "function" ? d[e](b) : d[e]);
            }
        }
        return c ? a.substr(0, 1).toUpperCase() + a.substr(1) : a;
    };
    Ab.prototype = {wrapColor: function(a) {
            if (this.color >= a) {
                this.color = 0;
            }
        },wrapSymbol: function(a) {
            if (this.symbol >= a) {
                this.symbol = 0;
            }
        }};
    E = function() {
        for (var a = 0, b = arguments, c = b.length, d = {}; a < c; a++) {
            d[b[a++]] = b[a];
        }
        return d;
    }("millisecond", 1, "second", 1000, "minute", 60000, "hour", 3600000, "day", 86400000, "week", 604800000, "month", 2678400000, "year", 31556952000);
    vb = {init: function(a, b, c) {
            var b = b || "", d = a.shift, e = b.indexOf("C") > -1, f = e ? 7 : 3, g, b = b.split(" "), c = [].concat(c), h, i, j = function(a) {
                for (g = a.length; g--; ) {
                    a[g] === "M" && a.splice(g + 1, 0, a[g + 1], a[g + 2], a[g + 1], a[g + 2]);
                }
            };
            e && (j(b), j(c));
            a.isArea && (h = b.splice(b.length - 6, 6), i = c.splice(c.length - 6, 6));
            if (d <= c.length / f && b.length === c.length) {
                for (; d--; ) {
                    c = [].concat(c).splice(0, f).concat(c);
                }
            }
            a.shift = 0;
            if (b.length) {
                for (a = c.length; b.length < a; ) {
                    d = [].concat(b).splice(b.length - f, f), e && (d[f - 6] = d[f - 2], d[f - 5] = d[f - 1]), b = b.concat(d);
                }
            }
            h && (b = b.concat(h), c = c.concat(i));
            return [b, c];
        },step: function(a, b, c, d) {
            var e = [], f = a.length;
            if (c === 1) {
                e = d;
            } else {
                if (f === b.length && c < 1) {
                    for (; f--; ) {
                        d = parseFloat(a[f]), e[f] = isNaN(d) ? a[f] : c * parseFloat(b[f] - d) + d;
                    }
                } else {
                    e = b;
                }
            }
            return e;
        }};
    (function(a) {
        C.HighchartsAdapter = C.HighchartsAdapter || a && {init: function(b) {
                var c = a.fx, d = c.step, e, f = a.Tween, g = f && f.propHooks;
                e = a.cssHooks.opacity;
                a.extend(a.easing, {easeOutQuad: function(a, b, c, d, e) {
                        return -d * (b /= e) * (b - 2) + c;
                    }});
                a.each(["cur", "_default", "width", "height", "opacity"], function(a, b) {
                    var e = d, k;
                    b === "cur" ? e = c.prototype : b === "_default" && f && (e = g[b], b = "set");
                    (k = e[b]) && (e[b] = function(c) {
                        var d, c = a ? c : this;
                        if (c.prop !== "align") {
                            return d = c.elem, d.attr ? d.attr(c.prop, b === "cur" ? u : c.now) : k.apply(this, arguments);
                        }
                    });
                });
                Va(e, "get", function(a, b, c) {
                    return b.attr ? b.opacity || 0 : a.call(this, b, c);
                });
                e = function(a) {
                    var c = a.elem, d;
                    if (!a.started) {
                        d = b.init(c, c.d, c.toD), a.start = d[0], a.end = d[1], a.started = !0;
                    }
                    c.attr("d", b.step(a.start, a.end, a.pos, c.toD));
                };
                f ? g.d = {set: e} : d.d = e;
                this.each = Array.prototype.forEach ? function(a, b) {
                    return Array.prototype.forEach.call(a, b);
                } : function(a, b) {
                    for (var c = 0, d = a.length; c < d; c++) {
                        if (b.call(a[c], a[c], c, a) === !1) {
                            return c;
                        }
                    }
                };
                a.fn.highcharts = function() {
                    var a = "Chart", b = arguments, c, d;
                    fa(b[0]) && (a = b[0], b = Array.prototype.slice.call(b, 1));
                    c = b[0];
                    if (c !== u) {
                        c.chart = c.chart || {}, c.chart.renderTo = this[0], new Highcharts[a](c, b[1]), d = this;
                    }
                    c === u && (d = Ia[v(this[0], "data-highcharts-chart")]);
                    return d;
                };
            },getScript: a.getScript,inArray: a.inArray,adapterRun: function(b, c) {
                return a(b)[c]();
            },grep: a.grep,map: function(a, c) {
                for (var d = [], e = 0, f = a.length; e < f; e++) {
                    d[e] = c.call(a[e], a[e], e, a);
                }
                return d;
            },offset: function(b) {
                return a(b).offset();
            },addEvent: function(b, c, d) {
                a(b).bind(c, d);
            },removeEvent: function(b, c, d) {
                var e = y.removeEventListener ? "removeEventListener" : "detachEvent";
                y[e] && b && !b[e] && (b[e] = function() {
                });
                a(b).unbind(c, d);
            },fireEvent: function(b, c, d, e) {
                var f = a.Event(c), g = "detached" + c, h;
                !ya && d && (delete d.layerX, delete d.layerY);
                r(f, d);
                b[c] && (b[g] = b[c], b[c] = null);
                a.each(["preventDefault", "stopPropagation"], function(a, b) {
                    var c = f[b];
                    f[b] = function() {
                        try {
                            c.call(f);
                        } catch (a) {
                            b === "preventDefault" && (h = !0);
                        }
                    };
                });
                a(b).trigger(f);
                b[g] && (b[c] = b[g], b[g] = null);
                e && !f.isDefaultPrevented() && !h && e(f);
            },washMouseEvent: function(a) {
                var c = a.originalEvent || a;
                if (c.pageX === u) {
                    c.pageX = a.pageX, c.pageY = a.pageY;
                }
                return c;
            },animate: function(b, c, d) {
                var e = a(b);
                if (!b.style) {
                    b.style = {};
                }
                if (c.d) {
                    b.toD = c.d, c.d = 1;
                }
                e.stop();
                c.opacity !== u && b.attr && (c.opacity += "px");
                e.animate(c, d);
            },stop: function(b) {
                a(b).stop();
            }};
    })(C.jQuery);
    var W = C.HighchartsAdapter, J = W || {};
    W && W.init.call(W, vb);
    var jb = J.adapterRun, Pb = J.getScript, sa = J.inArray, p = J.each, wb = J.grep, Qb = J.offset, Ra = J.map, F = J.addEvent, X = J.removeEvent, A = J.fireEvent, Rb = J.washMouseEvent, kb = J.animate, Za = J.stop, J = {enabled: !0,x: 0,y: 15,style: {color: "#666",cursor: "default",fontSize: "11px"}};
    G = {colors: "#2f7ed8,#0d233a,#8bbc21,#910000,#1aadce,#492970,#f28f43,#77a1e5,#c42525,#a6c96a".split(","),symbols: ["circle", "diamond", "square", "triangle", "triangle-down"],lang: {loading: "Loading...",months: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint: ".",numericSymbols: "k,M,G,T,P,E".split(","),resetZoom: "Reset zoom",resetZoomTitle: "Reset zoom level 1:1",thousandsSep: ","},global: {useUTC: !0,canvasToolsURL: "http://code.highcharts.com/3.0.9/modules/canvas-tools.js",VMLRadialGradientURL: "http://code.highcharts.com/3.0.9/gfx/vml-radial-gradient.png"},chart: {borderColor: "#4572A7",borderRadius: 5,defaultSeriesType: "line",ignoreHiddenSeries: !0,spacing: [10, 10, 15, 10],style: {fontFamily: '"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize: "12px"},backgroundColor: "#FFFFFF",plotBorderColor: "#C0C0C0",resetZoomButton: {theme: {zIndex: 20},position: {align: "right",x: -10,y: 10}}},title: {text: "Chart title",align: "center",margin: 15,style: {color: "#274b6d",fontSize: "16px"}},subtitle: {text: "",align: "center",style: {color: "#4d759e"}},plotOptions: {line: {allowPointSelect: !1,showCheckbox: !1,animation: {duration: 1000},events: {},lineWidth: 2,marker: {enabled: !0,lineWidth: 0,radius: 4,lineColor: "#FFFFFF",states: {hover: {enabled: !0},select: {fillColor: "#FFFFFF",lineColor: "#000000",lineWidth: 2}}},point: {events: {}},dataLabels: x(J, {align: "center",enabled: !1,formatter: function() {
                        return this.y === null ? "" : Da(this.y, -1);
                    },verticalAlign: "bottom",y: 0}),cropThreshold: 300,pointRange: 0,states: {hover: {marker: {}},select: {marker: {}}},stickyTracking: !0,turboThreshold: 1000}},labels: {style: {position: "absolute",color: "#3E576F"}},legend: {enabled: !0,align: "center",layout: "horizontal",labelFormatter: function() {
                return this.name;
            },borderWidth: 1,borderColor: "#909090",borderRadius: 5,navigation: {activeColor: "#274b6d",inactiveColor: "#CCC"},shadow: !1,itemStyle: {cursor: "pointer",color: "#274b6d",fontSize: "12px"},itemHoverStyle: {color: "#000"},itemHiddenStyle: {color: "#CCC"},itemCheckboxStyle: {position: "absolute",width: "13px",height: "13px"},symbolPadding: 5,verticalAlign: "bottom",x: 0,y: 0,title: {style: {fontWeight: "bold"}}},loading: {labelStyle: {fontWeight: "bold",position: "relative",top: "1em"},style: {position: "absolute",backgroundColor: "white",opacity: 0.5,textAlign: "center"}},tooltip: {enabled: !0,animation: V,backgroundColor: "rgba(255, 255, 255, .85)",borderWidth: 1,borderRadius: 3,dateTimeLabelFormats: {millisecond: "%A, %b %e, %H:%M:%S.%L",second: "%A, %b %e, %H:%M:%S",minute: "%A, %b %e, %H:%M",hour: "%A, %b %e, %H:%M",day: "%A, %b %e, %Y",week: "Week from %A, %b %e, %Y",month: "%B %Y",year: "%Y"},headerFormat: '<span style="font-size: 10px">{point.key}</span><br/>',pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow: !0,snap: Ib ? 25 : 10,style: {color: "#333333",cursor: "default",fontSize: "12px",padding: "8px",whiteSpace: "nowrap"}},credits: {enabled: !0,text: "",href: "http://www.highcharts.com",position: {align: "right",x: -10,verticalAlign: "bottom",y: -5},style: {cursor: "pointer",color: "#909090",fontSize: "9px"}}};
    var Y = G.plotOptions, W = Y.line;
    Bb();
    var Sb = /rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/, Tb = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/, Ub = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/, ta = function(a) {
        var b = [], c, d;
        (function(a) {
            a && a.stops ? d = Ra(a.stops, function(a) {
                return ta(a[1]);
            }) : (c = Sb.exec(a)) ? b = [z(c[1]), z(c[2]), z(c[3]), parseFloat(c[4], 10)] : (c = Tb.exec(a)) ? b = [z(c[1], 16), z(c[2], 16), z(c[3], 16), 1] : (c = Ub.exec(a)) && (b = [z(c[1]), z(c[2]), z(c[3]), 1]);
        })(a);
        return {get: function(c) {
                var f;
                d ? (f = x(a), f.stops = [].concat(f.stops), p(d, function(a, b) {
                    f.stops[b] = [f.stops[b][0], a.get(c)];
                })) : f = b && !isNaN(b[0]) ? c === "rgb" ? "rgb(" + b[0] + "," + b[1] + "," + b[2] + ")" : c === "a" ? b[3] : "rgba(" + b.join(",") + ")" : a;
                return f;
            },brighten: function(a) {
                if (d) {
                    p(d, function(b) {
                        b.brighten(a);
                    });
                } else {
                    if (wa(a) && a !== 0) {
                        var c;
                        for (c = 0; c < 3; c++) {
                            b[c] += z(a * 255), b[c] < 0 && (b[c] = 0), b[c] > 255 && (b[c] = 255);
                        }
                    }
                }
                return this;
            },rgba: b,setOpacity: function(a) {
                b[3] = a;
                return this;
            }};
    };
    pa.prototype = {init: function(a, b) {
            this.element = b === "span" ? T(b) : y.createElementNS(Ca, b);
            this.renderer = a;
            this.attrSetters = {};
        },opacity: 1,animate: function(a, b, c) {
            b = n(b, oa, !0);
            Za(this);
            if (b) {
                b = x(b);
                if (c) {
                    b.complete = c;
                }
                kb(this, a, b);
            } else {
                this.attr(a), c && c();
            }
        },attr: function(a, b) {
            var c, d, e, f, g = this.element, h = g.nodeName.toLowerCase(), i = this.renderer, j, k = this.attrSetters, l = this.shadows, m, q, o = this;
            fa(a) && t(b) && (c = a, a = {}, a[c] = b);
            if (fa(a)) {
                c = a, h === "circle" ? c = {x: "cx",y: "cy"}[c] || c : c === "strokeWidth" && (c = "stroke-width"), o = v(g, c) || this[c] || 0, c !== "d" && c !== "visibility" && c !== "fill" && (o = parseFloat(o));
            } else {
                for (c in a) {
                    if (j = !1, d = a[c], e = k[c] && k[c].call(this, d, c), e !== !1) {
                        e !== u && (d = e);
                        if (c === "d") {
                            d && d.join && (d = d.join(" ")), /(NaN| {2}|^$)/.test(d) && (d = "M 0 0");
                        } else {
                            if (c === "x" && h === "text") {
                                for (e = 0; e < g.childNodes.length; e++) {
                                    f = g.childNodes[e], v(f, "x") === v(g, "x") && v(f, "x", d);
                                }
                            } else {
                                if (this.rotation && (c === "x" || c === "y")) {
                                    q = !0;
                                } else {
                                    if (c === "fill") {
                                        d = i.color(d, g, c);
                                    } else {
                                        if (h === "circle" && (c === "x" || c === "y")) {
                                            c = {x: "cx",y: "cy"}[c] || c;
                                        } else {
                                            if (h === "rect" && c === "r") {
                                                v(g, {rx: d,ry: d}), j = !0;
                                            } else {
                                                if (c === "translateX" || c === "translateY" || c === "rotation" || c === "verticalAlign" || c === "scaleX" || c === "scaleY") {
                                                    j = q = !0;
                                                } else {
                                                    if (c === "stroke") {
                                                        d = i.color(d, g, c);
                                                    } else {
                                                        if (c === "dashstyle") {
                                                            if (c = "stroke-dasharray", d = d && d.toLowerCase(), d === "solid") {
                                                                d = Q;
                                                            } else {
                                                                if (d) {
                                                                    d = d.replace("shortdashdotdot", "3,1,1,1,1,1,").replace("shortdashdot", "3,1,1,1").replace("shortdot", "1,1,").replace("shortdash", "3,1,").replace("longdash", "8,3,").replace(/dot/g, "1,3,").replace("dash", "4,3,").replace(/,$/, "").split(",");
                                                                    for (e = d.length; e--; ) {
                                                                        d[e] = z(d[e]) * n(a["stroke-width"], this["stroke-width"]);
                                                                    }
                                                                    d = d.join(",");
                                                                }
                                                            }
                                                        } else {
                                                            if (c === "width") {
                                                                d = z(d);
                                                            } else {
                                                                if (c === "align") {
                                                                    c = "text-anchor", d = {left: "start",center: "middle",right: "end"}[d];
                                                                } else {
                                                                    if (c === "title") {
                                                                        e = g.getElementsByTagName("title")[0], e || (e = y.createElementNS(Ca, "title"), g.appendChild(e)), e.textContent = d;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        c === "strokeWidth" && (c = "stroke-width");
                        if (c === "stroke-width" || c === "stroke") {
                            this[c] = d;
                            if (this.stroke && this["stroke-width"]) {
                                v(g, "stroke", this.stroke), v(g, "stroke-width", this["stroke-width"]), this.hasStroke = !0;
                            } else {
                                if (c === "stroke-width" && d === 0 && this.hasStroke) {
                                    g.removeAttribute("stroke"), this.hasStroke = !1;
                                }
                            }
                            j = !0;
                        }
                        this.symbolName && /^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c) && (m || (this.symbolAttr(a), m = !0), j = !0);
                        if (l && /^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)) {
                            for (e = l.length; e--; ) {
                                v(l[e], c, c === "height" ? s(d - (l[e].cutHeight || 0), 0) : d);
                            }
                        }
                        if ((c === "width" || c === "height") && h === "rect" && d < 0) {
                            d = 0;
                        }
                        this[c] = d;
                        c === "text" ? (d !== this.textStr && delete this.bBox, this.textStr = d, this.added && i.buildText(this)) : j || v(g, c, d);
                    }
                }
                q && this.updateTransform();
            }
            return o;
        },addClass: function(a) {
            var b = this.element, c = v(b, "class") || "";
            c.indexOf(a) === -1 && v(b, "class", c + " " + a);
            return this;
        },symbolAttr: function(a) {
            var b = this;
            p("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","), function(c) {
                b[c] = n(a[c], b[c]);
            });
            b.attr({d: b.renderer.symbols[b.symbolName](b.x, b.y, b.width, b.height, b)});
        },clip: function(a) {
            return this.attr("clip-path", a ? "url(" + this.renderer.url + "#" + a.id + ")" : Q);
        },crisp: function(a, b, c, d, e) {
            var f, g = {}, h = {}, i, a = a || this.strokeWidth || this.attr && this.attr("stroke-width") || 0;
            i = w(a) % 2 / 2;
            h.x = N(b || this.x || 0) + i;
            h.y = N(c || this.y || 0) + i;
            h.width = N((d || this.width || 0) - 2 * i);
            h.height = N((e || this.height || 0) - 2 * i);
            h.strokeWidth = a;
            for (f in h) {
                this[f] !== h[f] && (this[f] = g[f] = h[f]);
            }
            return g;
        },css: function(a) {
            var b = this.element, c = this.textWidth = a && a.width && b.nodeName.toLowerCase() === "text" && z(a.width), d, e = "", f = function(a, b) {
                return "-" + b.toLowerCase();
            };
            if (a && a.color) {
                a.fill = a.color;
            }
            this.styles = a = r(this.styles, a);
            c && delete a.width;
            if (ya && !V) {
                D(this.element, a);
            } else {
                for (d in a) {
                    e += d.replace(/([A-Z])/g, f) + ":" + a[d] + ";";
                }
                v(b, "style", e);
            }
            c && this.added && this.renderer.buildText(this);
            return this;
        },on: function(a, b) {
            var c = this, d = c.element;
            ib && a === "click" ? (d.ontouchstart = function(a) {
                c.touchEventFired = Date.now();
                a.preventDefault();
                b.call(d, a);
            }, d.onclick = function(a) {
                (ra.indexOf("Android") === -1 || Date.now() - (c.touchEventFired || 0) > 1100) && b.call(d, a);
            }) : d["on" + a] = b;
            return this;
        },setRadialReference: function(a) {
            this.element.radialReference = a;
            return this;
        },translate: function(a, b) {
            return this.attr({translateX: a,translateY: b});
        },invert: function() {
            this.inverted = !0;
            this.updateTransform();
            return this;
        },updateTransform: function() {
            var a = this.translateX || 0, b = this.translateY || 0, c = this.scaleX, d = this.scaleY, e = this.inverted, f = this.rotation;
            e && (a += this.attr("width"), b += this.attr("height"));
            a = ["translate(" + a + "," + b + ")"];
            e ? a.push("rotate(90) scale(-1,1)") : f && a.push("rotate(" + f + " " + (this.x || 0) + " " + (this.y || 0) + ")");
            (t(c) || t(d)) && a.push("scale(" + n(c, 1) + " " + n(d, 1) + ")");
            a.length && v(this.element, "transform", a.join(" "));
        },toFront: function() {
            var a = this.element;
            a.parentNode.appendChild(a);
            return this;
        },align: function(a, b, c) {
            var d, e, f, g, h = {};
            e = this.renderer;
            f = e.alignedObjects;
            if (a) {
                if (this.alignOptions = a, this.alignByTranslate = b, !c || fa(c)) {
                    this.alignTo = d = c || "renderer", ha(f, this), f.push(this), c = null;
                }
            } else {
                a = this.alignOptions, b = this.alignByTranslate, d = this.alignTo;
            }
            c = n(c, e[d], e);
            d = a.align;
            e = a.verticalAlign;
            f = (c.x || 0) + (a.x || 0);
            g = (c.y || 0) + (a.y || 0);
            if (d === "right" || d === "center") {
                f += (c.width - (a.width || 0)) / {right: 1,center: 2}[d];
            }
            h[b ? "translateX" : "x"] = w(f);
            if (e === "bottom" || e === "middle") {
                g += (c.height - (a.height || 0)) / ({bottom: 1,middle: 2}[e] || 1);
            }
            h[b ? "translateY" : "y"] = w(g);
            this[this.placed ? "animate" : "attr"](h);
            this.placed = !0;
            this.alignAttr = h;
            return this;
        },getBBox: function() {
            var a = this.bBox, b = this.renderer, c, d, e = this.rotation;
            c = this.element;
            var f = this.styles, g = e * Ba;
            d = this.textStr;
            var h;
            if (d === "" || Ob.test(d)) {
                h = d.length + "|" + f.fontSize + "|" + f.fontFamily, a = b.cache[h];
            }
            if (!a) {
                if (c.namespaceURI === Ca || b.forExport) {
                    try {
                        a = c.getBBox ? r({}, c.getBBox()) : {width: c.offsetWidth,height: c.offsetHeight};
                    } catch (i) {
                    }
                    if (!a || a.width < 0) {
                        a = {width: 0,height: 0};
                    }
                } else {
                    a = this.htmlGetBBox();
                }
                if (b.isSVG) {
                    c = a.width;
                    d = a.height;
                    if (ya && f && f.fontSize === "11px" && d.toPrecision(3) === "16.9") {
                        a.height = d = 14;
                    }
                    if (e) {
                        a.width = M(d * ba(g)) + M(c * U(g)), a.height = M(d * U(g)) + M(c * ba(g));
                    }
                }
                this.bBox = a;
                h && (b.cache[h] = a);
            }
            return a;
        },show: function() {
            return this.attr({visibility: "visible"});
        },hide: function() {
            return this.attr({visibility: "hidden"});
        },fadeOut: function(a) {
            var b = this;
            b.animate({opacity: 0}, {duration: a || 150,complete: function() {
                    b.hide();
                }});
        },add: function(a) {
            var b = this.renderer, c = a || b, d = c.element || b.box, e = d.childNodes, f = this.element, g = v(f, "zIndex"), h;
            if (a) {
                this.parentGroup = a;
            }
            this.parentInverted = a && a.inverted;
            this.textStr !== void 0 && b.buildText(this);
            if (g) {
                c.handleZ = !0, g = z(g);
            }
            if (c.handleZ) {
                for (c = 0; c < e.length; c++) {
                    if (a = e[c], b = v(a, "zIndex"), a !== f && (z(b) > g || !t(g) && t(b))) {
                        d.insertBefore(f, a);
                        h = !0;
                        break;
                    }
                }
            }
            h || d.appendChild(f);
            this.added = !0;
            A(this, "add");
            return this;
        },safeRemoveChild: function(a) {
            var b = a.parentNode;
            b && b.removeChild(a);
        },destroy: function() {
            var a = this, b = a.element || {}, c = a.shadows, d = a.renderer.isSVG && b.nodeName === "SPAN" && a.parentGroup, e, f;
            b.onclick = b.onmouseout = b.onmouseover = b.onmousemove = b.point = null;
            Za(a);
            if (a.clipPath) {
                a.clipPath = a.clipPath.destroy();
            }
            if (a.stops) {
                for (f = 0; f < a.stops.length; f++) {
                    a.stops[f] = a.stops[f].destroy();
                }
                a.stops = null;
            }
            a.safeRemoveChild(b);
            for (c && p(c, function(b) {
                a.safeRemoveChild(b);
            }); d && d.div.childNodes.length === 0; ) {
                b = d.parentGroup, a.safeRemoveChild(d.div), delete d.div, d = b;
            }
            a.alignTo && ha(a.renderer.alignedObjects, a);
            for (e in a) {
                delete a[e];
            }
            return null;
        },shadow: function(a, b, c) {
            var d = [], e, f, g = this.element, h, i, j, k;
            if (a) {
                i = n(a.width, 3);
                j = (a.opacity || 0.15) / i;
                k = this.parentInverted ? "(-1,-1)" : "(" + n(a.offsetX, 1) + ", " + n(a.offsetY, 1) + ")";
                for (e = 1; e <= i; e++) {
                    f = g.cloneNode(0);
                    h = i * 2 + 1 - 2 * e;
                    v(f, {isShadow: "true",stroke: a.color || "black","stroke-opacity": j * e,"stroke-width": h,transform: "translate" + k,fill: Q});
                    if (c) {
                        v(f, "height", s(v(f, "height") - h, 0)), f.cutHeight = h;
                    }
                    b ? b.element.appendChild(f) : g.parentNode.insertBefore(f, g);
                    d.push(f);
                }
                this.shadows = d;
            }
            return this;
        }};
    var ua = function() {
        this.init.apply(this, arguments);
    };
    ua.prototype = {Element: pa,init: function(a, b, c, d) {
            var e = location, f, g;
            f = this.createElement("svg").attr({version: "1.1"});
            g = f.element;
            a.appendChild(g);
            a.innerHTML.indexOf("xmlns") === -1 && v(g, "xmlns", Ca);
            this.isSVG = !0;
            this.box = g;
            this.boxWrapper = f;
            this.alignedObjects = [];
            this.url = (Xa || hb) && y.getElementsByTagName("base").length ? e.href.replace(/#.*?$/, "").replace(/([\('\)])/g, "\\$1").replace(/ /g, "%20") : "";
            this.createElement("desc").add().element.appendChild(y.createTextNode("Created with Highcharts 3.0.9"));
            this.defs = this.createElement("defs").add();
            this.forExport = d;
            this.gradients = {};
            this.cache = {};
            this.setSize(b, c, !1);
            var h;
            if (Xa && a.getBoundingClientRect) {
                this.subPixelFix = b = function() {
                    D(a, {left: 0,top: 0});
                    h = a.getBoundingClientRect();
                    D(a, {left: Ha(h.left) - h.left + "px",top: Ha(h.top) - h.top + "px"});
                }, b(), F(C, "resize", b);
            }
        },isHidden: function() {
            return !this.boxWrapper.getBBox().width;
        },destroy: function() {
            var a = this.defs;
            this.box = null;
            this.boxWrapper = this.boxWrapper.destroy();
            Ma(this.gradients || {});
            this.gradients = null;
            if (a) {
                this.defs = a.destroy();
            }
            this.subPixelFix && X(C, "resize", this.subPixelFix);
            return this.alignedObjects = null;
        },createElement: function(a) {
            var b = new this.Element;
            b.init(this, a);
            return b;
        },draw: function() {
        },buildText: function(a) {
            for (var b = a.element, c = this, d = c.forExport, e = n(a.textStr, "").toString().replace(/<(b|strong)>/g, '<span style="font-weight:bold">').replace(/<(i|em)>/g, '<span style="font-style:italic">').replace(/<a/g, "<span").replace(/<\/(b|strong|i|em|a)>/g, "</span>").split(/<br.*?>/g), f = b.childNodes, g = /style="([^"]+)"/, h = /href="(http[^"]+)"/, i = v(b, "x"), j = a.styles, k = a.textWidth, l = j && j.lineHeight, m = f.length, q = function(a) {
                return l ? z(l) : c.fontMetrics(/px$/.test(a && a.style.fontSize) ? a.style.fontSize : j.fontSize || 11).h;
            }; m--; ) {
                b.removeChild(f[m]);
            }
            k && !a.added && this.box.appendChild(b);
            e[e.length - 1] === "" && e.pop();
            p(e, function(e, f) {
                var l, m = 0, e = e.replace(/<span/g, "|||<span").replace(/<\/span>/g, "</span>|||");
                l = e.split("|||");
                p(l, function(e) {
                    if (e !== "" || l.length === 1) {
                        var o = {}, n = y.createElementNS(Ca, "tspan"), p;
                        g.test(e) && (p = e.match(g)[1].replace(/(;| |^)color([ :])/, "$1fill$2"), v(n, "style", p));
                        h.test(e) && !d && (v(n, "onclick", 'location.href="' + e.match(h)[1] + '"'), D(n, {cursor: "pointer"}));
                        e = (e.replace(/<(.|\n)*?>/g, "") || " ").replace(/&lt;/g, "<").replace(/&gt;/g, ">");
                        if (e !== " " && (n.appendChild(y.createTextNode(e)), m ? o.dx = 0 : o.x = i, v(n, o), !m && f && (!V && d && D(n, {display: "block"}), v(n, "dy", q(n), hb && n.offsetHeight)), b.appendChild(n), m++, k)) {
                            for (var e = e.replace(/([^\^])-/g, "$1- ").split(" "), o = e.length > 1 && j.whiteSpace !== "nowrap", t, s, w = a._clipHeight, u = [], r = q(), $ = 1; o && (e.length || u.length); ) {
                                delete a.bBox, t = a.getBBox(), s = t.width, !V && c.forExport && (s = c.measureSpanWidth(n.firstChild.data, a.styles)), t = s > k, !t || e.length === 1 ? (e = u, u = [], e.length && ($++, w && $ * r > w ? (e = ["..."], a.attr("title", a.textStr)) : (n = y.createElementNS(Ca, "tspan"), v(n, {dy: r,x: i}), p && v(n, "style", p), b.appendChild(n), s > k && (k = s)))) : (n.removeChild(n.firstChild), u.unshift(e.pop())), e.length && n.appendChild(y.createTextNode(e.join(" ").replace(/- /g, "-")));
                            }
                        }
                    }
                });
            });
        },button: function(a, b, c, d, e, f, g, h, i) {
            var j = this.label(a, b, c, i, null, null, null, null, "button"), k = 0, l, m, q, o, n, p, a = {x1: 0,y1: 0,x2: 0,y2: 1}, e = x({"stroke-width": 1,stroke: "#CCCCCC",fill: {linearGradient: a,stops: [[0, "#FEFEFE"], [1, "#F6F6F6"]]},r: 2,padding: 5,style: {color: "black"}}, e);
            q = e.style;
            delete e.style;
            f = x(e, {stroke: "#68A",fill: {linearGradient: a,stops: [[0, "#FFF"], [1, "#ACF"]]}}, f);
            o = f.style;
            delete f.style;
            g = x(e, {stroke: "#68A",fill: {linearGradient: a,stops: [[0, "#9BD"], [1, "#CDF"]]}}, g);
            n = g.style;
            delete g.style;
            h = x(e, {style: {color: "#CCC"}}, h);
            p = h.style;
            delete h.style;
            F(j.element, ya ? "mouseover" : "mouseenter", function() {
                k !== 3 && j.attr(f).css(o);
            });
            F(j.element, ya ? "mouseout" : "mouseleave", function() {
                k !== 3 && (l = [e, f, g][k], m = [q, o, n][k], j.attr(l).css(m));
            });
            j.setState = function(a) {
                (j.state = k = a) ? a === 2 ? j.attr(g).css(n) : a === 3 && j.attr(h).css(p) : j.attr(e).css(q);
            };
            return j.on("click", function() {
                k !== 3 && d.call(j);
            }).attr(e).css(r({cursor: "default"}, q));
        },crispLine: function(a, b) {
            a[1] === a[4] && (a[1] = a[4] = w(a[1]) - b % 2 / 2);
            a[2] === a[5] && (a[2] = a[5] = w(a[2]) + b % 2 / 2);
            return a;
        },path: function(a) {
            var b = {fill: Q};
            Ka(a) ? b.d = a : S(a) && r(b, a);
            return this.createElement("path").attr(b);
        },circle: function(a, b, c) {
            a = S(a) ? a : {x: a,y: b,r: c};
            return this.createElement("circle").attr(a);
        },arc: function(a, b, c, d, e, f) {
            if (S(a)) {
                b = a.y, c = a.r, d = a.innerR, e = a.start, f = a.end, a = a.x;
            }
            a = this.symbol("arc", a || 0, b || 0, c || 0, c || 0, {innerR: d || 0,start: e || 0,end: f || 0});
            a.r = c;
            return a;
        },rect: function(a, b, c, d, e, f) {
            e = S(a) ? a.r : e;
            e = this.createElement("rect").attr({rx: e,ry: e,fill: Q});
            return e.attr(S(a) ? a : e.crisp(f, a, b, s(c, 0), s(d, 0)));
        },setSize: function(a, b, c) {
            var d = this.alignedObjects, e = d.length;
            this.width = a;
            this.height = b;
            for (this.boxWrapper[n(c, !0) ? "animate" : "attr"]({width: a,height: b}); e--; ) {
                d[e].align();
            }
        },g: function(a) {
            var b = this.createElement("g");
            return t(a) ? b.attr({"class": "highcharts-" + a}) : b;
        },image: function(a, b, c, d, e) {
            var f = {preserveAspectRatio: Q};
            arguments.length > 1 && r(f, {x: b,y: c,width: d,height: e});
            f = this.createElement("image").attr(f);
            f.element.setAttributeNS ? f.element.setAttributeNS("http://www.w3.org/1999/xlink", "href", a) : f.element.setAttribute("hc-svg-href", a);
            return f;
        },symbol: function(a, b, c, d, e, f) {
            var g, h = this.symbols[a], h = h && h(w(b), w(c), d, e, f), i = /^url\((.*?)\)$/, j, k;
            if (h) {
                g = this.path(h), r(g, {symbolName: a,x: b,y: c,width: d,height: e}), f && r(g, f);
            } else {
                if (i.test(a)) {
                    k = function(a, b) {
                        a.element && (a.attr({width: b[0],height: b[1]}), a.alignByTranslate || a.translate(w((d - b[0]) / 2), w((e - b[1]) / 2)));
                    }, j = a.match(i)[1], a = Jb[j], g = this.image(j).attr({x: b,y: c}), g.isImg = !0, a ? k(g, a) : (g.attr({width: 0,height: 0}), T("img", {onload: function() {
                            k(g, Jb[j] = [this.width, this.height]);
                        },src: j}));
                }
            }
            return g;
        },symbols: {circle: function(a, b, c, d) {
                var e = 0.166 * c;
                return ["M", a + c / 2, b, "C", a + c + e, b, a + c + e, b + d, a + c / 2, b + d, "C", a - e, b + d, a - e, b, a + c / 2, b, "Z"];
            },square: function(a, b, c, d) {
                return ["M", a, b, "L", a + c, b, a + c, b + d, a, b + d, "Z"];
            },triangle: function(a, b, c, d) {
                return ["M", a + c / 2, b, "L", a + c, b + d, a, b + d, "Z"];
            },"triangle-down": function(a, b, c, d) {
                return ["M", a, b, "L", a + c, b, a + c / 2, b + d, "Z"];
            },diamond: function(a, b, c, d) {
                return ["M", a + c / 2, b, "L", a + c, b + d / 2, a + c / 2, b + d, a, b + d / 2, "Z"];
            },arc: function(a, b, c, d, e) {
                var f = e.start, c = e.r || c || d, g = e.end - 0.001, d = e.innerR, h = e.open, i = U(f), j = ba(f), k = U(g), g = ba(g), e = e.end - f < Aa ? 0 : 1;
                return ["M", a + c * i, b + c * j, "A", c, c, 0, e, 1, a + c * k, b + c * g, h ? "M" : "L", a + d * k, b + d * g, "A", d, d, 0, e, 0, a + d * i, b + d * j, h ? "" : "Z"];
            }},clipRect: function(a, b, c, d) {
            var e = "highcharts-" + ub++, f = this.createElement("clipPath").attr({id: e}).add(this.defs), a = this.rect(a, b, c, d, 0).add(f);
            a.id = e;
            a.clipPath = f;
            return a;
        },color: function(a, b, c) {
            var d = this, e, f = /^rgba/, g, h, i, j, k, l, m, q = [];
            a && a.linearGradient ? g = "linearGradient" : a && a.radialGradient && (g = "radialGradient");
            if (g) {
                c = a[g];
                h = d.gradients;
                j = a.stops;
                b = b.radialReference;
                Ka(c) && (a[g] = c = {x1: c[0],y1: c[1],x2: c[2],y2: c[3],gradientUnits: "userSpaceOnUse"});
                g === "radialGradient" && b && !t(c.gradientUnits) && (c = x(c, {cx: b[0] - b[2] / 2 + c.cx * b[2],cy: b[1] - b[2] / 2 + c.cy * b[2],r: c.r * b[2],gradientUnits: "userSpaceOnUse"}));
                for (m in c) {
                    m !== "id" && q.push(m, c[m]);
                }
                for (m in j) {
                    q.push(j[m]);
                }
                q = q.join(",");
                h[q] ? a = h[q].id : (c.id = a = "highcharts-" + ub++, h[q] = i = d.createElement(g).attr(c).add(d.defs), i.stops = [], p(j, function(a) {
                    f.test(a[1]) ? (e = ta(a[1]), k = e.get("rgb"), l = e.get("a")) : (k = a[1], l = 1);
                    a = d.createElement("stop").attr({offset: a[0],"stop-color": k,"stop-opacity": l}).add(i);
                    i.stops.push(a);
                }));
                return "url(" + d.url + "#" + a + ")";
            } else {
                return f.test(a) ? (e = ta(a), v(b, c + "-opacity", e.get("a")), e.get("rgb")) : (b.removeAttribute(c + "-opacity"), a);
            }
        },text: function(a, b, c, d) {
            var e = G.chart.style, f = da || !V && this.forExport;
            if (d && !this.forExport) {
                return this.html(a, b, c);
            }
            b = w(n(b, 0));
            c = w(n(c, 0));
            a = this.createElement("text").attr({x: b,y: c,text: a}).css({fontFamily: e.fontFamily,fontSize: e.fontSize});
            f && a.css({position: "absolute"});
            a.x = b;
            a.y = c;
            return a;
        },fontMetrics: function(a) {
            var a = z(a || 11), a = a < 24 ? a + 4 : w(a * 1.2), b = w(a * 0.8);
            return {h: a,b: b};
        },label: function(a, b, c, d, e, f, g, h, i) {
            function j() {
                var a, b;
                a = n.element.style;
                va = (Z === void 0 || Sa === void 0 || o.styles.textAlign) && n.getBBox();
                o.width = (Z || va.width || 0) + 2 * ea + lb;
                o.height = (Sa || va.height || 0) + 2 * ea;
                $ = ea + q.fontMetrics(a && a.fontSize).b;
                if (y) {
                    if (!H) {
                        a = w(-s * ea), b = h ? -$ : 0, o.box = H = d ? q.symbol(d, a, b, o.width, o.height, v) : q.rect(a, b, o.width, o.height, 0, v[Lb]), H.add(o);
                    }
                    H.isImg || H.attr(x({width: o.width,height: o.height}, v));
                    v = null;
                }
            }
            function k() {
                var a = o.styles, a = a && a.textAlign, b = lb + ea * (1 - s), c;
                c = h ? 0 : $;
                if (t(Z) && (a === "center" || a === "right")) {
                    b += {center: 0.5,right: 1}[a] * (Z - va.width);
                }
                (b !== n.x || c !== n.y) && n.attr({x: b,y: c});
                n.x = b;
                n.y = c;
            }
            function l(a, b) {
                H ? H.attr(a, b) : v[a] = b;
            }
            function m() {
                n.add(o);
                o.attr({text: a,x: b,y: c});
                H && t(e) && o.attr({anchorX: e,anchorY: f});
            }
            var q = this, o = q.g(i), n = q.text("", 0, 0, g).attr({zIndex: 1}), H, va, s = 0, ea = 3, lb = 0, Z, Sa, Ta, K, B = 0, v = {}, $, g = o.attrSetters, y;
            F(o, "add", m);
            g.width = function(a) {
                Z = a;
                return !1;
            };
            g.height = function(a) {
                Sa = a;
                return !1;
            };
            g.padding = function(a) {
                t(a) && a !== ea && (ea = a, k());
                return !1;
            };
            g.paddingLeft = function(a) {
                t(a) && a !== lb && (lb = a, k());
                return !1;
            };
            g.align = function(a) {
                s = {left: 0,center: 0.5,right: 1}[a];
                return !1;
            };
            g.text = function(a, b) {
                n.attr(b, a);
                j();
                k();
                return !1;
            };
            g[Lb] = function(a, b) {
                y = !0;
                B = a % 2 / 2;
                l(b, a);
                return !1;
            };
            g.stroke = g.fill = g.r = function(a, b) {
                b === "fill" && (y = !0);
                l(b, a);
                return !1;
            };
            g.anchorX = function(a, b) {
                e = a;
                l(b, a + B - Ta);
                return !1;
            };
            g.anchorY = function(a, b) {
                f = a;
                l(b, a - K);
                return !1;
            };
            g.x = function(a) {
                o.x = a;
                a -= s * ((Z || va.width) + ea);
                Ta = w(a);
                o.attr("translateX", Ta);
                return !1;
            };
            g.y = function(a) {
                K = o.y = w(a);
                o.attr("translateY", K);
                return !1;
            };
            var z = o.css;
            return r(o, {css: function(a) {
                    if (a) {
                        var b = {}, a = x(a);
                        p("fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow".split(","), function(c) {
                            a[c] !== u && (b[c] = a[c], delete a[c]);
                        });
                        n.css(b);
                    }
                    return z.call(o, a);
                },getBBox: function() {
                    return {width: va.width + 2 * ea,height: va.height + 2 * ea,x: va.x - ea,y: va.y - ea};
                },shadow: function(a) {
                    H && H.shadow(a);
                    return o;
                },destroy: function() {
                    X(o, "add", m);
                    X(o.element, "mouseenter");
                    X(o.element, "mouseleave");
                    n && (n = n.destroy());
                    H && (H = H.destroy());
                    pa.prototype.destroy.call(o);
                    o = q = j = k = l = m = null;
                }});
        }};
    Ya = ua;
    r(pa.prototype, {htmlCss: function(a) {
            var b = this.element;
            if (b = a && b.tagName === "SPAN" && a.width) {
                delete a.width, this.textWidth = b, this.updateTransform();
            }
            this.styles = r(this.styles, a);
            D(this.element, a);
            return this;
        },htmlGetBBox: function() {
            var a = this.element, b = this.bBox;
            if (!b) {
                if (a.nodeName === "text") {
                    a.style.position = "absolute";
                }
                b = this.bBox = {x: a.offsetLeft,y: a.offsetTop,width: a.offsetWidth,height: a.offsetHeight};
            }
            return b;
        },htmlUpdateTransform: function() {
            if (this.added) {
                var a = this.renderer, b = this.element, c = this.translateX || 0, d = this.translateY || 0, e = this.x || 0, f = this.y || 0, g = this.textAlign || "left", h = {left: 0,center: 0.5,right: 1}[g], i = this.shadows;
                D(b, {marginLeft: c,marginTop: d});
                i && p(i, function(a) {
                    D(a, {marginLeft: c + 1,marginTop: d + 1});
                });
                this.inverted && p(b.childNodes, function(c) {
                    a.invertChild(c, b);
                });
                if (b.tagName === "SPAN") {
                    var j = this.rotation, k, l = z(this.textWidth), m = [j, g, b.innerHTML, this.textWidth].join(",");
                    if (m !== this.cTT) {
                        k = a.fontMetrics(b.style.fontSize).b;
                        t(j) && this.setSpanRotation(j, h, k);
                        i = n(this.elemWidth, b.offsetWidth);
                        if (i > l && /[ \-]/.test(b.textContent || b.innerText)) {
                            D(b, {width: l + "px",display: "block",whiteSpace: "normal"}), i = l;
                        }
                        this.getSpanCorrection(i, k, h, j, g);
                    }
                    D(b, {left: e + (this.xCorr || 0) + "px",top: f + (this.yCorr || 0) + "px"});
                    if (hb) {
                        k = b.offsetHeight;
                    }
                    this.cTT = m;
                }
            } else {
                this.alignOnAdd = !0;
            }
        },setSpanRotation: function(a, b, c) {
            var d = {}, e = ya ? "-ms-transform" : hb ? "-webkit-transform" : Xa ? "MozTransform" : Hb ? "-o-transform" : "";
            d[e] = d.transform = "rotate(" + a + "deg)";
            d[e + (Xa ? "Origin" : "-origin")] = b * 100 + "% " + c + "px";
            D(this.element, d);
        },getSpanCorrection: function(a, b, c) {
            this.xCorr = -a * c;
            this.yCorr = -b;
        }});
    r(ua.prototype, {html: function(a, b, c) {
            var d = G.chart.style, e = this.createElement("span"), f = e.attrSetters, g = e.element, h = e.renderer;
            f.text = function(a) {
                a !== g.innerHTML && delete this.bBox;
                g.innerHTML = a;
                return !1;
            };
            f.x = f.y = f.align = f.rotation = function(a, b) {
                b === "align" && (b = "textAlign");
                e[b] = a;
                e.htmlUpdateTransform();
                return !1;
            };
            e.attr({text: a,x: w(b),y: w(c)}).css({position: "absolute",whiteSpace: "nowrap",fontFamily: d.fontFamily,fontSize: d.fontSize});
            e.css = e.htmlCss;
            if (h.isSVG) {
                e.add = function(a) {
                    var b, c = h.box.parentNode, d = [];
                    if (this.parentGroup = a) {
                        if (b = a.div, !b) {
                            for (; a; ) {
                                d.push(a), a = a.parentGroup;
                            }
                            p(d.reverse(), function(a) {
                                var d;
                                b = a.div = a.div || T(Ga, {className: v(a.element, "class")}, {position: "absolute",left: (a.translateX || 0) + "px",top: (a.translateY || 0) + "px"}, b || c);
                                d = b.style;
                                r(a.attrSetters, {translateX: function(a) {
                                        d.left = a + "px";
                                    },translateY: function(a) {
                                        d.top = a + "px";
                                    },visibility: function(a, b) {
                                        d[b] = a;
                                    }});
                            });
                        }
                    } else {
                        b = c;
                    }
                    b.appendChild(g);
                    e.added = !0;
                    e.alignOnAdd && e.htmlUpdateTransform();
                    return e;
                };
            }
            return e;
        }});
    var R;
    if (!V && !da) {
        Highcharts.VMLElement = R = {init: function(a, b) {
                var c = ["<", b, ' filled="f" stroked="f"'], d = ["position: ", "absolute", ";"], e = b === Ga;
                (b === "shape" || e) && d.push("left:0;top:0;width:1px;height:1px;");
                d.push("visibility: ", e ? "hidden" : "visible");
                c.push(' style="', d.join(""), '"/>');
                if (b) {
                    c = e || b === "span" || b === "img" ? c.join("") : a.prepVML(c), this.element = T(c);
                }
                this.renderer = a;
                this.attrSetters = {};
            },add: function(a) {
                var b = this.renderer, c = this.element, d = b.box, d = a ? a.element || a : d;
                a && a.inverted && b.invertChild(c, d);
                d.appendChild(c);
                this.added = !0;
                this.alignOnAdd && !this.deferUpdateTransform && this.updateTransform();
                A(this, "add");
                return this;
            },updateTransform: pa.prototype.htmlUpdateTransform,setSpanRotation: function() {
                var a = this.rotation, b = U(a * Ba), c = ba(a * Ba);
                D(this.element, {filter: a ? ["progid:DXImageTransform.Microsoft.Matrix(M11=", b, ", M12=", -c, ", M21=", c, ", M22=", b, ", sizingMethod='auto expand')"].join("") : Q});
            },getSpanCorrection: function(a, b, c, d, e) {
                var f = d ? U(d * Ba) : 1, g = d ? ba(d * Ba) : 0, h = n(this.elemHeight, this.element.offsetHeight), i;
                this.xCorr = f < 0 && -a;
                this.yCorr = g < 0 && -h;
                i = f * g < 0;
                this.xCorr += g * b * (i ? 1 - c : c);
                this.yCorr -= f * b * (d ? i ? c : 1 - c : 1);
                e && e !== "left" && (this.xCorr -= a * c * (f < 0 ? -1 : 1), d && (this.yCorr -= h * c * (g < 0 ? -1 : 1)), D(this.element, {textAlign: e}));
            },pathToVML: function(a) {
                for (var b = a.length, c = []; b--; ) {
                    if (wa(a[b])) {
                        c[b] = w(a[b] * 10) - 5;
                    } else {
                        if (a[b] === "Z") {
                            c[b] = "x";
                        } else {
                            if (c[b] = a[b], a.isArc && (a[b] === "wa" || a[b] === "at")) {
                                c[b + 5] === c[b + 7] && (c[b + 7] += a[b + 7] > a[b + 5] ? 1 : -1), c[b + 6] === c[b + 8] && (c[b + 8] += a[b + 8] > a[b + 6] ? 1 : -1);
                            }
                        }
                    }
                }
                return c.join(" ") || "x";
            },attr: function(a, b) {
                var c, d, e, f = this.element || {}, g = f.style, h = f.nodeName, i = this.renderer, j = this.symbolName, k, l = this.shadows, m, q = this.attrSetters, o = this;
                fa(a) && t(b) && (c = a, a = {}, a[c] = b);
                if (fa(a)) {
                    c = a, o = c === "strokeWidth" || c === "stroke-width" ? this.strokeweight : this[c];
                } else {
                    for (c in a) {
                        if (d = a[c], m = !1, e = q[c] && q[c].call(this, d, c), e !== !1 && d !== null) {
                            e !== u && (d = e);
                            if (j && /^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c)) {
                                k || (this.symbolAttr(a), k = !0), m = !0;
                            } else {
                                if (c === "d") {
                                    d = d || [];
                                    this.d = d.join(" ");
                                    f.path = d = this.pathToVML(d);
                                    if (l) {
                                        for (e = l.length; e--; ) {
                                            l[e].path = l[e].cutOff ? this.cutOffPath(d, l[e].cutOff) : d;
                                        }
                                    }
                                    m = !0;
                                } else {
                                    if (c === "visibility") {
                                        if (l) {
                                            for (e = l.length; e--; ) {
                                                l[e].style[c] = d;
                                            }
                                        }
                                        h === "DIV" && (d = d === "hidden" ? "-999em" : 0, gb || (g[c] = d ? "visible" : "hidden"), c = "top");
                                        g[c] = d;
                                        m = !0;
                                    } else {
                                        if (c === "zIndex") {
                                            d && (g[c] = d), m = !0;
                                        } else {
                                            if (sa(c, ["x", "y", "width", "height"]) !== -1) {
                                                this[c] = d, c === "x" || c === "y" ? c = {x: "left",y: "top"}[c] : d = s(0, d), this.updateClipping ? (this[c] = d, this.updateClipping()) : g[c] = d, m = !0;
                                            } else {
                                                if (c === "class" && h === "DIV") {
                                                    f.className = d;
                                                } else {
                                                    if (c === "stroke") {
                                                        d = i.color(d, f, c), c = "strokecolor";
                                                    } else {
                                                        if (c === "stroke-width" || c === "strokeWidth") {
                                                            f.stroked = d ? !0 : !1, c = "strokeweight", this[c] = d, wa(d) && (d += "px");
                                                        } else {
                                                            if (c === "dashstyle") {
                                                                (f.getElementsByTagName("stroke")[0] || T(i.prepVML(["<stroke/>"]), null, null, f))[c] = d || "solid", this.dashstyle = d, m = !0;
                                                            } else {
                                                                if (c === "fill") {
                                                                    if (h === "SPAN") {
                                                                        g.color = d;
                                                                    } else {
                                                                        if (h !== "IMG") {
                                                                            f.filled = d !== Q ? !0 : !1, d = i.color(d, f, c, this), c = "fillcolor";
                                                                        }
                                                                    }
                                                                } else {
                                                                    if (c === "opacity") {
                                                                        m = !0;
                                                                    } else {
                                                                        if (h === "shape" && c === "rotation") {
                                                                            this[c] = f.style[c] = d, f.style.left = -w(ba(d * Ba) + 1) + "px", f.style.top = w(U(d * Ba)) + "px";
                                                                        } else {
                                                                            if (c === "translateX" || c === "translateY" || c === "rotation") {
                                                                                this[c] = d, this.updateTransform(), m = !0;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            m || (gb ? f[c] = d : v(f, c, d));
                        }
                    }
                }
                return o;
            },clip: function(a) {
                var b = this, c;
                a ? (c = a.members, ha(c, b), c.push(b), b.destroyClip = function() {
                    ha(c, b);
                }, a = a.getCSS(b)) : (b.destroyClip && b.destroyClip(), a = {clip: gb ? "inherit" : "rect(auto)"});
                return b.css(a);
            },css: pa.prototype.htmlCss,safeRemoveChild: function(a) {
                a.parentNode && Na(a);
            },destroy: function() {
                this.destroyClip && this.destroyClip();
                return pa.prototype.destroy.apply(this);
            },on: function(a, b) {
                this.element["on" + a] = function() {
                    var a = C.event;
                    a.target = a.srcElement;
                    b(a);
                };
                return this;
            },cutOffPath: function(a, b) {
                var c, a = a.split(/[ ,]/);
                c = a.length;
                if (c === 9 || c === 11) {
                    a[c - 4] = a[c - 2] = z(a[c - 2]) - 10 * b;
                }
                return a.join(" ");
            },shadow: function(a, b, c) {
                var d = [], e, f = this.element, g = this.renderer, h, i = f.style, j, k = f.path, l, m, q, o;
                k && typeof k.value !== "string" && (k = "x");
                m = k;
                if (a) {
                    q = n(a.width, 3);
                    o = (a.opacity || 0.15) / q;
                    for (e = 1; e <= 3; e++) {
                        l = q * 2 + 1 - 2 * e;
                        c && (m = this.cutOffPath(k.value, l + 0.5));
                        j = ['<shape isShadow="true" strokeweight="', l, '" filled="false" path="', m, '" coordsize="10 10" style="', f.style.cssText, '" />'];
                        h = T(g.prepVML(j), null, {left: z(i.left) + n(a.offsetX, 1),top: z(i.top) + n(a.offsetY, 1)});
                        if (c) {
                            h.cutOff = l + 1;
                        }
                        j = ['<stroke color="', a.color || "black", '" opacity="', o * e, '"/>'];
                        T(g.prepVML(j), null, null, h);
                        b ? b.element.appendChild(h) : f.parentNode.insertBefore(h, f);
                        d.push(h);
                    }
                    this.shadows = d;
                }
                return this;
            }};
        R = ia(pa, R);
        var xb = {Element: R,isIE8: ra.indexOf("MSIE 8.0") > -1,init: function(a, b, c) {
                var d, e;
                this.alignedObjects = [];
                d = this.createElement(Ga);
                e = d.element;
                e.style.position = "relative";
                a.appendChild(d.element);
                this.isVML = !0;
                this.box = e;
                this.boxWrapper = d;
                this.cache = {};
                this.setSize(b, c, !1);
                if (!y.namespaces.hcv) {
                    y.namespaces.add("hcv", "urn:schemas-microsoft-com:vml");
                    try {
                        y.createStyleSheet().cssText = "hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";
                    } catch (f) {
                        y.styleSheets[0].cssText += "hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";
                    }
                }
            },isHidden: function() {
                return !this.box.offsetWidth;
            },clipRect: function(a, b, c, d) {
                var e = this.createElement(), f = S(a);
                return r(e, {members: [],left: (f ? a.x : a) + 1,top: (f ? a.y : b) + 1,width: (f ? a.width : c) - 1,height: (f ? a.height : d) - 1,getCSS: function(a) {
                        var b = a.element, c = b.nodeName, a = a.inverted, d = this.top - (c === "shape" ? b.offsetTop : 0), e = this.left, b = e + this.width, f = d + this.height, d = {clip: "rect(" + w(a ? e : d) + "px," + w(a ? f : b) + "px," + w(a ? b : f) + "px," + w(a ? d : e) + "px)"};
                        !a && gb && c === "DIV" && r(d, {width: b + "px",height: f + "px"});
                        return d;
                    },updateClipping: function() {
                        p(e.members, function(a) {
                            a.css(e.getCSS(a));
                        });
                    }});
            },color: function(a, b, c, d) {
                var e = this, f, g = /^rgba/, h, i, j = Q;
                a && a.linearGradient ? i = "gradient" : a && a.radialGradient && (i = "pattern");
                if (i) {
                    var k, l, m = a.linearGradient || a.radialGradient, q, o, n, H, s, t = "", a = a.stops, u, w = [], r = function() {
                        h = ['<fill colors="' + w.join(",") + '" opacity="', n, '" o:opacity2="', o, '" type="', i, '" ', t, 'focus="100%" method="any" />'];
                        T(e.prepVML(h), null, null, b);
                    };
                    q = a[0];
                    u = a[a.length - 1];
                    q[0] > 0 && a.unshift([0, q[1]]);
                    u[0] < 1 && a.push([1, u[1]]);
                    p(a, function(a, b) {
                        g.test(a[1]) ? (f = ta(a[1]), k = f.get("rgb"), l = f.get("a")) : (k = a[1], l = 1);
                        w.push(a[0] * 100 + "% " + k);
                        b ? (n = l, H = k) : (o = l, s = k);
                    });
                    if (c === "fill") {
                        if (i === "gradient") {
                            c = m.x1 || m[0] || 0, a = m.y1 || m[1] || 0, q = m.x2 || m[2] || 0, m = m.y2 || m[3] || 0, t = 'angle="' + (90 - P.atan((m - a) / (q - c)) * 180 / Aa) + '"', r();
                        } else {
                            var j = m.r, Sa = j * 2, Ta = j * 2, v = m.cx, B = m.cy, x = b.radialReference, $, j = function() {
                                x && ($ = d.getBBox(), v += (x[0] - $.x) / $.width - 0.5, B += (x[1] - $.y) / $.height - 0.5, Sa *= x[2] / $.width, Ta *= x[2] / $.height);
                                t = 'src="' + G.global.VMLRadialGradientURL + '" size="' + Sa + "," + Ta + '" origin="0.5,0.5" position="' + v + "," + B + '" color2="' + s + '" ';
                                r();
                            };
                            d.added ? j() : F(d, "add", j);
                            j = H;
                        }
                    } else {
                        j = k;
                    }
                } else {
                    if (g.test(a) && b.tagName !== "IMG") {
                        f = ta(a), h = ["<", c, ' opacity="', f.get("a"), '"/>'], T(this.prepVML(h), null, null, b), j = f.get("rgb");
                    } else {
                        j = b.getElementsByTagName(c);
                        if (j.length) {
                            j[0].opacity = 1, j[0].type = "solid";
                        }
                        j = a;
                    }
                }
                return j;
            },prepVML: function(a) {
                var b = this.isIE8, a = a.join("");
                b ? (a = a.replace("/>", ' xmlns="urn:schemas-microsoft-com:vml" />'), a = a.indexOf('style="') === -1 ? a.replace("/>", ' style="display:inline-block;behavior:url(#default#VML);" />') : a.replace('style="', 'style="display:inline-block;behavior:url(#default#VML);')) : a = a.replace("<", "<hcv:");
                return a;
            },text: ua.prototype.html,path: function(a) {
                var b = {coordsize: "10 10"};
                Ka(a) ? b.d = a : S(a) && r(b, a);
                return this.createElement("shape").attr(b);
            },circle: function(a, b, c) {
                var d = this.symbol("circle");
                if (S(a)) {
                    c = a.r, b = a.y, a = a.x;
                }
                d.isCircle = !0;
                d.r = c;
                return d.attr({x: a,y: b});
            },g: function(a) {
                var b;
                a && (b = {className: "highcharts-" + a,"class": "highcharts-" + a});
                return this.createElement(Ga).attr(b);
            },image: function(a, b, c, d, e) {
                var f = this.createElement("img").attr({src: a});
                arguments.length > 1 && f.attr({x: b,y: c,width: d,height: e});
                return f;
            },rect: function(a, b, c, d, e, f) {
                var g = this.symbol("rect");
                g.r = S(a) ? a.r : e;
                return g.attr(S(a) ? a : g.crisp(f, a, b, s(c, 0), s(d, 0)));
            },invertChild: function(a, b) {
                var c = b.style;
                D(a, {flip: "x",left: z(c.width) - 1,top: z(c.height) - 1,rotation: -90});
            },symbols: {arc: function(a, b, c, d, e) {
                    var f = e.start, g = e.end, h = e.r || c || d, c = e.innerR, d = U(f), i = ba(f), j = U(g), k = ba(g);
                    if (g - f === 0) {
                        return ["x"];
                    }
                    f = ["wa", a - h, b - h, a + h, b + h, a + h * d, b + h * i, a + h * j, b + h * k];
                    e.open && !c && f.push("e", "M", a, b);
                    f.push("at", a - c, b - c, a + c, b + c, a + c * j, b + c * k, a + c * d, b + c * i, "x", "e");
                    f.isArc = !0;
                    return f;
                },circle: function(a, b, c, d, e) {
                    e && (c = d = 2 * e.r);
                    e && e.isCircle && (a -= c / 2, b -= d / 2);
                    return ["wa", a, b, a + c, b + d, a + c, b + d / 2, a + c, b + d / 2, "e"];
                },rect: function(a, b, c, d, e) {
                    var f = a + c, g = b + d, h;
                    !t(e) || !e.r ? f = ua.prototype.symbols.square.apply(0, arguments) : (h = I(e.r, c, d), f = ["M", a + h, b, "L", f - h, b, "wa", f - 2 * h, b, f, b + 2 * h, f - h, b, f, b + h, "L", f, g - h, "wa", f - 2 * h, g - 2 * h, f, g, f, g - h, f - h, g, "L", a + h, g, "wa", a, g - 2 * h, a + 2 * h, g, a + h, g, a, g - h, "L", a, b + h, "wa", a, b, a + 2 * h, b + 2 * h, a, b + h, a + h, b, "x", "e"]);
                    return f;
                }}};
        Highcharts.VMLRenderer = R = function() {
            this.init.apply(this, arguments);
        };
        R.prototype = x(ua.prototype, xb);
        Ya = R;
    }
    ua.prototype.measureSpanWidth = function(a, b) {
        var c = y.createElement("span"), d;
        d = y.createTextNode(a);
        c.appendChild(d);
        D(c, b);
        this.box.appendChild(c);
        d = c.offsetWidth;
        Na(c);
        return d;
    };
    var Mb;
    if (da) {
        Highcharts.CanVGRenderer = R = function() {
            Ca = "http://www.w3.org/1999/xhtml";
        }, R.prototype.symbols = {}, Mb = function() {
            function a() {
                var a = b.length, d;
                for (d = 0; d < a; d++) {
                    b[d]();
                }
                b = [];
            }
            var b = [];
            return {push: function(c, d) {
                    b.length === 0 && Pb(d, a);
                    b.push(c);
                }};
        }(), Ya = R;
    }
    Qa.prototype = {addLabel: function() {
            var a = this.axis, b = a.options, c = a.chart, d = a.horiz, e = a.categories, f = a.names, g = this.pos, h = b.labels, i = a.tickPositions, d = d && e && !h.step && !h.staggerLines && !h.rotation && c.plotWidth / i.length || !d && (c.margin[3] || c.chartWidth * 0.33), j = g === i[0], k = g === i[i.length - 1], l, f = e ? n(e[g], f[g], g) : g, e = this.label, m = i.info;
            a.isDatetimeAxis && m && (l = b.dateTimeLabelFormats[m.higherRanks[g] || m.unitName]);
            this.isFirst = j;
            this.isLast = k;
            b = a.labelFormatter.call({axis: a,chart: c,isFirst: j,isLast: k,dateTimeLabelFormat: l,value: a.isLog ? aa(ga(f)) : f});
            g = d && {width: s(1, w(d - 2 * (h.padding || 10))) + "px"};
            g = r(g, h.style);
            if (t(e)) {
                e && e.attr({text: b}).css(g);
            } else {
                l = {align: a.labelAlign};
                if (wa(h.rotation)) {
                    l.rotation = h.rotation;
                }
                if (d && h.ellipsis) {
                    l._clipHeight = a.len / i.length;
                }
                this.label = t(b) && h.enabled ? c.renderer.text(b, 0, 0, h.useHTML).attr(l).css(g).add(a.labelGroup) : null;
            }
        },getLabelSize: function() {
            var a = this.label, b = this.axis;
            return a ? a.getBBox()[b.horiz ? "height" : "width"] : 0;
        },getLabelSides: function() {
            var a = this.label.getBBox(), b = this.axis, c = b.horiz, d = b.options.labels, a = c ? a.width : a.height, b = c ? a * {left: 0,center: 0.5,right: 1}[b.labelAlign] - d.x : a;
            return [-b, a - b];
        },handleOverflow: function(a, b) {
            var B;
            var c = !0, d = this.axis, e = this.isFirst, f = this.isLast, g = d.horiz ? b.x : b.y, h = d.reversed, i = d.tickPositions, j = this.getLabelSides(), k = j[0], j = j[1], l = d.pos, m = l + d.len, q = this.label.line || 0, o = d.labelEdge, n = d.justifyLabels && (e || f);
            o[q] === u || g + k > o[q] ? o[q] = g + j : n || (c = !1);
            if (n) {
                B = (d = d.ticks[i[a + (e ? 1 : -1)]]) && d.label.xy && d.label.xy.x + d.getLabelSides()[e ? 0 : 1], i = B, e && !h || f && h ? g + k < l && (g = l - k, d && g + j > i && (c = !1)) : g + j > m && (g = m - j, d && g + k < i && (c = !1)), b.x = g;
            }
            return c;
        },getPosition: function(a, b, c, d) {
            var e = this.axis, f = e.chart, g = d && f.oldChartHeight || f.chartHeight;
            return {x: a ? e.translate(b + c, null, null, d) + e.transB : e.left + e.offset + (e.opposite ? (d && f.oldChartWidth || f.chartWidth) - e.right - e.left : 0),y: a ? g - e.bottom + e.offset - (e.opposite ? e.height : 0) : g - e.translate(b + c, null, null, d) - e.transB};
        },getLabelPosition: function(a, b, c, d, e, f, g, h) {
            var i = this.axis, j = i.transA, k = i.reversed, l = i.staggerLines, m = i.chart.renderer.fontMetrics(e.style.fontSize).b, q = e.rotation, a = a + e.x - (f && d ? f * j * (k ? -1 : 1) : 0), b = b + e.y - (f && !d ? f * j * (k ? 1 : -1) : 0);
            q && i.side === 2 && (b -= m - m * U(q * Ba));
            !t(e.y) && !q && (b += m - c.getBBox().height / 2);
            if (l) {
                c.line = g / (h || 1) % l, b += c.line * (i.labelOffset / l);
            }
            return {x: a,y: b};
        },getMarkPath: function(a, b, c, d, e, f) {
            return f.crispLine(["M", a, b, "L", a + (e ? 0 : -c), b + (e ? c : 0)], d);
        },render: function(a, b, c) {
            var d = this.axis, e = d.options, f = d.chart.renderer, g = d.horiz, h = this.type, i = this.label, j = this.pos, k = e.labels, l = this.gridLine, m = h ? h + "Grid" : "grid", q = h ? h + "Tick" : "tick", o = e[m + "LineWidth"], p = e[m + "LineColor"], H = e[m + "LineDashStyle"], s = e[q + "Length"], m = e[q + "Width"] || 0, t = e[q + "Color"], w = e[q + "Position"], q = this.mark, r = k.step, Z = !0, x = d.tickmarkOffset, v = this.getPosition(g, j, x, b), y = v.x, v = v.y, B = g && y === d.pos + d.len || !g && v === d.pos ? -1 : 1;
            this.isActive = !0;
            if (o) {
                j = d.getPlotLinePath(j + x, o * B, b, !0);
                if (l === u) {
                    l = {stroke: p,"stroke-width": o};
                    if (H) {
                        l.dashstyle = H;
                    }
                    if (!h) {
                        l.zIndex = 1;
                    }
                    if (b) {
                        l.opacity = 0;
                    }
                    this.gridLine = l = o ? f.path(j).attr(l).add(d.gridGroup) : null;
                }
                if (!b && l && j) {
                    l[this.isNew ? "attr" : "animate"]({d: j,opacity: c});
                }
            }
            if (m && s) {
                w === "inside" && (s = -s), d.opposite && (s = -s), h = this.getMarkPath(y, v, s, m * B, g, f), q ? q.animate({d: h,opacity: c}) : this.mark = f.path(h).attr({stroke: t,"stroke-width": m,opacity: c}).add(d.axisGroup);
            }
            if (i && !isNaN(y)) {
                i.xy = v = this.getLabelPosition(y, v, i, g, k, x, a, r), this.isFirst && !this.isLast && !n(e.showFirstLabel, 1) || this.isLast && !this.isFirst && !n(e.showLastLabel, 1) ? Z = !1 : !d.isRadial && !k.step && !k.rotation && !b && c !== 0 && (Z = this.handleOverflow(a, v)), r && a % r && (Z = !1), Z && !isNaN(v.y) ? (v.opacity = c, i[this.isNew ? "attr" : "animate"](v), this.isNew = !1) : i.attr("y", -9999);
            }
        },destroy: function() {
            Ma(this, this.axis);
        }};
    var yb = function(a, b) {
        this.axis = a;
        if (b) {
            this.options = b, this.id = b.id;
        }
    };
    yb.prototype = {render: function() {
            var a = this, b = a.axis, c = b.horiz, d = (b.pointRange || 0) / 2, e = a.options, f = e.label, g = a.label, h = e.width, i = e.to, j = e.from, k = t(j) && t(i), l = e.value, m = e.dashStyle, q = a.svgElem, o = [], p, H = e.color, w = e.zIndex, r = e.events, u = b.chart.renderer;
            b.isLog && (j = xa(j), i = xa(i), l = xa(l));
            if (h) {
                if (o = b.getPlotLinePath(l, h), d = {stroke: H,"stroke-width": h}, m) {
                    d.dashstyle = m;
                }
            } else {
                if (k) {
                    if (j = s(j, b.min - d), i = I(i, b.max + d), o = b.getPlotBandPath(j, i, e), d = {fill: H}, e.borderWidth) {
                        d.stroke = e.borderColor, d["stroke-width"] = e.borderWidth;
                    }
                } else {
                    return;
                }
            }
            if (t(w)) {
                d.zIndex = w;
            }
            if (q) {
                if (o) {
                    q.animate({d: o}, null, q.onGetPath);
                } else {
                    if (q.hide(), q.onGetPath = function() {
                        q.show();
                    }, g) {
                        a.label = g = g.destroy();
                    }
                }
            } else {
                if (o && o.length && (a.svgElem = q = u.path(o).attr(d).add(), r)) {
                    for (p in e = function(b) {
                        q.on(b, function(c) {
                            r[b].apply(a, [c]);
                        });
                    }, r) {
                        e(p);
                    }
                }
            }
            if (f && t(f.text) && o && o.length && b.width > 0 && b.height > 0) {
                f = x({align: c && k && "center",x: c ? !k && 4 : 10,verticalAlign: !c && k && "middle",y: c ? k ? 16 : 10 : k ? 6 : -4,rotation: c && !k && 90}, f);
                if (!g) {
                    a.label = g = u.text(f.text, 0, 0, f.useHTML).attr({align: f.textAlign || f.align,rotation: f.rotation,zIndex: w}).css(f.style).add();
                }
                b = [o[1], o[4], n(o[6], o[1])];
                o = [o[2], o[5], n(o[7], o[2])];
                c = La(b);
                k = La(o);
                g.align(f, !1, {x: c,y: k,width: za(b) - c,height: za(o) - k});
                g.show();
            } else {
                g && g.hide();
            }
            return a;
        },destroy: function() {
            ha(this.axis.plotLinesAndBands, this);
            delete this.axis;
            Ma(this);
        }};
    qa.prototype = {defaultOptions: {dateTimeLabelFormats: {millisecond: "%H:%M:%S.%L",second: "%H:%M:%S",minute: "%H:%M",hour: "%H:%M",day: "%e. %b",week: "%e. %b",month: "%b '%y",year: "%Y"},endOnTick: !1,gridLineColor: "#C0C0C0",labels: J,lineColor: "#C0D0E0",lineWidth: 1,minPadding: 0.01,maxPadding: 0.01,minorGridLineColor: "#E0E0E0",minorGridLineWidth: 1,minorTickColor: "#A0A0A0",minorTickLength: 2,minorTickPosition: "outside",startOfWeek: 1,startOnTick: !1,tickColor: "#C0D0E0",tickLength: 5,tickmarkPlacement: "between",tickPixelInterval: 100,tickPosition: "outside",tickWidth: 1,title: {align: "middle",style: {color: "#4d759e",fontWeight: "bold"}},type: "linear"},defaultYAxisOptions: {endOnTick: !0,gridLineWidth: 1,tickPixelInterval: 72,showLastLabel: !0,labels: {x: -8,y: 3},lineWidth: 0,maxPadding: 0.05,minPadding: 0.05,startOnTick: !0,tickWidth: 0,title: {rotation: 270,text: "Values"},stackLabels: {enabled: !1,formatter: function() {
                    return Da(this.total, -1);
                },style: J.style}},defaultLeftAxisOptions: {labels: {x: -8,y: null},title: {rotation: 270}},defaultRightAxisOptions: {labels: {x: 8,y: null},title: {rotation: 90}},defaultBottomAxisOptions: {labels: {x: 0,y: 14},title: {rotation: 0}},defaultTopAxisOptions: {labels: {x: 0,y: -5},title: {rotation: 0}},init: function(a, b) {
            var c = b.isX;
            this.horiz = a.inverted ? !c : c;
            this.coll = (this.isXAxis = c) ? "xAxis" : "yAxis";
            this.opposite = b.opposite;
            this.side = b.side || (this.horiz ? this.opposite ? 0 : 2 : this.opposite ? 1 : 3);
            this.setOptions(b);
            var d = this.options, e = d.type;
            this.labelFormatter = d.labels.formatter || this.defaultLabelFormatter;
            this.userOptions = b;
            this.minPixelPadding = 0;
            this.chart = a;
            this.reversed = d.reversed;
            this.zoomEnabled = d.zoomEnabled !== !1;
            this.categories = d.categories || e === "category";
            this.names = [];
            this.isLog = e === "logarithmic";
            this.isDatetimeAxis = e === "datetime";
            this.isLinked = t(d.linkedTo);
            this.tickmarkOffset = this.categories && d.tickmarkPlacement === "between" ? 0.5 : 0;
            this.ticks = {};
            this.labelEdge = [];
            this.minorTicks = {};
            this.plotLinesAndBands = [];
            this.alternateBands = {};
            this.len = 0;
            this.minRange = this.userMinRange = d.minRange || d.maxZoom;
            this.range = d.range;
            this.offset = d.offset || 0;
            this.stacks = {};
            this.oldStacks = {};
            this.stackExtremes = {};
            this.min = this.max = null;
            this.crosshair = n(d.crosshair, ja(a.options.tooltip.crosshairs)[c ? 0 : 1], !1);
            var f, d = this.options.events;
            sa(this, a.axes) === -1 && (a.axes.push(this), a[this.coll].push(this));
            this.series = this.series || [];
            if (a.inverted && c && this.reversed === u) {
                this.reversed = !0;
            }
            this.removePlotLine = this.removePlotBand = this.removePlotBandOrLine;
            for (f in d) {
                F(this, f, d[f]);
            }
            if (this.isLog) {
                this.val2lin = xa, this.lin2val = ga;
            }
        },setOptions: function(a) {
            this.options = x(this.defaultOptions, this.isXAxis ? {} : this.defaultYAxisOptions, [this.defaultTopAxisOptions, this.defaultRightAxisOptions, this.defaultBottomAxisOptions, this.defaultLeftAxisOptions][this.side], x(G[this.coll], a));
        },defaultLabelFormatter: function() {
            var a = this.axis, b = this.value, c = a.categories, d = this.dateTimeLabelFormat, e = G.lang.numericSymbols, f = e && e.length, g, h = a.options.labels.format, a = a.isLog ? b : a.tickInterval;
            if (h) {
                g = Fa(h, this);
            } else {
                if (c) {
                    g = b;
                } else {
                    if (d) {
                        g = ab(d, b);
                    } else {
                        if (f && a >= 1000) {
                            for (; f-- && g === u; ) {
                                c = Math.pow(1000, f + 1), a >= c && e[f] !== null && (g = Da(b / c, -1) + e[f]);
                            }
                        }
                    }
                }
            }
            g === u && (g = b >= 10000 ? Da(b, 0) : Da(b, -1, u, ""));
            return g;
        },getSeriesExtremes: function() {
            var a = this, b = a.chart;
            a.hasVisibleSeries = !1;
            a.dataMin = a.dataMax = null;
            a.stackExtremes = {};
            a.buildStacks();
            p(a.series, function(c) {
                if (c.visible || !b.options.chart.ignoreHiddenSeries) {
                    var d;
                    d = c.options.threshold;
                    var e;
                    a.hasVisibleSeries = !0;
                    a.isLog && d <= 0 && (d = null);
                    if (a.isXAxis) {
                        if (d = c.xData, d.length) {
                            a.dataMin = I(n(a.dataMin, d[0]), La(d)), a.dataMax = s(n(a.dataMax, d[0]), za(d));
                        }
                    } else {
                        c.getExtremes();
                        e = c.dataMax;
                        c = c.dataMin;
                        if (t(c) && t(e)) {
                            a.dataMin = I(n(a.dataMin, c), c), a.dataMax = s(n(a.dataMax, e), e);
                        }
                        if (t(d)) {
                            if (a.dataMin >= d) {
                                a.dataMin = d, a.ignoreMinPadding = !0;
                            } else {
                                if (a.dataMax < d) {
                                    a.dataMax = d, a.ignoreMaxPadding = !0;
                                }
                            }
                        }
                    }
                }
            });
        },translate: function(a, b, c, d, e, f) {
            var g = this.len, h = 1, i = 0, j = d ? this.oldTransA : this.transA, d = d ? this.oldMin : this.min, k = this.minPixelPadding, e = (this.options.ordinal || this.isLog && e) && this.lin2val;
            if (!j) {
                j = this.transA;
            }
            c && (h *= -1, i = g);
            this.reversed && (h *= -1, i -= h * g);
            b ? (a = a * h + i, a -= k, a = a / j + d, e && (a = this.lin2val(a))) : (e && (a = this.val2lin(a)), f === "between" && (f = 0.5), a = h * (a - d) * j + i + h * k + (wa(f) ? j * f * this.pointRange : 0));
            return a;
        },toPixels: function(a, b) {
            return this.translate(a, !1, !this.horiz, null, !0) + (b ? 0 : this.pos);
        },toValue: function(a, b) {
            return this.translate(a - (b ? 0 : this.pos), !0, !this.horiz, null, !0);
        },getPlotLinePath: function(a, b, c, d, e) {
            var f = this.chart, g = this.left, h = this.top, i, j, k = c && f.oldChartHeight || f.chartHeight, l = c && f.oldChartWidth || f.chartWidth, m;
            i = this.transB;
            e = n(e, this.translate(a, null, null, c));
            a = c = w(e + i);
            i = j = w(k - e - i);
            if (isNaN(e)) {
                m = !0;
            } else {
                if (this.horiz) {
                    if (i = h, j = k - this.bottom, a < g || a > g + this.width) {
                        m = !0;
                    }
                } else {
                    if (a = g, c = l - this.right, i < h || i > h + this.height) {
                        m = !0;
                    }
                }
            }
            return m && !d ? null : f.renderer.crispLine(["M", a, i, "L", c, j], b || 1);
        },getLinearTickPositions: function(a, b, c) {
            for (var d, b = aa(N(b / a) * a), c = aa(Ha(c / a) * a), e = []; b <= c; ) {
                e.push(b);
                b = aa(b + a);
                if (b === d) {
                    break;
                }
                d = b;
            }
            return e;
        },getMinorTickPositions: function() {
            var a = this.options, b = this.tickPositions, c = this.minorTickInterval, d = [], e;
            if (this.isLog) {
                e = b.length;
                for (a = 1; a < e; a++) {
                    d = d.concat(this.getLogTickPositions(c, b[a - 1], b[a], !0));
                }
            } else {
                if (this.isDatetimeAxis && a.minorTickInterval === "auto") {
                    d = d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c), this.min, this.max, a.startOfWeek)), d[0] < this.min && d.shift();
                } else {
                    for (b = this.min + (b[0] - this.min) % c; b <= this.max; b += c) {
                        d.push(b);
                    }
                }
            }
            return d;
        },adjustForMinRange: function() {
            var a = this.options, b = this.min, c = this.max, d, e = this.dataMax - this.dataMin >= this.minRange, f, g, h, i, j;
            if (this.isXAxis && this.minRange === u && !this.isLog) {
                t(a.min) || t(a.max) ? this.minRange = null : (p(this.series, function(a) {
                    i = a.xData;
                    for (g = j = a.xIncrement ? 1 : i.length - 1; g > 0; g--) {
                        if (h = i[g] - i[g - 1], f === u || h < f) {
                            f = h;
                        }
                    }
                }), this.minRange = I(f * 5, this.dataMax - this.dataMin));
            }
            if (c - b < this.minRange) {
                var k = this.minRange;
                d = (k - c + b) / 2;
                d = [b - d, n(a.min, b - d)];
                if (e) {
                    d[2] = this.dataMin;
                }
                b = za(d);
                c = [b + k, n(a.max, b + k)];
                if (e) {
                    c[2] = this.dataMax;
                }
                c = La(c);
                c - b < k && (d[0] = c - k, d[1] = n(a.min, c - k), b = za(d));
            }
            this.min = b;
            this.max = c;
        },setAxisTranslation: function(a) {
            var b = this.max - this.min, c = 0, d, e = 0, f = 0, g = this.linkedParent, h = !!this.categories, i = this.transA;
            if (this.isXAxis || h) {
                g ? (e = g.minPointOffset, f = g.pointRangePadding) : p(this.series, function(a) {
                    var g = s(a.pointRange, +h), i = a.options.pointPlacement, m = a.closestPointRange;
                    g > b && (g = 0);
                    c = s(c, g);
                    e = s(e, fa(i) ? 0 : g / 2);
                    f = s(f, i === "on" ? 0 : g);
                    !a.noSharedTooltip && t(m) && (d = t(d) ? I(d, m) : m);
                }), g = this.ordinalSlope && d ? this.ordinalSlope / d : 1, this.minPointOffset = e *= g, this.pointRangePadding = f *= g, this.pointRange = I(c, b), this.closestPointRange = d;
            }
            if (a) {
                this.oldTransA = i;
            }
            this.translationSlope = this.transA = i = this.len / (b + f || 1);
            this.transB = this.horiz ? this.left : this.bottom;
            this.minPixelPadding = i * e;
        },setTickPositions: function(a) {
            var b = this, c = b.chart, d = b.options, e = b.isLog, f = b.isDatetimeAxis, g = b.isXAxis, h = b.isLinked, i = b.options.tickPositioner, j = d.maxPadding, k = d.minPadding, l = d.tickInterval, m = d.minTickInterval, q = d.tickPixelInterval, o, ma = b.categories;
            h ? (b.linkedParent = c[b.coll][d.linkedTo], c = b.linkedParent.getExtremes(), b.min = n(c.min, c.dataMin), b.max = n(c.max, c.dataMax), d.type !== b.linkedParent.options.type && ka(11, 1)) : (b.min = n(b.userMin, d.min, b.dataMin), b.max = n(b.userMax, d.max, b.dataMax));
            if (e) {
                !a && I(b.min, n(b.dataMin, b.min)) <= 0 && ka(10, 1), b.min = aa(xa(b.min)), b.max = aa(xa(b.max));
            }
            if (b.range && t(b.max)) {
                b.userMin = b.min = s(b.min, b.max - b.range), b.userMax = b.max, b.range = null;
            }
            b.beforePadding && b.beforePadding();
            b.adjustForMinRange();
            if (!ma && !b.usePercentage && !h && t(b.min) && t(b.max) && (c = b.max - b.min)) {
                if (!t(d.min) && !t(b.userMin) && k && (b.dataMin < 0 || !b.ignoreMinPadding)) {
                    b.min -= c * k;
                }
                if (!t(d.max) && !t(b.userMax) && j && (b.dataMax > 0 || !b.ignoreMaxPadding)) {
                    b.max += c * j;
                }
            }
            b.min === b.max || b.min === void 0 || b.max === void 0 ? b.tickInterval = 1 : h && !l && q === b.linkedParent.options.tickPixelInterval ? b.tickInterval = b.linkedParent.tickInterval : (b.tickInterval = n(l, ma ? 1 : (b.max - b.min) * q / s(b.len, q)), !t(l) && b.len < q && !this.isRadial && !ma && d.startOnTick && d.endOnTick && (o = !0, b.tickInterval /= 4));
            g && !a && p(b.series, function(a) {
                a.processData(b.min !== b.oldMin || b.max !== b.oldMax);
            });
            b.setAxisTranslation(!0);
            b.beforeSetTickPositions && b.beforeSetTickPositions();
            if (b.postProcessTickInterval) {
                b.tickInterval = b.postProcessTickInterval(b.tickInterval);
            }
            if (b.pointRange) {
                b.tickInterval = s(b.pointRange, b.tickInterval);
            }
            if (!l && b.tickInterval < m) {
                b.tickInterval = m;
            }
            if (!f && !e && !l) {
                b.tickInterval = nb(b.tickInterval, null, mb(b.tickInterval), d);
            }
            b.minorTickInterval = d.minorTickInterval === "auto" && b.tickInterval ? b.tickInterval / 5 : d.minorTickInterval;
            b.tickPositions = a = d.tickPositions ? [].concat(d.tickPositions) : i && i.apply(b, [b.min, b.max]);
            if (!a) {
                !b.ordinalPositions && (b.max - b.min) / b.tickInterval > s(2 * b.len, 200) && ka(19, !0), a = f ? b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval, d.units), b.min, b.max, d.startOfWeek, b.ordinalPositions, b.closestPointRange, !0) : e ? b.getLogTickPositions(b.tickInterval, b.min, b.max) : b.getLinearTickPositions(b.tickInterval, b.min, b.max), o && a.splice(1, a.length - 2), b.tickPositions = a;
            }
            if (!h) {
                e = a[0], f = a[a.length - 1], h = b.minPointOffset || 0, d.startOnTick ? b.min = e : b.min - h > e && a.shift(), d.endOnTick ? b.max = f : b.max + h < f && a.pop(), a.length === 1 && (b.min -= 0.001, b.max += 0.001);
            }
        },setMaxTicks: function() {
            var a = this.chart, b = a.maxTicks || {}, c = this.tickPositions, d = this._maxTicksKey = [this.coll, this.pos, this.len].join("-");
            if (!this.isLinked && !this.isDatetimeAxis && c && c.length > (b[d] || 0) && this.options.alignTicks !== !1) {
                b[d] = c.length;
            }
            a.maxTicks = b;
        },adjustTickAmount: function() {
            var a = this._maxTicksKey, b = this.tickPositions, c = this.chart.maxTicks;
            if (c && c[a] && !this.isDatetimeAxis && !this.categories && !this.isLinked && this.options.alignTicks !== !1 && this.min !== u) {
                var d = this.tickAmount, e = b.length;
                this.tickAmount = a = c[a];
                if (e < a) {
                    for (; b.length < a; ) {
                        b.push(aa(b[b.length - 1] + this.tickInterval));
                    }
                    this.transA *= (e - 1) / (a - 1);
                    this.max = b[b.length - 1];
                }
                if (t(d) && a !== d) {
                    this.isDirty = !0;
                }
            }
        },setScale: function() {
            var a = this.stacks, b, c, d, e;
            this.oldMin = this.min;
            this.oldMax = this.max;
            this.oldAxisLength = this.len;
            this.setAxisSize();
            e = this.len !== this.oldAxisLength;
            p(this.series, function(a) {
                if (a.isDirtyData || a.isDirty || a.xAxis.isDirty) {
                    d = !0;
                }
            });
            if (e || d || this.isLinked || this.forceRedraw || this.userMin !== this.oldUserMin || this.userMax !== this.oldUserMax) {
                if (!this.isXAxis) {
                    for (b in a) {
                        for (c in a[b]) {
                            a[b][c].total = null, a[b][c].cum = 0;
                        }
                    }
                }
                this.forceRedraw = !1;
                this.getSeriesExtremes();
                this.setTickPositions();
                this.oldUserMin = this.userMin;
                this.oldUserMax = this.userMax;
                if (!this.isDirty) {
                    this.isDirty = e || this.min !== this.oldMin || this.max !== this.oldMax;
                }
            } else {
                if (!this.isXAxis) {
                    if (this.oldStacks) {
                        a = this.stacks = this.oldStacks;
                    }
                    for (b in a) {
                        for (c in a[b]) {
                            a[b][c].cum = a[b][c].total;
                        }
                    }
                }
            }
            this.setMaxTicks();
        },setExtremes: function(a, b, c, d, e) {
            var f = this, g = f.chart, c = n(c, !0), e = r(e, {min: a,max: b});
            A(f, "setExtremes", e, function() {
                f.userMin = a;
                f.userMax = b;
                f.eventArgs = e;
                f.isDirtyExtremes = !0;
                c && g.redraw(d);
            });
        },zoom: function(a, b) {
            this.allowZoomOutside || (t(this.dataMin) && a <= this.dataMin && (a = u), t(this.dataMax) && b >= this.dataMax && (b = u));
            this.displayBtn = a !== u || b !== u;
            this.setExtremes(a, b, !1, u, {trigger: "zoom"});
            return !0;
        },setAxisSize: function() {
            var a = this.chart, b = this.options, c = b.offsetLeft || 0, d = b.offsetRight || 0, e = this.horiz, f, g;
            this.left = g = n(b.left, a.plotLeft + c);
            this.top = f = n(b.top, a.plotTop);
            this.width = c = n(b.width, a.plotWidth - c + d);
            this.height = b = n(b.height, a.plotHeight);
            this.bottom = a.chartHeight - b - f;
            this.right = a.chartWidth - c - g;
            this.len = s(e ? c : b, 0);
            this.pos = e ? g : f;
        },getExtremes: function() {
            var a = this.isLog;
            return {min: a ? aa(ga(this.min)) : this.min,max: a ? aa(ga(this.max)) : this.max,dataMin: this.dataMin,dataMax: this.dataMax,userMin: this.userMin,userMax: this.userMax};
        },getThreshold: function(a) {
            var b = this.isLog, c = b ? ga(this.min) : this.min, b = b ? ga(this.max) : this.max;
            c > a || a === null ? a = c : b < a && (a = b);
            return this.translate(a, 0, 1, 0, 1);
        },autoLabelAlign: function(a) {
            a = (n(a, 0) - this.side * 90 + 720) % 360;
            return a > 15 && a < 165 ? "right" : a > 195 && a < 345 ? "left" : "center";
        },getOffset: function() {
            var a = this, b = a.chart, c = b.renderer, d = a.options, e = a.tickPositions, f = a.ticks, g = a.horiz, h = a.side, i = b.inverted ? [1, 0, 3, 2][h] : h, j, k = 0, l, m = 0, q = d.title, o = d.labels, ma = 0, H = b.axisOffset, w = b.clipOffset, r = [-1, 1, 1, -1][h], v, x = 1, Z = n(o.maxStaggerLines, 5), y, z, K, B;
            a.hasData = j = a.hasVisibleSeries || t(a.min) && t(a.max) && !!e;
            a.showAxis = b = j || n(d.showEmpty, !0);
            a.staggerLines = a.horiz && o.staggerLines;
            if (!a.axisGroup) {
                a.gridGroup = c.g("grid").attr({zIndex: d.gridZIndex || 1}).add(), a.axisGroup = c.g("axis").attr({zIndex: d.zIndex || 2}).add(), a.labelGroup = c.g("axis-labels").attr({zIndex: o.zIndex || 7}).add();
            }
            if (j || a.isLinked) {
                a.labelAlign = n(o.align || a.autoLabelAlign(o.rotation));
                p(e, function(b) {
                    f[b] ? f[b].addLabel() : f[b] = new Qa(a, b);
                });
                if (a.horiz && !a.staggerLines && Z && !o.rotation) {
                    for (v = a.reversed ? [].concat(e).reverse() : e; x < Z; ) {
                        j = [];
                        y = !1;
                        for (o = 0; o < v.length; o++) {
                            z = v[o], K = (K = f[z].label && f[z].label.getBBox()) ? K.width : 0, B = o % x, K && (z = a.translate(z), j[B] !== u && z < j[B] && (y = !0), j[B] = z + K);
                        }
                        if (y) {
                            x++;
                        } else {
                            break;
                        }
                    }
                    if (x > 1) {
                        a.staggerLines = x;
                    }
                }
                p(e, function(b) {
                    if (h === 0 || h === 2 || {1: "left",3: "right"}[h] === a.labelAlign) {
                        ma = s(f[b].getLabelSize(), ma);
                    }
                });
                if (a.staggerLines) {
                    ma *= a.staggerLines, a.labelOffset = ma;
                }
            } else {
                for (v in f) {
                    f[v].destroy(), delete f[v];
                }
            }
            if (q && q.text && q.enabled !== !1) {
                if (!a.axisTitle) {
                    a.axisTitle = c.text(q.text, 0, 0, q.useHTML).attr({zIndex: 7,rotation: q.rotation || 0,align: q.textAlign || {low: "left",middle: "center",high: "right"}[q.align]}).css(q.style).add(a.axisGroup), a.axisTitle.isNew = !0;
                }
                if (b) {
                    k = a.axisTitle.getBBox()[g ? "height" : "width"], m = n(q.margin, g ? 5 : 10), l = q.offset;
                }
                a.axisTitle[b ? "show" : "hide"]();
            }
            a.offset = r * n(d.offset, H[h]);
            a.axisTitleMargin = n(l, ma + m + (h !== 2 && ma && r * d.labels[g ? "y" : "x"]));
            H[h] = s(H[h], a.axisTitleMargin + k + r * a.offset);
            w[i] = s(w[i], N(d.lineWidth / 2) * 2);
        },getLinePath: function(a) {
            var b = this.chart, c = this.opposite, d = this.offset, e = this.horiz, f = this.left + (c ? this.width : 0) + d, d = b.chartHeight - this.bottom - (c ? this.height : 0) + d;
            c && (a *= -1);
            return b.renderer.crispLine(["M", e ? this.left : f, e ? d : this.top, "L", e ? b.chartWidth - this.right : f, e ? d : b.chartHeight - this.bottom], a);
        },getTitlePosition: function() {
            var a = this.horiz, b = this.left, c = this.top, d = this.len, e = this.options.title, f = a ? b : c, g = this.opposite, h = this.offset, i = z(e.style.fontSize || 12), d = {low: f + (a ? 0 : d),middle: f + d / 2,high: f + (a ? d : 0)}[e.align], b = (a ? c + this.height : b) + (a ? 1 : -1) * (g ? -1 : 1) * this.axisTitleMargin + (this.side === 2 ? i : 0);
            return {x: a ? d : b + (g ? this.width : 0) + h + (e.x || 0),y: a ? b - (g ? this.height : 0) + h : d + (e.y || 0)};
        },render: function() {
            var a = this, b = a.horiz, c = a.reversed, d = a.chart, e = d.renderer, f = a.options, g = a.isLog, h = a.isLinked, i = a.tickPositions, j, k = a.axisTitle, l = a.stacks, m = a.ticks, q = a.minorTicks, o = a.alternateBands, n = f.stackLabels, H = f.alternateGridColor, s = a.tickmarkOffset, r = f.lineWidth, w = d.hasRendered && t(a.oldMin) && !isNaN(a.oldMin), v = a.hasData, x = a.showAxis, y, z = a.justifyLabels = !a.staggerLines && b && f.labels.overflow === "justify", K;
            a.labelEdge.length = 0;
            p([m, q, o], function(a) {
                for (var b in a) {
                    a[b].isActive = !1;
                }
            });
            if (v || h) {
                if (a.minorTickInterval && !a.categories && p(a.getMinorTickPositions(), function(b) {
                    q[b] || (q[b] = new Qa(a, b, "minor"));
                    w && q[b].isNew && q[b].render(null, !0);
                    q[b].render(null, !1, 1);
                }), i.length && (j = i.slice(), (b && c || !b && !c) && j.reverse(), z && (j = j.slice(1).concat([j[0]])), p(j, function(b, c) {
                    z && (c = c === j.length - 1 ? 0 : c + 1);
                    if (!h || b >= a.min && b <= a.max) {
                        m[b] || (m[b] = new Qa(a, b)), w && m[b].isNew && m[b].render(c, !0, 0.1), m[b].render(c, !1, 1);
                    }
                }), s && a.min === 0 && (m[-1] || (m[-1] = new Qa(a, -1, null, !0)), m[-1].render(-1))), H && p(i, function(b, c) {
                    if (c % 2 === 0 && b < a.max) {
                        o[b] || (o[b] = new yb(a)), y = b + s, K = i[c + 1] !== u ? i[c + 1] + s : a.max, o[b].options = {from: g ? ga(y) : y,to: g ? ga(K) : K,color: H}, o[b].render(), o[b].isActive = !0;
                    }
                }), !a._addedPlotLB) {
                    p((f.plotLines || []).concat(f.plotBands || []), function(b) {
                        a.addPlotBandOrLine(b);
                    }), a._addedPlotLB = !0;
                }
            }
            p([m, q, o], function(a) {
                var b, c, e = [], f = oa ? oa.duration || 500 : 0, g = function() {
                    for (c = e.length; c--; ) {
                        a[e[c]] && !a[e[c]].isActive && (a[e[c]].destroy(), delete a[e[c]]);
                    }
                };
                for (b in a) {
                    if (!a[b].isActive) {
                        a[b].render(b, !1, 0), a[b].isActive = !1, e.push(b);
                    }
                }
                a === o || !d.hasRendered || !f ? g() : f && setTimeout(g, f);
            });
            if (r) {
                b = a.getLinePath(r), a.axisLine ? a.axisLine.animate({d: b}) : a.axisLine = e.path(b).attr({stroke: f.lineColor,"stroke-width": r,zIndex: 7}).add(a.axisGroup), a.axisLine[x ? "show" : "hide"]();
            }
            if (k && x) {
                k[k.isNew ? "attr" : "animate"](a.getTitlePosition()), k.isNew = !1;
            }
            if (n && n.enabled) {
                var B, A, f = a.stackTotalGroup;
                if (!f) {
                    a.stackTotalGroup = f = e.g("stack-labels").attr({visibility: "visible",zIndex: 6}).add();
                }
                f.translate(d.plotLeft, d.plotTop);
                for (B in l) {
                    for (A in e = l[B], e) {
                        e[A].render(f);
                    }
                }
            }
            a.isDirty = !1;
        },redraw: function() {
            var a = this.chart.pointer;
            a.reset && a.reset(!0);
            this.render();
            p(this.plotLinesAndBands, function(a) {
                a.render();
            });
            p(this.series, function(a) {
                a.isDirty = !0;
            });
        },buildStacks: function() {
            var a = this.series, b = a.length;
            if (!this.isXAxis) {
                for (; b--; ) {
                    a[b].setStackedPoints();
                }
                if (this.usePercentage) {
                    for (b = 0; b < a.length; b++) {
                        a[b].setPercentStacks();
                    }
                }
            }
        },destroy: function(a) {
            var b = this, c = b.stacks, d, e = b.plotLinesAndBands;
            a || X(b);
            for (d in c) {
                Ma(c[d]), c[d] = null;
            }
            p([b.ticks, b.minorTicks, b.alternateBands], function(a) {
                Ma(a);
            });
            for (a = e.length; a--; ) {
                e[a].destroy();
            }
            p("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","), function(a) {
                b[a] && (b[a] = b[a].destroy());
            });
            this.cross && this.cross.destroy();
        },drawCrosshair: function(a, b) {
            if (this.crosshair) {
                if ((t(b) || !n(this.crosshair.snap, !0)) === !1) {
                    this.hideCrosshair();
                } else {
                    var c, d = this.crosshair, e = d.animation;
                    n(d.snap, !0) ? t(b) && (c = this.chart.inverted != this.horiz ? b.plotX : this.len - b.plotY) : c = this.horiz ? a.chartX - this.pos : this.len - a.chartY + this.pos;
                    c = this.isRadial ? this.getPlotLinePath(this.isXAxis ? b.x : n(b.stackY, b.y)) : this.getPlotLinePath(null, null, null, null, c);
                    if (c === null) {
                        this.hideCrosshair();
                    } else {
                        if (this.cross) {
                            this.cross.attr({visibility: "visible"})[e ? "animate" : "attr"]({d: c}, e);
                        } else {
                            e = {"stroke-width": d.width || 1,stroke: d.color || "#C0C0C0",zIndex: d.zIndex || 2};
                            if (d.dashStyle) {
                                e.dashstyle = d.dashStyle;
                            }
                            this.cross = this.chart.renderer.path(c).attr(e).add();
                        }
                    }
                }
            }
        },hideCrosshair: function() {
            this.cross && this.cross.hide();
        }};
    r(qa.prototype, {getPlotBandPath: function(a, b) {
            var c = this.getPlotLinePath(b), d = this.getPlotLinePath(a);
            d && c ? d.push(c[4], c[5], c[1], c[2]) : d = null;
            return d;
        },addPlotBand: function(a) {
            this.addPlotBandOrLine(a, "plotBands");
        },addPlotLine: function(a) {
            this.addPlotBandOrLine(a, "plotLines");
        },addPlotBandOrLine: function(a, b) {
            var c = (new yb(this, a)).render(), d = this.userOptions;
            c && (b && (d[b] = d[b] || [], d[b].push(a)), this.plotLinesAndBands.push(c));
            return c;
        },removePlotBandOrLine: function(a) {
            for (var b = this.plotLinesAndBands, c = this.options, d = this.userOptions, e = b.length; e--; ) {
                b[e].id === a && b[e].destroy();
            }
            p([c.plotLines || [], d.plotLines || [], c.plotBands || [], d.plotBands || []], function(b) {
                for (e = b.length; e--; ) {
                    b[e].id === a && ha(b, b[e]);
                }
            });
        }});
    qa.prototype.getLogTickPositions = function(a, b, c, d) {
        var e = this.options, f = this.len, g = [];
        if (!d) {
            this._minorAutoInterval = null;
        }
        if (a >= 0.5) {
            a = w(a), g = this.getLinearTickPositions(a, b, c);
        } else {
            if (a >= 0.08) {
                for (var f = N(b), h, i, j, k, l, e = a > 0.3 ? [1, 2, 4] : a > 0.15 ? [1, 2, 4, 6, 8] : [1, 2, 3, 4, 5, 6, 7, 8, 9]; f < c + 1 && !l; f++) {
                    i = e.length;
                    for (h = 0; h < i && !l; h++) {
                        j = xa(ga(f) * e[h]), j > b && (!d || k <= c) && g.push(k), k > c && (l = !0), k = j;
                    }
                }
            } else {
                if (b = ga(b), c = ga(c), a = e[d ? "minorTickInterval" : "tickInterval"], a = n(a === "auto" ? null : a, this._minorAutoInterval, (c - b) * (e.tickPixelInterval / (d ? 5 : 1)) / ((d ? f / this.tickPositions.length : f) || 1)), a = nb(a, null, mb(a)), g = Ra(this.getLinearTickPositions(a, b, c), xa), !d) {
                    this._minorAutoInterval = a / 5;
                }
            }
        }
        if (!d) {
            this.tickInterval = a;
        }
        return g;
    };
    qa.prototype.getTimeTicks = function(a, b, c, d) {
        var e = [], f = {}, g = G.global.useUTC, h, i = new Date(b - Pa), j = a.unitRange, k = a.count;
        if (t(b)) {
            j >= E.second && (i.setMilliseconds(0), i.setSeconds(j >= E.minute ? 0 : k * N(i.getSeconds() / k)));
            if (j >= E.minute) {
                i[Cb](j >= E.hour ? 0 : k * N(i[pb]() / k));
            }
            if (j >= E.hour) {
                i[Db](j >= E.day ? 0 : k * N(i[qb]() / k));
            }
            if (j >= E.day) {
                i[sb](j >= E.month ? 1 : k * N(i[Wa]() / k));
            }
            j >= E.month && (i[Eb](j >= E.year ? 0 : k * N(i[db]() / k)), h = i[eb]());
            j >= E.year && (h -= h % k, i[Fb](h));
            if (j === E.week) {
                i[sb](i[Wa]() - i[rb]() + n(d, 1));
            }
            b = 1;
            Pa && (i = new Date(i.getTime() + Pa));
            h = i[eb]();
            for (var d = i.getTime(), l = i[db](), m = i[Wa](), q = g ? Pa : (86400000 + i.getTimezoneOffset() * 60000) % 86400000; d < c; ) {
                e.push(d), j === E.year ? d = cb(h + b * k, 0) : j === E.month ? d = cb(h, l + b * k) : !g && (j === E.day || j === E.week) ? d = cb(h, l, m + b * k * (j === E.day ? 1 : 7)) : d += j * k, b++;
            }
            e.push(d);
            p(wb(e, function(a) {
                return j <= E.hour && a % E.day === q;
            }), function(a) {
                f[a] = "day";
            });
        }
        e.info = r(a, {higherRanks: f,totalRange: j * k});
        return e;
    };
    qa.prototype.normalizeTimeTickInterval = function(a, b) {
        var c = b || [["millisecond", [1, 2, 5, 10, 20, 25, 50, 100, 200, 500]], ["second", [1, 2, 5, 10, 15, 30]], ["minute", [1, 2, 5, 10, 15, 30]], ["hour", [1, 2, 3, 4, 6, 8, 12]], ["day", [1, 2]], ["week", [1, 2]], ["month", [1, 2, 3, 4, 6]], ["year", null]], d = c[c.length - 1], e = E[d[0]], f = d[1], g;
        for (g = 0; g < c.length; g++) {
            if (d = c[g], e = E[d[0]], f = d[1], c[g + 1] && a <= (e * f[f.length - 1] + E[c[g + 1][0]]) / 2) {
                break;
            }
        }
        e === E.year && a < 5 * e && (f = [1, 2, 5]);
        c = nb(a / e, f, d[0] === "year" ? s(mb(a / e), 1) : 1);
        return {unitRange: e,count: c,unitName: d[0]};
    };
    Gb.prototype = {destroy: function() {
            Ma(this, this.axis);
        },render: function(a) {
            var b = this.options, c = b.format, c = c ? Fa(c, this) : b.formatter.call(this);
            this.label ? this.label.attr({text: c,visibility: "hidden"}) : this.label = this.axis.chart.renderer.text(c, 0, 0, b.useHTML).css(b.style).attr({align: this.textAlign,rotation: b.rotation,visibility: "hidden"}).add(a);
        },setOffset: function(a, b) {
            var c = this.axis, d = c.chart, e = d.inverted, f = this.isNegative, g = c.translate(this.percent ? 100 : this.total, 0, 0, 0, 1), c = c.translate(0), c = M(g - c), h = d.xAxis[0].translate(this.x) + a, i = d.plotHeight, f = {x: e ? f ? g : g - c : h,y: e ? i - h - b : f ? i - g - c : i - g,width: e ? c : b,height: e ? b : c};
            if (e = this.label) {
                e.align(this.alignOptions, null, f), f = e.alignAttr, e.attr({visibility: this.options.crop === !1 || d.isInsidePlot(f.x, f.y) ? V ? "inherit" : "visible" : "hidden"});
            }
        }};
    tb.prototype = {init: function(a, b) {
            var c = b.borderWidth, d = b.style, e = z(d.padding);
            this.chart = a;
            this.options = b;
            this.crosshairs = [];
            this.now = {x: 0,y: 0};
            this.isHidden = !0;
            this.label = a.renderer.label("", 0, 0, b.shape, null, null, b.useHTML, null, "tooltip").attr({padding: e,fill: b.backgroundColor,"stroke-width": c,r: b.borderRadius,zIndex: 8}).css(d).css({padding: 0}).add().attr({y: -999});
            da || this.label.shadow(b.shadow);
            this.shared = b.shared;
        },destroy: function() {
            if (this.label) {
                this.label = this.label.destroy();
            }
            clearTimeout(this.hideTimer);
            clearTimeout(this.tooltipTimeout);
        },move: function(a, b, c, d) {
            var e = this, f = e.now, g = e.options.animation !== !1 && !e.isHidden;
            r(f, {x: g ? (2 * f.x + a) / 3 : a,y: g ? (f.y + b) / 2 : b,anchorX: g ? (2 * f.anchorX + c) / 3 : c,anchorY: g ? (f.anchorY + d) / 2 : d});
            e.label.attr(f);
            if (g && (M(a - f.x) > 1 || M(b - f.y) > 1)) {
                clearTimeout(this.tooltipTimeout), this.tooltipTimeout = setTimeout(function() {
                    e && e.move(a, b, c, d);
                }, 32);
            }
        },hide: function() {
            var a = this, b;
            clearTimeout(this.hideTimer);
            if (!this.isHidden) {
                b = this.chart.hoverPoints, this.hideTimer = setTimeout(function() {
                    a.label.fadeOut();
                    a.isHidden = !0;
                }, n(this.options.hideDelay, 500)), b && p(b, function(a) {
                    a.setState();
                }), this.chart.hoverPoints = null;
            }
        },getAnchor: function(a, b) {
            var c, d = this.chart, e = d.inverted, f = d.plotTop, g = 0, h = 0, i, a = ja(a);
            c = a[0].tooltipPos;
            this.followPointer && b && (b.chartX === u && (b = d.pointer.normalize(b)), c = [b.chartX - d.plotLeft, b.chartY - f]);
            c || (p(a, function(a) {
                i = a.series.yAxis;
                g += a.plotX;
                h += (a.plotLow ? (a.plotLow + a.plotHigh) / 2 : a.plotY) + (!e && i ? i.top - f : 0);
            }), g /= a.length, h /= a.length, c = [e ? d.plotWidth - h : g, this.shared && !e && a.length > 1 && b ? b.chartY - f : e ? d.plotHeight - g : h]);
            return Ra(c, w);
        },getPosition: function(a, b, c) {
            var d = this.chart, e = d.plotLeft, f = d.plotTop, g = d.plotWidth, h = d.plotHeight, i = n(this.options.distance, 12), j = c.plotX, c = c.plotY, d = j + e + (d.inverted ? i : -a - i), k = c - b + f + 15, l;
            d < 7 && (d = e + s(j, 0) + i);
            d + a > e + g && (d -= d + a - (e + g), k = c - b + f - i, l = !0);
            k < f + 5 && (k = f + 5, l && c >= k && c <= k + b && (k = c + f + i));
            k + b > f + h && (k = s(f, f + h - b - i));
            return {x: d,y: k};
        },defaultFormatter: function(a) {
            var b = this.points || ja(this), c = b[0].series, d;
            d = [c.tooltipHeaderFormatter(b[0])];
            p(b, function(a) {
                c = a.series;
                d.push(c.tooltipFormatter && c.tooltipFormatter(a) || a.point.tooltipFormatter(c.tooltipOptions.pointFormat));
            });
            d.push(a.options.footerFormat || "");
            return d.join("");
        },refresh: function(a, b) {
            var c = this.chart, d = this.label, e = this.options, f, g, h = {}, i, j = [];
            i = e.formatter || this.defaultFormatter;
            var h = c.hoverPoints, k, l = this.shared;
            clearTimeout(this.hideTimer);
            this.followPointer = ja(a)[0].series.tooltipOptions.followPointer;
            g = this.getAnchor(a, b);
            f = g[0];
            g = g[1];
            l && (!a.series || !a.series.noSharedTooltip) ? (c.hoverPoints = a, h && p(h, function(a) {
                a.setState();
            }), p(a, function(a) {
                a.setState("hover");
                j.push(a.getLabelConfig());
            }), h = {x: a[0].category,y: a[0].y}, h.points = j, a = a[0]) : h = a.getLabelConfig();
            i = i.call(h, this);
            h = a.series;
            i === !1 ? this.hide() : (this.isHidden && (Za(d), d.attr("opacity", 1).show()), d.attr({text: i}), k = e.borderColor || a.color || h.color || "#606060", d.attr({stroke: k}), this.updatePosition({plotX: f,plotY: g}), this.isHidden = !1);
            A(c, "tooltipRefresh", {text: i,x: f + c.plotLeft,y: g + c.plotTop,borderColor: k});
        },updatePosition: function(a) {
            var b = this.chart, c = this.label, c = (this.options.positioner || this.getPosition).call(this, c.width, c.height, a);
            this.move(w(c.x), w(c.y), a.plotX + b.plotLeft, a.plotY + b.plotTop);
        }};
    var $a = Highcharts.Pointer = function(a, b) {
        this.init(a, b);
    };
    $a.prototype = {init: function(a, b) {
            var c = b.chart, d = c.events, e = da ? "" : c.zoomType, c = a.inverted, f;
            this.options = b;
            this.chart = a;
            this.zoomX = f = /x/.test(e);
            this.zoomY = e = /y/.test(e);
            this.zoomHor = f && !c || e && c;
            this.zoomVert = e && !c || f && c;
            this.runChartClick = d && !!d.click;
            this.pinchDown = [];
            this.lastValidTouch = {};
            if (b.tooltip.enabled) {
                a.tooltip = new tb(a, b.tooltip);
            }
            this.setDOMEvents();
        },normalize: function(a, b) {
            var c, d, a = a || C.event;
            if (!a.target) {
                a.target = a.srcElement;
            }
            a = Rb(a);
            d = a.touches ? a.touches.item(0) : a;
            if (!b) {
                this.chartPosition = b = Qb(this.chart.container);
            }
            d.pageX === u ? (c = s(a.x, a.clientX - b.left), d = a.y) : (c = d.pageX - b.left, d = d.pageY - b.top);
            return r(a, {chartX: w(c),chartY: w(d)});
        },getCoordinates: function(a) {
            var b = {xAxis: [],yAxis: []};
            p(this.chart.axes, function(c) {
                b[c.isXAxis ? "xAxis" : "yAxis"].push({axis: c,value: c.toValue(a[c.horiz ? "chartX" : "chartY"])});
            });
            return b;
        },getIndex: function(a) {
            var b = this.chart;
            return b.inverted ? b.plotHeight + b.plotTop - a.chartY : a.chartX - b.plotLeft;
        },runPointActions: function(a) {
            var b = this, c = b.chart, d = c.series, e = c.tooltip, f, g, h = c.hoverPoint, i = c.hoverSeries, j, k, l = c.chartWidth, m = b.getIndex(a);
            if (e && b.options.tooltip.shared && (!i || !i.noSharedTooltip)) {
                g = [];
                j = d.length;
                for (k = 0; k < j; k++) {
                    if (d[k].visible && d[k].options.enableMouseTracking !== !1 && !d[k].noSharedTooltip && d[k].tooltipPoints.length && (f = d[k].tooltipPoints[m]) && f.series) {
                        f._dist = M(m - f.clientX), l = I(l, f._dist), g.push(f);
                    }
                }
                for (j = g.length; j--; ) {
                    g[j]._dist > l && g.splice(j, 1);
                }
                if (g.length && g[0].clientX !== b.hoverX) {
                    e.refresh(g, a), b.hoverX = g[0].clientX;
                }
            }
            if (i && i.tracker) {
                if ((f = i.tooltipPoints[m]) && f !== h) {
                    f.onMouseOver(a);
                }
            } else {
                e && e.followPointer && !e.isHidden && (d = e.getAnchor([{}], a), e.updatePosition({plotX: d[0],plotY: d[1]}));
            }
            if (e && !b._onDocumentMouseMove) {
                b._onDocumentMouseMove = function(a) {
                    b.onDocumentMouseMove(a);
                }, F(y, "mousemove", b._onDocumentMouseMove);
            }
            p(c.axes, function(b) {
                b.drawCrosshair(a, n(f, h));
            });
        },reset: function(a) {
            var b = this.chart, c = b.hoverSeries, d = b.hoverPoint, e = b.tooltip, f = e && e.shared ? b.hoverPoints : d;
            (a = a && e && f) && ja(f)[0].plotX === u && (a = !1);
            if (a) {
                e.refresh(f), d && d.setState(d.state, !0);
            } else {
                if (d) {
                    d.onMouseOut();
                }
                if (c) {
                    c.onMouseOut();
                }
                e && e.hide();
                if (this._onDocumentMouseMove) {
                    X(y, "mousemove", this._onDocumentMouseMove), this._onDocumentMouseMove = null;
                }
                p(b.axes, function(a) {
                    a.hideCrosshair();
                });
                this.hoverX = null;
            }
        },scaleGroups: function(a, b) {
            var c = this.chart, d;
            p(c.series, function(e) {
                d = a || e.getPlotBox();
                e.xAxis && e.xAxis.zoomEnabled && (e.group.attr(d), e.markerGroup && (e.markerGroup.attr(d), e.markerGroup.clip(b ? c.clipRect : null)), e.dataLabelsGroup && e.dataLabelsGroup.attr(d));
            });
            c.clipRect.attr(b || c.clipBox);
        },pinchTranslate: function(a, b, c, d, e, f, g, h) {
            a && this.pinchTranslateDirection(!0, c, d, e, f, g, h);
            b && this.pinchTranslateDirection(!1, c, d, e, f, g, h);
        },pinchTranslateDirection: function(a, b, c, d, e, f, g, h) {
            var i = this.chart, j = a ? "x" : "y", k = a ? "X" : "Y", l = "chart" + k, m = a ? "width" : "height", q = i["plot" + (a ? "Left" : "Top")], o, n, p = h || 1, s = i.inverted, t = i.bounds[a ? "h" : "v"], r = b.length === 1, w = b[0][l], u = c[0][l], v = !r && b[1][l], x = !r && c[1][l], y, c = function() {
                !r && M(w - v) > 20 && (p = h || M(u - x) / M(w - v));
                n = (q - u) / p + w;
                o = i["plot" + (a ? "Width" : "Height")] / p;
            };
            c();
            b = n;
            b < t.min ? (b = t.min, y = !0) : b + o > t.max && (b = t.max - o, y = !0);
            y ? (u -= 0.8 * (u - g[j][0]), r || (x -= 0.8 * (x - g[j][1])), c()) : g[j] = [u, x];
            s || (f[j] = n - q, f[m] = o);
            f = s ? 1 / p : p;
            e[m] = o;
            e[j] = b;
            d[s ? a ? "scaleY" : "scaleX" : "scale" + k] = p;
            d["translate" + k] = f * q + (u - f * w);
        },pinch: function(a) {
            var b = this, c = b.chart, d = b.pinchDown, e = c.tooltip && c.tooltip.options.followTouchMove, f = a.touches, g = f.length, h = b.lastValidTouch, i = b.zoomHor || b.pinchHor, j = b.zoomVert || b.pinchVert, k = i || j, l = b.selectionMarker, m = {}, q = g === 1 && (b.inClass(a.target, "highcharts-tracker") && c.runTrackerClick || c.runChartClick), o = {};
            (k || e) && !q && a.preventDefault();
            Ra(f, function(a) {
                return b.normalize(a);
            });
            if (a.type === "touchstart") {
                p(f, function(a, b) {
                    d[b] = {chartX: a.chartX,chartY: a.chartY};
                }), h.x = [d[0].chartX, d[1] && d[1].chartX], h.y = [d[0].chartY, d[1] && d[1].chartY], p(c.axes, function(a) {
                    if (a.zoomEnabled) {
                        var b = c.bounds[a.horiz ? "h" : "v"], d = a.minPixelPadding, e = a.toPixels(a.dataMin), f = a.toPixels(a.dataMax), g = I(e, f), e = s(e, f);
                        b.min = I(a.pos, g - d);
                        b.max = s(a.pos + a.len, e + d);
                    }
                });
            } else {
                if (d.length) {
                    if (!l) {
                        b.selectionMarker = l = r({destroy: la}, c.plotBox);
                    }
                    b.pinchTranslate(i, j, d, f, m, l, o, h);
                    b.hasPinched = k;
                    b.scaleGroups(m, o);
                    !k && e && g === 1 && this.runPointActions(b.normalize(a));
                }
            }
        },dragStart: function(a) {
            var b = this.chart;
            b.mouseIsDown = a.type;
            b.cancelClick = !1;
            b.mouseDownX = this.mouseDownX = a.chartX;
            b.mouseDownY = this.mouseDownY = a.chartY;
        },drag: function(a) {
            var b = this.chart, c = b.options.chart, d = a.chartX, e = a.chartY, f = this.zoomHor, g = this.zoomVert, h = b.plotLeft, i = b.plotTop, j = b.plotWidth, k = b.plotHeight, l, m = this.mouseDownX, q = this.mouseDownY;
            d < h ? d = h : d > h + j && (d = h + j);
            e < i ? e = i : e > i + k && (e = i + k);
            this.hasDragged = Math.sqrt(Math.pow(m - d, 2) + Math.pow(q - e, 2));
            if (this.hasDragged > 10) {
                l = b.isInsidePlot(m - h, q - i);
                if (b.hasCartesianSeries && (this.zoomX || this.zoomY) && l && !this.selectionMarker) {
                    this.selectionMarker = b.renderer.rect(h, i, f ? 1 : j, g ? 1 : k, 0).attr({fill: c.selectionMarkerFill || "rgba(69,114,167,0.25)",zIndex: 7}).add();
                }
                this.selectionMarker && f && (d -= m, this.selectionMarker.attr({width: M(d),x: (d > 0 ? 0 : d) + m}));
                this.selectionMarker && g && (d = e - q, this.selectionMarker.attr({height: M(d),y: (d > 0 ? 0 : d) + q}));
                l && !this.selectionMarker && c.panning && b.pan(a, c.panning);
            }
        },drop: function(a) {
            var b = this.chart, c = this.hasPinched;
            if (this.selectionMarker) {
                var d = {xAxis: [],yAxis: [],originalEvent: a.originalEvent || a}, e = this.selectionMarker, f = e.x, g = e.y, h;
                if (this.hasDragged || c) {
                    p(b.axes, function(a) {
                        if (a.zoomEnabled) {
                            var b = a.horiz, c = a.toValue(b ? f : g), b = a.toValue(b ? f + e.width : g + e.height);
                            !isNaN(c) && !isNaN(b) && (d[a.coll].push({axis: a,min: I(c, b),max: s(c, b)}), h = !0);
                        }
                    }), h && A(b, "selection", d, function(a) {
                        b.zoom(r(a, c ? {animation: !1} : null));
                    });
                }
                this.selectionMarker = this.selectionMarker.destroy();
                c && this.scaleGroups();
            }
            if (b) {
                D(b.container, {cursor: b._cursor}), b.cancelClick = this.hasDragged > 10, b.mouseIsDown = this.hasDragged = this.hasPinched = !1, this.pinchDown = [];
            }
        },onContainerMouseDown: function(a) {
            a = this.normalize(a);
            a.preventDefault && a.preventDefault();
            this.dragStart(a);
        },onDocumentMouseUp: function(a) {
            this.drop(a);
        },onDocumentMouseMove: function(a) {
            var b = this.chart, c = this.chartPosition, d = b.hoverSeries, a = this.normalize(a, c);
            c && d && !this.inClass(a.target, "highcharts-tracker") && !b.isInsidePlot(a.chartX - b.plotLeft, a.chartY - b.plotTop) && this.reset();
        },onContainerMouseLeave: function() {
            this.reset();
            this.chartPosition = null;
        },onContainerMouseMove: function(a) {
            var b = this.chart, a = this.normalize(a);
            b.mouseIsDown === "mousedown" && this.drag(a);
            (this.inClass(a.target, "highcharts-tracker") || b.isInsidePlot(a.chartX - b.plotLeft, a.chartY - b.plotTop)) && !b.openMenu && this.runPointActions(a);
        },inClass: function(a, b) {
            for (var c; a; ) {
                if (c = v(a, "class")) {
                    if (c.indexOf(b) !== -1) {
                        return !0;
                    } else {
                        if (c.indexOf("highcharts-container") !== -1) {
                            return !1;
                        }
                    }
                }
                a = a.parentNode;
            }
        },onTrackerMouseOut: function(a) {
            var b = this.chart.hoverSeries, c = (a = a.relatedTarget || a.toElement) && a.point && a.point.series;
            if (b && !b.options.stickyTracking && !this.inClass(a, "highcharts-tooltip") && c !== b) {
                b.onMouseOut();
            }
        },onContainerClick: function(a) {
            var b = this.chart, c = b.hoverPoint, d = b.plotLeft, e = b.plotTop, f = b.inverted, g, h, i, a = this.normalize(a);
            a.cancelBubble = !0;
            if (!b.cancelClick) {
                c && this.inClass(a.target, "highcharts-tracker") ? (g = this.chartPosition, h = c.plotX, i = c.plotY, r(c, {pageX: g.left + d + (f ? b.plotWidth - i : h),pageY: g.top + e + (f ? b.plotHeight - h : i)}), A(c.series, "click", r(a, {point: c})), b.hoverPoint && c.firePointEvent("click", a)) : (r(a, this.getCoordinates(a)), b.isInsidePlot(a.chartX - d, a.chartY - e) && A(b, "click", a));
            }
        },onContainerTouchStart: function(a) {
            var b = this.chart;
            a.touches.length === 1 ? (a = this.normalize(a), b.isInsidePlot(a.chartX - b.plotLeft, a.chartY - b.plotTop) ? (this.runPointActions(a), this.pinch(a)) : this.reset()) : a.touches.length === 2 && this.pinch(a);
        },onContainerTouchMove: function(a) {
            (a.touches.length === 1 || a.touches.length === 2) && this.pinch(a);
        },onDocumentTouchEnd: function(a) {
            this.drop(a);
        },setDOMEvents: function() {
            var a = this, b = a.chart.container, c;
            this._events = c = [[b, "onmousedown", "onContainerMouseDown"], [b, "onmousemove", "onContainerMouseMove"], [b, "onclick", "onContainerClick"], [b, "mouseleave", "onContainerMouseLeave"], [y, "mouseup", "onDocumentMouseUp"]];
            ib && c.push([b, "ontouchstart", "onContainerTouchStart"], [b, "ontouchmove", "onContainerTouchMove"], [y, "touchend", "onDocumentTouchEnd"]);
            p(c, function(b) {
                a["_" + b[2]] = function(c) {
                    a[b[2]](c);
                };
                b[1].indexOf("on") === 0 ? b[0][b[1]] = a["_" + b[2]] : F(b[0], b[1], a["_" + b[2]]);
            });
        },destroy: function() {
            var a = this;
            p(a._events, function(b) {
                b[1].indexOf("on") === 0 ? b[0][b[1]] = null : X(b[0], b[1], a["_" + b[2]]);
            });
            delete a._events;
            clearInterval(a.tooltipTimeout);
        }};
    J = Highcharts.TrackerMixin = {drawTrackerPoint: function() {
            var a = this, b = a.chart, c = b.pointer, d = a.options.cursor, e = d && {cursor: d}, f = function(c) {
                var d = c.target, e;
                if (b.hoverSeries !== a) {
                    a.onMouseOver();
                }
                for (; d && !e; ) {
                    e = d.point, d = d.parentNode;
                }
                if (e !== u && e !== b.hoverPoint) {
                    e.onMouseOver(c);
                }
            };
            p(a.points, function(a) {
                if (a.graphic) {
                    a.graphic.element.point = a;
                }
                if (a.dataLabel) {
                    a.dataLabel.element.point = a;
                }
            });
            if (!a._hasTracking) {
                p(a.trackerGroups, function(b) {
                    if (a[b] && (a[b].addClass("highcharts-tracker").on("mouseover", f).on("mouseout", function(a) {
                        c.onTrackerMouseOut(a);
                    }).css(e), ib)) {
                        a[b].on("touchstart", f);
                    }
                }), a._hasTracking = !0;
            }
        },drawTrackerGraph: function() {
            var a = this, b = a.options, c = b.trackByArea, d = [].concat(c ? a.areaPath : a.graphPath), e = d.length, f = a.chart, g = f.pointer, h = f.renderer, i = f.options.tooltip.snap, j = a.tracker, k = b.cursor, l = k && {cursor: k}, k = a.singlePoints, m, q = function() {
                if (f.hoverSeries !== a) {
                    a.onMouseOver();
                }
            };
            if (e && !c) {
                for (m = e + 1; m--; ) {
                    d[m] === "M" && d.splice(m + 1, 0, d[m + 1] - i, d[m + 2], "L"), (m && d[m] === "M" || m === e) && d.splice(m, 0, "L", d[m - 2] + i, d[m - 1]);
                }
            }
            for (m = 0; m < k.length; m++) {
                e = k[m], d.push("M", e.plotX - i, e.plotY, "L", e.plotX + i, e.plotY);
            }
            j ? j.attr({d: d}) : (a.tracker = h.path(d).attr({"stroke-linejoin": "round",visibility: a.visible ? "visible" : "hidden",stroke: Kb,fill: c ? Kb : Q,"stroke-width": b.lineWidth + (c ? 0 : 2 * i),zIndex: 2}).add(a.group), p([a.tracker, a.markerGroup], function(a) {
                a.addClass("highcharts-tracker").on("mouseover", q).on("mouseout", function(a) {
                    g.onTrackerMouseOut(a);
                }).css(l);
                if (ib) {
                    a.on("touchstart", q);
                }
            }));
        }};
    if (C.PointerEvent || C.MSPointerEvent) {
        var na = {};
        $a.prototype.getWebkitTouches = function() {
            var a, b = [];
            b.item = function(a) {
                return this[a];
            };
            for (a in na) {
                na.hasOwnProperty(a) && b.push({pageX: na[a].pageX,pageY: na[a].pageY,target: na[a].target});
            }
            return b;
        };
        Va($a.prototype, "init", function(a, b, c) {
            b.container.style["-ms-touch-action"] = b.container.style["touch-action"] = "none";
            a.call(this, b, c);
        });
        Va($a.prototype, "setDOMEvents", function(a) {
            var b = this;
            a.apply(this, Array.prototype.slice.call(arguments, 1));
            p([[this.chart.container, "PointerDown", "touchstart", "onContainerTouchStart", function(a) {
                        na[a.pointerId] = {pageX: a.pageX,pageY: a.pageY,target: a.currentTarget};
                    }], [this.chart.container, "PointerMove", "touchmove", "onContainerTouchMove", function(a) {
                        na[a.pointerId] = {pageX: a.pageX,pageY: a.pageY};
                        if (!na[a.pointerId].target) {
                            na[a.pointerId].target = a.currentTarget;
                        }
                    }], [document, "PointerUp", "touchend", "onDocumentTouchEnd", function(a) {
                        delete na[a.pointerId];
                    }]], function(a) {
                F(a[0], window.PointerEvent ? a[1].toLowerCase() : "MS" + a[1], function(d) {
                    d = d.originalEvent;
                    if (d.pointerType === "touch" || d.pointerType === d.MSPOINTER_TYPE_TOUCH) {
                        a[4](d), b[a[3]]({type: a[2],target: d.currentTarget,preventDefault: la,touches: b.getWebkitTouches()});
                    }
                });
            });
        });
    }
    var zb = Highcharts.Legend = function(a, b) {
        this.init(a, b);
    };
    zb.prototype = {init: function(a, b) {
            var c = this, d = b.itemStyle, e = n(b.padding, 8), f = b.itemMarginTop || 0;
            this.options = b;
            if (b.enabled) {
                c.baseline = z(d.fontSize) + 3 + f, c.itemStyle = d, c.itemHiddenStyle = x(d, b.itemHiddenStyle), c.itemMarginTop = f, c.padding = e, c.initialItemX = e, c.initialItemY = e - 5, c.maxItemWidth = 0, c.chart = a, c.itemHeight = 0, c.lastLineHeight = 0, c.symbolWidth = n(b.symbolWidth, 16), c.pages = [], c.render(), F(c.chart, "endResize", function() {
                    c.positionCheckboxes();
                });
            }
        },colorizeItem: function(a, b) {
            var c = this.options, d = a.legendItem, e = a.legendLine, f = a.legendSymbol, g = this.itemHiddenStyle.color, c = b ? c.itemStyle.color : g, h = b ? a.legendColor || a.color : g, g = a.options && a.options.marker, i = {stroke: h,fill: h}, j;
            d && d.css({fill: c,color: c});
            e && e.attr({stroke: h});
            if (f) {
                if (g && f.isMarker) {
                    for (j in g = a.convertAttribs(g), g) {
                        d = g[j], d !== u && (i[j] = d);
                    }
                }
                f.attr(i);
            }
        },positionItem: function(a) {
            var b = this.options, c = b.symbolPadding, b = !b.rtl, d = a._legendItemPos, e = d[0], d = d[1], f = a.checkbox;
            a.legendGroup && a.legendGroup.translate(b ? e : this.legendWidth - e - 2 * c - 4, d);
            if (f) {
                f.x = e, f.y = d;
            }
        },destroyItem: function(a) {
            var b = a.checkbox;
            p(["legendItem", "legendLine", "legendSymbol", "legendGroup"], function(b) {
                a[b] && (a[b] = a[b].destroy());
            });
            b && Na(a.checkbox);
        },destroy: function() {
            var a = this.group, b = this.box;
            if (b) {
                this.box = b.destroy();
            }
            if (a) {
                this.group = a.destroy();
            }
        },positionCheckboxes: function(a) {
            var b = this.group.alignAttr, c, d = this.clipHeight || this.legendHeight;
            if (b) {
                c = b.translateY, p(this.allItems, function(e) {
                    var f = e.checkbox, g;
                    f && (g = c + f.y + (a || 0) + 3, D(f, {left: b.translateX + e.legendItemWidth + f.x - 20 + "px",top: g + "px",display: g > c - 6 && g < c + d - 6 ? "" : Q}));
                });
            }
        },renderTitle: function() {
            var a = this.padding, b = this.options.title, c = 0;
            if (b.text) {
                if (!this.title) {
                    this.title = this.chart.renderer.label(b.text, a - 3, a - 4, null, null, null, null, null, "legend-title").attr({zIndex: 1}).css(b.style).add(this.group);
                }
                a = this.title.getBBox();
                c = a.height;
                this.offsetWidth = a.width;
                this.contentGroup.attr({translateY: c});
            }
            this.titleHeight = c;
        },renderItem: function(a) {
            var B;
            var b = this, c = b.chart, d = c.renderer, e = b.options, f = e.layout === "horizontal", g = b.symbolWidth, h = e.symbolPadding, i = b.itemStyle, j = b.itemHiddenStyle, k = b.padding, l = f ? n(e.itemDistance, 8) : 0, m = !e.rtl, q = e.width, o = e.itemMarginBottom || 0, p = b.itemMarginTop, t = b.initialItemX, r = a.legendItem, u = a.series && a.series.drawLegendSymbol ? a.series : a, v = u.options, v = v && v.showCheckbox, y = e.useHTML;
            if (!r && (a.legendGroup = d.g("legend-item").attr({zIndex: 1}).add(b.scrollGroup), u.drawLegendSymbol(b, a), a.legendItem = r = d.text(e.labelFormat ? Fa(e.labelFormat, a) : e.labelFormatter.call(a), m ? g + h : -h, b.baseline, y).css(x(a.visible ? i : j)).attr({align: m ? "left" : "right",zIndex: 2}).add(a.legendGroup), (y ? r : a.legendGroup).on("mouseover", function() {
                a.setState("hover");
                r.css(b.options.itemHoverStyle);
            }).on("mouseout", function() {
                r.css(a.visible ? i : j);
                a.setState();
            }).on("click", function(b) {
                var c = function() {
                    a.setVisible();
                }, b = {browserEvent: b};
                a.firePointEvent ? a.firePointEvent("legendItemClick", b, c) : A(a, "legendItemClick", b, c);
            }), b.colorizeItem(a, a.visible), v)) {
                a.checkbox = T("input", {type: "checkbox",checked: a.selected,defaultChecked: a.selected}, e.itemCheckboxStyle, c.container), F(a.checkbox, "click", function(b) {
                    A(a, "checkboxClick", {checked: b.target.checked}, function() {
                        a.select();
                    });
                });
            }
            d = r.getBBox();
            B = a.legendItemWidth = e.itemWidth || a.legendItemWidth || g + h + d.width + l + (v ? 20 : 0), e = B;
            b.itemHeight = g = w(a.legendItemHeight || d.height);
            if (f && b.itemX - t + e > (q || c.chartWidth - 2 * k - t)) {
                b.itemX = t, b.itemY += p + b.lastLineHeight + o, b.lastLineHeight = 0;
            }
            b.maxItemWidth = s(b.maxItemWidth, e);
            b.lastItemY = p + b.itemY + o;
            b.lastLineHeight = s(g, b.lastLineHeight);
            a._legendItemPos = [b.itemX, b.itemY];
            f ? b.itemX += e : (b.itemY += p + g + o, b.lastLineHeight = g);
            b.offsetWidth = q || s((f ? b.itemX - t - l : e) + k, b.offsetWidth);
        },getAllItems: function() {
            var a = [];
            p(this.chart.series, function(b) {
                var c = b.options;
                if (n(c.showInLegend, !t(c.linkedTo) ? u : !1, !0)) {
                    a = a.concat(b.legendItems || (c.legendType === "point" ? b.data : b));
                }
            });
            return a;
        },render: function() {
            var a = this, b = a.chart, c = b.renderer, d = a.group, e, f, g, h, i = a.box, j = a.options, k = a.padding, l = j.borderWidth, m = j.backgroundColor;
            a.itemX = a.initialItemX;
            a.itemY = a.initialItemY;
            a.offsetWidth = 0;
            a.lastItemY = 0;
            if (!d) {
                a.group = d = c.g("legend").attr({zIndex: 7}).add(), a.contentGroup = c.g().attr({zIndex: 1}).add(d), a.scrollGroup = c.g().add(a.contentGroup);
            }
            a.renderTitle();
            e = a.getAllItems();
            ob(e, function(a, b) {
                return (a.options && a.options.legendIndex || 0) - (b.options && b.options.legendIndex || 0);
            });
            j.reversed && e.reverse();
            a.allItems = e;
            a.display = f = !!e.length;
            p(e, function(b) {
                a.renderItem(b);
            });
            g = j.width || a.offsetWidth;
            h = a.lastItemY + a.lastLineHeight + a.titleHeight;
            h = a.handleOverflow(h);
            if (l || m) {
                g += k;
                h += k;
                if (i) {
                    if (g > 0 && h > 0) {
                        i[i.isNew ? "attr" : "animate"](i.crisp(null, null, null, g, h)), i.isNew = !1;
                    }
                } else {
                    a.box = i = c.rect(0, 0, g, h, j.borderRadius, l || 0).attr({stroke: j.borderColor,"stroke-width": l || 0,fill: m || Q}).add(d).shadow(j.shadow), i.isNew = !0;
                }
                i[f ? "show" : "hide"]();
            }
            a.legendWidth = g;
            a.legendHeight = h;
            p(e, function(b) {
                a.positionItem(b);
            });
            f && d.align(r({width: g,height: h}, j), !0, "spacingBox");
            b.isResizing || this.positionCheckboxes();
        },handleOverflow: function(a) {
            var b = this, c = this.chart, d = c.renderer, e = this.options, f = e.y, f = c.spacingBox.height + (e.verticalAlign === "top" ? -f : f) - this.padding, g = e.maxHeight, h, i = this.clipRect, j = e.navigation, k = n(j.animation, !0), l = j.arrowSize || 12, m = this.nav, q = this.pages, o, s = this.allItems;
            e.layout === "horizontal" && (f /= 2);
            g && (f = I(f, g));
            q.length = 0;
            if (a > f && !e.useHTML) {
                this.clipHeight = h = f - 20 - this.titleHeight - this.padding;
                this.currentPage = n(this.currentPage, 1);
                this.fullHeight = a;
                p(s, function(a, b) {
                    var c = a._legendItemPos[1], d = w(a.legendItem.bBox.height), e = q.length;
                    if (!e || c - q[e - 1] > h) {
                        q.push(o || c);
                    }
                    b === s.length - 1 && c + d - q[e - 1] > h && q.push(c);
                    c !== o && (o = c);
                });
                if (!i) {
                    i = b.clipRect = d.clipRect(0, this.padding, 9999, 0), b.contentGroup.clip(i);
                }
                i.attr({height: h});
                if (!m) {
                    this.nav = m = d.g().attr({zIndex: 1}).add(this.group), this.up = d.symbol("triangle", 0, 0, l, l).on("click", function() {
                        b.scroll(-1, k);
                    }).add(m), this.pager = d.text("", 15, 10).css(j.style).add(m), this.down = d.symbol("triangle-down", 0, 0, l, l).on("click", function() {
                        b.scroll(1, k);
                    }).add(m);
                }
                b.scroll(0);
                a = f;
            } else {
                if (m) {
                    i.attr({height: c.chartHeight}), m.hide(), this.scrollGroup.attr({translateY: 1}), this.clipHeight = 0;
                }
            }
            return a;
        },scroll: function(a, b) {
            var c = this.pages, d = c.length, e = this.currentPage + a, f = this.clipHeight, g = this.options.navigation, h = g.activeColor, g = g.inactiveColor, i = this.pager, j = this.padding;
            e > d && (e = d);
            if (e > 0) {
                b !== u && Oa(b, this.chart), this.nav.attr({translateX: j,translateY: f + this.padding + 7 + this.titleHeight,visibility: "visible"}), this.up.attr({fill: e === 1 ? g : h}).css({cursor: e === 1 ? "default" : "pointer"}), i.attr({text: e + "/" + d}), this.down.attr({x: 18 + this.pager.getBBox().width,fill: e === d ? g : h}).css({cursor: e === d ? "default" : "pointer"}), c = -c[e - 1] + this.initialItemY, this.scrollGroup.animate({translateY: c}), this.currentPage = e, this.positionCheckboxes(c);
            }
        }};
    R = Highcharts.LegendSymbolMixin = {drawRectangle: function(a, b) {
            var c = a.options.symbolHeight || 12;
            b.legendSymbol = this.chart.renderer.rect(0, a.baseline - 5 - c / 2, a.symbolWidth, c, n(a.options.symbolRadius, 2)).attr({zIndex: 3}).add(b.legendGroup);
        },drawLineMarker: function(a) {
            var b = this.options, c = b.marker, d;
            d = a.symbolWidth;
            var e = this.chart.renderer, f = this.legendGroup, a = a.baseline - w(e.fontMetrics(a.options.itemStyle.fontSize).b * 0.3), g;
            if (b.lineWidth) {
                g = {"stroke-width": b.lineWidth};
                if (b.dashStyle) {
                    g.dashstyle = b.dashStyle;
                }
                this.legendLine = e.path(["M", 0, a, "L", d, a]).attr(g).add(f);
            }
            if (c && c.enabled) {
                b = c.radius, this.legendSymbol = d = e.symbol(this.symbol, d / 2 - b, a - b, 2 * b, 2 * b).add(f), d.isMarker = !0;
            }
        }};
    /Trident\/7\.0/.test(ra) && Va(zb.prototype, "positionItem", function(a, b) {
        var c = this, d = function() {
            b._legendItemPos && a.call(c, b);
        };
        c.chart.renderer.forExport ? d() : setTimeout(d);
    });
    fb.prototype = {init: function(a, b) {
            var c, d = a.series;
            a.series = null;
            c = x(G, a);
            c.series = a.series = d;
            this.userOptions = a;
            d = c.chart;
            this.margin = this.splashArray("margin", d);
            this.spacing = this.splashArray("spacing", d);
            var e = d.events;
            this.bounds = {h: {},v: {}};
            this.callback = b;
            this.isResizing = 0;
            this.options = c;
            this.axes = [];
            this.series = [];
            this.hasCartesianSeries = d.showAxes;
            var f = this, g;
            f.index = Ia.length;
            Ia.push(f);
            d.reflow !== !1 && F(f, "load", function() {
                f.initReflow();
            });
            if (e) {
                for (g in e) {
                    F(f, g, e[g]);
                }
            }
            f.xAxis = [];
            f.yAxis = [];
            f.animation = da ? !1 : n(d.animation, !0);
            f.pointCount = 0;
            f.counters = new Ab;
            f.firstRender();
        },initSeries: function(a) {
            var b = this.options.chart;
            (b = L[a.type || b.type || b.defaultSeriesType]) || ka(17, !0);
            b = new b;
            b.init(this, a);
            return b;
        },isInsidePlot: function(a, b, c) {
            var d = c ? b : a, a = c ? a : b;
            return d >= 0 && d <= this.plotWidth && a >= 0 && a <= this.plotHeight;
        },adjustTickAmounts: function() {
            this.options.chart.alignTicks !== !1 && p(this.axes, function(a) {
                a.adjustTickAmount();
            });
            this.maxTicks = null;
        },redraw: function(a) {
            var b = this.axes, c = this.series, d = this.pointer, e = this.legend, f = this.isDirtyLegend, g, h, i = this.isDirtyBox, j = c.length, k = j, l = this.renderer, m = l.isHidden(), q = [];
            Oa(a, this);
            m && this.cloneRenderTo();
            for (this.layOutTitles(); k--; ) {
                if (a = c[k], a.options.stacking && (g = !0, a.isDirty)) {
                    h = !0;
                    break;
                }
            }
            if (h) {
                for (k = j; k--; ) {
                    if (a = c[k], a.options.stacking) {
                        a.isDirty = !0;
                    }
                }
            }
            p(c, function(a) {
                a.isDirty && a.options.legendType === "point" && (f = !0);
            });
            if (f && e.options.enabled) {
                e.render(), this.isDirtyLegend = !1;
            }
            g && this.getStacks();
            if (this.hasCartesianSeries) {
                if (!this.isResizing) {
                    this.maxTicks = null, p(b, function(a) {
                        a.setScale();
                    });
                }
                this.adjustTickAmounts();
                this.getMargins();
                p(b, function(a) {
                    a.isDirty && (i = !0);
                });
                p(b, function(a) {
                    if (a.isDirtyExtremes) {
                        a.isDirtyExtremes = !1, q.push(function() {
                            A(a, "afterSetExtremes", r(a.eventArgs, a.getExtremes()));
                            delete a.eventArgs;
                        });
                    }
                    (i || g) && a.redraw();
                });
            }
            i && this.drawChartBox();
            p(c, function(a) {
                a.isDirty && a.visible && (!a.isCartesian || a.xAxis) && a.redraw();
            });
            d && d.reset && d.reset(!0);
            l.draw();
            A(this, "redraw");
            m && this.cloneRenderTo(!0);
            p(q, function(a) {
                a.call();
            });
        },get: function(a) {
            var b = this.axes, c = this.series, d, e;
            for (d = 0; d < b.length; d++) {
                if (b[d].options.id === a) {
                    return b[d];
                }
            }
            for (d = 0; d < c.length; d++) {
                if (c[d].options.id === a) {
                    return c[d];
                }
            }
            for (d = 0; d < c.length; d++) {
                e = c[d].points || [];
                for (b = 0; b < e.length; b++) {
                    if (e[b].id === a) {
                        return e[b];
                    }
                }
            }
            return null;
        },getAxes: function() {
            var a = this, b = this.options, c = b.xAxis = ja(b.xAxis || {}), b = b.yAxis = ja(b.yAxis || {});
            p(c, function(a, b) {
                a.index = b;
                a.isX = !0;
            });
            p(b, function(a, b) {
                a.index = b;
            });
            c = c.concat(b);
            p(c, function(b) {
                new qa(a, b);
            });
            a.adjustTickAmounts();
        },getSelectedPoints: function() {
            var a = [];
            p(this.series, function(b) {
                a = a.concat(wb(b.points || [], function(a) {
                    return a.selected;
                }));
            });
            return a;
        },getSelectedSeries: function() {
            return wb(this.series, function(a) {
                return a.selected;
            });
        },getStacks: function() {
            var a = this;
            p(a.yAxis, function(a) {
                if (a.stacks && a.hasVisibleSeries) {
                    a.oldStacks = a.stacks;
                }
            });
            p(a.series, function(b) {
                if (b.options.stacking && (b.visible === !0 || a.options.chart.ignoreHiddenSeries === !1)) {
                    b.stackKey = b.type + n(b.options.stack, "");
                }
            });
        },showResetZoom: function() {
            var a = this, b = G.lang, c = a.options.chart.resetZoomButton, d = c.theme, e = d.states, f = c.relativeTo === "chart" ? null : "plotBox";
            this.resetZoomButton = a.renderer.button(b.resetZoom, null, null, function() {
                a.zoomOut();
            }, d, e && e.hover).attr({align: c.position.align,title: b.resetZoomTitle}).add().align(c.position, !1, f);
        },zoomOut: function() {
            var a = this;
            A(a, "selection", {resetSelection: !0}, function() {
                a.zoom();
            });
        },zoom: function(a) {
            var b, c = this.pointer, d = !1, e;
            !a || a.resetSelection ? p(this.axes, function(a) {
                b = a.zoom();
            }) : p(a.xAxis.concat(a.yAxis), function(a) {
                var e = a.axis, h = e.isXAxis;
                if (c[h ? "zoomX" : "zoomY"] || c[h ? "pinchX" : "pinchY"]) {
                    b = e.zoom(a.min, a.max), e.displayBtn && (d = !0);
                }
            });
            e = this.resetZoomButton;
            if (d && !e) {
                this.showResetZoom();
            } else {
                if (!d && S(e)) {
                    this.resetZoomButton = e.destroy();
                }
            }
            b && this.redraw(n(this.options.chart.animation, a && a.animation, this.pointCount < 100));
        },pan: function(a, b) {
            var c = this, d = c.hoverPoints, e;
            d && p(d, function(a) {
                a.setState();
            });
            p(b === "xy" ? [1, 0] : [1], function(b) {
                var d = a[b ? "chartX" : "chartY"], h = c[b ? "xAxis" : "yAxis"][0], i = c[b ? "mouseDownX" : "mouseDownY"], j = (h.pointRange || 0) / 2, k = h.getExtremes(), l = h.toValue(i - d, !0) + j, i = h.toValue(i + c[b ? "plotWidth" : "plotHeight"] - d, !0) - j;
                h.series.length && l > I(k.dataMin, k.min) && i < s(k.dataMax, k.max) && (h.setExtremes(l, i, !1, !1, {trigger: "pan"}), e = !0);
                c[b ? "mouseDownX" : "mouseDownY"] = d;
            });
            e && c.redraw(!1);
            D(c.container, {cursor: "move"});
        },setTitle: function(a, b) {
            var f;
            var c = this, d = c.options, e;
            e = d.title = x(d.title, a);
            f = d.subtitle = x(d.subtitle, b), d = f;
            p([["title", a, e], ["subtitle", b, d]], function(a) {
                var b = a[0], d = c[b], e = a[1], a = a[2];
                d && e && (c[b] = d = d.destroy());
                a && a.text && !d && (c[b] = c.renderer.text(a.text, 0, 0, a.useHTML).attr({align: a.align,"class": "highcharts-" + b,zIndex: a.zIndex || 4}).css(a.style).add());
            });
            c.layOutTitles();
        },layOutTitles: function() {
            var a = 0, b = this.title, c = this.subtitle, d = this.options, e = d.title, d = d.subtitle, f = this.spacingBox.width - 44;
            if (b && (b.css({width: (e.width || f) + "px"}).align(r({y: 15}, e), !1, "spacingBox"), !e.floating && !e.verticalAlign)) {
                a = b.getBBox().height, a >= 18 && a <= 25 && (a = 15);
            }
            c && (c.css({width: (d.width || f) + "px"}).align(r({y: a + e.margin}, d), !1, "spacingBox"), !d.floating && !d.verticalAlign && (a = Ha(a + c.getBBox().height)));
            this.titleOffset = a;
        },getChartSize: function() {
            var a = this.options.chart, b = this.renderToClone || this.renderTo;
            this.containerWidth = jb(b, "width");
            this.containerHeight = jb(b, "height");
            this.chartWidth = s(0, a.width || this.containerWidth || 600);
            this.chartHeight = s(0, n(a.height, this.containerHeight > 19 ? this.containerHeight : 400));
        },cloneRenderTo: function(a) {
            var b = this.renderToClone, c = this.container;
            a ? b && (this.renderTo.appendChild(c), Na(b), delete this.renderToClone) : (c && c.parentNode === this.renderTo && this.renderTo.removeChild(c), this.renderToClone = b = this.renderTo.cloneNode(0), D(b, {position: "absolute",top: "-9999px",display: "block"}), y.body.appendChild(b), c && b.appendChild(c));
        },getContainer: function() {
            var a, b = this.options.chart, c, d, e;
            this.renderTo = a = b.renderTo;
            e = "highcharts-" + ub++;
            if (fa(a)) {
                this.renderTo = a = y.getElementById(a);
            }
            a || ka(13, !0);
            c = z(v(a, "data-highcharts-chart"));
            !isNaN(c) && Ia[c] && Ia[c].destroy();
            v(a, "data-highcharts-chart", this.index);
            a.innerHTML = "";
            a.offsetWidth || this.cloneRenderTo();
            this.getChartSize();
            c = this.chartWidth;
            d = this.chartHeight;
            this.container = a = T(Ga, {className: "highcharts-container" + (b.className ? " " + b.className : ""),id: e}, r({position: "relative",overflow: "hidden",width: c + "px",height: d + "px",textAlign: "left",lineHeight: "normal",zIndex: 0,"-webkit-tap-highlight-color": "rgba(0,0,0,0)"}, b.style), this.renderToClone || a);
            this._cursor = a.style.cursor;
            this.renderer = b.forExport ? new ua(a, c, d, !0) : new Ya(a, c, d);
            da && this.renderer.create(this, a, c, d);
        },getMargins: function() {
            var a = this.spacing, b, c = this.legend, d = this.margin, e = this.options.legend, f = n(e.margin, 10), g = e.x, h = e.y, i = e.align, j = e.verticalAlign, k = this.titleOffset;
            this.resetMargins();
            b = this.axisOffset;
            if (k && !t(d[0])) {
                this.plotTop = s(this.plotTop, k + this.options.title.margin + a[0]);
            }
            if (c.display && !e.floating) {
                if (i === "right") {
                    if (!t(d[1])) {
                        this.marginRight = s(this.marginRight, c.legendWidth - g + f + a[1]);
                    }
                } else {
                    if (i === "left") {
                        if (!t(d[3])) {
                            this.plotLeft = s(this.plotLeft, c.legendWidth + g + f + a[3]);
                        }
                    } else {
                        if (j === "top") {
                            if (!t(d[0])) {
                                this.plotTop = s(this.plotTop, c.legendHeight + h + f + a[0]);
                            }
                        } else {
                            if (j === "bottom" && !t(d[2])) {
                                this.marginBottom = s(this.marginBottom, c.legendHeight - h + f + a[2]);
                            }
                        }
                    }
                }
            }
            this.extraBottomMargin && (this.marginBottom += this.extraBottomMargin);
            this.extraTopMargin && (this.plotTop += this.extraTopMargin);
            this.hasCartesianSeries && p(this.axes, function(a) {
                a.getOffset();
            });
            t(d[3]) || (this.plotLeft += b[3]);
            t(d[0]) || (this.plotTop += b[0]);
            t(d[2]) || (this.marginBottom += b[2]);
            t(d[1]) || (this.marginRight += b[1]);
            this.setChartSize();
        },reflow: function(a) {
            var b = this, c = b.options.chart, d = b.renderTo, e = c.width || jb(d, "width"), f = c.height || jb(d, "height"), c = a ? a.target : C, d = function() {
                if (b.container) {
                    b.setSize(e, f, !1), b.hasUserSize = null;
                }
            };
            if (!b.hasUserSize && e && f && (c === C || c === y)) {
                if (e !== b.containerWidth || f !== b.containerHeight) {
                    clearTimeout(b.reflowTimeout), a ? b.reflowTimeout = setTimeout(d, 100) : d();
                }
                b.containerWidth = e;
                b.containerHeight = f;
            }
        },initReflow: function() {
            var a = this, b = function(b) {
                a.reflow(b);
            };
            F(C, "resize", b);
            F(a, "destroy", function() {
                X(C, "resize", b);
            });
        },setSize: function(a, b, c) {
            var d = this, e, f, g;
            d.isResizing += 1;
            g = function() {
                d && A(d, "endResize", null, function() {
                    d.isResizing -= 1;
                });
            };
            Oa(c, d);
            d.oldChartHeight = d.chartHeight;
            d.oldChartWidth = d.chartWidth;
            if (t(a)) {
                d.chartWidth = e = s(0, w(a)), d.hasUserSize = !!e;
            }
            if (t(b)) {
                d.chartHeight = f = s(0, w(b));
            }
            (oa ? kb : D)(d.container, {width: e + "px",height: f + "px"}, oa);
            d.setChartSize(!0);
            d.renderer.setSize(e, f, c);
            d.maxTicks = null;
            p(d.axes, function(a) {
                a.isDirty = !0;
                a.setScale();
            });
            p(d.series, function(a) {
                a.isDirty = !0;
            });
            d.isDirtyLegend = !0;
            d.isDirtyBox = !0;
            d.getMargins();
            d.redraw(c);
            d.oldChartHeight = null;
            A(d, "resize");
            oa === !1 ? g() : setTimeout(g, oa && oa.duration || 500);
        },setChartSize: function(a) {
            var b = this.inverted, c = this.renderer, d = this.chartWidth, e = this.chartHeight, f = this.options.chart, g = this.spacing, h = this.clipOffset, i, j, k, l;
            this.plotLeft = i = w(this.plotLeft);
            this.plotTop = j = w(this.plotTop);
            this.plotWidth = k = s(0, w(d - i - this.marginRight));
            this.plotHeight = l = s(0, w(e - j - this.marginBottom));
            this.plotSizeX = b ? l : k;
            this.plotSizeY = b ? k : l;
            this.plotBorderWidth = f.plotBorderWidth || 0;
            this.spacingBox = c.spacingBox = {x: g[3],y: g[0],width: d - g[3] - g[1],height: e - g[0] - g[2]};
            this.plotBox = c.plotBox = {x: i,y: j,width: k,height: l};
            d = 2 * N(this.plotBorderWidth / 2);
            b = Ha(s(d, h[3]) / 2);
            c = Ha(s(d, h[0]) / 2);
            this.clipBox = {x: b,y: c,width: N(this.plotSizeX - s(d, h[1]) / 2 - b),height: N(this.plotSizeY - s(d, h[2]) / 2 - c)};
            a || p(this.axes, function(a) {
                a.setAxisSize();
                a.setAxisTranslation();
            });
        },resetMargins: function() {
            var a = this.spacing, b = this.margin;
            this.plotTop = n(b[0], a[0]);
            this.marginRight = n(b[1], a[1]);
            this.marginBottom = n(b[2], a[2]);
            this.plotLeft = n(b[3], a[3]);
            this.axisOffset = [0, 0, 0, 0];
            this.clipOffset = [0, 0, 0, 0];
        },drawChartBox: function() {
            var a = this.options.chart, b = this.renderer, c = this.chartWidth, d = this.chartHeight, e = this.chartBackground, f = this.plotBackground, g = this.plotBorder, h = this.plotBGImage, i = a.borderWidth || 0, j = a.backgroundColor, k = a.plotBackgroundColor, l = a.plotBackgroundImage, m = a.plotBorderWidth || 0, q, o = this.plotLeft, n = this.plotTop, p = this.plotWidth, s = this.plotHeight, r = this.plotBox, t = this.clipRect, w = this.clipBox;
            q = i + (a.shadow ? 8 : 0);
            if (i || j) {
                if (e) {
                    e.animate(e.crisp(null, null, null, c - q, d - q));
                } else {
                    e = {fill: j || Q};
                    if (i) {
                        e.stroke = a.borderColor, e["stroke-width"] = i;
                    }
                    this.chartBackground = b.rect(q / 2, q / 2, c - q, d - q, a.borderRadius, i).attr(e).add().shadow(a.shadow);
                }
            }
            if (k) {
                f ? f.animate(r) : this.plotBackground = b.rect(o, n, p, s, 0).attr({fill: k}).add().shadow(a.plotShadow);
            }
            if (l) {
                h ? h.animate(r) : this.plotBGImage = b.image(l, o, n, p, s).add();
            }
            t ? t.animate({width: w.width,height: w.height}) : this.clipRect = b.clipRect(w);
            if (m) {
                g ? g.animate(g.crisp(null, o, n, p, s)) : this.plotBorder = b.rect(o, n, p, s, 0, -m).attr({stroke: a.plotBorderColor,"stroke-width": m,zIndex: 1}).add();
            }
            this.isDirtyBox = !1;
        },propFromSeries: function() {
            var a = this, b = a.options.chart, c, d = a.options.series, e, f;
            p(["inverted", "angular", "polar"], function(g) {
                c = L[b.type || b.defaultSeriesType];
                f = a[g] || b[g] || c && c.prototype[g];
                for (e = d && d.length; !f && e--; ) {
                    (c = L[d[e].type]) && c.prototype[g] && (f = !0);
                }
                a[g] = f;
            });
        },linkSeries: function() {
            var a = this, b = a.series;
            p(b, function(a) {
                a.linkedSeries.length = 0;
            });
            p(b, function(b) {
                var d = b.options.linkedTo;
                if (fa(d) && (d = d === ":previous" ? a.series[b.index - 1] : a.get(d))) {
                    d.linkedSeries.push(b), b.linkedParent = d;
                }
            });
        },render: function() {
            var a = this, b = a.axes, c = a.renderer, d = a.options, e = d.labels, f = d.credits, g;
            a.setTitle();
            a.legend = new zb(a, d.legend);
            a.getStacks();
            p(b, function(a) {
                a.setScale();
            });
            a.getMargins();
            a.maxTicks = null;
            p(b, function(a) {
                a.setTickPositions(!0);
                a.setMaxTicks();
            });
            a.adjustTickAmounts();
            a.getMargins();
            a.drawChartBox();
            a.hasCartesianSeries && p(b, function(a) {
                a.render();
            });
            if (!a.seriesGroup) {
                a.seriesGroup = c.g("series-group").attr({zIndex: 3}).add();
            }
            p(a.series, function(a) {
                a.translate();
                a.setTooltipPoints();
                a.render();
            });
            e.items && p(e.items, function(b) {
                var d = r(e.style, b.style), f = z(d.left) + a.plotLeft, g = z(d.top) + a.plotTop + 12;
                delete d.left;
                delete d.top;
                c.text(b.html, f, g).attr({zIndex: 2}).css(d).add();
            });
            if (f.enabled && !a.credits) {
                g = f.href, a.credits = c.text(f.text, 0, 0).on("click", function() {
                    if (g) {
                        location.href = g;
                    }
                }).attr({align: f.position.align,zIndex: 8}).css(f.style).add().align(f.position);
            }
            a.hasRendered = !0;
        },destroy: function() {
            var a = this, b = a.axes, c = a.series, d = a.container, e, f = d && d.parentNode;
            A(a, "destroy");
            Ia[a.index] = u;
            a.renderTo.removeAttribute("data-highcharts-chart");
            X(a);
            for (e = b.length; e--; ) {
                b[e] = b[e].destroy();
            }
            for (e = c.length; e--; ) {
                c[e] = c[e].destroy();
            }
            p("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","), function(b) {
                var c = a[b];
                c && c.destroy && (a[b] = c.destroy());
            });
            if (d) {
                d.innerHTML = "", X(d), f && Na(d);
            }
            for (e in a) {
                delete a[e];
            }
        },isReadyToRender: function() {
            var a = this;
            return !V && C == C.top && y.readyState !== "complete" || da && !C.canvg ? (da ? Mb.push(function() {
                a.firstRender();
            }, a.options.global.canvasToolsURL) : y.attachEvent("onreadystatechange", function() {
                y.detachEvent("onreadystatechange", a.firstRender);
                y.readyState === "complete" && a.firstRender();
            }), !1) : !0;
        },firstRender: function() {
            var a = this, b = a.options, c = a.callback;
            if (a.isReadyToRender()) {
                a.getContainer(), A(a, "init"), a.resetMargins(), a.setChartSize(), a.propFromSeries(), a.getAxes(), p(b.series || [], function(b) {
                    a.initSeries(b);
                }), a.linkSeries(), A(a, "beforeRender"), a.pointer = new $a(a, b), a.render(), a.renderer.draw(), c && c.apply(a, [a]), p(a.callbacks, function(b) {
                    b.apply(a, [a]);
                }), a.cloneRenderTo(!0), A(a, "load");
            }
        },splashArray: function(a, b) {
            var c = b[a], c = S(c) ? c : [c, c, c, c];
            return [n(b[a + "Top"], c[0]), n(b[a + "Right"], c[1]), n(b[a + "Bottom"], c[2]), n(b[a + "Left"], c[3])];
        }};
    fb.prototype.callbacks = [];
    var xb = Highcharts.CenteredSeriesMixin = {getCenter: function() {
            var a = this.options, b = this.chart, c = 2 * (a.slicedOffset || 0), d, e = b.plotWidth - 2 * c, f = b.plotHeight - 2 * c, b = a.center, a = [n(b[0], "50%"), n(b[1], "50%"), a.size || "100%", a.innerSize || 0], g = I(e, f), h;
            return Ra(a, function(a, b) {
                h = /%$/.test(a);
                d = b < 2 || b === 2 && h;
                return (h ? [e, f, g, g][b] * z(a) / 100 : a) + (d ? c : 0);
            });
        }}, Ja = function() {
    };
    Ja.prototype = {init: function(a, b, c) {
            this.series = a;
            this.applyOptions(b, c);
            this.pointAttr = {};
            if (a.options.colorByPoint && (b = a.options.colors || a.chart.options.colors, this.color = this.color || b[a.colorCounter++], a.colorCounter === b.length)) {
                a.colorCounter = 0;
            }
            a.chart.pointCount++;
            return this;
        },applyOptions: function(a, b) {
            var c = this.series, d = c.pointValKey, a = Ja.prototype.optionsToObject.call(this, a);
            r(this, a);
            this.options = this.options ? r(this.options, a) : a;
            if (d) {
                this.y = this[d];
            }
            if (this.x === u && c) {
                this.x = b === u ? c.autoIncrement() : b;
            }
            return this;
        },optionsToObject: function(a) {
            var b = {}, c = this.series, d = c.pointArrayMap || ["y"], e = d.length, f = 0, g = 0;
            if (typeof a === "number" || a === null) {
                b[d[0]] = a;
            } else {
                if (Ka(a)) {
                    if (a.length > e) {
                        c = typeof a[0];
                        if (c === "string") {
                            b.name = a[0];
                        } else {
                            if (c === "number") {
                                b.x = a[0];
                            }
                        }
                        f++;
                    }
                    for (; g < e; ) {
                        b[d[g++]] = a[f++];
                    }
                } else {
                    if (typeof a === "object") {
                        b = a;
                        if (a.dataLabels) {
                            c._hasPointLabels = !0;
                        }
                        if (a.marker) {
                            c._hasPointMarkers = !0;
                        }
                    }
                }
            }
            return b;
        },destroy: function() {
            var a = this.series.chart, b = a.hoverPoints, c;
            a.pointCount--;
            if (b && (this.setState(), ha(b, this), !b.length)) {
                a.hoverPoints = null;
            }
            if (this === a.hoverPoint) {
                this.onMouseOut();
            }
            if (this.graphic || this.dataLabel) {
                X(this), this.destroyElements();
            }
            this.legendItem && a.legend.destroyItem(this);
            for (c in this) {
                this[c] = null;
            }
        },destroyElements: function() {
            for (var a = "graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","), b, c = 6; c--; ) {
                b = a[c], this[b] && (this[b] = this[b].destroy());
            }
        },getLabelConfig: function() {
            return {x: this.category,y: this.y,key: this.name || this.category,series: this.series,point: this,percentage: this.percentage,total: this.total || this.stackTotal};
        },select: function(a, b) {
            var c = this, d = c.series, e = d.chart, a = n(a, !c.selected);
            c.firePointEvent(a ? "select" : "unselect", {accumulate: b}, function() {
                c.selected = c.options.selected = a;
                d.options.data[sa(c, d.data)] = c.options;
                c.setState(a && "select");
                b || p(e.getSelectedPoints(), function(a) {
                    if (a.selected && a !== c) {
                        a.selected = a.options.selected = !1, d.options.data[sa(a, d.data)] = a.options, a.setState(""), a.firePointEvent("unselect");
                    }
                });
            });
        },onMouseOver: function(a) {
            var b = this.series, c = b.chart, d = c.tooltip, e = c.hoverPoint;
            if (e && e !== this) {
                e.onMouseOut();
            }
            this.firePointEvent("mouseOver");
            d && (!d.shared || b.noSharedTooltip) && d.refresh(this, a);
            this.setState("hover");
            c.hoverPoint = this;
        },onMouseOut: function() {
            var a = this.series.chart, b = a.hoverPoints;
            if (!b || sa(this, b) === -1) {
                this.firePointEvent("mouseOut"), this.setState(), a.hoverPoint = null;
            }
        },tooltipFormatter: function(a) {
            var b = this.series, c = b.tooltipOptions, d = n(c.valueDecimals, ""), e = c.valuePrefix || "", f = c.valueSuffix || "";
            p(b.pointArrayMap || ["y"], function(b) {
                b = "{point." + b;
                if (e || f) {
                    a = a.replace(b + "}", e + b + "}" + f);
                }
                a = a.replace(b + "}", b + ":,." + d + "f}");
            });
            return Fa(a, {point: this,series: this.series});
        },firePointEvent: function(a, b, c) {
            var d = this, e = this.series.options;
            (e.point.events[a] || d.options && d.options.events && d.options.events[a]) && this.importEvents();
            a === "click" && e.allowPointSelect && (c = function(a) {
                d.select(null, a.ctrlKey || a.metaKey || a.shiftKey);
            });
            A(this, a, b, c);
        },importEvents: function() {
            if (!this.hasImportedEvents) {
                var a = x(this.series.options.point, this.options).events, b;
                this.events = a;
                for (b in a) {
                    F(this, b, a[b]);
                }
                this.hasImportedEvents = !0;
            }
        },setState: function(a, b) {
            var c = this.plotX, d = this.plotY, e = this.series, f = e.options.states, g = Y[e.type].marker && e.options.marker, h = g && !g.enabled, i = g && g.states[a], j = i && i.enabled === !1, k = e.stateMarkerGraphic, l = this.marker || {}, m = e.chart, q = this.pointAttr, a = a || "", b = b && k;
            if (!(a === this.state && !b || this.selected && a !== "select" || f[a] && f[a].enabled === !1 || a && (j || h && !i.enabled) || a && l.states && l.states[a] && l.states[a].enabled === !1)) {
                if (this.graphic) {
                    f = g && this.graphic.symbolName && q[a].r, this.graphic.attr(x(q[a], f ? {x: c - f,y: d - f,width: 2 * f,height: 2 * f} : {}));
                } else {
                    if (a && i) {
                        if (f = i.radius, l = l.symbol || e.symbol, k && k.currentSymbol !== l && (k = k.destroy()), k) {
                            k[b ? "animate" : "attr"]({x: c - f,y: d - f});
                        } else {
                            e.stateMarkerGraphic = k = m.renderer.symbol(l, c - f, d - f, 2 * f, 2 * f).attr(q[a]).add(e.markerGroup), k.currentSymbol = l;
                        }
                    }
                    if (k) {
                        k[a && m.isInsidePlot(c, d, m.inverted) ? "show" : "hide"]();
                    }
                }
                this.state = a;
            }
        }};
    var O = function() {
    };
    O.prototype = {isCartesian: !0,type: "line",pointClass: Ja,sorted: !0,requireSorting: !0,pointAttrToOptions: {stroke: "lineColor","stroke-width": "lineWidth",fill: "fillColor",r: "radius"},axisTypes: ["xAxis", "yAxis"],colorCounter: 0,parallelArrays: ["x", "y"],init: function(a, b) {
            var c = this, d, e, f = a.series, g = function(a, b) {
                return n(a.options.index, a._i) - n(b.options.index, b._i);
            };
            c.chart = a;
            c.options = b = c.setOptions(b);
            c.linkedSeries = [];
            c.bindAxes();
            r(c, {name: b.name,state: "",pointAttr: {},visible: b.visible !== !1,selected: b.selected === !0});
            if (da) {
                b.animation = !1;
            }
            e = b.events;
            for (d in e) {
                F(c, d, e[d]);
            }
            if (e && e.click || b.point && b.point.events && b.point.events.click || b.allowPointSelect) {
                a.runTrackerClick = !0;
            }
            c.getColor();
            c.getSymbol();
            p(c.parallelArrays, function(a) {
                c[a + "Data"] = [];
            });
            c.setData(b.data, !1);
            if (c.isCartesian) {
                a.hasCartesianSeries = !0;
            }
            f.push(c);
            c._i = f.length - 1;
            ob(f, g);
            this.yAxis && ob(this.yAxis.series, g);
            p(f, function(a, b) {
                a.index = b;
                a.name = a.name || "Series " + (b + 1);
            });
        },bindAxes: function() {
            var a = this, b = a.options, c = a.chart, d;
            p(a.axisTypes || [], function(e) {
                p(c[e], function(c) {
                    d = c.options;
                    if (b[e] === d.index || b[e] !== u && b[e] === d.id || b[e] === u && d.index === 0) {
                        c.series.push(a), a[e] = c, c.isDirty = !0;
                    }
                });
                !a[e] && a.optionalAxis !== e && ka(18, !0);
            });
        },updateParallelArrays: function(a, b) {
            var c = a.series, d = arguments;
            p(c.parallelArrays, typeof b === "number" ? function(d) {
                var f = d === "y" && c.toYData ? c.toYData(a) : a[d];
                c[d + "Data"][b] = f;
            } : function(a) {
                Array.prototype[b].apply(c[a + "Data"], Array.prototype.slice.call(d, 2));
            });
        },autoIncrement: function() {
            var a = this.options, b = this.xIncrement, b = n(b, a.pointStart, 0);
            this.pointInterval = n(this.pointInterval, a.pointInterval, 1);
            this.xIncrement = b + this.pointInterval;
            return b;
        },getSegments: function() {
            var a = -1, b = [], c, d = this.points, e = d.length;
            if (e) {
                if (this.options.connectNulls) {
                    for (c = e; c--; ) {
                        d[c].y === null && d.splice(c, 1);
                    }
                    d.length && (b = [d]);
                } else {
                    p(d, function(c, g) {
                        c.y === null ? (g > a + 1 && b.push(d.slice(a + 1, g)), a = g) : g === e - 1 && b.push(d.slice(a + 1, g + 1));
                    });
                }
            }
            this.segments = b;
        },setOptions: function(a) {
            var b = this.chart, c = b.options.plotOptions, b = b.userOptions || {}, d = b.plotOptions || {}, e = c[this.type];
            this.userOptions = a;
            c = x(e, c.series, a);
            this.tooltipOptions = x(G.tooltip, G.plotOptions[this.type].tooltip, b.tooltip, d.series && d.series.tooltip, d[this.type] && d[this.type].tooltip, a.tooltip);
            e.marker === null && delete c.marker;
            return c;
        },getColor: function() {
            var a = this.options, b = this.userOptions, c = this.chart.options.colors, d = this.chart.counters, e;
            e = a.color || Y[this.type].color;
            if (!e && !a.colorByPoint) {
                t(b._colorIndex) ? a = b._colorIndex : (b._colorIndex = d.color, a = d.color++), e = c[a];
            }
            this.color = e;
            d.wrapColor(c.length);
        },getSymbol: function() {
            var a = this.userOptions, b = this.options.marker, c = this.chart, d = c.options.symbols, c = c.counters;
            this.symbol = b.symbol;
            if (!this.symbol) {
                t(a._symbolIndex) ? a = a._symbolIndex : (a._symbolIndex = c.symbol, a = c.symbol++), this.symbol = d[a];
            }
            if (/^url/.test(this.symbol)) {
                b.radius = 0;
            }
            c.wrapSymbol(d.length);
        },drawLegendSymbol: R.drawLineMarker,setData: function(a, b) {
            var c = this, d = c.points, e = c.options, f = c.chart, g = null, h = c.xAxis, i = h && !!h.categories, j;
            c.xIncrement = null;
            c.pointRange = i ? 1 : e.pointRange;
            c.colorCounter = 0;
            var a = a || [], k = a.length;
            j = e.turboThreshold;
            var l = this.xData, m = this.yData, q = c.pointArrayMap, q = q && q.length;
            p(this.parallelArrays, function(a) {
                c[a + "Data"].length = 0;
            });
            if (j && k > j) {
                for (j = 0; g === null && j < k; ) {
                    g = a[j], j++;
                }
                if (wa(g)) {
                    i = n(e.pointStart, 0);
                    e = n(e.pointInterval, 1);
                    for (j = 0; j < k; j++) {
                        l[j] = i, m[j] = a[j], i += e;
                    }
                    c.xIncrement = i;
                } else {
                    if (Ka(g)) {
                        if (q) {
                            for (j = 0; j < k; j++) {
                                e = a[j], l[j] = e[0], m[j] = e.slice(1, q + 1);
                            }
                        } else {
                            for (j = 0; j < k; j++) {
                                e = a[j], l[j] = e[0], m[j] = e[1];
                            }
                        }
                    } else {
                        ka(12);
                    }
                }
            } else {
                for (j = 0; j < k; j++) {
                    if (a[j] !== u && (e = {series: c}, c.pointClass.prototype.applyOptions.apply(e, [a[j]]), c.updateParallelArrays(e, j), i && e.name)) {
                        h.names[e.x] = e.name;
                    }
                }
            }
            fa(m[0]) && ka(14, !0);
            c.data = [];
            c.options.data = a;
            for (j = d && d.length || 0; j--; ) {
                d[j] && d[j].destroy && d[j].destroy();
            }
            if (h) {
                h.minRange = h.userMinRange;
            }
            c.isDirty = c.isDirtyData = f.isDirtyBox = !0;
            n(b, !0) && f.redraw(!1);
        },processData: function(a) {
            var b = this.xData, c = this.yData, d = b.length, e;
            e = 0;
            var f, g, h = this.xAxis, i = this.options, j = i.cropThreshold, k = this.isCartesian;
            if (k && !this.isDirty && !h.isDirty && !this.yAxis.isDirty && !a) {
                return !1;
            }
            if (k && this.sorted && (!j || d > j || this.forceCrop)) {
                if (a = h.min, h = h.max, b[d - 1] < a || b[0] > h) {
                    b = [], c = [];
                } else {
                    if (b[0] < a || b[d - 1] > h) {
                        e = this.cropData(this.xData, this.yData, a, h), b = e.xData, c = e.yData, e = e.start, f = !0;
                    }
                }
            }
            for (h = b.length - 1; h >= 0; h--) {
                d = b[h] - b[h - 1], d > 0 && (g === u || d < g) ? g = d : d < 0 && this.requireSorting && ka(15);
            }
            this.cropped = f;
            this.cropStart = e;
            this.processedXData = b;
            this.processedYData = c;
            if (i.pointRange === null) {
                this.pointRange = g || 1;
            }
            this.closestPointRange = g;
        },cropData: function(a, b, c, d) {
            var e = a.length, f = 0, g = e, h = n(this.cropShoulder, 1), i;
            for (i = 0; i < e; i++) {
                if (a[i] >= c) {
                    f = s(0, i - h);
                    break;
                }
            }
            for (; i < e; i++) {
                if (a[i] > d) {
                    g = i + h;
                    break;
                }
            }
            return {xData: a.slice(f, g),yData: b.slice(f, g),start: f,end: g};
        },generatePoints: function() {
            var a = this.options.data, b = this.data, c, d = this.processedXData, e = this.processedYData, f = this.pointClass, g = d.length, h = this.cropStart || 0, i, j = this.hasGroupedData, k, l = [], m;
            if (!b && !j) {
                b = [], b.length = a.length, b = this.data = b;
            }
            for (m = 0; m < g; m++) {
                i = h + m, j ? l[m] = (new f).init(this, [d[m]].concat(ja(e[m]))) : (b[i] ? k = b[i] : a[i] !== u && (b[i] = k = (new f).init(this, a[i], d[m])), l[m] = k);
            }
            if (b && (g !== (c = b.length) || j)) {
                for (m = 0; m < c; m++) {
                    if (m === h && !j && (m += g), b[m]) {
                        b[m].destroyElements(), b[m].plotX = u;
                    }
                }
            }
            this.data = b;
            this.points = l;
        },setStackedPoints: function() {
            if (this.options.stacking && !(this.visible !== !0 && this.chart.options.chart.ignoreHiddenSeries !== !1)) {
                var a = this.processedXData, b = this.processedYData, c = [], d = b.length, e = this.options, f = e.threshold, g = e.stack, e = e.stacking, h = this.stackKey, i = "-" + h, j = this.negStacks, k = this.yAxis, l = k.stacks, m = k.oldStacks, q, o, n, p, r;
                for (n = 0; n < d; n++) {
                    p = a[n];
                    r = b[n];
                    o = (q = j && r < f) ? i : h;
                    l[o] || (l[o] = {});
                    if (!l[o][p]) {
                        m[o] && m[o][p] ? (l[o][p] = m[o][p], l[o][p].total = null) : l[o][p] = new Gb(k, k.options.stackLabels, q, p, g, e);
                    }
                    o = l[o][p];
                    o.points[this.index] = [o.cum || 0];
                    e === "percent" ? (q = q ? h : i, j && l[q] && l[q][p] ? (q = l[q][p], o.total = q.total = s(q.total, o.total) + M(r) || 0) : o.total = aa(o.total + (M(r) || 0))) : o.total = aa(o.total + (r || 0));
                    o.cum = (o.cum || 0) + (r || 0);
                    o.points[this.index].push(o.cum);
                    c[n] = o.cum;
                }
                if (e === "percent") {
                    k.usePercentage = !0;
                }
                this.stackedYData = c;
                k.oldStacks = {};
            }
        },setPercentStacks: function() {
            var a = this, b = a.stackKey, c = a.yAxis.stacks;
            p([b, "-" + b], function(b) {
                var d;
                for (var e = a.xData.length, f, g; e--; ) {
                    if (f = a.xData[e], d = (g = c[b] && c[b][f]) && g.points[a.index], f = d) {
                        g = g.total ? 100 / g.total : 0, f[0] = aa(f[0] * g), f[1] = aa(f[1] * g), a.stackedYData[e] = f[1];
                    }
                }
            });
        },getExtremes: function(a) {
            var b = this.yAxis, c = this.processedXData, d, e = [], f = 0;
            d = this.xAxis.getExtremes();
            var g = d.min, h = d.max, i, j, k, l, a = a || this.stackedYData || this.processedYData;
            d = a.length;
            for (l = 0; l < d; l++) {
                if (j = c[l], k = a[l], i = k !== null && k !== u && (!b.isLog || k.length || k > 0), j = this.getExtremesFromAll || this.cropped || (c[l + 1] || j) >= g && (c[l - 1] || j) <= h, i && j) {
                    if (i = k.length) {
                        for (; i--; ) {
                            k[i] !== null && (e[f++] = k[i]);
                        }
                    } else {
                        e[f++] = k;
                    }
                }
            }
            this.dataMin = n(void 0, La(e));
            this.dataMax = n(void 0, za(e));
        },translate: function() {
            this.processedXData || this.processData();
            this.generatePoints();
            for (var a = this.options, b = a.stacking, c = this.xAxis, d = c.categories, e = this.yAxis, f = this.points, g = f.length, h = !!this.modifyValue, i = a.pointPlacement, j = i === "between" || wa(i), k = a.threshold, a = 0; a < g; a++) {
                var l = f[a], m = l.x, q = l.y, o = l.low, p = b && e.stacks[(this.negStacks && q < k ? "-" : "") + this.stackKey];
                if (e.isLog && q <= 0) {
                    l.y = q = null;
                }
                l.plotX = c.translate(m, 0, 0, 0, 1, i, this.type === "flags");
                if (b && this.visible && p && p[m]) {
                    p = p[m], q = p.points[this.index], o = q[0], q = q[1], o === 0 && (o = n(k, e.min)), e.isLog && o <= 0 && (o = null), l.total = l.stackTotal = p.total, l.percentage = b === "percent" && l.y / p.total * 100, l.stackY = q, p.setOffset(this.pointXOffset || 0, this.barW || 0);
                }
                l.yBottom = t(o) ? e.translate(o, 0, 1, 0, 1) : null;
                h && (q = this.modifyValue(q, l));
                l.plotY = typeof q === "number" && q !== Infinity ? e.translate(q, 0, 1, 0, 1) : u;
                l.clientX = j ? c.translate(m, 0, 0, 0, 1) : l.plotX;
                l.negative = l.y < (k || 0);
                l.category = d && d[l.x] !== u ? d[l.x] : l.x;
            }
            this.getSegments();
        },setTooltipPoints: function(a) {
            var b = [], c, d, e = this.xAxis, f = e && e.getExtremes(), g = e ? e.tooltipLen || e.len : this.chart.plotSizeX, h, i, j = [];
            if (this.options.enableMouseTracking !== !1) {
                if (a) {
                    this.tooltipPoints = null;
                }
                p(this.segments || this.points, function(a) {
                    b = b.concat(a);
                });
                e && e.reversed && (b = b.reverse());
                this.orderTooltipPoints && this.orderTooltipPoints(b);
                a = b.length;
                for (i = 0; i < a; i++) {
                    if (e = b[i], c = e.x, c >= f.min && c <= f.max) {
                        h = b[i + 1];
                        c = d === u ? 0 : d + 1;
                        for (d = b[i + 1] ? I(s(0, N((e.clientX + (h ? h.wrappedClientX || h.clientX : g)) / 2)), g) : g; c >= 0 && c <= d; ) {
                            j[c++] = e;
                        }
                    }
                }
                this.tooltipPoints = j;
            }
        },tooltipHeaderFormatter: function(a) {
            var b = this.tooltipOptions, c = b.dateTimeLabelFormats, d = b.xDateFormat, e = this.xAxis, f = e && e.options.type === "datetime", b = b.headerFormat, e = e && e.closestPointRange, g;
            if (f && !d) {
                if (e) {
                    for (g in E) {
                        if (E[g] >= e) {
                            d = c[g];
                            break;
                        }
                    }
                } else {
                    d = c.day;
                }
                d = d || c.year;
            }
            f && d && wa(a.key) && (b = b.replace("{point.key}", "{point.key:" + d + "}"));
            return Fa(b, {point: a,series: this});
        },onMouseOver: function() {
            var a = this.chart, b = a.hoverSeries;
            if (b && b !== this) {
                b.onMouseOut();
            }
            this.options.events.mouseOver && A(this, "mouseOver");
            this.setState("hover");
            a.hoverSeries = this;
        },onMouseOut: function() {
            var a = this.options, b = this.chart, c = b.tooltip, d = b.hoverPoint;
            if (d) {
                d.onMouseOut();
            }
            this && a.events.mouseOut && A(this, "mouseOut");
            c && !a.stickyTracking && (!c.shared || this.noSharedTooltip) && c.hide();
            this.setState();
            b.hoverSeries = null;
        },animate: function(a) {
            var b = this, c = b.chart, d = c.renderer, e;
            e = b.options.animation;
            var f = c.clipBox, g = c.inverted, h;
            if (e && !S(e)) {
                e = Y[b.type].animation;
            }
            h = "_sharedClip" + e.duration + e.easing;
            if (a) {
                a = c[h], e = c[h + "m"], a || (c[h] = a = d.clipRect(r(f, {width: 0})), c[h + "m"] = e = d.clipRect(-99, g ? -c.plotLeft : -c.plotTop, 99, g ? c.chartWidth : c.chartHeight)), b.group.clip(a), b.markerGroup.clip(e), b.sharedClipKey = h;
            } else {
                if (a = c[h]) {
                    a.animate({width: c.plotSizeX}, e), c[h + "m"].animate({width: c.plotSizeX + 99}, e);
                }
                b.animate = null;
                b.animationTimeout = setTimeout(function() {
                    b.afterAnimate();
                }, e.duration);
            }
        },afterAnimate: function() {
            var a = this.chart, b = this.sharedClipKey, c = this.group;
            c && this.options.clip !== !1 && (c.clip(a.clipRect), this.markerGroup.clip());
            setTimeout(function() {
                b && a[b] && (a[b] = a[b].destroy(), a[b + "m"] = a[b + "m"].destroy());
            }, 100);
        },drawPoints: function() {
            var a, b = this.points, c = this.chart, d, e, f, g, h, i, j, k, l = this.options.marker, m, q = this.markerGroup;
            if (l.enabled || this._hasPointMarkers) {
                for (f = b.length; f--; ) {
                    if (g = b[f], d = N(g.plotX), e = g.plotY, k = g.graphic, i = g.marker || {}, a = l.enabled && i.enabled === u || i.enabled, m = c.isInsidePlot(w(d), e, c.inverted), a && e !== u && !isNaN(e) && g.y !== null) {
                        if (a = g.pointAttr[g.selected ? "select" : ""], h = a.r, i = n(i.symbol, this.symbol), j = i.indexOf("url") === 0, k) {
                            k.attr({visibility: m ? V ? "inherit" : "visible" : "hidden"}).animate(r({x: d - h,y: e - h}, k.symbolName ? {width: 2 * h,height: 2 * h} : {}));
                        } else {
                            if (m && (h > 0 || j)) {
                                g.graphic = c.renderer.symbol(i, d - h, e - h, 2 * h, 2 * h).attr(a).add(q);
                            }
                        }
                    } else {
                        if (k) {
                            g.graphic = k.destroy();
                        }
                    }
                }
            }
        },convertAttribs: function(a, b, c, d) {
            var e = this.pointAttrToOptions, f, g, h = {}, a = a || {}, b = b || {}, c = c || {}, d = d || {};
            for (f in e) {
                g = e[f], h[f] = n(a[g], b[f], c[f], d[f]);
            }
            return h;
        },getAttribs: function() {
            var a = this, b = a.options, c = Y[a.type].marker ? b.marker : b, d = c.states, e = d.hover, f, g = a.color, h = {stroke: g,fill: g}, i = a.points || [], j = [], k, l = a.pointAttrToOptions, m = b.negativeColor, n = c.lineColor, o = c.fillColor, s;
            b.marker ? (e.radius = e.radius || c.radius + 2, e.lineWidth = e.lineWidth || c.lineWidth + 1) : e.color = e.color || ta(e.color || g).brighten(e.brightness).get();
            j[""] = a.convertAttribs(c, h);
            p(["hover", "select"], function(b) {
                j[b] = a.convertAttribs(d[b], j[""]);
            });
            a.pointAttr = j;
            for (g = i.length; g--; ) {
                h = i[g];
                if ((c = h.options && h.options.marker || h.options) && c.enabled === !1) {
                    c.radius = 0;
                }
                if (h.negative && m) {
                    h.color = h.fillColor = m;
                }
                k = b.colorByPoint || h.color;
                if (h.options) {
                    for (s in l) {
                        t(c[l[s]]) && (k = !0);
                    }
                }
                if (k) {
                    c = c || {};
                    k = [];
                    d = c.states || {};
                    f = d.hover = d.hover || {};
                    if (!b.marker) {
                        f.color = ta(f.color || h.color).brighten(f.brightness || e.brightness).get();
                    }
                    f = {color: h.color};
                    if (!o) {
                        f.fillColor = h.color;
                    }
                    if (!n) {
                        f.lineColor = h.color;
                    }
                    k[""] = a.convertAttribs(r(f, c), j[""]);
                    k.hover = a.convertAttribs(d.hover, j.hover, k[""]);
                    k.select = a.convertAttribs(d.select, j.select, k[""]);
                } else {
                    k = j;
                }
                h.pointAttr = k;
            }
        },destroy: function() {
            var a = this, b = a.chart, c = /AppleWebKit\/533/.test(ra), d, e, f = a.data || [], g, h, i;
            A(a, "destroy");
            X(a);
            p(a.axisTypes || [], function(b) {
                if (i = a[b]) {
                    ha(i.series, a), i.isDirty = i.forceRedraw = !0;
                }
            });
            a.legendItem && a.chart.legend.destroyItem(a);
            for (e = f.length; e--; ) {
                (g = f[e]) && g.destroy && g.destroy();
            }
            a.points = null;
            clearTimeout(a.animationTimeout);
            p("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","), function(b) {
                a[b] && (d = c && b === "group" ? "hide" : "destroy", a[b][d]());
            });
            if (b.hoverSeries === a) {
                b.hoverSeries = null;
            }
            ha(b.series, a);
            for (h in a) {
                delete a[h];
            }
        },getSegmentPath: function(a) {
            var b = this, c = [], d = b.options.step;
            p(a, function(e, f) {
                var g = e.plotX, h = e.plotY, i;
                b.getPointSpline ? c.push.apply(c, b.getPointSpline(a, e, f)) : (c.push(f ? "L" : "M"), d && f && (i = a[f - 1], d === "right" ? c.push(i.plotX, h) : d === "center" ? c.push((i.plotX + g) / 2, i.plotY, (i.plotX + g) / 2, h) : c.push(g, i.plotY)), c.push(e.plotX, e.plotY));
            });
            return c;
        },getGraphPath: function() {
            var a = this, b = [], c, d = [];
            p(a.segments, function(e) {
                c = a.getSegmentPath(e);
                e.length > 1 ? b = b.concat(c) : d.push(e[0]);
            });
            a.singlePoints = d;
            return a.graphPath = b;
        },drawGraph: function() {
            var a = this, b = this.options, c = [["graph", b.lineColor || this.color]], d = b.lineWidth, e = b.dashStyle, f = b.linecap !== "square", g = this.getGraphPath(), h = b.negativeColor;
            h && c.push(["graphNeg", h]);
            p(c, function(c, h) {
                var k = c[0], l = a[k];
                if (l) {
                    Za(l), l.animate({d: g});
                } else {
                    if (d && g.length) {
                        l = {stroke: c[1],"stroke-width": d,zIndex: 1}, e ? l.dashstyle = e : f && (l["stroke-linecap"] = l["stroke-linejoin"] = "round"), a[k] = a.chart.renderer.path(g).attr(l).add(a.group).shadow(!h && b.shadow);
                    }
                }
            });
        },clipNeg: function() {
            var a = this.options, b = this.chart, c = b.renderer, d = a.negativeColor || a.negativeFillColor, e, f = this.graph, g = this.area, h = this.posClip, i = this.negClip;
            e = b.chartWidth;
            var j = b.chartHeight, k = s(e, j), l = this.yAxis;
            if (d && (f || g)) {
                d = w(l.toPixels(a.threshold || 0, !0));
                d < 0 && (k -= d);
                a = {x: 0,y: 0,width: k,height: d};
                k = {x: 0,y: d,width: k,height: k};
                if (b.inverted) {
                    a.height = k.y = b.plotWidth - d, c.isVML && (a = {x: b.plotWidth - d - b.plotLeft,y: 0,width: e,height: j}, k = {x: d + b.plotLeft - e,y: 0,width: b.plotLeft + d,height: e});
                }
                l.reversed ? (b = k, e = a) : (b = a, e = k);
                h ? (h.animate(b), i.animate(e)) : (this.posClip = h = c.clipRect(b), this.negClip = i = c.clipRect(e), f && this.graphNeg && (f.clip(h), this.graphNeg.clip(i)), g && (g.clip(h), this.areaNeg.clip(i)));
            }
        },invertGroups: function() {
            function a() {
                var a = {width: b.yAxis.len,height: b.xAxis.len};
                p(["group", "markerGroup"], function(c) {
                    b[c] && b[c].attr(a).invert();
                });
            }
            var b = this, c = b.chart;
            if (b.xAxis) {
                F(c, "resize", a), F(b, "destroy", function() {
                    X(c, "resize", a);
                }), a(), b.invertGroups = a;
            }
        },plotGroup: function(a, b, c, d, e) {
            var f = this[a], g = !f;
            g && (this[a] = f = this.chart.renderer.g(b).attr({visibility: c,zIndex: d || 0.1}).add(e));
            f[g ? "attr" : "animate"](this.getPlotBox());
            return f;
        },getPlotBox: function() {
            return {translateX: this.xAxis ? this.xAxis.left : this.chart.plotLeft,translateY: this.yAxis ? this.yAxis.top : this.chart.plotTop,scaleX: 1,scaleY: 1};
        },render: function() {
            var a = this.chart, b, c = this.options, d = c.animation && !!this.animate && a.renderer.isSVG, e = this.visible ? "visible" : "hidden", f = c.zIndex, g = this.hasRendered, h = a.seriesGroup;
            b = this.plotGroup("group", "series", e, f, h);
            this.markerGroup = this.plotGroup("markerGroup", "markers", e, f, h);
            d && this.animate(!0);
            this.getAttribs();
            b.inverted = this.isCartesian ? a.inverted : !1;
            this.drawGraph && (this.drawGraph(), this.clipNeg());
            this.drawDataLabels && this.drawDataLabels();
            this.visible && this.drawPoints();
            this.options.enableMouseTracking !== !1 && this.drawTracker();
            a.inverted && this.invertGroups();
            c.clip !== !1 && !this.sharedClipKey && !g && b.clip(a.clipRect);
            d ? this.animate() : g || this.afterAnimate();
            this.isDirty = this.isDirtyData = !1;
            this.hasRendered = !0;
        },redraw: function() {
            var a = this.chart, b = this.isDirtyData, c = this.group, d = this.xAxis, e = this.yAxis;
            c && (a.inverted && c.attr({width: a.plotWidth,height: a.plotHeight}), c.animate({translateX: n(d && d.left, a.plotLeft),translateY: n(e && e.top, a.plotTop)}));
            this.translate();
            this.setTooltipPoints(!0);
            this.render();
            b && A(this, "updatedData");
        },setState: function(a) {
            var b = this.options, c = this.graph, d = this.graphNeg, e = b.states, b = b.lineWidth, a = a || "";
            if (this.state !== a) {
                this.state = a, e[a] && e[a].enabled === !1 || (a && (b = e[a].lineWidth || b + 1), c && !c.dashstyle && (a = {"stroke-width": b}, c.attr(a), d && d.attr(a)));
            }
        },setVisible: function(a, b) {
            var c = this, d = c.chart, e = c.legendItem, f, g = d.options.chart.ignoreHiddenSeries, h = c.visible;
            f = (c.visible = a = c.userOptions.visible = a === u ? !h : a) ? "show" : "hide";
            p(["group", "dataLabelsGroup", "markerGroup", "tracker"], function(a) {
                if (c[a]) {
                    c[a][f]();
                }
            });
            if (d.hoverSeries === c) {
                c.onMouseOut();
            }
            e && d.legend.colorizeItem(c, a);
            c.isDirty = !0;
            c.options.stacking && p(d.series, function(a) {
                if (a.options.stacking && a.visible) {
                    a.isDirty = !0;
                }
            });
            p(c.linkedSeries, function(b) {
                b.setVisible(a, !1);
            });
            if (g) {
                d.isDirtyBox = !0;
            }
            b !== !1 && d.redraw();
            A(c, f);
        },show: function() {
            this.setVisible(!0);
        },hide: function() {
            this.setVisible(!1);
        },select: function(a) {
            this.selected = a = a === u ? !this.selected : a;
            if (this.checkbox) {
                this.checkbox.checked = a;
            }
            A(this, a ? "select" : "unselect");
        },drawTracker: J.drawTrackerGraph};
    r(fb.prototype, {addSeries: function(a, b, c) {
            var d, e = this;
            a && (b = n(b, !0), A(e, "addSeries", {options: a}, function() {
                d = e.initSeries(a);
                e.isDirtyLegend = !0;
                e.linkSeries();
                b && e.redraw(c);
            }));
            return d;
        },addAxis: function(a, b, c, d) {
            var e = b ? "xAxis" : "yAxis", f = this.options;
            new qa(this, x(a, {index: this[e].length,isX: b}));
            f[e] = ja(f[e] || {});
            f[e].push(a);
            n(c, !0) && this.redraw(d);
        },showLoading: function(a) {
            var b = this.options, c = this.loadingDiv, d = b.loading;
            if (!c) {
                this.loadingDiv = c = T(Ga, {className: "highcharts-loading"}, r(d.style, {zIndex: 10,display: Q}), this.container), this.loadingSpan = T("span", null, d.labelStyle, c);
            }
            this.loadingSpan.innerHTML = a || b.lang.loading;
            if (!this.loadingShown) {
                D(c, {opacity: 0,display: "",left: this.plotLeft + "px",top: this.plotTop + "px",width: this.plotWidth + "px",height: this.plotHeight + "px"}), kb(c, {opacity: d.style.opacity}, {duration: d.showDuration || 0}), this.loadingShown = !0;
            }
        },hideLoading: function() {
            var a = this.options, b = this.loadingDiv;
            b && kb(b, {opacity: 0}, {duration: a.loading.hideDuration || 100,complete: function() {
                    D(b, {display: Q});
                }});
            this.loadingShown = !1;
        }});
    r(Ja.prototype, {update: function(a, b, c) {
            var d = this, e = d.series, f = d.graphic, g, h = e.data, i = e.chart, j = e.options, b = n(b, !0);
            d.firePointEvent("update", {options: a}, function() {
                d.applyOptions(a);
                if (S(a)) {
                    e.getAttribs();
                    if (f) {
                        a && a.marker && a.marker.symbol ? d.graphic = f.destroy() : f.attr(d.pointAttr[d.state || ""]);
                    }
                    if (a && a.dataLabels && d.dataLabel) {
                        d.dataLabel = d.dataLabel.destroy();
                    }
                }
                g = sa(d, h);
                e.updateParallelArrays(d, g);
                j.data[g] = d.options;
                e.isDirty = e.isDirtyData = !0;
                if (!e.fixedBox && e.hasCartesianSeries) {
                    i.isDirtyBox = !0;
                }
                j.legendType === "point" && i.legend.destroyItem(d);
                b && i.redraw(c);
            });
        },remove: function(a, b) {
            var c = this, d = c.series, e = d.points, f = d.chart, g, h = d.data;
            Oa(b, f);
            a = n(a, !0);
            c.firePointEvent("remove", null, function() {
                g = sa(c, h);
                h.length === e.length && e.splice(g, 1);
                h.splice(g, 1);
                d.options.data.splice(g, 1);
                d.updateParallelArrays(c, "splice", g, 1);
                c.destroy();
                d.isDirty = !0;
                d.isDirtyData = !0;
                a && f.redraw();
            });
        }});
    r(O.prototype, {addPoint: function(a, b, c, d) {
            var e = this.options, f = this.data, g = this.graph, h = this.area, i = this.chart, j = this.xAxis && this.xAxis.names, k = g && g.shift || 0, l = e.data, m, q = this.xData;
            Oa(d, i);
            c && p([g, h, this.graphNeg, this.areaNeg], function(a) {
                if (a) {
                    a.shift = k + 1;
                }
            });
            if (h) {
                h.isArea = !0;
            }
            b = n(b, !0);
            d = {series: this};
            this.pointClass.prototype.applyOptions.apply(d, [a]);
            g = d.x;
            h = q.length;
            if (this.requireSorting && g < q[h - 1]) {
                for (m = !0; h && q[h - 1] > g; ) {
                    h--;
                }
            }
            this.updateParallelArrays(d, "splice", h, 0, 0);
            this.updateParallelArrays(d, h);
            if (j) {
                j[g] = d.name;
            }
            l.splice(h, 0, a);
            m && (this.data.splice(h, 0, null), this.processData());
            e.legendType === "point" && this.generatePoints();
            c && (f[0] && f[0].remove ? f[0].remove(!1) : (f.shift(), this.updateParallelArrays(d, "shift"), l.shift()));
            this.isDirtyData = this.isDirty = !0;
            b && (this.getAttribs(), i.redraw());
        },remove: function(a, b) {
            var c = this, d = c.chart, a = n(a, !0);
            if (!c.isRemoving) {
                c.isRemoving = !0, A(c, "remove", null, function() {
                    c.destroy();
                    d.isDirtyLegend = d.isDirtyBox = !0;
                    d.linkSeries();
                    a && d.redraw(b);
                });
            }
            c.isRemoving = !1;
        },update: function(a, b) {
            var c = this.chart, d = this.type, e = L[d].prototype, f, a = x(this.userOptions, {animation: !1,index: this.index,pointStart: this.xData[0]}, {data: this.options.data}, a);
            this.remove(!1);
            for (f in e) {
                e.hasOwnProperty(f) && (this[f] = u);
            }
            r(this, L[a.type || d].prototype);
            this.init(c, a);
            n(b, !0) && c.redraw(!1);
        }});
    r(qa.prototype, {update: function(a, b) {
            var c = this.chart, a = c.options[this.coll][this.options.index] = x(this.userOptions, a);
            this.destroy(!0);
            this._addedPlotLB = this.userMin = this.userMax = u;
            this.init(c, r(a, {events: u}));
            c.isDirtyBox = !0;
            n(b, !0) && c.redraw();
        },remove: function(a) {
            var b = this.chart, c = this.coll;
            p(this.series, function(a) {
                a.remove(!1);
            });
            ha(b.axes, this);
            ha(b[c], this);
            b.options[c].splice(this.options.index, 1);
            p(b[c], function(a, b) {
                a.options.index = b;
            });
            this.destroy();
            b.isDirtyBox = !0;
            n(a, !0) && b.redraw();
        },setTitle: function(a, b) {
            this.update({title: a}, b);
        },setCategories: function(a, b) {
            this.update({categories: a}, b);
        }});
    var ca = ia(O);
    L.line = ca;
    Y.area = x(W, {threshold: 0});
    var Ua = ia(O, {type: "area",getSegments: function() {
            var a = [], b = [], c = [], d = this.xAxis, e = this.yAxis, f = e.stacks[this.stackKey], g = {}, h, i, j = this.points, k = this.options.connectNulls, l, m, n;
            if (this.options.stacking && !this.cropped) {
                for (m = 0; m < j.length; m++) {
                    g[j[m].x] = j[m];
                }
                for (n in f) {
                    f[n].total !== null && c.push(+n);
                }
                c.sort(function(a, b) {
                    return a - b;
                });
                p(c, function(a) {
                    if (!k || g[a] && g[a].y !== null) {
                        g[a] ? b.push(g[a]) : (h = d.translate(a), l = f[a].percent ? f[a].total ? f[a].cum * 100 / f[a].total : 0 : f[a].cum, i = e.toPixels(l, !0), b.push({y: null,plotX: h,clientX: h,plotY: i,yBottom: i,onMouseOver: la}));
                    }
                });
                b.length && a.push(b);
            } else {
                O.prototype.getSegments.call(this), a = this.segments;
            }
            this.segments = a;
        },getSegmentPath: function(a) {
            var b = O.prototype.getSegmentPath.call(this, a), c = [].concat(b), d, e = this.options;
            d = b.length;
            var f = this.yAxis.getThreshold(e.threshold), g;
            d === 3 && c.push("L", b[1], b[2]);
            if (e.stacking && !this.closedStacks) {
                for (d = a.length - 1; d >= 0; d--) {
                    g = n(a[d].yBottom, f), d < a.length - 1 && e.step && c.push(a[d + 1].plotX, g), c.push(a[d].plotX, g);
                }
            } else {
                this.closeSegment(c, a, f);
            }
            this.areaPath = this.areaPath.concat(c);
            return b;
        },closeSegment: function(a, b, c) {
            a.push("L", b[b.length - 1].plotX, c, "L", b[0].plotX, c);
        },drawGraph: function() {
            this.areaPath = [];
            O.prototype.drawGraph.apply(this);
            var a = this, b = this.areaPath, c = this.options, d = c.negativeColor, e = c.negativeFillColor, f = [["area", this.color, c.fillColor]];
            (d || e) && f.push(["areaNeg", d, e]);
            p(f, function(d) {
                var e = d[0], f = a[e];
                f ? f.animate({d: b}) : a[e] = a.chart.renderer.path(b).attr({fill: n(d[2], ta(d[1]).setOpacity(n(c.fillOpacity, 0.75)).get()),zIndex: 0}).add(a.group);
            });
        },drawLegendSymbol: R.drawRectangle});
    L.area = Ua;
    Y.spline = x(W);
    ca = ia(O, {type: "spline",getPointSpline: function(a, b, c) {
            var d = b.plotX, e = b.plotY, f = a[c - 1], g = a[c + 1], h, i, j, k;
            if (f && g) {
                a = f.plotY;
                j = g.plotX;
                var g = g.plotY, l;
                h = (1.5 * d + f.plotX) / 2.5;
                i = (1.5 * e + a) / 2.5;
                j = (1.5 * d + j) / 2.5;
                k = (1.5 * e + g) / 2.5;
                l = (k - i) * (j - d) / (j - h) + e - k;
                i += l;
                k += l;
                i > a && i > e ? (i = s(a, e), k = 2 * e - i) : i < a && i < e && (i = I(a, e), k = 2 * e - i);
                k > g && k > e ? (k = s(g, e), i = 2 * e - k) : k < g && k < e && (k = I(g, e), i = 2 * e - k);
                b.rightContX = j;
                b.rightContY = k;
            }
            c ? (b = ["C", f.rightContX || f.plotX, f.rightContY || f.plotY, h || d, i || e, d, e], f.rightContX = f.rightContY = null) : b = ["M", d, e];
            return b;
        }});
    L.spline = ca;
    Y.areaspline = x(Y.area);
    Ua = Ua.prototype;
    ca = ia(ca, {type: "areaspline",closedStacks: !0,getSegmentPath: Ua.getSegmentPath,closeSegment: Ua.closeSegment,drawGraph: Ua.drawGraph,drawLegendSymbol: R.drawRectangle});
    L.areaspline = ca;
    Y.column = x(W, {borderColor: "#FFFFFF",borderWidth: 1,borderRadius: 0,groupPadding: 0.2,marker: null,pointPadding: 0.1,minPointLength: 0,cropThreshold: 50,pointRange: null,states: {hover: {brightness: 0.1,shadow: !1},select: {color: "#C0C0C0",borderColor: "#000000",shadow: !1}},dataLabels: {align: null,verticalAlign: null,y: null},stickyTracking: !1,threshold: 0});
    ca = ia(O, {type: "column",pointAttrToOptions: {stroke: "borderColor","stroke-width": "borderWidth",fill: "color",r: "borderRadius"},cropShoulder: 0,trackerGroups: ["group", "dataLabelsGroup"],negStacks: !0,init: function() {
            O.prototype.init.apply(this, arguments);
            var a = this, b = a.chart;
            b.hasRendered && p(b.series, function(b) {
                if (b.type === a.type) {
                    b.isDirty = !0;
                }
            });
        },getColumnMetrics: function() {
            var a = this, b = a.options, c = a.xAxis, d = a.yAxis, e = c.reversed, f, g = {}, h, i = 0;
            b.grouping === !1 ? i = 1 : p(a.chart.series, function(b) {
                var c = b.options, e = b.yAxis;
                if (b.type === a.type && b.visible && d.len === e.len && d.pos === e.pos) {
                    c.stacking ? (f = b.stackKey, g[f] === u && (g[f] = i++), h = g[f]) : c.grouping !== !1 && (h = i++), b.columnIndex = h;
                }
            });
            var c = I(M(c.transA) * (c.ordinalSlope || b.pointRange || c.closestPointRange || 1), c.len), j = c * b.groupPadding, k = (c - 2 * j) / i, l = b.pointWidth, b = t(l) ? (k - l) / 2 : k * b.pointPadding, l = n(l, k - 2 * b);
            return a.columnMetrics = {width: l,offset: b + (j + ((e ? i - (a.columnIndex || 0) : a.columnIndex) || 0) * k - c / 2) * (e ? -1 : 1)};
        },translate: function() {
            var a = this.chart, b = this.options, c = b.borderWidth, d = this.yAxis, e = this.translatedThreshold = d.getThreshold(b.threshold), f = n(b.minPointLength, 5), b = this.getColumnMetrics(), g = b.width, h = this.barW = Ha(s(g, 1 + 2 * c)), i = this.pointXOffset = b.offset, j = -(c % 2 ? 0.5 : 0), k = c % 2 ? 0.5 : 1;
            a.renderer.isVML && a.inverted && (k += 1);
            O.prototype.translate.apply(this);
            p(this.points, function(a) {
                var b = n(a.yBottom, e), c = I(s(-999 - b, a.plotY), d.len + 999 + b), o = a.plotX + i, p = h, r = I(c, b), t, c = s(c, b) - r;
                M(c) < f && f && (c = f, r = w(M(r - e) > f ? b - f : e - (d.translate(a.y, 0, 1, 0, 1) <= e ? f : 0)));
                a.barX = o;
                a.pointWidth = g;
                b = M(o) < 0.5;
                p = w(o + p) + j;
                o = w(o) + j;
                p -= o;
                t = M(r) < 0.5;
                c = w(r + c) + k;
                r = w(r) + k;
                c -= r;
                b && (o += 1, p -= 1);
                t && (r -= 1, c += 1);
                a.shapeType = "rect";
                a.shapeArgs = {x: o,y: r,width: p,height: c};
            });
        },getSymbol: la,drawLegendSymbol: R.drawRectangle,drawGraph: la,drawPoints: function() {
            var a = this, b = this.chart, c = a.options, d = b.renderer, e = b.options.animationLimit || 250, f;
            p(a.points, function(g) {
                var h = g.plotY, i = g.graphic;
                if (h !== u && !isNaN(h) && g.y !== null) {
                    f = g.shapeArgs, i ? (Za(i), i[b.pointCount < e ? "animate" : "attr"](x(f))) : g.graphic = d[g.shapeType](f).attr(g.pointAttr[g.selected ? "select" : ""]).add(a.group).shadow(c.shadow, null, c.stacking && !c.borderRadius);
                } else {
                    if (i) {
                        g.graphic = i.destroy();
                    }
                }
            });
        },drawTracker: J.drawTrackerPoint,animate: function(a) {
            var b = this.yAxis, c = this.options, d = this.chart.inverted, e = {};
            if (V) {
                a ? (e.scaleY = 0.001, a = I(b.pos + b.len, s(b.pos, b.toPixels(c.threshold))), d ? e.translateX = a - b.len : e.translateY = a, this.group.attr(e)) : (e.scaleY = 1, e[d ? "translateX" : "translateY"] = b.pos, this.group.animate(e, this.options.animation), this.animate = null);
            }
        },remove: function() {
            var a = this, b = a.chart;
            b.hasRendered && p(b.series, function(b) {
                if (b.type === a.type) {
                    b.isDirty = !0;
                }
            });
            O.prototype.remove.apply(a, arguments);
        }});
    L.column = ca;
    Y.bar = x(Y.column);
    ca = ia(ca, {type: "bar",inverted: !0});
    L.bar = ca;
    Y.scatter = x(W, {lineWidth: 0,tooltip: {headerFormat: '<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat: "x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer: !0},stickyTracking: !1});
    ca = ia(O, {type: "scatter",sorted: !1,requireSorting: !1,noSharedTooltip: !0,trackerGroups: ["markerGroup"],takeOrdinalPosition: !1,drawTracker: J.drawTrackerPoint,drawGraph: function() {
            this.options.lineWidth && O.prototype.drawGraph.call(this);
        },setTooltipPoints: la});
    L.scatter = ca;
    Y.pie = x(W, {borderColor: "#FFFFFF",borderWidth: 1,center: [null, null],clip: !1,colorByPoint: !0,dataLabels: {distance: 30,enabled: !0,formatter: function() {
                return this.point.name;
            }},ignoreHiddenPoint: !0,legendType: "point",marker: null,size: null,showInLegend: !1,slicedOffset: 10,states: {hover: {brightness: 0.1,shadow: !1}},stickyTracking: !1,tooltip: {followPointer: !0}});
    W = {type: "pie",isCartesian: !1,pointClass: ia(Ja, {init: function() {
                Ja.prototype.init.apply(this, arguments);
                var a = this, b;
                if (a.y < 0) {
                    a.y = null;
                }
                r(a, {visible: a.visible !== !1,name: n(a.name, "Slice")});
                b = function(b) {
                    a.slice(b.type === "select");
                };
                F(a, "select", b);
                F(a, "unselect", b);
                return a;
            },setVisible: function(a) {
                var b = this, c = b.series, d = c.chart, e;
                b.visible = b.options.visible = a = a === u ? !b.visible : a;
                c.options.data[sa(b, c.data)] = b.options;
                e = a ? "show" : "hide";
                p(["graphic", "dataLabel", "connector", "shadowGroup"], function(a) {
                    if (b[a]) {
                        b[a][e]();
                    }
                });
                b.legendItem && d.legend.colorizeItem(b, a);
                if (!c.isDirty && c.options.ignoreHiddenPoint) {
                    c.isDirty = !0, d.redraw();
                }
            },slice: function(a, b, c) {
                var d = this.series;
                Oa(c, d.chart);
                n(b, !0);
                this.sliced = this.options.sliced = a = t(a) ? a : !this.sliced;
                d.options.data[sa(this, d.data)] = this.options;
                a = a ? this.slicedTranslation : {translateX: 0,translateY: 0};
                this.graphic.animate(a);
                this.shadowGroup && this.shadowGroup.animate(a);
            }}),requireSorting: !1,noSharedTooltip: !0,trackerGroups: ["group", "dataLabelsGroup"],axisTypes: [],pointAttrToOptions: {stroke: "borderColor","stroke-width": "borderWidth",fill: "color"},getColor: la,animate: function(a) {
            var b = this, c = b.points, d = b.startAngleRad;
            if (!a) {
                p(c, function(a) {
                    var c = a.graphic, a = a.shapeArgs;
                    c && (c.attr({r: b.center[3] / 2,start: d,end: d}), c.animate({r: a.r,start: a.start,end: a.end}, b.options.animation));
                }), b.animate = null;
            }
        },setData: function(a, b) {
            O.prototype.setData.call(this, a, !1);
            this.processData();
            this.generatePoints();
            n(b, !0) && this.chart.redraw();
        },generatePoints: function() {
            var a, b = 0, c, d, e, f = this.options.ignoreHiddenPoint;
            O.prototype.generatePoints.call(this);
            c = this.points;
            d = c.length;
            for (a = 0; a < d; a++) {
                e = c[a], b += f && !e.visible ? 0 : e.y;
            }
            this.total = b;
            for (a = 0; a < d; a++) {
                e = c[a], e.percentage = b > 0 ? e.y / b * 100 : 0, e.total = b;
            }
        },translate: function(a) {
            this.generatePoints();
            var b = 0, c = this.options, d = c.slicedOffset, e = d + c.borderWidth, f, g, h, i = c.startAngle || 0, j = this.startAngleRad = Aa / 180 * (i - 90), i = (this.endAngleRad = Aa / 180 * ((c.endAngle || i + 360) - 90)) - j, k = this.points, l = c.dataLabels.distance, c = c.ignoreHiddenPoint, m, n = k.length, o;
            if (!a) {
                this.center = a = this.getCenter();
            }
            this.getX = function(b, c) {
                h = P.asin((b - a[1]) / (a[2] / 2 + l));
                return a[0] + (c ? -1 : 1) * U(h) * (a[2] / 2 + l);
            };
            for (m = 0; m < n; m++) {
                o = k[m];
                f = j + b * i;
                if (!c || o.visible) {
                    b += o.percentage / 100;
                }
                g = j + b * i;
                o.shapeType = "arc";
                o.shapeArgs = {x: a[0],y: a[1],r: a[2] / 2,innerR: a[3] / 2,start: w(f * 1000) / 1000,end: w(g * 1000) / 1000};
                h = (g + f) / 2;
                h > 0.75 * i && (h -= 2 * Aa);
                o.slicedTranslation = {translateX: w(U(h) * d),translateY: w(ba(h) * d)};
                f = U(h) * a[2] / 2;
                g = ba(h) * a[2] / 2;
                o.tooltipPos = [a[0] + f * 0.7, a[1] + g * 0.7];
                o.half = h < -Aa / 2 || h > Aa / 2 ? 1 : 0;
                o.angle = h;
                e = I(e, l / 2);
                o.labelPos = [a[0] + f + U(h) * l, a[1] + g + ba(h) * l, a[0] + f + U(h) * e, a[1] + g + ba(h) * e, a[0] + f, a[1] + g, l < 0 ? "center" : o.half ? "right" : "left", h];
            }
        },setTooltipPoints: la,drawGraph: null,drawPoints: function() {
            var a = this, b = a.chart.renderer, c, d, e = a.options.shadow, f, g;
            if (e && !a.shadowGroup) {
                a.shadowGroup = b.g("shadow").add(a.group);
            }
            p(a.points, function(h) {
                d = h.graphic;
                g = h.shapeArgs;
                f = h.shadowGroup;
                if (e && !f) {
                    f = h.shadowGroup = b.g("shadow").add(a.shadowGroup);
                }
                c = h.sliced ? h.slicedTranslation : {translateX: 0,translateY: 0};
                f && f.attr(c);
                d ? d.animate(r(g, c)) : h.graphic = d = b.arc(g).setRadialReference(a.center).attr(h.pointAttr[h.selected ? "select" : ""]).attr({"stroke-linejoin": "round"}).attr(c).add(a.group).shadow(e, f);
                h.visible !== void 0 && h.setVisible(h.visible);
            });
        },sortByAngle: function(a, b) {
            a.sort(function(a, d) {
                return a.angle !== void 0 && (d.angle - a.angle) * b;
            });
        },drawTracker: J.drawTrackerPoint,drawLegendSymbol: R.drawRectangle,getCenter: xb.getCenter,getSymbol: la};
    W = ia(O, W);
    L.pie = W;
    O.prototype.drawDataLabels = function() {
        var a = this, b = a.options, c = b.cursor, d = b.dataLabels, b = a.points, e, f, g, h;
        if (d.enabled || a._hasPointLabels) {
            a.dlProcessOptions && a.dlProcessOptions(d), h = a.plotGroup("dataLabelsGroup", "data-labels", a.visible ? "visible" : "hidden", d.zIndex || 6), f = d, p(b, function(b) {
                var j, k = b.dataLabel, l, m, p = b.connector, o = !0;
                e = b.options && b.options.dataLabels;
                j = n(e && e.enabled, f.enabled);
                if (k && !j) {
                    b.dataLabel = k.destroy();
                } else {
                    if (j) {
                        d = x(f, e);
                        j = d.rotation;
                        l = b.getLabelConfig();
                        g = d.format ? Fa(d.format, l) : d.formatter.call(l, d);
                        d.style.color = n(d.color, d.style.color, a.color, "black");
                        if (k) {
                            if (t(g)) {
                                k.attr({text: g}), o = !1;
                            } else {
                                if (b.dataLabel = k = k.destroy(), p) {
                                    b.connector = p.destroy();
                                }
                            }
                        } else {
                            if (t(g)) {
                                k = {fill: d.backgroundColor,stroke: d.borderColor,"stroke-width": d.borderWidth,r: d.borderRadius || 0,rotation: j,padding: d.padding,zIndex: 1};
                                for (m in k) {
                                    k[m] === u && delete k[m];
                                }
                                k = b.dataLabel = a.chart.renderer[j ? "text" : "label"](g, 0, -999, null, null, null, d.useHTML).attr(k).css(r(d.style, c && {cursor: c})).add(h).shadow(d.shadow);
                            }
                        }
                        k && a.alignDataLabel(b, k, d, null, o);
                    }
                }
            });
        }
    };
    O.prototype.alignDataLabel = function(a, b, c, d, e) {
        var f = this.chart, g = f.inverted, h = n(a.plotX, -999), i = n(a.plotY, -999), j = b.getBBox();
        if (a = this.visible && (a.series.forceDL || f.isInsidePlot(a.plotX, a.plotY, g))) {
            d = r({x: g ? f.plotWidth - i : h,y: w(g ? f.plotHeight - h : i),width: 0,height: 0}, d), r(c, {width: j.width,height: j.height}), c.rotation ? (g = {align: c.align,x: d.x + c.x + d.width / 2,y: d.y + c.y + d.height / 2}, b[e ? "attr" : "animate"](g)) : (b.align(c, null, d), g = b.alignAttr, n(c.overflow, "justify") === "justify" ? this.justifyDataLabel(b, c, g, j, d, e) : n(c.crop, !0) && (a = f.isInsidePlot(g.x, g.y) && f.isInsidePlot(g.x + j.width, g.y + j.height)));
        }
        if (!a) {
            b.attr({y: -999}), b.placed = !1;
        }
    };
    O.prototype.justifyDataLabel = function(a, b, c, d, e, f) {
        var g = this.chart, h = b.align, i = b.verticalAlign, j, k;
        j = c.x;
        if (j < 0) {
            h === "right" ? b.align = "left" : b.x = -j, k = !0;
        }
        j = c.x + d.width;
        if (j > g.plotWidth) {
            h === "left" ? b.align = "right" : b.x = g.plotWidth - j, k = !0;
        }
        j = c.y;
        if (j < 0) {
            i === "bottom" ? b.verticalAlign = "top" : b.y = -j, k = !0;
        }
        j = c.y + d.height;
        if (j > g.plotHeight) {
            i === "top" ? b.verticalAlign = "bottom" : b.y = g.plotHeight - j, k = !0;
        }
        if (k) {
            a.placed = !f, a.align(b, null, e);
        }
    };
    if (L.pie) {
        L.pie.prototype.drawDataLabels = function() {
            var a = this, b = a.data, c, d = a.chart, e = a.options.dataLabels, f = n(e.connectorPadding, 10), g = n(e.connectorWidth, 1), h = d.plotWidth, d = d.plotHeight, i, j, k = n(e.softConnector, !0), l = e.distance, m = a.center, q = m[2] / 2, o = m[1], r = l > 0, t, u, v, x, y = [[], []], z, A, E, K, B, D = [0, 0, 0, 0], I = function(a, b) {
                return b.y - a.y;
            };
            if (a.visible && (e.enabled || a._hasPointLabels)) {
                O.prototype.drawDataLabels.apply(a);
                p(b, function(a) {
                    a.dataLabel && a.visible && y[a.half].push(a);
                });
                for (K = 0; !x && b[K]; ) {
                    x = b[K] && b[K].dataLabel && (b[K].dataLabel.getBBox().height || 21), K++;
                }
                for (K = 2; K--; ) {
                    var b = [], J = [], F = y[K], G = F.length, C;
                    a.sortByAngle(F, K - 0.5);
                    if (l > 0) {
                        for (B = o - q - l; B <= o + q + l; B += x) {
                            b.push(B);
                        }
                        u = b.length;
                        if (G > u) {
                            c = [].concat(F);
                            c.sort(I);
                            for (B = G; B--; ) {
                                c[B].rank = B;
                            }
                            for (B = G; B--; ) {
                                F[B].rank >= u && F.splice(B, 1);
                            }
                            G = F.length;
                        }
                        for (B = 0; B < G; B++) {
                            c = F[B];
                            v = c.labelPos;
                            c = 9999;
                            var L, N;
                            for (N = 0; N < u; N++) {
                                L = M(b[N] - v[1]), L < c && (c = L, C = N);
                            }
                            if (C < B && b[B] !== null) {
                                C = B;
                            } else {
                                for (u < G - B + C && b[B] !== null && (C = u - G + B); b[C] === null; ) {
                                    C++;
                                }
                            }
                            J.push({i: C,y: b[C]});
                            b[C] = null;
                        }
                        J.sort(I);
                    }
                    for (B = 0; B < G; B++) {
                        c = F[B];
                        v = c.labelPos;
                        t = c.dataLabel;
                        E = c.visible === !1 ? "hidden" : "visible";
                        c = v[1];
                        if (l > 0) {
                            if (u = J.pop(), C = u.i, A = u.y, c > A && b[C + 1] !== null || c < A && b[C - 1] !== null) {
                                A = c;
                            }
                        } else {
                            A = c;
                        }
                        z = e.justify ? m[0] + (K ? -1 : 1) * (q + l) : a.getX(C === 0 || C === b.length - 1 ? c : A, K);
                        t._attr = {visibility: E,align: v[6]};
                        t._pos = {x: z + e.x + ({left: f,right: -f}[v[6]] || 0),y: A + e.y - 10};
                        t.connX = z;
                        t.connY = A;
                        if (this.options.size === null) {
                            u = t.width, z - u < f ? D[3] = s(w(u - z + f), D[3]) : z + u > h - f && (D[1] = s(w(z + u - h + f), D[1])), A - x / 2 < 0 ? D[0] = s(w(-A + x / 2), D[0]) : A + x / 2 > d && (D[2] = s(w(A + x / 2 - d), D[2]));
                        }
                    }
                }
                if (za(D) === 0 || this.verifyDataLabelOverflow(D)) {
                    this.placeDataLabels(), r && g && p(this.points, function(b) {
                        i = b.connector;
                        v = b.labelPos;
                        if ((t = b.dataLabel) && t._pos) {
                            E = t._attr.visibility, z = t.connX, A = t.connY, j = k ? ["M", z + (v[6] === "left" ? 5 : -5), A, "C", z, A, 2 * v[2] - v[4], 2 * v[3] - v[5], v[2], v[3], "L", v[4], v[5]] : ["M", z + (v[6] === "left" ? 5 : -5), A, "L", v[2], v[3], "L", v[4], v[5]], i ? (i.animate({d: j}), i.attr("visibility", E)) : b.connector = i = a.chart.renderer.path(j).attr({"stroke-width": g,stroke: e.connectorColor || b.color || "#606060",visibility: E}).add(a.group);
                        } else {
                            if (i) {
                                b.connector = i.destroy();
                            }
                        }
                    });
                }
            }
        }, L.pie.prototype.placeDataLabels = function() {
            p(this.points, function(a) {
                var a = a.dataLabel, b;
                if (a) {
                    (b = a._pos) ? (a.attr(a._attr), a[a.moved ? "animate" : "attr"](b), a.moved = !0) : a && a.attr({y: -999});
                }
            });
        }, L.pie.prototype.alignDataLabel = la, L.pie.prototype.verifyDataLabelOverflow = function(a) {
            var b = this.center, c = this.options, d = c.center, e = c = c.minSize || 80, f;
            d[0] !== null ? e = s(b[2] - s(a[1], a[3]), c) : (e = s(b[2] - a[1] - a[3], c), b[0] += (a[3] - a[1]) / 2);
            d[1] !== null ? e = s(I(e, b[2] - s(a[0], a[2])), c) : (e = s(I(e, b[2] - a[0] - a[2]), c), b[1] += (a[0] - a[2]) / 2);
            e < b[2] ? (b[2] = e, this.translate(b), p(this.points, function(a) {
                if (a.dataLabel) {
                    a.dataLabel._pos = null;
                }
            }), this.drawDataLabels && this.drawDataLabels()) : f = !0;
            return f;
        };
    }
    if (L.column) {
        L.column.prototype.alignDataLabel = function(a, b, c, d, e) {
            var f = this.chart, g = f.inverted, h = a.dlBox || a.shapeArgs, i = a.below || a.plotY > n(this.translatedThreshold, f.plotSizeY), j = n(c.inside, !!this.options.stacking);
            if (h && (d = x(h), g && (d = {x: f.plotWidth - d.y - d.height,y: f.plotHeight - d.x - d.width,width: d.height,height: d.width}), !j)) {
                g ? (d.x += i ? 0 : d.width, d.width = 0) : (d.y += i ? d.height : 0, d.height = 0);
            }
            c.align = n(c.align, !g || j ? "center" : i ? "right" : "left");
            c.verticalAlign = n(c.verticalAlign, g || j ? "middle" : i ? "top" : "bottom");
            O.prototype.alignDataLabel.call(this, a, b, c, d, e);
        };
    }
    r(Highcharts, {Axis: qa,Chart: fb,Color: ta,Point: Ja,Tick: Qa,Tooltip: tb,Renderer: Ya,Series: O,SVGElement: pa,SVGRenderer: ua,arrayMin: La,arrayMax: za,charts: Ia,dateFormat: ab,format: Fa,pathAnim: vb,getOptions: function() {
            return G;
        },hasBidiBug: Nb,isTouchDevice: Ib,numberFormat: Da,seriesTypes: L,setOptions: function(a) {
            G = x(!0, G, a);
            Bb();
            return G;
        },addEvent: F,removeEvent: X,createElement: T,discardElement: Na,css: D,each: p,extend: r,map: Ra,merge: x,pick: n,splat: ja,extendClass: ia,pInt: z,wrap: Va,svg: V,canvas: da,vml: !V && !da,product: "Highcharts",version: "3.0.9"});
})();
(function(f) {
    var A = f.Chart, t = f.addEvent, B = f.removeEvent, l = f.createElement, o = f.discardElement, v = f.css, k = f.merge, r = f.each, p = f.extend, D = Math.max, j = document, C = window, E = f.isTouchDevice, F = f.Renderer.prototype.symbols, s = f.getOptions(), y;
    p(s.lang, {printChart: "Print chart",downloadPNG: "Download PNG image",downloadJPEG: "Download JPEG image",downloadPDF: "Download PDF document",downloadSVG: "Download SVG vector image",contextButtonTitle: "Chart context menu"});
    s.navigation = {menuStyle: {border: "1px solid #A0A0A0",background: "#FFFFFF",padding: "5px 0"},menuItemStyle: {padding: "0 10px",background: "none",color: "#303030",fontSize: E ? "14px" : "11px"},menuItemHoverStyle: {background: "#4572A5",color: "#FFFFFF"},buttonOptions: {symbolFill: "#E0E0E0",symbolSize: 14,symbolStroke: "#666",symbolStrokeWidth: 3,symbolX: 12.5,symbolY: 10.5,align: "right",buttonSpacing: 3,height: 22,theme: {fill: "white",stroke: "none"},verticalAlign: "top",width: 24}};
    s.exporting = {type: "image/png",url: "http://export.highcharts.com/",buttons: {contextButton: {menuClassName: "highcharts-contextmenu",symbol: "menu",_titleKey: "contextButtonTitle",menuItems: [{textKey: "printChart",onclick: function() {
                            this.print();
                        }}, {separator: !0}, {textKey: "downloadPNG",onclick: function() {
                            this.exportChart();
                        }}, {textKey: "downloadJPEG",onclick: function() {
                            this.exportChart({type: "image/jpeg"});
                        }}, {textKey: "downloadPDF",onclick: function() {
                            this.exportChart({type: "application/pdf"});
                        }}, {textKey: "downloadSVG",onclick: function() {
                            this.exportChart({type: "image/svg+xml"});
                        }}]}}};
    f.post = function(b, a, d) {
        var c, b = l("form", k({method: "post",action: b,enctype: "multipart/form-data"}, d), {display: "none"}, j.body);
        for (c in a) {
            l("input", {type: "hidden",name: c,value: a[c]}, null, b);
        }
        b.submit();
        o(b);
    };
    p(A.prototype, {getSVG: function(b) {
            var a = this, d, c, z, h, g = k(a.options, b);
            if (!j.createElementNS) {
                j.createElementNS = function(a, b) {
                    return j.createElement(b);
                };
            }
            b = l("div", null, {position: "absolute",top: "-9999em",width: a.chartWidth + "px",height: a.chartHeight + "px"}, j.body);
            c = a.renderTo.style.width;
            h = a.renderTo.style.height;
            c = g.exporting.sourceWidth || g.chart.width || /px$/.test(c) && parseInt(c, 10) || 600;
            h = g.exporting.sourceHeight || g.chart.height || /px$/.test(h) && parseInt(h, 10) || 400;
            p(g.chart, {animation: !1,renderTo: b,forExport: !0,width: c,height: h});
            g.exporting.enabled = !1;
            g.series = [];
            r(a.series, function(a) {
                z = k(a.options, {animation: !1,showCheckbox: !1,visible: a.visible});
                z.isInternal || g.series.push(z);
            });
            d = new f.Chart(g, a.callback);
            r(["xAxis", "yAxis"], function(b) {
                r(a[b], function(a, c) {
                    var g = d[b][c], f = a.getExtremes(), h = f.userMin, f = f.userMax;
                    g && (h !== void 0 || f !== void 0) && g.setExtremes(h, f, !0, !1);
                });
            });
            c = d.container.innerHTML;
            g = null;
            d.destroy();
            o(b);
            c = c.replace(/zIndex="[^"]+"/g, "").replace(/isShadow="[^"]+"/g, "").replace(/symbolName="[^"]+"/g, "").replace(/jQuery[0-9]+="[^"]+"/g, "").replace(/url\([^#]+#/g, "url(#").replace(/<svg /, '<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g, " xlink:href=").replace(/\n/, " ").replace(/<\/svg>.*?$/, "</svg>").replace(/&nbsp;/g, " ").replace(/&shy;/g, "").replace(/<IMG /g, "<image ").replace(/height=([^" ]+)/g, 'height="$1"').replace(/width=([^" ]+)/g, 'width="$1"').replace(/hc-svg-href="([^"]+)">/g, 'xlink:href="$1"/>').replace(/id=([^" >]+)/g, 'id="$1"').replace(/class=([^" >]+)/g, 'class="$1"').replace(/ transform /g, " ").replace(/:(path|rect)/g, "$1").replace(/style="([^"]+)"/g, function(a) {
                return a.toLowerCase();
            });
            return c = c.replace(/(url\(#highcharts-[0-9]+)&quot;/g, "$1").replace(/&quot;/g, "'");
        },exportChart: function(b, a) {
            var b = b || {}, d = this.options.exporting, d = this.getSVG(k({chart: {borderRadius: 0}}, d.chartOptions, a, {exporting: {sourceWidth: b.sourceWidth || d.sourceWidth,sourceHeight: b.sourceHeight || d.sourceHeight}})), b = k(this.options.exporting, b);
            f.post(b.url, {filename: b.filename || "chart",type: b.type,width: b.width || 0,scale: b.scale || 2,svg: d}, b.formAttributes);
        },print: function() {
            var b = this, a = b.container, d = [], c = a.parentNode, f = j.body, h = f.childNodes;
            if (!b.isPrinting) {
                b.isPrinting = !0, r(h, function(a, b) {
                    if (a.nodeType === 1) {
                        d[b] = a.style.display, a.style.display = "none";
                    }
                }), f.appendChild(a), C.focus(), C.print(), setTimeout(function() {
                    c.appendChild(a);
                    r(h, function(a, b) {
                        if (a.nodeType === 1) {
                            a.style.display = d[b];
                        }
                    });
                    b.isPrinting = !1;
                }, 1000);
            }
        },contextMenu: function(b, a, d, c, f, h, g) {
            var e = this, k = e.options.navigation, q = k.menuItemStyle, m = e.chartWidth, n = e.chartHeight, j = "cache-" + b, i = e[j], u = D(f, h), w, x, o, s = function(a) {
                e.pointer.inClass(a.target, b) || x();
            };
            if (!i) {
                e[j] = i = l("div", {className: b}, {position: "absolute",zIndex: 1000,padding: u + "px"}, e.container), w = l("div", null, p({MozBoxShadow: "3px 3px 10px #888",WebkitBoxShadow: "3px 3px 10px #888",boxShadow: "3px 3px 10px #888"}, k.menuStyle), i), x = function() {
                    v(i, {display: "none"});
                    g && g.setState(0);
                    e.openMenu = !1;
                }, t(i, "mouseleave", function() {
                    o = setTimeout(x, 500);
                }), t(i, "mouseenter", function() {
                    clearTimeout(o);
                }), t(document, "mouseup", s), t(e, "destroy", function() {
                    B(document, "mouseup", s);
                }), r(a, function(a) {
                    if (a) {
                        var b = a.separator ? l("hr", null, null, w) : l("div", {onmouseover: function() {
                                v(this, k.menuItemHoverStyle);
                            },onmouseout: function() {
                                v(this, q);
                            },onclick: function() {
                                x();
                                a.onclick.apply(e, arguments);
                            },innerHTML: a.text || e.options.lang[a.textKey]}, p({cursor: "pointer"}, q), w);
                        e.exportDivElements.push(b);
                    }
                }), e.exportDivElements.push(w, i), e.exportMenuWidth = i.offsetWidth, e.exportMenuHeight = i.offsetHeight;
            }
            a = {display: "block"};
            d + e.exportMenuWidth > m ? a.right = m - d - f - u + "px" : a.left = d - u + "px";
            c + h + e.exportMenuHeight > n && g.alignOptions.verticalAlign !== "top" ? a.bottom = n - c - u + "px" : a.top = c + h - u + "px";
            v(i, a);
            e.openMenu = !0;
        },addButton: function(b) {
            var a = this, d = a.renderer, c = k(a.options.navigation.buttonOptions, b), j = c.onclick, h = c.menuItems, g, e, l = {stroke: c.symbolStroke,fill: c.symbolFill}, q = c.symbolSize || 12;
            if (!a.btnCount) {
                a.btnCount = 0;
            }
            if (!a.exportDivElements) {
                a.exportDivElements = [], a.exportSVGElements = [];
            }
            if (c.enabled !== !1) {
                var m = c.theme, n = m.states, o = n && n.hover, n = n && n.select, i;
                delete m.states;
                j ? i = function() {
                    j.apply(a, arguments);
                } : h && (i = function() {
                    a.contextMenu(e.menuClassName, h, e.translateX, e.translateY, e.width, e.height, e);
                    e.setState(2);
                });
                c.text && c.symbol ? m.paddingLeft = f.pick(m.paddingLeft, 25) : c.text || p(m, {width: c.width,height: c.height,padding: 0});
                e = d.button(c.text, 0, 0, i, m, o, n).attr({title: a.options.lang[c._titleKey],"stroke-linecap": "round"});
                e.menuClassName = b.menuClassName || "highcharts-menu-" + a.btnCount++;
                c.symbol && (g = d.symbol(c.symbol, c.symbolX - q / 2, c.symbolY - q / 2, q, q).attr(p(l, {"stroke-width": c.symbolStrokeWidth || 1,zIndex: 1})).add(e));
                e.add().align(p(c, {width: e.width,x: f.pick(c.x, y)}), !0, "spacingBox");
                y += (e.width + c.buttonSpacing) * (c.align === "right" ? -1 : 1);
                a.exportSVGElements.push(e, g);
            }
        },destroyExport: function(b) {
            var b = b.target, a, d;
            for (a = 0; a < b.exportSVGElements.length; a++) {
                if (d = b.exportSVGElements[a]) {
                    d.onclick = d.ontouchstart = null, b.exportSVGElements[a] = d.destroy();
                }
            }
            for (a = 0; a < b.exportDivElements.length; a++) {
                d = b.exportDivElements[a], B(d, "mouseleave"), b.exportDivElements[a] = d.onmouseout = d.onmouseover = d.ontouchstart = d.onclick = null, o(d);
            }
        }});
    F.menu = function(b, a, d, c) {
        return ["M", b, a + 2.5, "L", b + d, a + 2.5, "M", b, a + c / 2 + 0.5, "L", b + d, a + c / 2 + 0.5, "M", b, a + c - 1.5, "L", b + d, a + c - 1.5];
    };
    A.prototype.callbacks.push(function(b) {
        var a, d = b.options.exporting, c = d.buttons;
        y = 0;
        if (d.enabled !== !1) {
            for (a in c) {
                b.addButton(c[a]);
            }
            t(b, "destroy", b.destroyExport);
        }
    });
})(Highcharts);
(function($) {
    var $scrollTo = $.scrollTo = function(target, duration, settings) {
        $(window).scrollTo(target, duration, settings);
    };
    $scrollTo.defaults = {axis: "xy",duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1,limit: true};
    $scrollTo.window = function(scope) {
        return $(window)._scrollable();
    };
    $.fn._scrollable = function() {
        return this.map(function() {
            var elem = this, isWin = !elem.nodeName || $.inArray(elem.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) != -1;
            if (!isWin) {
                return elem;
            }
            var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem;
            return /webkit/i.test(navigator.userAgent) || doc.compatMode == "BackCompat" ? doc.body : doc.documentElement;
        });
    };
    $.fn.scrollTo = function(target, duration, settings) {
        if (typeof duration == "object") {
            settings = duration;
            duration = 0;
        }
        if (typeof settings == "function") {
            settings = {onAfter: settings};
        }
        if (target == "max") {
            target = 9000000000;
        }
        settings = $.extend({}, $scrollTo.defaults, settings);
        duration = duration || settings.duration;
        settings.queue = settings.queue && settings.axis.length > 1;
        if (settings.queue) {
            duration /= 2;
        }
        settings.offset = both(settings.offset);
        settings.over = both(settings.over);
        return this._scrollable().each(function() {
            if (target == null) {
                return;
            }
            var elem = this, $elem = $(elem), targ = target, toff, attr = {}, win = $elem.is("html,body");
            switch (typeof targ) {
                case "number":
                case "string":
                    if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)) {
                        targ = both(targ);
                        break;
                    }
                    targ = $(targ, this);
                    if (!targ.length) {
                        return;
                    }
                case "object":
                    if (targ.is || targ.style) {
                        toff = (targ = $(targ)).offset();
                    }
            }
            $.each(settings.axis.split(""), function(i, axis) {
                var Pos = axis == "x" ? "Left" : "Top", pos = Pos.toLowerCase(), key = "scroll" + Pos, old = elem[key], max = $scrollTo.max(elem, axis);
                if (toff) {
                    attr[key] = toff[pos] + (win ? 0 : old - $elem.offset()[pos]);
                    if (settings.margin) {
                        attr[key] -= parseInt(targ.css("margin" + Pos)) || 0;
                        attr[key] -= parseInt(targ.css("border" + Pos + "Width")) || 0;
                    }
                    attr[key] += settings.offset[pos] || 0;
                    if (settings.over[pos]) {
                        attr[key] += targ[axis == "x" ? "width" : "height"]() * settings.over[pos];
                    }
                } else {
                    var val = targ[pos];
                    attr[key] = val.slice && val.slice(-1) == "%" ? parseFloat(val) / 100 * max : val;
                }
                if (settings.limit && /^\d+$/.test(attr[key])) {
                    attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max);
                }
                if (!i && settings.queue) {
                    if (old != attr[key]) {
                        animate(settings.onAfterFirst);
                    }
                    delete attr[key];
                }
            });
            animate(settings.onAfter);
            function animate(callback) {
                $elem.animate(attr, duration, settings.easing, callback && function() {
                    callback.call(this, target, settings);
                });
            }
        }).end();
    };
    $scrollTo.max = function(elem, axis) {
        var Dim = axis == "x" ? "Width" : "Height", scroll = "scroll" + Dim;
        if (!$(elem).is("html,body")) {
            return elem[scroll] - $(elem)[Dim.toLowerCase()]();
        }
        var size = "client" + Dim, html = elem.ownerDocument.documentElement, body = elem.ownerDocument.body;
        return Math.max(html[scroll], body[scroll]) - Math.min(html[size], body[size]);
    };
    function both(val) {
        return typeof val == "object" ? val : {top: val,left: val};
    }
})(jQuery);
!function(a) {
    var b = function(a, c, d) {
        var e, f, g = document.createElement("img");
        if (g.onerror = c, g.onload = function() {
            !f || d && d.noRevoke || b.revokeObjectURL(f), c && c(b.scale(g, d));
        }, b.isInstanceOf("Blob", a) || b.isInstanceOf("File", a)) {
            e = f = b.createObjectURL(a), g._type = a.type;
        } else {
            if ("string" != typeof a) {
                return !1;
            }
            e = a, d && d.crossOrigin && (g.crossOrigin = d.crossOrigin);
        }
        return e ? (g.src = e, g) : b.readFile(a, function(a) {
            var b = a.target;
            b && b.result ? g.src = b.result : c && c(a);
        });
    }, c = window.createObjectURL && window || window.URL && URL.revokeObjectURL && URL || window.webkitURL && webkitURL;
    b.isInstanceOf = function(a, b) {
        return Object.prototype.toString.call(b) === "[object " + a + "]";
    }, b.transformCoordinates = function() {
    }, b.getTransformedOptions = function(a) {
        return a;
    }, b.renderImageToCanvas = function(a, b, c, d, e, f, g, h, i, j) {
        return a.getContext("2d").drawImage(b, c, d, e, f, g, h, i, j), a;
    }, b.hasCanvasOption = function(a) {
        return a.canvas || a.crop;
    }, b.scale = function(a, c) {
        c = c || {};
        var d, e, f, g, h, i, j, k, l, m = document.createElement("canvas"), n = a.getContext || b.hasCanvasOption(c) && m.getContext, o = a.naturalWidth || a.width, p = a.naturalHeight || a.height, q = o, r = p, s = function() {
            var a = Math.max((f || q) / q, (g || r) / r);
            a > 1 && (q = Math.ceil(q * a), r = Math.ceil(r * a));
        }, t = function() {
            var a = Math.min((d || q) / q, (e || r) / r);
            1 > a && (q = Math.ceil(q * a), r = Math.ceil(r * a));
        };
        return n && (c = b.getTransformedOptions(c), j = c.left || 0, k = c.top || 0, c.sourceWidth ? (h = c.sourceWidth, void 0 !== c.right && void 0 === c.left && (j = o - h - c.right)) : h = o - j - (c.right || 0), c.sourceHeight ? (i = c.sourceHeight, void 0 !== c.bottom && void 0 === c.top && (k = p - i - c.bottom)) : i = p - k - (c.bottom || 0), q = h, r = i), d = c.maxWidth, e = c.maxHeight, f = c.minWidth, g = c.minHeight, n && d && e && c.crop ? (q = d, r = e, l = h / i - d / e, 0 > l ? (i = e * h / d, void 0 === c.top && void 0 === c.bottom && (k = (p - i) / 2)) : l > 0 && (h = d * i / e, void 0 === c.left && void 0 === c.right && (j = (o - h) / 2))) : ((c.contain || c.cover) && (f = d = d || f, g = e = e || g), c.cover ? (t(), s()) : (s(), t())), n ? (m.width = q, m.height = r, b.transformCoordinates(m, c), b.renderImageToCanvas(m, a, j, k, h, i, 0, 0, q, r)) : (a.width = q, a.height = r, a);
    }, b.createObjectURL = function(a) {
        return c ? c.createObjectURL(a) : !1;
    }, b.revokeObjectURL = function(a) {
        return c ? c.revokeObjectURL(a) : !1;
    }, b.readFile = function(a, b, c) {
        if (window.FileReader) {
            var d = new FileReader;
            if (d.onload = d.onerror = b, c = c || "readAsDataURL", d[c]) {
                return d[c](a), d;
            }
        }
        return !1;
    }, "function" == typeof define && define.amd ? define(function() {
        return b;
    }) : a.loadImage = b;
}(this), function(a) {
    "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage);
}(function(a) {
    if (window.navigator && window.navigator.platform && /iP(hone|od|ad)/.test(window.navigator.platform)) {
        var b = a.renderImageToCanvas;
        a.detectSubsampling = function(a) {
            var b, c;
            return a.width * a.height > 1048576 ? (b = document.createElement("canvas"), b.width = b.height = 1, c = b.getContext("2d"), c.drawImage(a, -a.width + 1, 0), 0 === c.getImageData(0, 0, 1, 1).data[3]) : !1;
        }, a.detectVerticalSquash = function(a, b) {
            var c, d, e, f, g, h = a.naturalHeight || a.height, i = document.createElement("canvas"), j = i.getContext("2d");
            for (b && (h /= 2), i.width = 1, i.height = h, j.drawImage(a, 0, 0), c = j.getImageData(0, 0, 1, h).data, d = 0, e = h, f = h; f > d; ) {
                g = c[4 * (f - 1) + 3], 0 === g ? e = f : d = f, f = e + d >> 1;
            }
            return f / h || 1;
        }, a.renderImageToCanvas = function(c, d, e, f, g, h, i, j, k, l) {
            if ("image/jpeg" === d._type) {
                var m, n, o, p, q = c.getContext("2d"), r = document.createElement("canvas"), s = 1024, t = r.getContext("2d");
                if (r.width = s, r.height = s, q.save(), m = a.detectSubsampling(d), m && (e /= 2, f /= 2, g /= 2, h /= 2), n = a.detectVerticalSquash(d, m), m || 1 !== n) {
                    for (f *= n, k = Math.ceil(s * k / g), l = Math.ceil(s * l / h / n), j = 0, p = 0; h > p; ) {
                        for (i = 0, o = 0; g > o; ) {
                            t.clearRect(0, 0, s, s), t.drawImage(d, e, f, g, h, -o, -p, g, h), q.drawImage(r, 0, 0, s, s, i, j, k, l), o += s, i += k;
                        }
                        p += s, j += l;
                    }
                    return q.restore(), c;
                }
            }
            return b(c, d, e, f, g, h, i, j, k, l);
        };
    }
}), function(a) {
    "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage);
}(function(a) {
    var b = a.hasCanvasOption;
    a.hasCanvasOption = function(a) {
        return b(a) || a.orientation;
    }, a.transformCoordinates = function(a, b) {
        var c = a.getContext("2d"), d = a.width, e = a.height, f = b.orientation;
        if (f) {
            switch (f > 4 && (a.width = e, a.height = d), f) {
                case 2:
                    c.translate(d, 0), c.scale(-1, 1);
                    break;
                case 3:
                    c.translate(d, e), c.rotate(Math.PI);
                    break;
                case 4:
                    c.translate(0, e), c.scale(1, -1);
                    break;
                case 5:
                    c.rotate(0.5 * Math.PI), c.scale(1, -1);
                    break;
                case 6:
                    c.rotate(0.5 * Math.PI), c.translate(0, -e);
                    break;
                case 7:
                    c.rotate(0.5 * Math.PI), c.translate(d, -e), c.scale(-1, 1);
                    break;
                case 8:
                    c.rotate(-0.5 * Math.PI), c.translate(-d, 0);
            }
        }
    }, a.getTransformedOptions = function(a) {
        if (!a.orientation || 1 === a.orientation) {
            return a;
        }
        var b, c = {};
        for (b in a) {
            a.hasOwnProperty(b) && (c[b] = a[b]);
        }
        switch (a.orientation) {
            case 2:
                c.left = a.right, c.right = a.left;
                break;
            case 3:
                c.left = a.right, c.top = a.bottom, c.right = a.left, c.bottom = a.top;
                break;
            case 4:
                c.top = a.bottom, c.bottom = a.top;
                break;
            case 5:
                c.left = a.top, c.top = a.left, c.right = a.bottom, c.bottom = a.right;
                break;
            case 6:
                c.left = a.top, c.top = a.right, c.right = a.bottom, c.bottom = a.left;
                break;
            case 7:
                c.left = a.bottom, c.top = a.right, c.right = a.top, c.bottom = a.left;
                break;
            case 8:
                c.left = a.bottom, c.top = a.left, c.right = a.top, c.bottom = a.right;
        }
        return a.orientation > 4 && (c.maxWidth = a.maxHeight, c.maxHeight = a.maxWidth, c.minWidth = a.minHeight, c.minHeight = a.minWidth, c.sourceWidth = a.sourceHeight, c.sourceHeight = a.sourceWidth), c;
    };
}), function(a) {
    "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage);
}(function(a) {
    var b = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
    a.blobSlice = b && function() {
        var a = this.slice || this.webkitSlice || this.mozSlice;
        return a.apply(this, arguments);
    }, a.metaDataParsers = {jpeg: {65505: []}}, a.parseMetaData = function(b, c, d) {
        d = d || {};
        var e = this, f = d.maxMetaDataSize || 262144, g = {}, h = !(window.DataView && b && b.size >= 12 && "image/jpeg" === b.type && a.blobSlice);
        (h || !a.readFile(a.blobSlice.call(b, 0, f), function(b) {
            if (b.target.error) {
                return console.log(b.target.error), c(g), void 0;
            }
            var f, h, i, j, k = b.target.result, l = new DataView(k), m = 2, n = l.byteLength - 4, o = m;
            if (65496 === l.getUint16(0)) {
                for (; n > m && (f = l.getUint16(m), f >= 65504 && 65519 >= f || 65534 === f); ) {
                    if (h = l.getUint16(m + 2) + 2, m + h > l.byteLength) {
                        console.log("Invalid meta data: Invalid segment size.");
                        break;
                    }
                    if (i = a.metaDataParsers.jpeg[f]) {
                        for (j = 0; j < i.length; j += 1) {
                            i[j].call(e, l, m, h, g, d);
                        }
                    }
                    m += h, o = m;
                }
                !d.disableImageHead && o > 6 && (g.imageHead = k.slice ? k.slice(0, o) : new Uint8Array(k).subarray(0, o));
            } else {
                console.log("Invalid JPEG file: Missing JPEG marker.");
            }
            c(g);
        }, "readAsArrayBuffer")) && c(g);
    };
}), function(a) {
    "function" == typeof define && define.amd ? define(["load-image", "load-image-meta"], a) : a(window.loadImage);
}(function(a) {
    a.ExifMap = function() {
        return this;
    }, a.ExifMap.prototype.map = {Orientation: 274}, a.ExifMap.prototype.get = function(a) {
        return this[a] || this[this.map[a]];
    }, a.getExifThumbnail = function(a, b, c) {
        var d, e, f;
        if (!c || b + c > a.byteLength) {
            return console.log("Invalid Exif data: Invalid thumbnail data."), void 0;
        }
        for (d = [], e = 0; c > e; e += 1) {
            f = a.getUint8(b + e), d.push((16 > f ? "0" : "") + f.toString(16));
        }
        return "data:image/jpeg,%" + d.join("%");
    }, a.exifTagTypes = {1: {getValue: function(a, b) {
                return a.getUint8(b);
            },size: 1},2: {getValue: function(a, b) {
                return String.fromCharCode(a.getUint8(b));
            },size: 1,ascii: !0},3: {getValue: function(a, b, c) {
                return a.getUint16(b, c);
            },size: 2},4: {getValue: function(a, b, c) {
                return a.getUint32(b, c);
            },size: 4},5: {getValue: function(a, b, c) {
                return a.getUint32(b, c) / a.getUint32(b + 4, c);
            },size: 8},9: {getValue: function(a, b, c) {
                return a.getInt32(b, c);
            },size: 4},10: {getValue: function(a, b, c) {
                return a.getInt32(b, c) / a.getInt32(b + 4, c);
            },size: 8}}, a.exifTagTypes[7] = a.exifTagTypes[1], a.getExifValue = function(b, c, d, e, f, g) {
        var h, i, j, k, l, m, n = a.exifTagTypes[e];
        if (!n) {
            return console.log("Invalid Exif data: Invalid tag type."), void 0;
        }
        if (h = n.size * f, i = h > 4 ? c + b.getUint32(d + 8, g) : d + 8, i + h > b.byteLength) {
            return console.log("Invalid Exif data: Invalid data offset."), void 0;
        }
        if (1 === f) {
            return n.getValue(b, i, g);
        }
        for (j = [], k = 0; f > k; k += 1) {
            j[k] = n.getValue(b, i + k * n.size, g);
        }
        if (n.ascii) {
            for (l = "", k = 0; k < j.length && (m = j[k], "\x00" !== m); k += 1) {
                l += m;
            }
            return l;
        }
        return j;
    }, a.parseExifTag = function(b, c, d, e, f) {
        var g = b.getUint16(d, e);
        f.exif[g] = a.getExifValue(b, c, d, b.getUint16(d + 2, e), b.getUint32(d + 4, e), e);
    }, a.parseExifTags = function(a, b, c, d, e) {
        var f, g, h;
        if (c + 6 > a.byteLength) {
            return console.log("Invalid Exif data: Invalid directory offset."), void 0;
        }
        if (f = a.getUint16(c, d), g = c + 2 + 12 * f, g + 4 > a.byteLength) {
            return console.log("Invalid Exif data: Invalid directory size."), void 0;
        }
        for (h = 0; f > h; h += 1) {
            this.parseExifTag(a, b, c + 2 + 12 * h, d, e);
        }
        return a.getUint32(g, d);
    }, a.parseExifData = function(b, c, d, e, f) {
        if (!f.disableExif) {
            var g, h, i, j = c + 10;
            if (1165519206 === b.getUint32(c + 4)) {
                if (j + 8 > b.byteLength) {
                    return console.log("Invalid Exif data: Invalid segment size."), void 0;
                }
                if (0 !== b.getUint16(c + 8)) {
                    return console.log("Invalid Exif data: Missing byte alignment offset."), void 0;
                }
                switch (b.getUint16(j)) {
                    case 18761:
                        g = !0;
                        break;
                    case 19789:
                        g = !1;
                        break;
                    default:
                        return console.log("Invalid Exif data: Invalid byte alignment marker."), void 0;
                }
                if (42 !== b.getUint16(j + 2, g)) {
                    return console.log("Invalid Exif data: Missing TIFF marker."), void 0;
                }
                h = b.getUint32(j + 4, g), e.exif = new a.ExifMap, h = a.parseExifTags(b, j, j + h, g, e), h && !f.disableExifThumbnail && (i = {exif: {}}, h = a.parseExifTags(b, j, j + h, g, i), i.exif[513] && (e.exif.Thumbnail = a.getExifThumbnail(b, j + i.exif[513], i.exif[514]))), e.exif[34665] && !f.disableExifSub && a.parseExifTags(b, j, j + e.exif[34665], g, e), e.exif[34853] && !f.disableExifGps && a.parseExifTags(b, j, j + e.exif[34853], g, e);
            }
        }
    }, a.metaDataParsers.jpeg[65505].push(a.parseExifData);
}), function(a) {
    "function" == typeof define && define.amd ? define(["load-image", "load-image-exif"], a) : a(window.loadImage);
}(function(a) {
    a.ExifMap.prototype.tags = {256: "ImageWidth",257: "ImageHeight",34665: "ExifIFDPointer",34853: "GPSInfoIFDPointer",40965: "InteroperabilityIFDPointer",258: "BitsPerSample",259: "Compression",262: "PhotometricInterpretation",274: "Orientation",277: "SamplesPerPixel",284: "PlanarConfiguration",530: "YCbCrSubSampling",531: "YCbCrPositioning",282: "XResolution",283: "YResolution",296: "ResolutionUnit",273: "StripOffsets",278: "RowsPerStrip",279: "StripByteCounts",513: "JPEGInterchangeFormat",514: "JPEGInterchangeFormatLength",301: "TransferFunction",318: "WhitePoint",319: "PrimaryChromaticities",529: "YCbCrCoefficients",532: "ReferenceBlackWhite",306: "DateTime",270: "ImageDescription",271: "Make",272: "Model",305: "Software",315: "Artist",33432: "Copyright",36864: "ExifVersion",40960: "FlashpixVersion",40961: "ColorSpace",40962: "PixelXDimension",40963: "PixelYDimension",42240: "Gamma",37121: "ComponentsConfiguration",37122: "CompressedBitsPerPixel",37500: "MakerNote",37510: "UserComment",40964: "RelatedSoundFile",36867: "DateTimeOriginal",36868: "DateTimeDigitized",37520: "SubSecTime",37521: "SubSecTimeOriginal",37522: "SubSecTimeDigitized",33434: "ExposureTime",33437: "FNumber",34850: "ExposureProgram",34852: "SpectralSensitivity",34855: "PhotographicSensitivity",34856: "OECF",34864: "SensitivityType",34865: "StandardOutputSensitivity",34866: "RecommendedExposureIndex",34867: "ISOSpeed",34868: "ISOSpeedLatitudeyyy",34869: "ISOSpeedLatitudezzz",37377: "ShutterSpeedValue",37378: "ApertureValue",37379: "BrightnessValue",37380: "ExposureBias",37381: "MaxApertureValue",37382: "SubjectDistance",37383: "MeteringMode",37384: "LightSource",37385: "Flash",37396: "SubjectArea",37386: "FocalLength",41483: "FlashEnergy",41484: "SpatialFrequencyResponse",41486: "FocalPlaneXResolution",41487: "FocalPlaneYResolution",41488: "FocalPlaneResolutionUnit",41492: "SubjectLocation",41493: "ExposureIndex",41495: "SensingMethod",41728: "FileSource",41729: "SceneType",41730: "CFAPattern",41985: "CustomRendered",41986: "ExposureMode",41987: "WhiteBalance",41988: "DigitalZoomRatio",41989: "FocalLengthIn35mmFilm",41990: "SceneCaptureType",41991: "GainControl",41992: "Contrast",41993: "Saturation",41994: "Sharpness",41995: "DeviceSettingDescription",41996: "SubjectDistanceRange",42016: "ImageUniqueID",42032: "CameraOwnerName",42033: "BodySerialNumber",42034: "LensSpecification",42035: "LensMake",42036: "LensModel",42037: "LensSerialNumber",0: "GPSVersionID",1: "GPSLatitudeRef",2: "GPSLatitude",3: "GPSLongitudeRef",4: "GPSLongitude",5: "GPSAltitudeRef",6: "GPSAltitude",7: "GPSTimeStamp",8: "GPSSatellites",9: "GPSStatus",10: "GPSMeasureMode",11: "GPSDOP",12: "GPSSpeedRef",13: "GPSSpeed",14: "GPSTrackRef",15: "GPSTrack",16: "GPSImgDirectionRef",17: "GPSImgDirection",18: "GPSMapDatum",19: "GPSDestLatitudeRef",20: "GPSDestLatitude",21: "GPSDestLongitudeRef",22: "GPSDestLongitude",23: "GPSDestBearingRef",24: "GPSDestBearing",25: "GPSDestDistanceRef",26: "GPSDestDistance",27: "GPSProcessingMethod",28: "GPSAreaInformation",29: "GPSDateStamp",30: "GPSDifferential",31: "GPSHPositioningError"}, a.ExifMap.prototype.stringValues = {ExposureProgram: {0: "Undefined",1: "Manual",2: "Normal program",3: "Aperture priority",4: "Shutter priority",5: "Creative program",6: "Action program",7: "Portrait mode",8: "Landscape mode"},MeteringMode: {0: "Unknown",1: "Average",2: "CenterWeightedAverage",3: "Spot",4: "MultiSpot",5: "Pattern",6: "Partial",255: "Other"},LightSource: {0: "Unknown",1: "Daylight",2: "Fluorescent",3: "Tungsten (incandescent light)",4: "Flash",9: "Fine weather",10: "Cloudy weather",11: "Shade",12: "Daylight fluorescent (D 5700 - 7100K)",13: "Day white fluorescent (N 4600 - 5400K)",14: "Cool white fluorescent (W 3900 - 4500K)",15: "White fluorescent (WW 3200 - 3700K)",17: "Standard light A",18: "Standard light B",19: "Standard light C",20: "D55",21: "D65",22: "D75",23: "D50",24: "ISO studio tungsten",255: "Other"},Flash: {0: "Flash did not fire",1: "Flash fired",5: "Strobe return light not detected",7: "Strobe return light detected",9: "Flash fired, compulsory flash mode",13: "Flash fired, compulsory flash mode, return light not detected",15: "Flash fired, compulsory flash mode, return light detected",16: "Flash did not fire, compulsory flash mode",24: "Flash did not fire, auto mode",25: "Flash fired, auto mode",29: "Flash fired, auto mode, return light not detected",31: "Flash fired, auto mode, return light detected",32: "No flash function",65: "Flash fired, red-eye reduction mode",69: "Flash fired, red-eye reduction mode, return light not detected",71: "Flash fired, red-eye reduction mode, return light detected",73: "Flash fired, compulsory flash mode, red-eye reduction mode",77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89: "Flash fired, auto mode, red-eye reduction mode",93: "Flash fired, auto mode, return light not detected, red-eye reduction mode",95: "Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod: {1: "Undefined",2: "One-chip color area sensor",3: "Two-chip color area sensor",4: "Three-chip color area sensor",5: "Color sequential area sensor",7: "Trilinear sensor",8: "Color sequential linear sensor"},SceneCaptureType: {0: "Standard",1: "Landscape",2: "Portrait",3: "Night scene"},SceneType: {1: "Directly photographed"},CustomRendered: {0: "Normal process",1: "Custom process"},WhiteBalance: {0: "Auto white balance",1: "Manual white balance"},GainControl: {0: "None",1: "Low gain up",2: "High gain up",3: "Low gain down",4: "High gain down"},Contrast: {0: "Normal",1: "Soft",2: "Hard"},Saturation: {0: "Normal",1: "Low saturation",2: "High saturation"},Sharpness: {0: "Normal",1: "Soft",2: "Hard"},SubjectDistanceRange: {0: "Unknown",1: "Macro",2: "Close view",3: "Distant view"},FileSource: {3: "DSC"},ComponentsConfiguration: {0: "",1: "Y",2: "Cb",3: "Cr",4: "R",5: "G",6: "B"},Orientation: {1: "top-left",2: "top-right",3: "bottom-right",4: "bottom-left",5: "left-top",6: "right-top",7: "right-bottom",8: "left-bottom"}}, a.ExifMap.prototype.getText = function(a) {
        var b = this.get(a);
        switch (a) {
            case "LightSource":
            case "Flash":
            case "MeteringMode":
            case "ExposureProgram":
            case "SensingMethod":
            case "SceneCaptureType":
            case "SceneType":
            case "CustomRendered":
            case "WhiteBalance":
            case "GainControl":
            case "Contrast":
            case "Saturation":
            case "Sharpness":
            case "SubjectDistanceRange":
            case "FileSource":
            case "Orientation":
                return this.stringValues[a][b];
            case "ExifVersion":
            case "FlashpixVersion":
                return String.fromCharCode(b[0], b[1], b[2], b[3]);
            case "ComponentsConfiguration":
                return this.stringValues[a][b[0]] + this.stringValues[a][b[1]] + this.stringValues[a][b[2]] + this.stringValues[a][b[3]];
            case "GPSVersionID":
                return b[0] + "." + b[1] + "." + b[2] + "." + b[3];
        }
        return String(b);
    }, function(a) {
        var b, c = a.tags, d = a.map;
        for (b in c) {
            c.hasOwnProperty(b) && (d[c[b]] = b);
        }
    }(a.ExifMap.prototype), a.ExifMap.prototype.getAll = function() {
        var a, b, c = {};
        for (a in this) {
            this.hasOwnProperty(a) && (b = this.tags[a], b && (c[b] = this.getText(b)));
        }
        return c;
    };
});
!function(a) {
    var b = a.HTMLCanvasElement && a.HTMLCanvasElement.prototype, c = a.Blob && function() {
        try {
            return Boolean(new Blob);
        } catch (a) {
            return !1;
        }
    }(), d = c && a.Uint8Array && function() {
        try {
            return 100 === new Blob([new Uint8Array(100)]).size;
        } catch (a) {
            return !1;
        }
    }(), e = a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || a.MSBlobBuilder, f = (c || e) && a.atob && a.ArrayBuffer && a.Uint8Array && function(a) {
        var b, f, g, h, i, j;
        for (b = a.split(",")[0].indexOf("base64") >= 0 ? atob(a.split(",")[1]) : decodeURIComponent(a.split(",")[1]), f = new ArrayBuffer(b.length), g = new Uint8Array(f), h = 0; h < b.length; h += 1) {
            g[h] = b.charCodeAt(h);
        }
        return i = a.split(",")[0].split(":")[1].split(";")[0], c ? new Blob([d ? g : f], {type: i}) : (j = new e, j.append(f), j.getBlob(i));
    };
    a.HTMLCanvasElement && !b.toBlob && (b.mozGetAsFile ? b.toBlob = function(a, c, d) {
        d && b.toDataURL && f ? a(f(this.toDataURL(c, d))) : a(this.mozGetAsFile("blob", c));
    } : b.toDataURL && f && (b.toBlob = function(a, b, c) {
        a(f(this.toDataURL(b, c)));
    })), "function" == typeof define && define.amd ? define(function() {
        return f;
    }) : a.dataURLtoBlob = f;
}(this);
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], factory);
    } else {
        factory(window.jQuery);
    }
}(function($) {
    var counter = 0;
    $.ajaxTransport("iframe", function(options) {
        if (options.async) {
            var initialIframeSrc = options.initialIframeSrc || "javascript:false;", form, iframe, addParamChar;
            return {send: function(_, completeCallback) {
                    form = $('<form style="display:none;"></form>');
                    form.attr("accept-charset", options.formAcceptCharset);
                    addParamChar = /\?/.test(options.url) ? "&" : "?";
                    if (options.type === "DELETE") {
                        options.url = options.url + addParamChar + "_method=DELETE";
                        options.type = "POST";
                    } else {
                        if (options.type === "PUT") {
                            options.url = options.url + addParamChar + "_method=PUT";
                            options.type = "POST";
                        } else {
                            if (options.type === "PATCH") {
                                options.url = options.url + addParamChar + "_method=PATCH";
                                options.type = "POST";
                            }
                        }
                    }
                    counter += 1;
                    iframe = $('<iframe src="' + initialIframeSrc + '" name="iframe-transport-' + counter + '"></iframe>').bind("load", function() {
                        var fileInputClones, paramNames = $.isArray(options.paramName) ? options.paramName : [options.paramName];
                        iframe.unbind("load").bind("load", function() {
                            var response;
                            try {
                                response = iframe.contents();
                                if (!response.length || !response[0].firstChild) {
                                    throw new Error();
                                }
                            } catch (e) {
                                response = undefined;
                            }
                            completeCallback(200, "success", {iframe: response});
                            $('<iframe src="' + initialIframeSrc + '"></iframe>').appendTo(form);
                            window.setTimeout(function() {
                                form.remove();
                            }, 0);
                        });
                        form.prop("target", iframe.prop("name")).prop("action", options.url).prop("method", options.type);
                        if (options.formData) {
                            $.each(options.formData, function(index, field) {
                                $('<input type="hidden"/>').prop("name", field.name).val(field.value).appendTo(form);
                            });
                        }
                        if (options.fileInput && options.fileInput.length && options.type === "POST") {
                            fileInputClones = options.fileInput.clone();
                            options.fileInput.after(function(index) {
                                return fileInputClones[index];
                            });
                            if (options.paramName) {
                                options.fileInput.each(function(index) {
                                    $(this).prop("name", paramNames[index] || options.paramName);
                                });
                            }
                            form.append(options.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data");
                            options.fileInput.removeAttr("form");
                        }
                        form.submit();
                        if (fileInputClones && fileInputClones.length) {
                            options.fileInput.each(function(index, input) {
                                var clone = $(fileInputClones[index]);
                                $(input).prop("name", clone.prop("name")).attr("form", clone.attr("form"));
                                clone.replaceWith(input);
                            });
                        }
                    });
                    form.append(iframe).appendTo(document.body);
                },abort: function() {
                    if (iframe) {
                        iframe.unbind("load").prop("src", initialIframeSrc);
                    }
                    if (form) {
                        form.remove();
                    }
                }};
        }
    });
    $.ajaxSetup({converters: {"iframe text": function(iframe) {
                return iframe && $(iframe[0].body).text();
            },"iframe json": function(iframe) {
                return iframe && $.parseJSON($(iframe[0].body).text());
            },"iframe html": function(iframe) {
                return iframe && $(iframe[0].body).html();
            },"iframe xml": function(iframe) {
                var xmlDoc = iframe && iframe[0];
                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc : $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) || $(xmlDoc.body).html());
            },"iframe script": function(iframe) {
                return iframe && $.globalEval($(iframe[0].body).text());
            }}});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "jquery.ui.widget"], factory);
    } else {
        factory(window.jQuery);
    }
}(function($) {
    $.support.fileInput = !(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent) || $('<input type="file">').prop("disabled"));
    $.support.xhrFileUpload = !!(window.ProgressEvent && window.FileReader);
    $.support.xhrFormDataFileUpload = !!window.FormData;
    $.support.blobSlice = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
    $.widget("blueimp.fileupload", {options: {dropZone: $(document),pasteZone: $(document),fileInput: undefined,replaceFileInput: true,paramName: undefined,singleFileUploads: true,limitMultiFileUploads: undefined,limitMultiFileUploadSize: undefined,limitMultiFileUploadSizeOverhead: 512,sequentialUploads: false,limitConcurrentUploads: undefined,forceIframeTransport: false,redirect: undefined,redirectParamName: undefined,postMessage: undefined,multipart: true,maxChunkSize: undefined,uploadedBytes: undefined,recalculateProgress: true,progressInterval: 100,bitrateInterval: 500,autoUpload: true,messages: {uploadedBytes: "Uploaded bytes exceed file size"},i18n: function(message, context) {
                message = this.messages[message] || message.toString();
                if (context) {
                    $.each(context, function(key, value) {
                        message = message.replace("{" + key + "}", value);
                    });
                }
                return message;
            },formData: function(form) {
                return form.serializeArray();
            },add: function(e, data) {
                if (e.isDefaultPrevented()) {
                    return false;
                }
                if (data.autoUpload || (data.autoUpload !== false && $(this).fileupload("option", "autoUpload"))) {
                    data.process().done(function() {
                        data.submit();
                    });
                }
            },processData: false,contentType: false,cache: false},_specialOptions: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"],_blobSlice: $.support.blobSlice && function() {
            var slice = this.slice || this.webkitSlice || this.mozSlice;
            return slice.apply(this, arguments);
        },_BitrateTimer: function() {
            this.timestamp = ((Date.now) ? Date.now() : (new Date()).getTime());
            this.loaded = 0;
            this.bitrate = 0;
            this.getBitrate = function(now, loaded, interval) {
                var timeDiff = now - this.timestamp;
                if (!this.bitrate || !interval || timeDiff > interval) {
                    this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;
                    this.loaded = loaded;
                    this.timestamp = now;
                }
                return this.bitrate;
            };
        },_isXHRUpload: function(options) {
            return !options.forceIframeTransport && ((!options.multipart && $.support.xhrFileUpload) || $.support.xhrFormDataFileUpload);
        },_getFormData: function(options) {
            var formData;
            if ($.type(options.formData) === "function") {
                return options.formData(options.form);
            }
            if ($.isArray(options.formData)) {
                return options.formData;
            }
            if ($.type(options.formData) === "object") {
                formData = [];
                $.each(options.formData, function(name, value) {
                    formData.push({name: name,value: value});
                });
                return formData;
            }
            return [];
        },_getTotal: function(files) {
            var total = 0;
            $.each(files, function(index, file) {
                total += file.size || 1;
            });
            return total;
        },_initProgressObject: function(obj) {
            var progress = {loaded: 0,total: 0,bitrate: 0};
            if (obj._progress) {
                $.extend(obj._progress, progress);
            } else {
                obj._progress = progress;
            }
        },_initResponseObject: function(obj) {
            var prop;
            if (obj._response) {
                for (prop in obj._response) {
                    if (obj._response.hasOwnProperty(prop)) {
                        delete obj._response[prop];
                    }
                }
            } else {
                obj._response = {};
            }
        },_onProgress: function(e, data) {
            if (e.lengthComputable) {
                var now = ((Date.now) ? Date.now() : (new Date()).getTime()), loaded;
                if (data._time && data.progressInterval && (now - data._time < data.progressInterval) && e.loaded !== e.total) {
                    return;
                }
                data._time = now;
                loaded = Math.floor(e.loaded / e.total * (data.chunkSize || data._progress.total)) + (data.uploadedBytes || 0);
                this._progress.loaded += (loaded - data._progress.loaded);
                this._progress.bitrate = this._bitrateTimer.getBitrate(now, this._progress.loaded, data.bitrateInterval);
                data._progress.loaded = data.loaded = loaded;
                data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(now, loaded, data.bitrateInterval);
                this._trigger("progress", $.Event("progress", {delegatedEvent: e}), data);
                this._trigger("progressall", $.Event("progressall", {delegatedEvent: e}), this._progress);
            }
        },_initProgressListener: function(options) {
            var that = this, xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();
            if (xhr.upload) {
                $(xhr.upload).bind("progress", function(e) {
                    var oe = e.originalEvent;
                    e.lengthComputable = oe.lengthComputable;
                    e.loaded = oe.loaded;
                    e.total = oe.total;
                    that._onProgress(e, options);
                });
                options.xhr = function() {
                    return xhr;
                };
            }
        },_isInstanceOf: function(type, obj) {
            return Object.prototype.toString.call(obj) === "[object " + type + "]";
        },_initXHRData: function(options) {
            var that = this, formData, file = options.files[0], multipart = options.multipart || !$.support.xhrFileUpload, paramName = $.type(options.paramName) === "array" ? options.paramName[0] : options.paramName;
            options.headers = $.extend({}, options.headers);
            if (options.contentRange) {
                options.headers["Content-Range"] = options.contentRange;
            }
            if (!multipart || options.blob || !this._isInstanceOf("File", file)) {
                options.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(file.name) + '"';
            }
            if (!multipart) {
                options.contentType = file.type || "application/octet-stream";
                options.data = options.blob || file;
            } else {
                if ($.support.xhrFormDataFileUpload) {
                    if (options.postMessage) {
                        formData = this._getFormData(options);
                        if (options.blob) {
                            formData.push({name: paramName,value: options.blob});
                        } else {
                            $.each(options.files, function(index, file) {
                                formData.push({name: ($.type(options.paramName) === "array" && options.paramName[index]) || paramName,value: file});
                            });
                        }
                    } else {
                        if (that._isInstanceOf("FormData", options.formData)) {
                            formData = options.formData;
                        } else {
                            formData = new FormData();
                            $.each(this._getFormData(options), function(index, field) {
                                formData.append(field.name, field.value);
                            });
                        }
                        if (options.blob) {
                            formData.append(paramName, options.blob, file.name);
                        } else {
                            $.each(options.files, function(index, file) {
                                if (that._isInstanceOf("File", file) || that._isInstanceOf("Blob", file)) {
                                    formData.append(($.type(options.paramName) === "array" && options.paramName[index]) || paramName, file, file.uploadName || file.name);
                                }
                            });
                        }
                    }
                    options.data = formData;
                }
            }
            options.blob = null;
        },_initIframeSettings: function(options) {
            var targetHost = $("<a></a>").prop("href", options.url).prop("host");
            options.dataType = "iframe " + (options.dataType || "");
            options.formData = this._getFormData(options);
            if (options.redirect && targetHost && targetHost !== location.host) {
                options.formData.push({name: options.redirectParamName || "redirect",value: options.redirect});
            }
        },_initDataSettings: function(options) {
            if (this._isXHRUpload(options)) {
                if (!this._chunkedUpload(options, true)) {
                    if (!options.data) {
                        this._initXHRData(options);
                    }
                    this._initProgressListener(options);
                }
                if (options.postMessage) {
                    options.dataType = "postmessage " + (options.dataType || "");
                }
            } else {
                this._initIframeSettings(options);
            }
        },_getParamName: function(options) {
            var fileInput = $(options.fileInput), paramName = options.paramName;
            if (!paramName) {
                paramName = [];
                fileInput.each(function() {
                    var input = $(this), name = input.prop("name") || "files[]", i = (input.prop("files") || [1]).length;
                    while (i) {
                        paramName.push(name);
                        i -= 1;
                    }
                });
                if (!paramName.length) {
                    paramName = [fileInput.prop("name") || "files[]"];
                }
            } else {
                if (!$.isArray(paramName)) {
                    paramName = [paramName];
                }
            }
            return paramName;
        },_initFormSettings: function(options) {
            if (!options.form || !options.form.length) {
                options.form = $(options.fileInput.prop("form"));
                if (!options.form.length) {
                    options.form = $(this.options.fileInput.prop("form"));
                }
            }
            options.paramName = this._getParamName(options);
            if (!options.url) {
                options.url = options.form.prop("action") || location.href;
            }
            options.type = (options.type || ($.type(options.form.prop("method")) === "string" && options.form.prop("method")) || "").toUpperCase();
            if (options.type !== "POST" && options.type !== "PUT" && options.type !== "PATCH") {
                options.type = "POST";
            }
            if (!options.formAcceptCharset) {
                options.formAcceptCharset = options.form.attr("accept-charset");
            }
        },_getAJAXSettings: function(data) {
            var options = $.extend({}, this.options, data);
            this._initFormSettings(options);
            this._initDataSettings(options);
            return options;
        },_getDeferredState: function(deferred) {
            if (deferred.state) {
                return deferred.state();
            }
            if (deferred.isResolved()) {
                return "resolved";
            }
            if (deferred.isRejected()) {
                return "rejected";
            }
            return "pending";
        },_enhancePromise: function(promise) {
            promise.success = promise.done;
            promise.error = promise.fail;
            promise.complete = promise.always;
            return promise;
        },_getXHRPromise: function(resolveOrReject, context, args) {
            var dfd = $.Deferred(), promise = dfd.promise();
            context = context || this.options.context || promise;
            if (resolveOrReject === true) {
                dfd.resolveWith(context, args);
            } else {
                if (resolveOrReject === false) {
                    dfd.rejectWith(context, args);
                }
            }
            promise.abort = dfd.promise;
            return this._enhancePromise(promise);
        },_addConvenienceMethods: function(e, data) {
            var that = this, getPromise = function(args) {
                return $.Deferred().resolveWith(that, args).promise();
            };
            data.process = function(resolveFunc, rejectFunc) {
                if (resolveFunc || rejectFunc) {
                    data._processQueue = this._processQueue = (this._processQueue || getPromise([this])).pipe(function() {
                        if (data.errorThrown) {
                            return $.Deferred().rejectWith(that, [data]).promise();
                        }
                        return getPromise(arguments);
                    }).pipe(resolveFunc, rejectFunc);
                }
                return this._processQueue || getPromise([this]);
            };
            data.submit = function() {
                if (this.state() !== "pending") {
                    data.jqXHR = this.jqXHR = (that._trigger("submit", $.Event("submit", {delegatedEvent: e}), this) !== false) && that._onSend(e, this);
                }
                return this.jqXHR || that._getXHRPromise();
            };
            data.abort = function() {
                if (this.jqXHR) {
                    return this.jqXHR.abort();
                }
                this.errorThrown = "abort";
                that._trigger("fail", null, this);
                return that._getXHRPromise(false);
            };
            data.state = function() {
                if (this.jqXHR) {
                    return that._getDeferredState(this.jqXHR);
                }
                if (this._processQueue) {
                    return that._getDeferredState(this._processQueue);
                }
            };
            data.processing = function() {
                return !this.jqXHR && this._processQueue && that._getDeferredState(this._processQueue) === "pending";
            };
            data.progress = function() {
                return this._progress;
            };
            data.response = function() {
                return this._response;
            };
        },_getUploadedBytes: function(jqXHR) {
            var range = jqXHR.getResponseHeader("Range"), parts = range && range.split("-"), upperBytesPos = parts && parts.length > 1 && parseInt(parts[1], 10);
            return upperBytesPos && upperBytesPos + 1;
        },_chunkedUpload: function(options, testOnly) {
            options.uploadedBytes = options.uploadedBytes || 0;
            var that = this, file = options.files[0], fs = file.size, ub = options.uploadedBytes, mcs = options.maxChunkSize || fs, slice = this._blobSlice, dfd = $.Deferred(), promise = dfd.promise(), jqXHR, upload;
            if (!(this._isXHRUpload(options) && slice && (ub || mcs < fs)) || options.data) {
                return false;
            }
            if (testOnly) {
                return true;
            }
            if (ub >= fs) {
                file.error = options.i18n("uploadedBytes");
                return this._getXHRPromise(false, options.context, [null, "error", file.error]);
            }
            upload = function() {
                var o = $.extend({}, options), currentLoaded = o._progress.loaded;
                o.blob = slice.call(file, ub, ub + mcs, file.type);
                o.chunkSize = o.blob.size;
                o.contentRange = "bytes " + ub + "-" + (ub + o.chunkSize - 1) + "/" + fs;
                that._initXHRData(o);
                that._initProgressListener(o);
                jqXHR = ((that._trigger("chunksend", null, o) !== false && $.ajax(o)) || that._getXHRPromise(false, o.context)).done(function(result, textStatus, jqXHR) {
                    ub = that._getUploadedBytes(jqXHR) || (ub + o.chunkSize);
                    if (currentLoaded + o.chunkSize - o._progress.loaded) {
                        that._onProgress($.Event("progress", {lengthComputable: true,loaded: ub - o.uploadedBytes,total: ub - o.uploadedBytes}), o);
                    }
                    options.uploadedBytes = o.uploadedBytes = ub;
                    o.result = result;
                    o.textStatus = textStatus;
                    o.jqXHR = jqXHR;
                    that._trigger("chunkdone", null, o);
                    that._trigger("chunkalways", null, o);
                    if (ub < fs) {
                        upload();
                    } else {
                        dfd.resolveWith(o.context, [result, textStatus, jqXHR]);
                    }
                }).fail(function(jqXHR, textStatus, errorThrown) {
                    o.jqXHR = jqXHR;
                    o.textStatus = textStatus;
                    o.errorThrown = errorThrown;
                    that._trigger("chunkfail", null, o);
                    that._trigger("chunkalways", null, o);
                    dfd.rejectWith(o.context, [jqXHR, textStatus, errorThrown]);
                });
            };
            this._enhancePromise(promise);
            promise.abort = function() {
                return jqXHR.abort();
            };
            upload();
            return promise;
        },_beforeSend: function(e, data) {
            if (this._active === 0) {
                this._trigger("start");
                this._bitrateTimer = new this._BitrateTimer();
                this._progress.loaded = this._progress.total = 0;
                this._progress.bitrate = 0;
            }
            this._initResponseObject(data);
            this._initProgressObject(data);
            data._progress.loaded = data.loaded = data.uploadedBytes || 0;
            data._progress.total = data.total = this._getTotal(data.files) || 1;
            data._progress.bitrate = data.bitrate = 0;
            this._active += 1;
            this._progress.loaded += data.loaded;
            this._progress.total += data.total;
        },_onDone: function(result, textStatus, jqXHR, options) {
            var total = options._progress.total, response = options._response;
            if (options._progress.loaded < total) {
                this._onProgress($.Event("progress", {lengthComputable: true,loaded: total,total: total}), options);
            }
            response.result = options.result = result;
            response.textStatus = options.textStatus = textStatus;
            response.jqXHR = options.jqXHR = jqXHR;
            this._trigger("done", null, options);
        },_onFail: function(jqXHR, textStatus, errorThrown, options) {
            var response = options._response;
            if (options.recalculateProgress) {
                this._progress.loaded -= options._progress.loaded;
                this._progress.total -= options._progress.total;
            }
            response.jqXHR = options.jqXHR = jqXHR;
            response.textStatus = options.textStatus = textStatus;
            response.errorThrown = options.errorThrown = errorThrown;
            this._trigger("fail", null, options);
        },_onAlways: function(jqXHRorResult, textStatus, jqXHRorError, options) {
            this._trigger("always", null, options);
        },_onSend: function(e, data) {
            if (!data.submit) {
                this._addConvenienceMethods(e, data);
            }
            var that = this, jqXHR, aborted, slot, pipe, options = that._getAJAXSettings(data), send = function() {
                that._sending += 1;
                options._bitrateTimer = new that._BitrateTimer();
                jqXHR = jqXHR || (((aborted || that._trigger("send", $.Event("send", {delegatedEvent: e}), options) === false) && that._getXHRPromise(false, options.context, aborted)) || that._chunkedUpload(options) || $.ajax(options)).done(function(result, textStatus, jqXHR) {
                    that._onDone(result, textStatus, jqXHR, options);
                }).fail(function(jqXHR, textStatus, errorThrown) {
                    that._onFail(jqXHR, textStatus, errorThrown, options);
                }).always(function(jqXHRorResult, textStatus, jqXHRorError) {
                    that._onAlways(jqXHRorResult, textStatus, jqXHRorError, options);
                    that._sending -= 1;
                    that._active -= 1;
                    if (options.limitConcurrentUploads && options.limitConcurrentUploads > that._sending) {
                        var nextSlot = that._slots.shift();
                        while (nextSlot) {
                            if (that._getDeferredState(nextSlot) === "pending") {
                                nextSlot.resolve();
                                break;
                            }
                            nextSlot = that._slots.shift();
                        }
                    }
                    if (that._active === 0) {
                        that._trigger("stop");
                    }
                });
                return jqXHR;
            };
            this._beforeSend(e, options);
            if (this.options.sequentialUploads || (this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending)) {
                if (this.options.limitConcurrentUploads > 1) {
                    slot = $.Deferred();
                    this._slots.push(slot);
                    pipe = slot.pipe(send);
                } else {
                    this._sequence = this._sequence.pipe(send, send);
                    pipe = this._sequence;
                }
                pipe.abort = function() {
                    aborted = [undefined, "abort", "abort"];
                    if (!jqXHR) {
                        if (slot) {
                            slot.rejectWith(options.context, aborted);
                        }
                        return send();
                    }
                    return jqXHR.abort();
                };
                return this._enhancePromise(pipe);
            }
            return send();
        },_onAdd: function(e, data) {
            var that = this, result = true, options = $.extend({}, this.options, data), files = data.files, filesLength = files.length, limit = options.limitMultiFileUploads, limitSize = options.limitMultiFileUploadSize, overhead = options.limitMultiFileUploadSizeOverhead, batchSize = 0, paramName = this._getParamName(options), paramNameSet, paramNameSlice, fileSet, i, j = 0;
            if (limitSize && (!filesLength || files[0].size === undefined)) {
                limitSize = undefined;
            }
            if (!(options.singleFileUploads || limit || limitSize) || !this._isXHRUpload(options)) {
                fileSet = [files];
                paramNameSet = [paramName];
            } else {
                if (!(options.singleFileUploads || limitSize) && limit) {
                    fileSet = [];
                    paramNameSet = [];
                    for (i = 0; i < filesLength; i += limit) {
                        fileSet.push(files.slice(i, i + limit));
                        paramNameSlice = paramName.slice(i, i + limit);
                        if (!paramNameSlice.length) {
                            paramNameSlice = paramName;
                        }
                        paramNameSet.push(paramNameSlice);
                    }
                } else {
                    if (!options.singleFileUploads && limitSize) {
                        fileSet = [];
                        paramNameSet = [];
                        for (i = 0; i < filesLength; i = i + 1) {
                            batchSize += files[i].size + overhead;
                            if (i + 1 === filesLength || ((batchSize + files[i + 1].size + overhead) > limitSize) || (limit && i + 1 - j >= limit)) {
                                fileSet.push(files.slice(j, i + 1));
                                paramNameSlice = paramName.slice(j, i + 1);
                                if (!paramNameSlice.length) {
                                    paramNameSlice = paramName;
                                }
                                paramNameSet.push(paramNameSlice);
                                j = i + 1;
                                batchSize = 0;
                            }
                        }
                    } else {
                        paramNameSet = paramName;
                    }
                }
            }
            data.originalFiles = files;
            $.each(fileSet || files, function(index, element) {
                var newData = $.extend({}, data);
                newData.files = fileSet ? element : [element];
                newData.paramName = paramNameSet[index];
                that._initResponseObject(newData);
                that._initProgressObject(newData);
                that._addConvenienceMethods(e, newData);
                result = that._trigger("add", $.Event("add", {delegatedEvent: e}), newData);
                return result;
            });
            return result;
        },_replaceFileInput: function(input) {
            var inputClone = input.clone(true);
            $("<form></form>").append(inputClone)[0].reset();
            input.after(inputClone).detach();
            $.cleanData(input.unbind("remove"));
            this.options.fileInput = this.options.fileInput.map(function(i, el) {
                if (el === input[0]) {
                    return inputClone[0];
                }
                return el;
            });
            if (input[0] === this.element[0]) {
                this.element = inputClone;
            }
        },_handleFileTreeEntry: function(entry, path) {
            var that = this, dfd = $.Deferred(), errorHandler = function(e) {
                if (e && !e.entry) {
                    e.entry = entry;
                }
                dfd.resolve([e]);
            }, dirReader;
            path = path || "";
            if (entry.isFile) {
                if (entry._file) {
                    entry._file.relativePath = path;
                    dfd.resolve(entry._file);
                } else {
                    entry.file(function(file) {
                        file.relativePath = path;
                        dfd.resolve(file);
                    }, errorHandler);
                }
            } else {
                if (entry.isDirectory) {
                    dirReader = entry.createReader();
                    dirReader.readEntries(function(entries) {
                        that._handleFileTreeEntries(entries, path + entry.name + "/").done(function(files) {
                            dfd.resolve(files);
                        }).fail(errorHandler);
                    }, errorHandler);
                } else {
                    dfd.resolve([]);
                }
            }
            return dfd.promise();
        },_handleFileTreeEntries: function(entries, path) {
            var that = this;
            return $.when.apply($, $.map(entries, function(entry) {
                return that._handleFileTreeEntry(entry, path);
            })).pipe(function() {
                return Array.prototype.concat.apply([], arguments);
            });
        },_getDroppedFiles: function(dataTransfer) {
            dataTransfer = dataTransfer || {};
            var items = dataTransfer.items;
            if (items && items.length && (items[0].webkitGetAsEntry || items[0].getAsEntry)) {
                return this._handleFileTreeEntries($.map(items, function(item) {
                    var entry;
                    if (item.webkitGetAsEntry) {
                        entry = item.webkitGetAsEntry();
                        if (entry) {
                            entry._file = item.getAsFile();
                        }
                        return entry;
                    }
                    return item.getAsEntry();
                }));
            }
            return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise();
        },_getSingleFileInputFiles: function(fileInput) {
            fileInput = $(fileInput);
            var entries = fileInput.prop("webkitEntries") || fileInput.prop("entries"), files, value;
            if (entries && entries.length) {
                return this._handleFileTreeEntries(entries);
            }
            files = $.makeArray(fileInput.prop("files"));
            if (!files.length) {
                value = fileInput.prop("value");
                if (!value) {
                    return $.Deferred().resolve([]).promise();
                }
                files = [{name: value.replace(/^.*\\/, "")}];
            } else {
                if (files[0].name === undefined && files[0].fileName) {
                    $.each(files, function(index, file) {
                        file.name = file.fileName;
                        file.size = file.fileSize;
                    });
                }
            }
            return $.Deferred().resolve(files).promise();
        },_getFileInputFiles: function(fileInput) {
            if (!(fileInput instanceof $) || fileInput.length === 1) {
                return this._getSingleFileInputFiles(fileInput);
            }
            return $.when.apply($, $.map(fileInput, this._getSingleFileInputFiles)).pipe(function() {
                return Array.prototype.concat.apply([], arguments);
            });
        },_onChange: function(e) {
            var that = this, data = {fileInput: $(e.target),form: $(e.target.form)};
            this._getFileInputFiles(data.fileInput).always(function(files) {
                data.files = files;
                if (that.options.replaceFileInput) {
                    that._replaceFileInput(data.fileInput);
                }
                if (that._trigger("change", $.Event("change", {delegatedEvent: e}), data) !== false) {
                    that._onAdd(e, data);
                }
            });
        },_onPaste: function(e) {
            var items = e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.items, data = {files: []};
            if (items && items.length) {
                $.each(items, function(index, item) {
                    var file = item.getAsFile && item.getAsFile();
                    if (file) {
                        data.files.push(file);
                    }
                });
                if (this._trigger("paste", $.Event("paste", {delegatedEvent: e}), data) !== false) {
                    this._onAdd(e, data);
                }
            }
        },_onDrop: function(e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var that = this, dataTransfer = e.dataTransfer, data = {};
            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {
                e.preventDefault();
                this._getDroppedFiles(dataTransfer).always(function(files) {
                    data.files = files;
                    if (that._trigger("drop", $.Event("drop", {delegatedEvent: e}), data) !== false) {
                        that._onAdd(e, data);
                    }
                });
            }
        },_onDragOver: function(e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var dataTransfer = e.dataTransfer;
            if (dataTransfer && $.inArray("Files", dataTransfer.types) !== -1 && this._trigger("dragover", $.Event("dragover", {delegatedEvent: e})) !== false) {
                e.preventDefault();
                dataTransfer.dropEffect = "copy";
            }
        },_initEventHandlers: function() {
            if (this._isXHRUpload(this.options)) {
                this._on(this.options.dropZone, {dragover: this._onDragOver,drop: this._onDrop});
                this._on(this.options.pasteZone, {paste: this._onPaste});
            }
            if ($.support.fileInput) {
                this._on(this.options.fileInput, {change: this._onChange});
            }
        },_destroyEventHandlers: function() {
            this._off(this.options.dropZone, "dragover drop");
            this._off(this.options.pasteZone, "paste");
            this._off(this.options.fileInput, "change");
        },_setOption: function(key, value) {
            var reinit = $.inArray(key, this._specialOptions) !== -1;
            if (reinit) {
                this._destroyEventHandlers();
            }
            this._super(key, value);
            if (reinit) {
                this._initSpecialOptions();
                this._initEventHandlers();
            }
        },_initSpecialOptions: function() {
            var options = this.options;
            if (options.fileInput === undefined) {
                options.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]');
            } else {
                if (!(options.fileInput instanceof $)) {
                    options.fileInput = $(options.fileInput);
                }
            }
            if (!(options.dropZone instanceof $)) {
                options.dropZone = $(options.dropZone);
            }
            if (!(options.pasteZone instanceof $)) {
                options.pasteZone = $(options.pasteZone);
            }
        },_getRegExp: function(str) {
            var parts = str.split("/"), modifiers = parts.pop();
            parts.shift();
            return new RegExp(parts.join("/"), modifiers);
        },_isRegExpOption: function(key, value) {
            return key !== "url" && $.type(value) === "string" && /^\/.*\/[igm]{0,3}$/.test(value);
        },_initDataAttributes: function() {
            var that = this, options = this.options, clone = $(this.element[0].cloneNode(false));
            $.each(clone.data(), function(key, value) {
                var dataAttributeName = "data-" + key.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
                if (clone.attr(dataAttributeName)) {
                    if (that._isRegExpOption(key, value)) {
                        value = that._getRegExp(value);
                    }
                    options[key] = value;
                }
            });
        },_create: function() {
            this._initDataAttributes();
            this._initSpecialOptions();
            this._slots = [];
            this._sequence = this._getXHRPromise(true);
            this._sending = this._active = 0;
            this._initProgressObject(this);
            this._initEventHandlers();
        },active: function() {
            return this._active;
        },progress: function() {
            return this._progress;
        },add: function(data) {
            var that = this;
            if (!data || this.options.disabled) {
                return;
            }
            if (data.fileInput && !data.files) {
                this._getFileInputFiles(data.fileInput).always(function(files) {
                    data.files = files;
                    that._onAdd(null, data);
                });
            } else {
                data.files = $.makeArray(data.files);
                this._onAdd(null, data);
            }
        },send: function(data) {
            if (data && !this.options.disabled) {
                if (data.fileInput && !data.files) {
                    var that = this, dfd = $.Deferred(), promise = dfd.promise(), jqXHR, aborted;
                    promise.abort = function() {
                        aborted = true;
                        if (jqXHR) {
                            return jqXHR.abort();
                        }
                        dfd.reject(null, "abort", "abort");
                        return promise;
                    };
                    this._getFileInputFiles(data.fileInput).always(function(files) {
                        if (aborted) {
                            return;
                        }
                        if (!files.length) {
                            dfd.reject();
                            return;
                        }
                        data.files = files;
                        jqXHR = that._onSend(null, data).then(function(result, textStatus, jqXHR) {
                            dfd.resolve(result, textStatus, jqXHR);
                        }, function(jqXHR, textStatus, errorThrown) {
                            dfd.reject(jqXHR, textStatus, errorThrown);
                        });
                    });
                    return this._enhancePromise(promise);
                }
                data.files = $.makeArray(data.files);
                if (data.files.length) {
                    return this._onSend(null, data);
                }
            }
            return this._getXHRPromise(false, data && data.context);
        }});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "./jquery.fileupload"], factory);
    } else {
        factory(window.jQuery);
    }
}(function($) {
    var originalAdd = $.blueimp.fileupload.prototype.options.add;
    $.widget("blueimp.fileupload", $.blueimp.fileupload, {options: {processQueue: [],add: function(e, data) {
                var $this = $(this);
                data.process(function() {
                    return $this.fileupload("process", data);
                });
                originalAdd.call(this, e, data);
            }},processActions: {},_processFile: function(data, originalData) {
            var that = this, dfd = $.Deferred().resolveWith(that, [data]), chain = dfd.promise();
            this._trigger("process", null, data);
            $.each(data.processQueue, function(i, settings) {
                var func = function(data) {
                    if (originalData.errorThrown) {
                        return $.Deferred().rejectWith(that, [originalData]).promise();
                    }
                    return that.processActions[settings.action].call(that, data, settings);
                };
                chain = chain.pipe(func, settings.always && func);
            });
            chain.done(function() {
                that._trigger("processdone", null, data);
                that._trigger("processalways", null, data);
            }).fail(function() {
                that._trigger("processfail", null, data);
                that._trigger("processalways", null, data);
            });
            return chain;
        },_transformProcessQueue: function(options) {
            var processQueue = [];
            $.each(options.processQueue, function() {
                var settings = {}, action = this.action, prefix = this.prefix === true ? action : this.prefix;
                $.each(this, function(key, value) {
                    if ($.type(value) === "string" && value.charAt(0) === "@") {
                        settings[key] = options[value.slice(1) || (prefix ? prefix + key.charAt(0).toUpperCase() + key.slice(1) : key)];
                    } else {
                        settings[key] = value;
                    }
                });
                processQueue.push(settings);
            });
            options.processQueue = processQueue;
        },processing: function() {
            return this._processing;
        },process: function(data) {
            var that = this, options = $.extend({}, this.options, data);
            if (options.processQueue && options.processQueue.length) {
                this._transformProcessQueue(options);
                if (this._processing === 0) {
                    this._trigger("processstart");
                }
                $.each(data.files, function(index) {
                    var opts = index ? $.extend({}, options) : options, func = function() {
                        if (data.errorThrown) {
                            return $.Deferred().rejectWith(that, [data]).promise();
                        }
                        return that._processFile(opts, data);
                    };
                    opts.index = index;
                    that._processing += 1;
                    that._processingQueue = that._processingQueue.pipe(func, func).always(function() {
                        that._processing -= 1;
                        if (that._processing === 0) {
                            that._trigger("processstop");
                        }
                    });
                });
            }
            return this._processingQueue;
        },_create: function() {
            this._super();
            this._processing = 0;
            this._processingQueue = $.Deferred().resolveWith(this).promise();
        }});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "load-image", "load-image-meta", "load-image-exif", "load-image-ios", "canvas-to-blob", "./jquery.fileupload-process"], factory);
    } else {
        factory(window.jQuery, window.loadImage);
    }
}(function($, loadImage) {
    $.blueimp.fileupload.prototype.options.processQueue.unshift({action: "loadImageMetaData",disableImageHead: "@",disableExif: "@",disableExifThumbnail: "@",disableExifSub: "@",disableExifGps: "@",disabled: "@disableImageMetaDataLoad"}, {action: "loadImage",prefix: true,fileTypes: "@",maxFileSize: "@",noRevoke: "@",disabled: "@disableImageLoad"}, {action: "resizeImage",prefix: "image",maxWidth: "@",maxHeight: "@",minWidth: "@",minHeight: "@",crop: "@",orientation: "@",forceResize: "@",disabled: "@disableImageResize"}, {action: "saveImage",quality: "@imageQuality",type: "@imageType",disabled: "@disableImageResize"}, {action: "saveImageMetaData",disabled: "@disableImageMetaDataSave"}, {action: "resizeImage",prefix: "preview",maxWidth: "@",maxHeight: "@",minWidth: "@",minHeight: "@",crop: "@",orientation: "@",thumbnail: "@",canvas: "@",disabled: "@disableImagePreview"}, {action: "setImage",name: "@imagePreviewName",disabled: "@disableImagePreview"}, {action: "deleteImageReferences",disabled: "@disableImageReferencesDeletion"});
    $.widget("blueimp.fileupload", $.blueimp.fileupload, {options: {loadImageFileTypes: /^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize: 10000000,imageMaxWidth: 1920,imageMaxHeight: 1080,imageOrientation: false,imageCrop: false,disableImageResize: true,previewMaxWidth: 80,previewMaxHeight: 80,previewOrientation: true,previewThumbnail: true,previewCrop: false,previewCanvas: true},processActions: {loadImage: function(data, options) {
                if (options.disabled) {
                    return data;
                }
                var that = this, file = data.files[data.index], dfd = $.Deferred();
                if (($.type(options.maxFileSize) === "number" && file.size > options.maxFileSize) || (options.fileTypes && !options.fileTypes.test(file.type)) || !loadImage(file, function(img) {
                    if (img.src) {
                        data.img = img;
                    }
                    dfd.resolveWith(that, [data]);
                }, options)) {
                    return data;
                }
                return dfd.promise();
            },resizeImage: function(data, options) {
                if (options.disabled || !(data.canvas || data.img)) {
                    return data;
                }
                options = $.extend({canvas: true}, options);
                var that = this, dfd = $.Deferred(), img = (options.canvas && data.canvas) || data.img, resolve = function(newImg) {
                    if (newImg && (newImg.width !== img.width || newImg.height !== img.height || options.forceResize)) {
                        data[newImg.getContext ? "canvas" : "img"] = newImg;
                    }
                    data.preview = newImg;
                    dfd.resolveWith(that, [data]);
                }, thumbnail;
                if (data.exif) {
                    if (options.orientation === true) {
                        options.orientation = data.exif.get("Orientation");
                    }
                    if (options.thumbnail) {
                        thumbnail = data.exif.get("Thumbnail");
                        if (thumbnail) {
                            loadImage(thumbnail, resolve, options);
                            return dfd.promise();
                        }
                    }
                    if (data.orientation) {
                        delete options.orientation;
                    } else {
                        data.orientation = options.orientation;
                    }
                }
                if (img) {
                    resolve(loadImage.scale(img, options));
                    return dfd.promise();
                }
                return data;
            },saveImage: function(data, options) {
                if (!data.canvas || options.disabled) {
                    return data;
                }
                var that = this, file = data.files[data.index], dfd = $.Deferred();
                if (data.canvas.toBlob) {
                    data.canvas.toBlob(function(blob) {
                        if (!blob.name) {
                            if (file.type === blob.type) {
                                blob.name = file.name;
                            } else {
                                if (file.name) {
                                    blob.name = file.name.replace(/\..+$/, "." + blob.type.substr(6));
                                }
                            }
                        }
                        if (file.type !== blob.type) {
                            delete data.imageHead;
                        }
                        data.files[data.index] = blob;
                        dfd.resolveWith(that, [data]);
                    }, options.type || file.type, options.quality);
                } else {
                    return data;
                }
                return dfd.promise();
            },loadImageMetaData: function(data, options) {
                if (options.disabled) {
                    return data;
                }
                var that = this, dfd = $.Deferred();
                loadImage.parseMetaData(data.files[data.index], function(result) {
                    $.extend(data, result);
                    dfd.resolveWith(that, [data]);
                }, options);
                return dfd.promise();
            },saveImageMetaData: function(data, options) {
                if (!(data.imageHead && data.canvas && data.canvas.toBlob && !options.disabled)) {
                    return data;
                }
                var file = data.files[data.index], blob = new Blob([data.imageHead, this._blobSlice.call(file, 20)], {type: file.type});
                blob.name = file.name;
                data.files[data.index] = blob;
                return data;
            },setImage: function(data, options) {
                if (data.preview && !options.disabled) {
                    data.files[data.index][options.name || "preview"] = data.preview;
                }
                return data;
            },deleteImageReferences: function(data, options) {
                if (!options.disabled) {
                    delete data.img;
                    delete data.canvas;
                    delete data.preview;
                    delete data.imageHead;
                }
                return data;
            }}});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "load-image", "./jquery.fileupload-process"], factory);
    } else {
        factory(window.jQuery, window.loadImage);
    }
}(function($, loadImage) {
    $.blueimp.fileupload.prototype.options.processQueue.unshift({action: "loadAudio",prefix: true,fileTypes: "@",maxFileSize: "@",disabled: "@disableAudioPreview"}, {action: "setAudio",name: "@audioPreviewName",disabled: "@disableAudioPreview"});
    $.widget("blueimp.fileupload", $.blueimp.fileupload, {options: {loadAudioFileTypes: /^audio\/.*$/},_audioElement: document.createElement("audio"),processActions: {loadAudio: function(data, options) {
                if (options.disabled) {
                    return data;
                }
                var file = data.files[data.index], url, audio;
                if (this._audioElement.canPlayType && this._audioElement.canPlayType(file.type) && ($.type(options.maxFileSize) !== "number" || file.size <= options.maxFileSize) && (!options.fileTypes || options.fileTypes.test(file.type))) {
                    url = loadImage.createObjectURL(file);
                    if (url) {
                        audio = this._audioElement.cloneNode(false);
                        audio.src = url;
                        audio.controls = true;
                        data.audio = audio;
                        return data;
                    }
                }
                return data;
            },setAudio: function(data, options) {
                if (data.audio && !options.disabled) {
                    data.files[data.index][options.name || "preview"] = data.audio;
                }
                return data;
            }}});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "load-image", "./jquery.fileupload-process"], factory);
    } else {
        factory(window.jQuery, window.loadImage);
    }
}(function($, loadImage) {
    $.blueimp.fileupload.prototype.options.processQueue.unshift({action: "loadVideo",prefix: true,fileTypes: "@",maxFileSize: "@",disabled: "@disableVideoPreview"}, {action: "setVideo",name: "@videoPreviewName",disabled: "@disableVideoPreview"});
    $.widget("blueimp.fileupload", $.blueimp.fileupload, {options: {loadVideoFileTypes: /^video\/.*$/},_videoElement: document.createElement("video"),processActions: {loadVideo: function(data, options) {
                if (options.disabled) {
                    return data;
                }
                var file = data.files[data.index], url, video;
                if (this._videoElement.canPlayType && this._videoElement.canPlayType(file.type) && ($.type(options.maxFileSize) !== "number" || file.size <= options.maxFileSize) && (!options.fileTypes || options.fileTypes.test(file.type))) {
                    url = loadImage.createObjectURL(file);
                    if (url) {
                        video = this._videoElement.cloneNode(false);
                        video.src = url;
                        video.controls = true;
                        data.video = video;
                        return data;
                    }
                }
                return data;
            },setVideo: function(data, options) {
                if (data.video && !options.disabled) {
                    data.files[data.index][options.name || "preview"] = data.video;
                }
                return data;
            }}});
}));
(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "./jquery.fileupload-process"], factory);
    } else {
        factory(window.jQuery);
    }
}(function($) {
    $.blueimp.fileupload.prototype.options.processQueue.push({action: "validate",always: true,acceptFileTypes: "@",maxFileSize: "@",minFileSize: "@",maxNumberOfFiles: "@",disabled: "@disableValidation"});
    $.widget("blueimp.fileupload", $.blueimp.fileupload, {options: {getNumberOfFiles: $.noop,messages: {maxNumberOfFiles: "Maximum number of files exceeded",acceptFileTypes: "File type not allowed",maxFileSize: "File is too large",minFileSize: "File is too small"}},processActions: {validate: function(data, options) {
                if (options.disabled) {
                    return data;
                }
                var dfd = $.Deferred(), settings = this.options, file = data.files[data.index], fileSize;
                if (options.minFileSize || options.maxFileSize) {
                    fileSize = file.size;
                }
                if ($.type(options.maxNumberOfFiles) === "number" && (settings.getNumberOfFiles() || 0) + data.files.length > options.maxNumberOfFiles) {
                    file.error = settings.i18n("maxNumberOfFiles");
                } else {
                    if (options.acceptFileTypes && !(options.acceptFileTypes.test(file.type) || options.acceptFileTypes.test(file.name))) {
                        file.error = settings.i18n("acceptFileTypes");
                    } else {
                        if (fileSize > options.maxFileSize) {
                            file.error = settings.i18n("maxFileSize");
                        } else {
                            if ($.type(fileSize) === "number" && fileSize < options.minFileSize) {
                                file.error = settings.i18n("minFileSize");
                            } else {
                                delete file.error;
                            }
                        }
                    }
                }
                if (file.error || data.files.error) {
                    data.files.error = true;
                    dfd.rejectWith(this, [data]);
                } else {
                    dfd.resolveWith(this, [data]);
                }
                return dfd.promise();
            }}});
}));
$.ajaxSetup({cache: false});
function sign(x) {
    return x > 0 ? 1 : x < 0 ? -1 : 0;
}
function getURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split("&");
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split("=");
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
    return "";
}
function isIE8() {
    var BrowserDetect = {init: function() {
            this.browser = this.searchString(this.dataBrowser) || "Other";
            this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || "Unknown";
        },searchString: function(data) {
            for (var i = 0; i < data.length; i++) {
                var dataString = data[i].string;
                this.versionSearchString = data[i].subString;
                if (dataString.indexOf(data[i].subString) != -1) {
                    return data[i].identity;
                }
            }
        },searchVersion: function(dataString) {
            var index = dataString.indexOf(this.versionSearchString);
            if (index == -1) {
                return;
            }
            return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
        },dataBrowser: [{string: navigator.userAgent,subString: "Chrome",identity: "Chrome"}, {string: navigator.userAgent,subString: "MSIE",identity: "Explorer"}, {string: navigator.userAgent,subString: "Firefox",identity: "Firefox"}, {string: navigator.userAgent,subString: "Safari",identity: "Safari"}, {string: navigator.userAgent,subString: "Opera",identity: "Opera"}]};
    BrowserDetect.init();
    if ((BrowserDetect.browser == "Explorer") && (BrowserDetect.version == 8)) {
        return true;
    }
    return false;
}
(function($) {
    $.fn.attrs = function() {
        var attributes = {};
        if (this.length) {
            $.each(this[0].attributes, function(index, attr) {
                attributes[attr.name] = attr.value;
            });
        }
        return attributes;
    };
    $.fn.dataAttrs = function() {
        var attributes = {};
        if (this.length) {
            $.each(this[0].attributes, function(index, attr) {
                if (attr.name.substring(0, "data-".length) === "data-") {
                    attributes[attr.name.substring("data-".length)] = attr.value;
                }
            });
        }
        return attributes;
    };
    var hideOthers = function(link) {
        $(".showhide-trigger").each(function() {
            var id = $(this).attr("href");
            if (link != id) {
                $(id).hide();
            }
        });
    };
    $(document).on("vclick", ".showhide-trigger", function() {
        hideOthers($(this).attr("href"));
        $(".showhide-trigger").removeClass("active");
        var $target = $($(this).attr("href"));
        if ($target.is(":visible")) {
            $target.slideUp();
        } else {
            $target.slideDown();
            $(this).addClass("active");
        }
        return false;
    });
    $(document).on("vclick", function(event) {
        if (!$(event.target).hasClass("showhide-trigger") && !$(event.target).closest(".showhide-trigger").length) {
            $('[id^="top-menu-"]').each(function() {
                if ($(this).is(":visible")) {
                    $(this).slideUp();
                }
            });
        }
    });
    var replaceHtml = function($context) {
        $context.on("vclick", ".replace-html", function() {
            var url = $(this).attr("href");
            if (url == undefined) {
                url = $(this).data("href");
            }
            var $target = $(this).closest($(this).data("target"));
            $.ajax({url: url,beforeSend: function(data) {
                    $(document).trigger("capgemini.ajax.start", $target);
                },success: function(data) {
                    $target.html($(data));
                    $(document).trigger("capgemini.ajax.load", $target);
                }});
            return false;
        });
    };
    var replaceHtmlDirect = function($context) {
        $context.on("vclick", ".replace-html-direct", function() {
            var url = $(this).attr("href");
            if (url == undefined) {
                url = $(this).data("href");
            }
            var $target = $($(this).data("target"));
            $.ajax({url: url,beforeSend: function(data) {
                    $(document).trigger("capgemini.ajax.start", $target);
                },success: function(data) {
                    $target.html($(data));
                    $(document).trigger("capgemini.ajax.load", $target);
                }});
            return false;
        });
    };
    $(document).ready(function() {
        $("input:text").attr("autocomplete", "off");
        replaceHtml($(document));
        replaceHtmlDirect($(document));
        $(document).on("capgemini.ajax.load", function(event, element) {
            $("input:text", element).attr("autocomplete", "off");
            replaceHtml($(element));
            replaceHtmlDirect($(element));
        });
    });
    $.uuid = function() {
        var s4 = function() {
            return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
        };
        return s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
    };
})(jQuery);
(function($) {
    $.widget("marmots.wizard", {current: 0,currentMultiStep: 0,animating: false,steps: [],stepContainer: undefined,visualization: undefined,buttonBar: undefined,form: undefined,checkAlert: undefined,options: {labels: {prev: "Previous",next: "Next",confirm: "Confirm",done: "Done"}},_create: function() {
            var self = this;
            self.steps = self.element.children();
            self.form = self.element.closest("form").length == 0 ? undefined : self.element.closest("form");
            $(window).on("resize", function() {
                self._resized();
            });
            $(document).on("capgemini.wizard.resize", function() {
                var $stepContainer = self.element.find(".step-container");
                if ($stepContainer.length > 0) {
                    $stepContainer.css("overflow", "hidden");
                }
                setTimeout(function() {
                    self._animateHeight();
                }, 100);
            });
            self.element.find(".next").each(function() {
                $(this).on("vclick", function() {
                    self.next();
                    return false;
                });
            });
            self._refresh();
        },_current: function() {
            return $(this.steps[this.current]);
        },_nextStep: function() {
            return $(this.steps[this.current + 1]);
        },_prevStep: function() {
            return $(this.steps[this.current - 1]);
        },_animateHeight: function() {
            var self = this;
            var height = self._current().outerHeight(true) + 5;
            $(this).find(".step").css("height", height);
            if (isIE8()) {
                self.element.find(".step-container").css("height", height);
            } else {
                self.element.find(".step-container").animate({height: height}, function() {
                    self._scrollTo();
                    var $stepContainer = self.element.find(".step-container");
                    if ($stepContainer.length > 0) {
                        $stepContainer.css("overflow", "visible");
                    }
                });
            }
        },_scrollTo: function() {
            var self = this;
            if (Modernizr.mq("(max-width:768px)")) {
                var $target = self._current().prev("a.step:visible").length == 0 ? self.element : self._current().prev("a.step");
                var scrollPosition = $target.offset().top;
                setTimeout(function() {
                    $("html, body").animate({scrollTop: scrollPosition}, "slow");
                }, 100);
            }
        },_constructButtons: function() {
            var self = this;
            if (self.buttonBar === undefined) {
                self.buttonBar = $('<div class="button-bar clearfix"></div>');
                var $prev = $('<button type="button" class="btn arrow-left prev pull-left hidden" id="wizardBack">' + self.options.labels.prev + "</button>");
                $prev.on("vclick", function() {
                    self.prev();
                    return false;
                });
                self.buttonBar.append($prev);
                var $next = $('<button class="btn arrow-right next pull-right wizardNext" name="wizardNext" id="wizardNext">' + (self.steps.length > 2 ? self.options.labels.next : self.options.labels.confirm) + "</button>");
                $next.on("vclick", function() {
                    self.next();
                    return false;
                });
                self.buttonBar.append($next);
            }
            return self.buttonBar;
        },_constructTablet: function() {
            var self = this;
            if (self.visualization === undefined || self.visualization !== "tablet") {
                var step = 0;
                self.steps.each(function() {
                    var $step = $('<a href="#step-' + (step++) + '" class="step ' + (self.current > step - 1 ? "completed" : "") + '">' + (step) + ". " + $(this).data("title") + "</a>");
                    self.element.append($step);
                    self.element.append($(this).hide());
                });
                self.element.find("> a.step.active").removeClass("active");
                if (self._isRemoteStepLoaded()) {
                    self._loadStepContent(function() {
                        self._current().show().append(self._constructButtons()).prev().addClass("active");
                    });
                } else {
                    self._current().show().append(self._constructButtons()).prev().addClass("active");
                }
                if (self.stepContainer !== undefined) {
                    self.element.find(".wizard-progress-bar").remove();
                    self.stepContainer.remove();
                    self.stepContainer = undefined;
                }
                self.visualization = "tablet";
            }
        },_constructDesktop: function() {
            var self = this;
            if (self.visualization === undefined || self.visualization !== "desktop") {
                self._loadStepContent();
                if (self.element.find(".step-container").length == 0) {
                    self.stepContainer = $('<div class="step-container" style="width:' + self.element.width() + 'px"></div>');
                    self.element.append(self.stepContainer);
                    var $slideViewer = $('<div id="wizard-slide-viewer" class="slide-viewer"></div>');
                    self.stepContainer.append($slideViewer);
                    self.steps.each(function() {
                        var $step = $('<div class="step" style="width:' + self.element.width() + 'px; height:0px"></div>');
                        $step.append($(this).hide());
                        $slideViewer.append($step);
                    });
                    self._current().show().parent().addClass("active");
                    self._desktopResized();
                    self.element.append(self._constructButtons());
                    self.element.find(".step-container").css({height: self._current().outerHeight(true) + 5});
                    self.element.find("> a.step").remove();
                    self.visualization = "desktop";
                }
            }
        },_desktopResized: function() {
            var self = this;
            var $progressBar = self.element.find(".wizard-progress-bar").empty();
            if ($progressBar.length == 0) {
                $progressBar = $('<div class="wizard-progress-bar"></div>');
                $errorMessage = $('<p class="block-error iconed-24 hide" id="checkAlert"><span class="icon-24 m01-alerta red"></span>Debes aceptar los términos y condiciones para continuar el proceso<br/></p>');
                self.element.prepend($errorMessage);
                self.element.prepend($progressBar);
                self.checkAlert = self.element.children()[1];
            }
            var width = self.element.width() - 90;
            var $progressLine = $('<div class="progress-line" style="width:' + width + 'px"><div class="progress-display"></div></div>');
            var step = 0;
            self.steps.each(function() {
                var title = (step + 1) + ". " + $(this).data("title");
                var left = (((($progressLine.width()) / (self.steps.length - 1)) - 1) * step) - 1;
                var $progressPoint = $('<div class="point-background" style="left:' + left + 'px;"><div class="text">' + title + '</div><div class="point"></div></div>');
                if (step <= self.current) {
                    $progressPoint.addClass("active");
                }
                step++;
                $progressLine.append($progressPoint);
            });
            $progressLine.find("> .progress-display").css({width: ((($progressLine.width() - 6) / (self.steps.length - 1)) * self.current)});
            $progressBar.append($progressLine);
            var step = 0;
            self.element.find(".wizard-progress-bar .progress-line .point-background .text").each(function() {
                var left = step == 0 ? 0 : step == self.steps.length - 1 ? -($(this).width() - 18) : -(($(this).width() - 18) / 2);
                step++;
                $(this).css("left", left + "px");
            });
            self.element.find(".slide-viewer").css({left: -(self.element.find(".step-container").width() * (self.current))});
        },_refresh: function() {
            var self = this;
            if (Modernizr.mq("(max-width:768px)")) {
                self._constructTablet();
            } else {
                self._constructDesktop();
                self._desktopResized();
            }
            self._current().show();
        },_resized: function() {
            var self = this;
            self.element.find(".step-container").css("width", self.element.width());
            self.element.find(".step").css("width", self.element.width());
            self._refresh();
        },_isRemoteStepLoaded: function() {
            var self = this;
            var $step = self._current();
            var href = $step.data("href");
            return href !== undefined && $step.is(":empty");
        },_loadStepContent: function(handler) {
            var self = this;
            var $step = self._current();
            var href = $step.data("href");
            if (href !== undefined) {
                $.ajax({url: href,method: "post",data: self.form === undefined ? undefined : self.form.serialize(),beforeSend: function(data) {
                        $(document).trigger("capgemini.ajax.start", $step);
                    },success: function(data) {
                        var $noRemove = $step.find(".button-bar");
                        $step.html($noRemove).prepend(data);
                        $step.find(".next").each(function() {
                            $(this).on("vclick", function() {
                                self.next();
                                return false;
                            });
                        });
                        if (handler !== undefined) {
                            handler();
                        }
                        self.element.find(".step-container").css({height: $step.outerHeight(true) + 5});
                        $(document).trigger("capgemini.ajax.load", $step);
                    }});
            }
        },_setOptions: function() {
            this._superApply(arguments);
            this._refresh();
        },_setOption: function(key, value) {
            this._super(key, value);
        },public_function: function() {
            return true;
        },next: function() {
            var self = this;
            var $next = self._nextStep();
            var $step = self._current();
            var isCheckLabel = false;
            var errorMessage;
            var isCheckStep = $step.data("requiredcheck");
            if (isCheckStep == true) {
                if (typeof $step.find("#checkAlertPhone")[0] == "undefined") {
                    errorMessage = $('<p class="block-error iconed-24 hide" id="checkAlertPhone"><span class="icon-24 m01-alerta red"></span>Debes aceptar los términos y condiciones para continuar el proceso<br/></p>');
                    $step.prepend(errorMessage);
                } else {
                    errorMessage = $step.find("#checkAlertPhone");
                }
                var labelCheckClasses = $step.find("#condiciones")[0].className.toString().split(" ");
                for (var a = 0; a < labelCheckClasses.length; a++) {
                    if (labelCheckClasses[a] == "on") {
                        isCheckLabel = true;
                    }
                }
            }
            var visualization = self.visualization;
            var alertBox = $(self.checkAlert);
            if (!isCheckLabel && isCheckStep == true) {
                if (visualization != "desktop") {
                    errorMessage.removeClass("hide");
                    if (typeof alertBox.attr("class") != "undefined" && alertBox.attr("class").indexOf("hide") == -1) {
                        alertBox.addClass("hide");
                    }
                } else {
                    alertBox.removeClass("hide");
                    if (typeof errorMessage.attr("class") != "undefined" && errorMessage.attr("class").indexOf("hide") == -1) {
                        errorMessage.addClass("hide");
                    }
                }
            } else {
                if (visualization != "desktop") {
                    if (typeof errorMessage != "undefined") {
                        errorMessage.removeClass("hide");
                    }
                } else {
                    alertBox.addClass("hide");
                }
                if (self.form === undefined || self.form.valid()) {
                    if (self.animating) {
                        return;
                    }
                    var multistep = $step.data("multistep");
                    if (multistep != true) {
                        multistep = false;
                    }
                    var nonext = $next.data("nonext");
                    if (nonext != true) {
                        nonext = false;
                    }
                    if (multistep == true) {
                        self.currentMultiStep++;
                        var numSubSteps = $step.find(".sub-step").length;
                        if (self.currentMultiStep < numSubSteps) {
                            $("#wizardNext").hide();
                            var counter = 0;
                            $step.find(".sub-step").each(function() {
                                if (self.currentMultiStep == counter) {
                                    $(this).removeClass("hidden");
                                } else {
                                    $(this).addClass("hidden");
                                }
                                counter++;
                            });
                            self._animateHeight();
                            return;
                        }
                    }
                    self.currentMultiStep = 0;
                    var b = $(".wizardNext");
                    if (nonext == true) {
                        $.each(b, function() {
                            $(this).hide();
                        });
                    } else {
                        $.each(b, function() {
                            $(this).show();
                        });
                    }
                    self.animating = true;
                    self.current++;
                    self._loadStepContent();
                    if (self.visualization === "desktop") {
                        self._current().show();
                        var $stepContainer = self.element.find(".step-container");
                        $stepContainer.css("overflow", "hidden");
                        if (isIE8()) {
                            self._animateHeight();
                            if (self.current < self.steps.length - 1) {
                                self.element.find(".button-bar .prev").show();
                            }
                            self.animating = false;
                        } else {
                            self.element.find("#wizard-slide-viewer").animate({left: "-=" + $stepContainer.width()}, {easing: "swing",duration: "slow",complete: function() {
                                    $stepContainer.css("overflow", "none");
                                    self._animateHeight();
                                    if (self.current < self.steps.length - 1) {
                                        self.element.find(".button-bar .prev").show();
                                    }
                                    self.animating = false;
                                }});
                        }
                        self.element.find("div.step.active").removeClass("active");
                        self._current().parent().addClass("active");
                        var $progressLine = self.element.find(".wizard-progress-bar .progress-line");
                        $progressLine.find("> .progress-display").animate({width: ((($progressLine.width() - 6) / (self.steps.length - 1)) * self.current)}, "slow", function() {
                            $progressLine.find(".point-background:nth-child(" + (self.current + 2) + ")").addClass("active");
                        });
                    } else {
                        self.element.find("> a.step.active").removeClass("active").addClass("completed");
                        var $prevFrame = $(self.steps[self.current - 1]);
                        var $nextFrame = $(self.steps[self.current]);
                        $prevFrame.animate({height: "hide"}, {duration: "slow",complete: function() {
                                self._current().append(self._constructButtons()).prev().addClass("active");
                                $nextFrame.animate({height: "show"}, {duration: "slow",complete: function() {
                                        self._scrollTo();
                                        if (self.current < self.steps.length - 1) {
                                            self.element.find(".button-bar .prev").show();
                                        }
                                        self.animating = false;
                                    }});
                            }});
                    }
                    if (self.current == self.steps.length - 2) {
                        var $btnNext = self.element.find(".button-bar .next");
                        if (self._current().data("multistep") != true) {
                            $btnNext.html(self.options.labels.confirm);
                        }
                        $btnNext.off("vclick").on("vclick", function() {
                            self.submit();
                            return false;
                        });
                    } else {
                        if (self.current == self.steps.length - 1) {
                            self.element.find(".button-bar .prev").hide();
                            var opContainer = $(document).find(".wizard-container").attr("class");
                            var isModal = true;
                            if (typeof opContainer != "undefined") {
                                isModal = false;
                            }
                            if (!isModal) {
                                self.element.find(".button-bar .next").html(self.options.labels.done).removeClass("arrow-right").off("vclick").on("vclick", function() {
                                    clearErrors();
                                    $(".wizard-container").slideUp();
                                    $("#operaciones-list-container").slideDown();
                                    return false;
                                });
                            } else {
                                self.element.find(".button-bar .next").html(self.options.labels.done).removeClass("arrow-right").off("vclick").on("vclick", function() {
                                    if (self.element.closest(".modal").length > 0) {
                                        self.element.closest(".modal").modal("hide").remove();
                                    } else {
                                        if (Modernizr.mq("(max-width:768px)")) {
                                            $(this).closest("ul").find("> li").removeClass("inactive active");
                                            $("#tab-operaciones").removeClass("active");
                                            $(".tabmain-operaciones").removeClass("hidden").addClass("active");
                                            $("#operaciones-list-container").addClass("active");
                                            $("#operacion-container").empty();
                                            $("#option-content").empty();
                                            var $backButton = $(".return2");
                                            $backButton.removeClass("return return2").text("Quiero").addClass("want");
                                            $backButton.click();
                                            self._scrollTo();
                                        } else {
                                            $(this).closest("ul").find("> li").removeClass("inactive active");
                                            $("#operacion-container").removeClass("active");
                                            $(".tabmain-operaciones").removeClass("hidden").addClass("active");
                                            $("#operacion-container").empty();
                                            $("#option-content").empty();
                                            $("#operaciones-list-container").addClass("active");
                                            $("#tab-operaciones-link").click();
                                        }
                                    }
                                    return false;
                                });
                            }
                        }
                    }
                }
            }
        },submit: function() {
            var self = this;
            if (self.form !== undefined) {
                var $form = self.form;
                clearErrors($form);
                if (self.form.valid()) {
                    var action = $form.attr("action");
                    if (action !== undefined && action !== "#") {
                        $.ajax({url: action,data: $form.serialize(),method: $form.attr("method") === undefined ? "post" : $form.attr("method"),beforeSend: function(data) {
                                $(document).trigger("capgemini.ajax.start", $form);
                            },success: function(data, status, request) {
                                self.next();
                            },error: function(request, status, error) {
                                self._current().prepend(request.responseText);
                                self._animateHeight();
                            }});
                    } else {
                        self.next();
                    }
                }
            } else {
                self.next();
            }
        },prev: function() {
            var self = this;
            if (self.animating) {
                return;
            }
            self.animating = true;
            if (self.form !== undefined) {
                clearErrors(self.form);
            }
            self.current--;
            self.currentMultiStep = 0;
            var $prevStep = $(self.steps[self.current + 1]);
            var multistep = $prevStep.data("multistep");
            if (multistep == true) {
                var counter = 0;
                $prevStep.find(".sub-step").each(function() {
                    if (counter == 0) {
                        $(this).removeClass("hidden");
                    } else {
                        $(this).addClass("hidden");
                    }
                    $(this).find("input").each(function() {
                        $(this).val("");
                    });
                    counter++;
                });
            }
            if (self.visualization === "desktop") {
                var $progressLine = self.element.find(".wizard-progress-bar .progress-line");
                $progressLine.find(".point-background:nth-child(" + (self.current + 3) + ")").removeClass("active");
                $(self.steps[self.current + 1]).hide();
                var $stepContainer = self.element.find(".step-container");
                $stepContainer.css("overflow", "hidden");
                if (isIE8()) {
                    self._animateHeight();
                    if (self.current < self.steps.length - 1) {
                        self.element.find(".button-bar .prev").show();
                    }
                    self.animating = false;
                } else {
                    self.element.find("#wizard-slide-viewer").animate({left: "+=" + $stepContainer.width()}, "slow", function() {
                        $stepContainer.css("overflow", "none");
                    });
                }
                self.element.find("div.step.active").removeClass("active");
                self._current().parent().addClass("active");
                $progressLine.find("> .progress-display").animate({width: ((($progressLine.width() - 10) / (self.steps.length - 1)) * self.current)}, "slow", function() {
                    self.animating = false;
                    self._animateHeight();
                });
            } else {
                self.element.find("> a.step.active").removeClass("active");
                var $currentFrame = $(self.steps[self.current + 1]);
                var $prevFrame = $(self.steps[self.current]);
                $currentFrame.animate({height: "hide"}, {duration: "slow",complete: function() {
                        self._current().append(self._constructButtons()).prev().addClass("active");
                        $prevFrame.animate({height: "show"}, {duration: "slow",complete: function() {
                                self._scrollTo();
                                self.animating = false;
                            }});
                    }});
            }
            self._current().show();
            var $prev = self._current();
            var nonext = $prev.data("nonext");
            if (nonext != true) {
                nonext = false;
            }
            var wizardNextBtn = $(".wizardNext");
            if (nonext == true) {
                $.each(wizardNextBtn, function() {
                    $(this).hide();
                });
            } else {
                $.each(wizardNextBtn, function() {
                    $(this).show();
                });
            }
            self.element.find(".button-bar .next").show();
            if (self.current == 0) {
                self.element.find(".button-bar .prev").hide();
            }
            if (self.current == self.steps.length - 3) {
                self.element.find(".button-bar .next").html(self.options.labels.next).off("vclick").on("vclick", function() {
                    self.next();
                    return false;
                });
            } else {
                if (self.current == self.steps.length - 2) {
                    self.element.find(".button-bar .next").html(self.options.labels.confirm).off("vclick").on("vclick", function() {
                        self.submit();
                        return false;
                    });
                }
            }
        },resize: function() {
            this._resized();
        }});
})(jQuery);
$(document).ready(function() {
    var createWizard = function($element) {
        $element.wizard({labels: {prev: "Anterior",next: "Siguiente",confirm: "Confirmar",done: "Cerrar"}});
    };
    $(document).on("capgemini.ajax.load", function(event, element) {
        createWizard($(element).find(".wizard"));
    });
    createWizard($(".wizard"));
});
(function($) {
    $.widget("marmots.checkbox", {skins: ["large", "blue", "clear", "fancy"],defaultValue: false,options: {position: "marmots-label-left",skin: ""},_create: function() {
            var self = this;
            this.defaultValue = this.element.is(":checked");
            var $label = this.element.next('label[for="' + this.element.attr("id") + '"]');
            if ($label.length == 0) {
                $label = this.element.prev('label[for="' + this.element.attr("id") + '"]');
                if ($label.length > 0) {
                    this.options.position = "marmots-label-right";
                }
            }
            if ($label.length == 0) {
                $label = $('label[for="' + self.element.attr("id") + '"]');
            }
            if (this.element.is(":disabled")) {
                $label.addClass("disabled");
            } else {
                $label.on("click", function(event) {
                    if (self._isRadio()) {
                        self.check();
                    } else {
                        if (self.isChecked()) {
                            self.uncheck();
                        } else {
                            self.check();
                        }
                    }
                });
            }
            $label.append(self.element);
            this._refresh();
        },_refresh: function() {
            var $label = this._label();
            $label.addClass("ui-marmots-label-" + this._type());
            for (i in this.skins) {
                $label.removeClass(this.skins[i]);
            }
            $label.addClass(this.options.skin);
            $label.addClass(this.options.position);
            if (this.element.is(":checked")) {
                $label.addClass("on");
            }
        },_setOptions: function() {
            this._superApply(arguments);
            this._refresh();
        },_setOption: function(key, value) {
            this._super(key, value);
        },_type: function() {
            return this.element.attr("type") == "radio" ? "radio" : "check";
        },_isRadio: function() {
            return this._type() == "radio";
        },_isCheck: function() {
            return this._type() == "check";
        },_label: function() {
            return this.element.parent();
        },_destroy: function() {
            this._label().removeClass("on");
            this._label().removeClass("ui-marmots-label-" + this._type());
        },isChecked: function() {
            return this.element.is(":checked");
        },checked: function() {
            return this.element.is(":checked");
        },check: function() {
            if (this._isRadio()) {
                this.uncheckAll();
            }
            this.element.prop("checked", true);
            this._label().addClass("on");
        },uncheck: function() {
            this.element.prop("checked", false);
            this.element.parent().removeClass("on");
        },toggle: function() {
            if (this.isChecked()) {
                this.uncheck();
            } else {
                this.check();
            }
        },uncheckAll: function() {
            var name = this.element.attr("name");
            $('input[name="' + name + '"]').checkbox("uncheck");
        },val: function() {
            if (this._isRadio()) {
                var name = this.element.attr("name");
                return $('input[name="' + name + '"]:checked').val();
            } else {
                return this.isChecked() ? this.element.val() : false;
            }
        },isRadio: function() {
            return this._isRadio();
        },isCheck: function() {
            return this._isCheck();
        },reset: function() {
            if (this.defaultValue) {
                this.check();
            } else {
                this.uncheck();
            }
        }});
})(jQuery);
$(document).ready(function() {
    $("input:checkbox, input:radio").checkbox();
    $(document).on("capgemini.ajax.load", function(event, element) {
        $("input:checkbox, input:radio", element).checkbox();
    });
    $(document).on("click", ".checkbox-trigger", function() {
        var $element = $($(this).attr("data-element"));
        var action = $(this).attr("data-action");
        $element.checkbox(action);
        return false;
    });
});
$(function() {
    var generateTabs = function($context) {
        $(".switch", $context).tabs({create: function(event, ui) {
                var length = $(this).find("ul:first").find("li").length;
                tabWidth = 100 / length;
                var _pointerWidth = (!$(this).hasClass("plus-one")) ? 100 / length : 100 / (length + 1);
                var _counter = (!$(this).hasClass("plus-one")) ? 1 : 2;
                $("li", this).css("width", tabWidth + "%");
                var flag = false;
                $(this).find("ul:first").find("li").bind("touchstart click", function() {
                    if (!flag) {
                        flag = true;
                        setTimeout(function() {
                            flag = false;
                        }, 100);
                        var $wizard = $(this).closest(".wizard");
                        if ($wizard.length > 0) {
                            $(document).trigger("capgemini.wizard.resize", $wizard);
                        }
                    }
                });
                $(".ui-tabs-panel", this).each(function(i, el) {
                    var _this = $(el);
                    _this.prepend('<div class="pointer"></div>');
                    $(".pointer", _this).css("left", (_pointerWidth * (i + _counter)) - (_pointerWidth / 1.7) + "%");
                    if (i > 0) {
                        _this.hide();
                    }
                });
                var $wizard = $(this).closest(".wizard");
                if ($wizard.length > 0) {
                    $(document).trigger("capgemini.wizard.resize", $wizard);
                }
            }});
    };
    $(document).ready(function() {
        generateTabs($(this));
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        generateTabs($(element));
    });
});
$(document).ready(function() {
    var $content = $(".capgemini-carousel");
    $(".carousel-close").click(function() {
        var $this = $(this), $carousel = $this.closest(".capgemini-carousel");
        $carousel.fadeOut("200", function() {
            $this.remove();
        });
    });
    $(".carousel").each(function() {
        var $carousel = $(this), focused = false;
        $carousel.carousel();
        $(this).find("*").focus(function() {
            focused = true;
            $carousel.carousel("pause");
        }).focusout(function() {
            focused = false;
            $carousel.carousel("cycle");
        });
        $(this).hover(function() {
            $carousel.carousel("pause");
        }, function() {
            if (!focused) {
                $carousel.carousel("cycle");
            }
        });
    });
    var calculateHeight = function() {
        var $this = $(this), $carouselItem = $(".item"), size = 0;
        $carouselItem.each(function() {
            if (size < $(this).outerHeight()) {
                size = $(this).outerHeight();
            }
        });
        return size;
    };
    var $carouselContainer = $(".carousel-inner");
    $carouselContainer.css("height", calculateHeight);
    $(window).resize(function() {
        $carouselContainer.css("height", calculateHeight);
    });
});
!function($) {
    $.expr[":"].icontains = function(obj, index, meta) {
        return $(obj).text().toUpperCase().indexOf(meta[3].toUpperCase()) >= 0;
    };
    var Selectpicker = function(element, options, e) {
        if (e) {
            e.stopPropagation();
            e.preventDefault();
        }
        this.$element = $(element);
        this.$newElement = null;
        this.$button = null;
        this.$menu = null;
        this.options = $.extend({}, $.fn.selectpicker.defaults, this.$element.data(), typeof options == "object" && options);
        if (this.options.title === null) {
            this.options.title = this.$element.attr("title");
        }
        this.val = Selectpicker.prototype.val;
        this.render = Selectpicker.prototype.render;
        this.refresh = Selectpicker.prototype.refresh;
        this.setStyle = Selectpicker.prototype.setStyle;
        this.selectAll = Selectpicker.prototype.selectAll;
        this.deselectAll = Selectpicker.prototype.deselectAll;
        this.init();
    };
    Selectpicker.prototype = {constructor: Selectpicker,init: function() {
            this.$element.hide();
            this.multiple = this.$element.prop("multiple");
            var id = this.$element.attr("id");
            this.$newElement = this.createView();
            this.$element.after(this.$newElement);
            this.$menu = this.$newElement.find("> .dropdown-menu");
            this.$button = this.$newElement.find("> button");
            this.$searchbox = this.$newElement.find("input");
            if (id !== undefined) {
                var that = this;
                this.$button.attr("data-id", id);
                $('label[for="' + id + '"]').click(function(e) {
                    e.preventDefault();
                    that.$button.focus();
                });
            }
            this.checkDisabled();
            this.clickListener();
            if (this.options.liveSearch) {
                this.liveSearchListener();
            }
            this.render();
            this.liHeight();
            this.setStyle();
            this.setWidth();
            if (this.options.container) {
                this.selectPosition();
            }
            this.$menu.data("this", this);
            this.$newElement.data("this", this);
        },createDropdown: function() {
            var multiple = this.multiple ? " show-tick" : "";
            var header = this.options.header ? '<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>' + this.options.header + "</div>" : "";
            var searchbox = this.options.liveSearch ? '<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>' : "";
            var drop = '<div class="btn-group bootstrap-select' + multiple + '"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">' + header + searchbox + '<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';
            return $(drop);
        },createView: function() {
            var $drop = this.createDropdown();
            var $li = this.createLi();
            $drop.find("ul").append($li);
            return $drop;
        },reloadLi: function() {
            this.destroyLi();
            var $li = this.createLi();
            this.$menu.find("ul").append($li);
        },destroyLi: function() {
            this.$menu.find("li").remove();
        },createLi: function() {
            var that = this, _liA = [], _liHtml = "";
            this.$element.find("option").each(function() {
                var $this = $(this);
                var optionClass = $this.attr("class") || "";
                var inline = $this.attr("style") || "";
                var text = $this.data("content") ? $this.data("content") : $this.html();
                var subtext = $this.data("subtext") !== undefined ? '<small class="muted text-muted">' + $this.data("subtext") + "</small>" : "";
                var icon = $this.data("icon") !== undefined ? '<i class="' + that.options.iconBase + " " + $this.data("icon") + '"></i> ' : "";
                if (icon !== "" && ($this.is(":disabled") || $this.parent().is(":disabled"))) {
                    icon = "<span>" + icon + "</span>";
                }
                if (!$this.data("content")) {
                    text = icon + '<span class="text">' + text + subtext + "</span>";
                }
                if (that.options.hideDisabled && ($this.is(":disabled") || $this.parent().is(":disabled"))) {
                    _liA.push('<a style="min-height: 0; padding: 0"></a>');
                } else {
                    if ($this.parent().is("optgroup") && $this.data("divider") !== true) {
                        if ($this.index() === 0) {
                            var label = $this.parent().attr("label");
                            var labelSubtext = $this.parent().data("subtext") !== undefined ? '<small class="muted text-muted">' + $this.parent().data("subtext") + "</small>" : "";
                            var labelIcon = $this.parent().data("icon") ? '<i class="' + $this.parent().data("icon") + '"></i> ' : "";
                            label = labelIcon + '<span class="text">' + label + labelSubtext + "</span>";
                            if ($this[0].index !== 0) {
                                _liA.push('<div class="div-contain"><div class="divider"></div></div><dt>' + label + "</dt>" + that.createA(text, "opt " + optionClass, inline));
                            } else {
                                _liA.push("<dt>" + label + "</dt>" + that.createA(text, "opt " + optionClass, inline));
                            }
                        } else {
                            _liA.push(that.createA(text, "opt " + optionClass, inline));
                        }
                    } else {
                        if ($this.data("divider") === true) {
                            _liA.push('<div class="div-contain"><div class="divider"></div></div>');
                        } else {
                            if ($(this).data("hidden") === true) {
                                _liA.push("");
                            } else {
                                _liA.push(that.createA(text, optionClass, inline));
                            }
                        }
                    }
                }
            });
            $.each(_liA, function(i, item) {
                _liHtml += "<li rel=" + i + ">" + item + "</li>";
            });
            if (!this.multiple && this.$element.find("option:selected").length === 0 && !this.options.title) {
                this.$element.find("option").eq(0).prop("selected", true).attr("selected", "selected");
            }
            return $(_liHtml);
        },createA: function(text, classes, inline) {
            return '<a tabindex="0" class="' + classes + '" style="' + inline + '">' + text + '<i class="' + this.options.iconBase + " " + this.options.tickIcon + ' icon-ok check-mark"></i></a>';
        },render: function() {
            var that = this;
            this.$element.find("option").each(function(index) {
                that.setDisabled(index, $(this).is(":disabled") || $(this).parent().is(":disabled"));
                that.setSelected(index, $(this).is(":selected"));
            });
            this.tabIndex();
            var selectedItems = this.$element.find("option:selected").map(function() {
                var $this = $(this);
                var icon = $this.data("icon") && that.options.showIcon ? '<i class="' + that.options.iconBase + " " + $this.data("icon") + '"></i> ' : "";
                var subtext;
                if (that.options.showSubtext && $this.attr("data-subtext") && !that.multiple) {
                    subtext = ' <small class="muted text-muted">' + $this.data("subtext") + "</small>";
                } else {
                    subtext = "";
                }
                if ($this.data("content") && that.options.showContent) {
                    return $this.data("content");
                } else {
                    if ($this.attr("title") !== undefined) {
                        return $this.attr("title");
                    } else {
                        return icon + $this.html() + subtext;
                    }
                }
            }).toArray();
            var title = !this.multiple ? selectedItems[0] : selectedItems.join(this.options.multipleSeparator);
            if (this.multiple && this.options.selectedTextFormat.indexOf("count") > -1) {
                var max = this.options.selectedTextFormat.split(">");
                var notDisabled = this.options.hideDisabled ? ":not([disabled])" : "";
                if ((max.length > 1 && selectedItems.length > max[1]) || (max.length == 1 && selectedItems.length >= 2)) {
                    title = this.options.countSelectedText.replace("{0}", selectedItems.length).replace("{1}", this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])' + notDisabled).length);
                }
            }
            if (!title) {
                title = this.options.title !== undefined ? this.options.title : this.options.noneSelectedText;
            }
            this.$button.attr("title", $.trim(title));
            this.$newElement.find(".filter-option").html(title);
        },setStyle: function(style, status) {
            if (this.$element.attr("class")) {
                this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi, ""));
            }
            var buttonClass = style ? style : this.options.style;
            if (status == "add") {
                this.$button.addClass(buttonClass);
            } else {
                if (status == "remove") {
                    this.$button.removeClass(buttonClass);
                } else {
                    this.$button.removeClass(this.options.style);
                    this.$button.addClass(buttonClass);
                }
            }
        },liHeight: function() {
            var $selectClone = this.$menu.parent().clone().appendTo("body"), $menuClone = $selectClone.addClass("open").find("> .dropdown-menu"), liHeight = $menuClone.find("li > a").outerHeight(), headerHeight = this.options.header ? $menuClone.find(".popover-title").outerHeight() : 0, searchHeight = this.options.liveSearch ? $menuClone.find(".bootstrap-select-searchbox").outerHeight() : 0;
            $selectClone.remove();
            this.$newElement.data("liHeight", liHeight).data("headerHeight", headerHeight).data("searchHeight", searchHeight);
        },setSize: function() {
            var that = this, menu = this.$menu, menuInner = menu.find(".inner"), selectHeight = this.$newElement.outerHeight(), liHeight = this.$newElement.data("liHeight"), headerHeight = this.$newElement.data("headerHeight"), searchHeight = this.$newElement.data("searchHeight"), divHeight = menu.find("li .divider").outerHeight(true), menuPadding = parseInt(menu.css("padding-top")) + parseInt(menu.css("padding-bottom")) + parseInt(menu.css("border-top-width")) + parseInt(menu.css("border-bottom-width")), notDisabled = this.options.hideDisabled ? ":not(.disabled)" : "", $window = $(window), menuExtras = menuPadding + parseInt(menu.css("margin-top")) + parseInt(menu.css("margin-bottom")) + 2, menuHeight, selectOffsetTop, selectOffsetBot, posVert = function() {
                selectOffsetTop = that.$newElement.offset().top - $window.scrollTop();
                selectOffsetBot = $window.height() - selectOffsetTop - selectHeight;
            };
            posVert();
            if (this.options.header) {
                menu.css("padding-top", 0);
            }
            if (this.options.size == "auto") {
                var getSize = function() {
                    var minHeight;
                    posVert();
                    menuHeight = selectOffsetBot - menuExtras;
                    if (that.options.dropupAuto) {
                        that.$newElement.toggleClass("dropup", (selectOffsetTop > selectOffsetBot) && ((menuHeight - menuExtras) < menu.height()));
                    }
                    if (that.$newElement.hasClass("dropup")) {
                        menuHeight = selectOffsetTop - menuExtras;
                    }
                    if ((menu.find("li").length + menu.find("dt").length) > 3) {
                        minHeight = liHeight * 3 + menuExtras - 2;
                    } else {
                        minHeight = 0;
                    }
                    menu.css({"max-height": menuHeight + "px",overflow: "hidden","min-height": minHeight + "px"});
                    menuInner.css({"max-height": menuHeight - headerHeight - searchHeight - menuPadding + "px","overflow-y": "auto","min-height": minHeight - menuPadding + "px"});
                };
                getSize();
                $(window).resize(getSize);
                $(window).scroll(getSize);
            } else {
                if (this.options.size && this.options.size != "auto" && menu.find("li" + notDisabled).length > this.options.size) {
                    var optIndex = menu.find("li" + notDisabled + " > *").filter(":not(.div-contain)").slice(0, this.options.size).last().parent().index();
                    var divLength = menu.find("li").slice(0, optIndex + 1).find(".div-contain").length;
                    menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding;
                    if (that.options.dropupAuto) {
                        this.$newElement.toggleClass("dropup", (selectOffsetTop > selectOffsetBot) && (menuHeight < menu.height()));
                    }
                    menu.css({"max-height": menuHeight + headerHeight + searchHeight + "px",overflow: "hidden"});
                    menuInner.css({"max-height": menuHeight - menuPadding + "px","overflow-y": "auto"});
                }
            }
        },setWidth: function() {
            if (this.options.width == "auto") {
                this.$menu.css("min-width", "0");
                var selectClone = this.$newElement.clone().appendTo("body");
                var ulWidth = selectClone.find("> .dropdown-menu").css("width");
                selectClone.remove();
                this.$newElement.css("width", ulWidth);
            } else {
                if (this.options.width == "fit") {
                    this.$menu.css("min-width", "");
                    this.$newElement.css("width", "").addClass("fit-width");
                } else {
                    if (this.options.width) {
                        this.$menu.css("min-width", "");
                        this.$newElement.css("width", this.options.width);
                    } else {
                        this.$menu.css("min-width", "");
                        this.$newElement.css("width", "");
                    }
                }
            }
            if (this.$newElement.hasClass("fit-width") && this.options.width !== "fit") {
                this.$newElement.removeClass("fit-width");
            }
        },selectPosition: function() {
            var that = this, drop = "<div />", $drop = $(drop), pos, actualHeight, getPlacement = function($element) {
                $drop.addClass($element.attr("class")).toggleClass("dropup", $element.hasClass("dropup"));
                pos = $element.offset();
                actualHeight = $element.hasClass("dropup") ? 0 : $element[0].offsetHeight;
                $drop.css({top: pos.top + actualHeight,left: pos.left,width: $element[0].offsetWidth,position: "absolute"});
            };
            this.$newElement.on("click", function() {
                if ($(this).siblings()[0].disabled != true) {
                    getPlacement($(this));
                    $drop.appendTo(that.options.container);
                    $drop.toggleClass("open", !$(this).hasClass("open"));
                    $drop.append(that.$menu);
                }
            });
            $(window).resize(function() {
                getPlacement(that.$newElement);
            });
            $(window).on("scroll", function() {
                getPlacement(that.$newElement);
            });
            $("html").on("click", function(e) {
                if ($(e.target).closest(that.$newElement).length < 1) {
                    $drop.removeClass("open");
                }
            });
        },mobile: function() {
            this.$element.addClass("mobile-device").appendTo(this.$newElement);
            if (this.options.container) {
                this.$menu.hide();
            }
        },refresh: function() {
            this.reloadLi();
            this.render();
            this.setWidth();
            this.setStyle();
            this.checkDisabled();
            this.liHeight();
        },update: function() {
            this.reloadLi();
            this.setWidth();
            this.setStyle();
            this.checkDisabled();
            this.liHeight();
        },setSelected: function(index, selected) {
            this.$menu.find("li").eq(index).toggleClass("selected", selected);
        },setDisabled: function(index, disabled) {
            if (disabled) {
                this.$menu.find("li").eq(index).addClass("disabled").find("a").attr("href", "#").attr("tabindex", -1);
            } else {
                this.$menu.find("li").eq(index).removeClass("disabled").find("a").removeAttr("href").attr("tabindex", 0);
            }
        },isDisabled: function() {
            return this.$element.is(":disabled");
        },checkDisabled: function() {
            var that = this;
            if (this.isDisabled()) {
                this.$button.addClass("disabled").attr("tabindex", -1);
            } else {
                if (this.$button.hasClass("disabled")) {
                    this.$button.removeClass("disabled");
                }
                if (this.$button.attr("tabindex") == -1) {
                    if (!this.$element.data("tabindex")) {
                        this.$button.removeAttr("tabindex");
                    }
                }
            }
            this.$button.on("vclick", function() {
                return !that.isDisabled();
            });
        },tabIndex: function() {
            if (this.$element.is("[tabindex]")) {
                this.$element.data("tabindex", this.$element.attr("tabindex"));
                this.$button.attr("tabindex", this.$element.data("tabindex"));
            }
        },clickListener: function() {
            var that = this;
            $("body").on("touchstart.dropdown", ".dropdown-menu", function(e) {
                e.stopPropagation();
            });
            this.$newElement.on("click", function() {
                that.setSize();
                if (!that.options.liveSearch && !that.multiple) {
                    setTimeout(function() {
                        that.$menu.find(".selected a").focus();
                    }, 10);
                }
            });
            this.$menu.on("click", "li a", function(e) {
                var clickedIndex = $(this).parent().index(), prevValue = that.$element.val(), prevIndex = that.$element.prop("selectedIndex");
                if (that.multiple) {
                    e.stopPropagation();
                }
                e.preventDefault();
                if (!that.isDisabled() && !$(this).parent().hasClass("disabled")) {
                    var $options = that.$element.find("option");
                    var $option = $options.eq(clickedIndex);
                    if (!that.multiple) {
                        $options.prop("selected", false);
                        $option.prop("selected", true);
                    } else {
                        var state = $option.prop("selected");
                        $option.prop("selected", !state);
                    }
                    if (!that.multiple) {
                        that.$button.focus();
                    } else {
                        if (that.options.liveSearch) {
                            that.$searchbox.focus();
                        }
                    }
                    if ((prevValue != that.$element.val() && that.multiple) || (prevIndex != that.$element.prop("selectedIndex") && !that.multiple)) {
                        that.$element.change();
                    }
                }
            });
            this.$menu.on("click", "li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)", function(e) {
                if (e.target == this) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (!that.options.liveSearch) {
                        that.$button.focus();
                    } else {
                        that.$searchbox.focus();
                    }
                }
            });
            this.$menu.on("click", ".popover-title .close", function() {
                that.$button.focus();
            });
            this.$searchbox.on("click", function(e) {
                e.stopPropagation();
            });
            this.$element.change(function() {
                that.render();
            });
        },liveSearchListener: function() {
            var that = this, no_results = $('<li class="no-results"></li>');
            this.$newElement.on("click.dropdown.data-api", function() {
                that.$menu.find(".active").removeClass("active");
                if (!!that.$searchbox.val()) {
                    that.$searchbox.val("");
                    that.$menu.find("li").show();
                    if (!!no_results.parent().length) {
                        no_results.remove();
                    }
                }
                if (!that.multiple) {
                    that.$menu.find(".selected").addClass("active");
                }
                setTimeout(function() {
                    that.$searchbox.focus();
                }, 10);
            });
            this.$searchbox.on("input propertychange", function() {
                if (that.$searchbox.val()) {
                    that.$menu.find("li").show().not(":icontains(" + that.$searchbox.val() + ")").hide();
                    if (!that.$menu.find("li").filter(":visible:not(.no-results)").length) {
                        if (!!no_results.parent().length) {
                            no_results.remove();
                        }
                        no_results.html('No results match "' + that.$searchbox.val() + '"').show();
                        that.$menu.find("li").last().after(no_results);
                    } else {
                        if (!!no_results.parent().length) {
                            no_results.remove();
                        }
                    }
                } else {
                    that.$menu.find("li").show();
                    if (!!no_results.parent().length) {
                        no_results.remove();
                    }
                }
                that.$menu.find("li.active").removeClass("active");
                that.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();
                $(this).focus();
            });
            this.$menu.on("mouseenter", "a", function(e) {
                that.$menu.find(".active").removeClass("active");
                $(e.currentTarget).parent().not(".disabled").addClass("active");
            });
            this.$menu.on("mouseleave", "a", function() {
                that.$menu.find(".active").removeClass("active");
            });
        },val: function(value) {
            if (value !== undefined) {
                this.$element.val(value);
                this.$element.change();
                return this.$element;
            } else {
                return this.$element.val();
            }
        },selectAll: function() {
            this.$element.find("option").prop("selected", true).attr("selected", "selected");
            this.render();
        },deselectAll: function() {
            this.$element.find("option").prop("selected", false).removeAttr("selected");
            this.render();
        },keydown: function(e) {
            var $this, $items, $parent, index, next, first, last, prev, nextPrev, that, prevIndex, isActive, keyCodeMap = {32: " ",48: "0",49: "1",50: "2",51: "3",52: "4",53: "5",54: "6",55: "7",56: "8",57: "9",59: ";",65: "a",66: "b",67: "c",68: "d",69: "e",70: "f",71: "g",72: "h",73: "i",74: "j",75: "k",76: "l",77: "m",78: "n",79: "o",80: "p",81: "q",82: "r",83: "s",84: "t",85: "u",86: "v",87: "w",88: "x",89: "y",90: "z",96: "0",97: "1",98: "2",99: "3",100: "4",101: "5",102: "6",103: "7",104: "8",105: "9"};
            $this = $(this);
            $parent = $this.parent();
            if ($this.is("input")) {
                $parent = $this.parent().parent();
            }
            that = $parent.data("this");
            if (that.options.liveSearch) {
                $parent = $this.parent().parent();
            }
            if (that.options.container) {
                $parent = that.$menu;
            }
            $items = $("[role=menu] li:not(.divider) a", $parent);
            isActive = that.$menu.parent().hasClass("open");
            if (that.options.liveSearch) {
                if (/(^9$|27)/.test(e.keyCode) && isActive && that.$menu.find(".active").length === 0) {
                    e.preventDefault();
                    that.$menu.parent().removeClass("open");
                    that.$button.focus();
                }
                $items = $("[role=menu] li:not(.divider):visible", $parent);
                if (!$this.val() && !/(38|40)/.test(e.keyCode)) {
                    if ($items.filter(".active").length === 0) {
                        $items = that.$newElement.find("li").filter(":icontains(" + keyCodeMap[e.keyCode] + ")");
                    }
                }
            }
            if (!$items.length) {
                return;
            }
            if (/(38|40)/.test(e.keyCode)) {
                if (!isActive) {
                    that.$menu.parent().addClass("open");
                }
                index = $items.index($items.filter(":focus"));
                first = $items.parent(":not(.disabled):visible").first().index();
                last = $items.parent(":not(.disabled):visible").last().index();
                next = $items.eq(index).parent().nextAll(":not(.disabled):visible").eq(0).index();
                prev = $items.eq(index).parent().prevAll(":not(.disabled):visible").eq(0).index();
                nextPrev = $items.eq(next).parent().prevAll(":not(.disabled):visible").eq(0).index();
                if (that.options.liveSearch) {
                    $items.each(function(i) {
                        if ($(this).is(":not(.disabled)")) {
                            $(this).data("index", i);
                        }
                    });
                    index = $items.index($items.filter(".active"));
                    first = $items.filter(":not(.disabled):visible").first().data("index");
                    last = $items.filter(":not(.disabled):visible").last().data("index");
                    next = $items.eq(index).nextAll(":not(.disabled):visible").eq(0).data("index");
                    prev = $items.eq(index).prevAll(":not(.disabled):visible").eq(0).data("index");
                    nextPrev = $items.eq(next).prevAll(":not(.disabled):visible").eq(0).data("index");
                }
                prevIndex = $this.data("prevIndex");
                if (e.keyCode == 38) {
                    if (that.options.liveSearch) {
                        index -= 1;
                    }
                    if (index != nextPrev && index > prev) {
                        index = prev;
                    }
                    if (index < first) {
                        index = first;
                    }
                    if (index == prevIndex) {
                        index = last;
                    }
                }
                if (e.keyCode == 40) {
                    if (that.options.liveSearch) {
                        index += 1;
                    }
                    if (index == -1) {
                        index = 0;
                    }
                    if (index != nextPrev && index < next) {
                        index = next;
                    }
                    if (index > last) {
                        index = last;
                    }
                    if (index == prevIndex) {
                        index = first;
                    }
                }
                $this.data("prevIndex", index);
                if (!that.options.liveSearch) {
                    $items.eq(index).focus();
                } else {
                    e.preventDefault();
                    if (!$this.is(".dropdown-toggle")) {
                        $items.removeClass("active");
                        $items.eq(index).addClass("active").find("a").focus();
                        $this.focus();
                    }
                }
            } else {
                if (!$this.is("input")) {
                    var keyIndex = [];
                    $items.each(function() {
                        if ($(this).parent().is(":not(.disabled)")) {
                            if ($.trim($(this).text().toLowerCase()).substring(0, 1) == keyCodeMap[e.keyCode]) {
                                keyIndex.push($(this).parent().index());
                            }
                        }
                    });
                    var count = $(document).data("keycount");
                    count++;
                    $(document).data("keycount", count);
                    var prevKey = $.trim($(":focus").text().toLowerCase()).substring(0, 1);
                    if (prevKey != keyCodeMap[e.keyCode]) {
                        count = 1;
                        $(document).data("keycount", count);
                    } else {
                        if (count >= keyIndex.length) {
                            $(document).data("keycount", 0);
                        }
                    }
                    $items.eq(keyIndex[count - 1]).focus();
                }
            }
            if (/(13|32|^9$)/.test(e.keyCode) && isActive) {
                if (!/(32)/.test(e.keyCode)) {
                    e.preventDefault();
                }
                if (!that.options.liveSearch) {
                    $(":focus").click();
                } else {
                    if (!/(32)/.test(e.keyCode)) {
                        that.$menu.find(".active a").click();
                        $this.focus();
                    }
                }
                $(document).data("keycount", 0);
            }
            if ((/(^9$|27)/.test(e.keyCode) && isActive && (that.multiple || that.options.liveSearch)) || (/(27)/.test(e.keyCode) && !isActive)) {
                that.$menu.parent().removeClass("open");
                that.$button.focus();
            }
        },hide: function() {
            this.$newElement.hide();
        },show: function() {
            this.$newElement.show();
        },destroy: function() {
            this.$newElement.remove();
            this.$element.remove();
        }};
    $.fn.selectpicker = function(option, event) {
        var args = arguments;
        var value;
        var chain = this.each(function() {
            if ($(this).is("select")) {
                var $this = $(this), data = $this.data("selectpicker"), options = typeof option == "object" && option;
                if (!data) {
                    $this.data("selectpicker", (data = new Selectpicker(this, options, event)));
                } else {
                    if (options) {
                        for (var i in options) {
                            data.options[i] = options[i];
                        }
                    }
                }
                if (typeof option == "string") {
                    var property = option;
                    if (data[property] instanceof Function) {
                        [].shift.apply(args);
                        value = data[property].apply(data, args);
                    } else {
                        value = data.options[property];
                    }
                }
            }
        });
        if (value !== undefined) {
            return value;
        } else {
            return chain;
        }
    };
    $.fn.selectpicker.defaults = {style: "btn-default",size: "auto",title: null,selectedTextFormat: "values",noneSelectedText: "Nothing selected",countSelectedText: "{0} of {1} selected",width: false,container: false,hideDisabled: false,showSubtext: false,showIcon: true,showContent: true,dropupAuto: true,header: false,liveSearch: false,multipleSeparator: ", ",iconBase: "glyphicon",tickIcon: "glyphicon-ok"};
    $(document).data("keycount", 0).on("keydown", ".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input", Selectpicker.prototype.keydown);
}(window.jQuery);
var isMobile = {Android: function() {
        return navigator.userAgent.match(/Android/i);
    },BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }};
$(function() {
    if (isMobile.any()) {
        $(".selectpicker").selectpicker("mobile");
    } else {
        $(".selectpicker").selectpicker();
    }
});
$(function() {
    $(document).on("dialogopen", ".ui-dialog", function(event, ui) {
        fluidDialog();
    });
    $(document).on("dialogclose", ".ui-dialog", function(event, ui) {
        $(window).off("resize.responsive");
    });
    var fluidDialog = function() {
        $(".ui-dialog:visible").each(function() {
            var $this = $(this);
            var $dialog = $this.find(".ui-dialog-content");
            if ($dialog.dialog("option", "maxWidth") && $dialog.dialog("option", "width")) {
                $this.css("max-width", $dialog.dialog("option", "maxWidth"));
                $dialog.dialog("option", "position", $dialog.dialog("option", "position"));
            }
            if ($dialog.dialog("option", "fluid")) {
                $(window).on("resize.responsive", function() {
                    var wWidth = $(window).width();
                    if (wWidth < $dialog.dialog("option", "maxWidth") + 50) {
                        $this.css("width", "90%");
                    }
                    if ($dialog.dialog("option", "height") === undefined) {
                        var hHeight = $(window).height();
                        if (hHeight < $this.height() + 50) {
                            $this.css("height", "90%");
                            $dialog.css("max-height", $this.height() - $this.find(".ui-dialog-titlebar").height());
                        } else {
                            $this.css("height", "auto");
                            $dialog.css("max-height", $dialog.css("height"));
                        }
                    }
                    $dialog.dialog("option", "position", $dialog.dialog("option", "position"));
                });
                $(window).trigger("resize.responsive");
            }
        });
    };
    $(".lightbox-trigger").click(function() {
        if ($(this).attr("data-element") !== undefined) {
            $("#" + $(this).attr("data-element")).each(function(i, el) {
                var _this = $(el);
                var dialogWidth;
                if (_this.attr("data-width") !== undefined) {
                    dialogWidth = parseInt(_this.attr("data-width"));
                } else {
                    dialogWidth = 600;
                }
                var dialogHeight;
                if (_this.attr("data-height") !== undefined) {
                    dialogHeight = parseInt(_this.attr("data-height"));
                }
                _this.dialog({dialogClass: "bbva-lightbox",title: _this.attr("data-title"),autoOpen: true,resizable: false,draggable: false,modal: true,fluid: true,width: "auto",maxWidth: dialogWidth,height: dialogHeight,open: function(event, ui) {
                        $(document.body).css("overflow", "hidden");
                        fluidDialog();
                    },close: function() {
                        $(document.body).css("overflow", "auto");
                    }});
            });
        } else {
            if ($(this).attr("data-href") !== undefined || $(this).attr("href") !== undefined) {
                var url = $(this).attr("data-href");
                if (url === undefined) {
                    url = $(this).attr("href");
                }
                $.ajax({url: url,success: function(html) {
                        var _this = $(html);
                        var dialogWidth;
                        if (_this.attr("data-width") !== undefined) {
                            dialogWidth = parseInt(_this.attr("data-width"));
                        } else {
                            dialogWidth = 600;
                        }
                        var dialogHeight;
                        if (_this.attr("data-height") !== undefined) {
                            dialogHeight = parseInt(_this.attr("data-height"));
                        }
                        _this.dialog({dialogClass: "bbva-lightbox",title: _this.attr("data-title"),autoOpen: true,resizable: false,draggable: false,modal: true,fluid: true,width: "auto",maxWidth: dialogWidth,height: dialogHeight,open: function(event, ui) {
                                $(document.body).css("overflow", "hidden");
                                fluidDialog();
                                $(document).trigger("capgemini.ajax.load", _this);
                            },close: function() {
                                $(document.body).css("overflow", "auto");
                                _this.remove();
                            }});
                    }});
            }
        }
        return false;
    });
});
$(function() {
    $(document).on("click", ".modal-trigger", function() {
        var attrs = $(this).dataAttrs();
        var href = $(this).attr("href");
        if (href === undefined) {
            href = attrs.href;
        }
        if (href !== undefined) {
            $.ajax({url: href,success: function(data) {
                    var $modal = $('<div class="modal ' + (attrs.transition === undefined ? "" : attrs.transition) + '" tabindex="-1" role="dialog" aria-hidden="true"></div>');
                    $modal.append(data);
                    $(document.body).append($modal);
                    if (Modernizr.touch) {
                        $modal.on("show.bs.modal", function() {
                            $(this).css({position: "absolute",marginTop: $(window).scrollTop() + "px",bottom: "auto"});
                            setTimeout(function() {
                                $(".modal-backdrop").css({position: "absolute",top: 0,left: 0,width: "100%",height: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight) + "px"});
                            }, 0);
                        });
                    }
                    $modal.on("shown.bs.modal", function(event) {
                        $(document).trigger("capgemini.ajax.load", $modal);
                        $("*").on("focus", function(event) {
                            if ($(event.target).closest(".modal") == 0) {
                                event.preventDefault();
                                return false;
                            }
                        });
                    }).on("hidden.bs.modal", function(event) {
                        $modal.remove();
                        $("*").off("focus");
                    });
                    $modal.modal({backdrop: "static"});
                }});
        }
        return false;
    });
});
$(function() {
    var moveTo = function() {
        if (Modernizr.mq("(max-width:480px)")) {
            $('.move-to[data-device*="phone"]').each(function() {
                var element = $(this).attr("data-element");
                if ($.trim($(this).html()) == "") {
                    var $element = $('.move-to[data-device*="tablet"][data-element=' + element + "]").children();
                    if ($element.length == 0) {
                        var $element = $('.move-to[data-device*="desktop"][data-element=' + element + "]").children();
                    }
                    $(this).append($element);
                }
            });
        } else {
            if (Modernizr.mq("(min-width:481px) and (max-width:768px)")) {
                $('.move-to[data-device*="tablet"]').each(function() {
                    var element = $(this).attr("data-element");
                    if ($.trim($(this).html()) == "") {
                        var $element = $('.move-to[data-device*="phone"][data-element=' + element + "]").children();
                        if ($element.length == 0) {
                            var $element = $('.move-to[data-device*="desktop"][data-element=' + element + "]").children();
                        }
                        $(this).append($element);
                    }
                });
            } else {
                $('.move-to[data-device="desktop"]').each(function() {
                    var element = $(this).attr("data-element");
                    if ($.trim($(this).html()) == "") {
                        var $element = $('.move-to[data-device*="tablet"][data-element=' + element + "]").children();
                        if ($element.length == 0) {
                            var $element = $('.move-to[data-device*="phone"][data-element=' + element + "]").children();
                        }
                        $(this).append($element);
                    }
                });
            }
        }
    };
    moveTo();
    $(window).on("throttledresize", function() {
        moveTo();
    });
});
$(document).ready(function() {
    var initTooltips = function($context) {
        $(".tooltip-help").tooltip();
    };
    initTooltips($(document));
    $(document).on("capgemini.ajax.load", function(event, element) {
        initTooltips($(element));
    });
});
function clearErrors($form) {
    if ($form === undefined) {
        $form = $(document);
    }
    $form.find(".tooltip-validation-invalid").tooltip("destroy");
    $form.find(".tooltip-body-error").closest(".tooltip").remove();
    $form.find(".inline-validation-invalid").removeClass("inline-validation-invalid");
    $form.find("." + validatorOptions.errorClass).removeClass(validatorOptions.errorClass);
    $form.find("#error-messages.server-errors").remove();
    $form.find("#error-messages ul").empty();
    $form.find("#error-messages").hide();
    $form.find("#checkError").remove();
}
var highlihtTooltipValidation = function($element, errorClass) {
    if ($element.hasClass("hidden-validable-field")) {
        var $next = $element.next();
        if ($next.hasClass("search-account")) {
            $next.addClass(errorClass);
        }
    } else {
        $element.addClass(errorClass);
        var $target = $element.find("input[type=radio]:visible");
        if ($target.attr("type") == "radio") {
            $("input[type=radio][name=" + $target.attr("name") + "]:visible").each(function(e) {
                if (!$(this).is($target[e]) && (!$(this).parent().hasClass(errorClass))) {
                    highlihtTooltipValidation($(this).parent(), errorClass);
                }
            });
        }
    }
};
var unhighlightField = function($element, errorClass) {
    if ($element.hasClass(validatorOptions.errorClass)) {
        $element.removeClass(validatorOptions.errorClass);
        $element.tooltip("destroy");
        $targetElement = $element;
        if ($element.is("select")) {
            $targetElement = $element.next();
        } else {
            if ($element.is("input[type=radio]")) {
                $targetElement = $element.parent();
            }
        }
        $targetElement.next(".tooltip").remove();
    }
};
var validationMessageBox = function($element) {
    return ($element.attr("type") == "checkbox" || $element.attr("type") == "radio" || $element.hasClass("hidden-validable-field"));
};
var highlightField = function($element, error) {
    var $frm = $element.closest("form");
    var $targetElement = $element;
    if ($element.is("select")) {
        $targetElement = $element.next();
    } else {
        if ($element.is("input[type=radio]")) {
            $targetElement = $element.parent();
        }
    }
    if ($frm.find(".tooltip-body-error").length == 0) {
        $targetElement.tooltip({html: true,title: '<div class="tooltip-body-error"><p class="title">Alerta!</p><span>' + error + '</span></div><div class="tooltip-bubble-error"></div>',animation: false,trigger: "manual hover focus"}).tooltip("show");
    } else {
        $targetElement.tooltip({html: true,title: '<div class="tooltip-body-error"><p class="title">Alerta!</p><span>' + error + '</span></div><div class="tooltip-bubble-error"></div>',trigger: "hover focus",animation: false}).on("show.bs.tooltip", function() {
            $(".tooltip").hide();
        });
    }
    highlihtTooltipValidation($targetElement, validatorOptions.errorClass);
};
var validatorOptions = {ignore: ":not(div:visible > select:hidden, input:visible)",focusInvalid: false,focusCleanup: false,onsubmit: true,onclick: false,onkeydown: false,onkeyup: false,onfocusout: false,errorClass: "tooltip-validation-invalid",validClass: "tooltip-validation-success",errorPlacement: function(error, $element) {
        if (validationMessageBox($element) && !$element.data("error-show-style") == "tooltip") {
            var $step = $element.closest(".step");
            var $container = $step.find("#error-messages");
            if ($container.length == 0) {
                $container = $('<div id="error-messages" class="block-error server-errors"><ul></ul></div>');
                $step.prepend($container);
            }
            var $errorelement = $("<li>");
            $errorelement.append(error);
            $container.append($errorelement);
            $container.show();
        } else {
            if ($element.attr("type") != "radio") {
                highlightField($element, error.text());
            }
        }
    },highlight: function(element, errorClass) {
        if ($(element).hasClass("require-one")) {
            if ($(element).closest("form").find("#checkError")[0] == undefined) {
                var errorText = $(element).closest("form").find(".errorRadio:visible").data("radio-error");
                var errorMessage = $('<p class="block-error iconed-24" id="checkError" ><span class="icon-24 m01-alerta red"></span>' + errorText + "<br/></p>");
                $(element).closest(".step-content-container:visible").prepend(errorMessage);
                var $wizard = $(element).closest(".wizard");
                if ($wizard.length > 0) {
                    $(document).trigger("capgemini.wizard.resize", $wizard);
                }
            }
        } else {
            checkToUnsetDollarStyle($(element));
            highlihtTooltipValidation($(element), errorClass);
        }
    },unhighlight: function(element, errorClass) {
        var $container = $(element).closest(".stepWizard").find(".c-mensajes-errorRefuerzo");
        if (!validationMessageBox($(element), $container)) {
            unhighlightField($(element), errorClass);
        }
        checkToSetDollarStyle($(element));
    },showErrors: function(errorMap, errorList) {
        clearErrors($(this.currentForm));
        this.focusInvalid();
        this.defaultShowErrors();
    },rules: {fullnib: {}}};
var checkToUnsetDollarStyle = function($element) {
    if ($element.hasClass("dollar")) {
        $element.removeClass("dollar");
        $element.addClass("no-dollar");
    }
};
var checkToSetDollarStyle = function($element) {
    if ($element.hasClass("no-dollar")) {
        $element.removeClass("no-dollar");
        $element.addClass("dollar");
    }
};
var initializeInlineValidationForm = function($form) {
    $form.validate({focusInvalid: false,focusCleanup: false,onfocusout: false,onkeyup: false,errorClass: "inline-validation-invalid",errorContainer: "#error-messages",errorLabelContainer: "#error-messages ul",wrapper: "li",showErrors: function(errorMap, errorList) {
            clearErrors($(this.currentForm));
            this.defaultShowErrors();
        }});
    $form.bind("clickoutside", function() {
        clearErrors();
    });
};
var removeFormErrors = function() {
    $(".form-control").on("keyup change vclick", function() {
        if ($(this).hasClass("tooltip-validation-invalid")) {
            $(this).removeClass("tooltip-validation-invalid");
            $(this).tooltip("destroy");
        }
        if ($(this).hasClass("selectpicker") && $(this).next().hasClass("tooltip-validation-invalid")) {
            $(this).next().removeClass("tooltip-validation-invalid");
            $(this).next().tooltip("destroy");
        }
        if ($(this).hasClass("require-one")) {
            $(this).closest("form").find("#checkError").remove();
            var $wizard = $(this).closest(".wizard");
            if ($wizard.length > 0) {
                $(document).trigger("capgemini.wizard.resize", $wizard);
            }
        }
        checkToSetDollarStyle($(this));
    });
};
$(function() {
    removeFormErrors();
    $(document).on("capgemini.ajax.load", function(event, element) {
        removeFormErrors();
    });
    $("form.inline-validation").each(function() {
        initializeInlineValidationForm($(this));
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        $(element).find("form.inline-validation").each(function() {
            initializeInlineValidationForm($(this));
        });
    });
    $("form.tooltip-validation").each(function() {
        $(this).validate(validatorOptions);
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        $(element).find("form.tooltip-validation").each(function() {
            $(this).validate(validatorOptions);
        });
    });
    var handleCheckboxInitialization = function($element, $input) {
        if (!$element.checkbox("checked")) {
            $input.addClass("disabled").attr("disabled", true);
        }
    };
    $("input[requiredif]").each(function() {
        var $input = $(this);
        var $element = $($input.attr("requiredif"));
        setTimeout(function() {
            handleCheckboxInitialization($element, $input);
        }, 300);
        $element.click(function() {
            if ($(this).checkbox("isCheck")) {
                if (!$(this).checkbox("checked")) {
                    $input.removeClass("disabled").removeAttr("disabled").focus();
                } else {
                    $input.val("").addClass("disabled").attr("disabled", true);
                }
            } else {
                if ($(this).checkbox("checked")) {
                    $('input[name="' + $(this).attr("name") + '"]').each(function() {
                        $('input[requiredif="#' + $(this).attr("id") + '"]').each(function() {
                            $(this).val("").addClass("disabled").attr("disabled", true);
                        });
                    });
                    var first = true;
                    $('input[requiredif="#' + $(this).attr("id") + '"]').each(function() {
                        $(this).removeClass("disabled").removeAttr("disabled");
                        if (first) {
                            $(this).focus();
                            first = false;
                        }
                    });
                }
            }
        });
    });
    var enableMaskeds = function($elements) {
        $elements.each(function() {
            $(this).mask($(this).attr("data-mask"));
        });
    };
    enableMaskeds($("[data-mask]"));
    $(document).on("capgemini.ajax.load", function(event, element) {
        enableMaskeds($(element).find("[data-mask]"));
    });
});
jQuery.validator.addMethod("require-one", function(value, element) {
    var valid = false;
    $(element).closest("form").find(".require-one:visible").each(function() {
        if ($(this).is(":checked")) {
            valid = true;
        }
    });
    return valid;
}, "Por favor, selecciona una opción.");
jQuery.validator.addMethod("smaller", function(value, element, selector) {
    return this.optional(element) || parseInt($(element).val(), 10) < parseInt(selector, 10);
}, jQuery.validator.format($.validator.messages.smaller));
jQuery.validator.addMethod("greater", function(value, element, selector) {
    return this.optional(element) || parseInt($(element).val(), 10) > parseInt(selector, 10);
}, jQuery.validator.format($.validator.messages.greater));
jQuery.validator.addMethod("date", function(value, element) {
    var valid = true;
    try {
        $.datepicker.parseDate("dd/mm/yy", $(element).val());
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.date));
jQuery.validator.addMethod("dategreater", function(value, element, params) {
    var valid = true;
    try {
        var input = $.datepicker.parseDate("dd/mm/yy", value);
        var date = $.datepicker.parseDate("dd/mm/yy", params);
        valid = input >= date;
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.dategreater));
jQuery.validator.addMethod("datesmaller", function(value, element, params) {
    var valid = true;
    try {
        var input = $.datepicker.parseDate("dd/mm/yy", $(element).val());
        var date = $.datepicker.parseDate("dd/mm/yy", params);
        valid = input <= date;
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.datesmaller));
jQuery.validator.addMethod("datefuture", function(value, element) {
    var valid = true;
    try {
        var input = $.datepicker.parseDate("dd/mm/yy", $(element).val());
        valid = input >= new Date();
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.datefuture));
jQuery.validator.addMethod("datepast", function(value, element) {
    var valid = true;
    try {
        var input = $.datepicker.parseDate("dd/mm/yy", $(element).val());
        valid = input <= new Date();
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.datepast));
jQuery.validator.addMethod("month", function(value, element) {
    var valid = true;
    try {
        $.datepicker.parseDate("dd/mm/yy", "01/" + $(element).val());
    } catch (e) {
        valid = false;
    }
    return this.optional(element) || valid;
}, jQuery.validator.format($.validator.messages.date));
jQuery.validator.addMethod("regexp", function(value, element, regexp) {
    var re = new RegExp(regexp);
    return this.optional(element) || re.test(value);
}, "Please check your input.");
jQuery.validator.addMethod("requiredif", function(value, element, selector) {
    return (!$(selector).is(":checked") || value != "");
}, jQuery.validator.format($.validator.messages.required));
jQuery.validator.addMethod("requiredoneoftwo", function(value, element, selector) {
    return (!$(selector).val() == "" || !value == "");
}, jQuery.validator.format($.validator.messages.required));
jQuery.validator.addMethod("rut", function(value, element) {
    return (this.optional(element) || checkRutPersona(value));
}, jQuery.validator.format("Invalid RUT"));
jQuery.validator.addMethod("cedula", function(value, element) {
    return (this.optional(element) || checkCedulaPersona(value));
}, jQuery.validator.format("El número de Cédula de identidad debe contener entre 6 y 10 dígitos."));
jQuery.validator.addMethod("claveDigital", function(value, element) {
    return (this.optional(element) || checkClaveDigital(value));
}, jQuery.validator.format("Formato incorrecto. La clave digital debe tener 8 dígitos."));
jQuery.validator.addMethod("claveAcceso", function(value, element) {
    return (this.optional(element) || checkClaveAcceso(value));
}, jQuery.validator.format("El número de Cédula de identidad o la Clave ingresada es incorrecta."));
jQuery.validator.addMethod("claveA", function(value, element) {
    return (this.optional(element) || checkClaveA(value));
}, jQuery.validator.format("Clave de ingreso no válida. Debe poseer 8 caracteres."));
jQuery.validator.addMethod("claveARec", function(value, element) {
    return (this.optional(element) || checkClaveARec(value));
}, jQuery.validator.format("Clave de ingreso no válida. Debe poseer 8 caracteres."));
jQuery.validator.addMethod("claveB", function(value, element) {
    return (this.optional(element) || checkClaveB(value));
}, jQuery.validator.format("Las claves de ingreso no coinciden."));
jQuery.validator.addMethod("claveBRec", function(value, element) {
    return (this.optional(element) || checkClaveBRec(value));
}, jQuery.validator.format("Las claves de ingreso no coinciden."));
jQuery.validator.addMethod("email", function(value, element) {
    return (this.optional(element) || checkEmail(value));
}, jQuery.validator.format("Ingrese una dirección de correo válida."));
jQuery.validator.addMethod("emailB", function(value, element) {
    return (this.optional(element) || checkEmailB(value));
}, jQuery.validator.format("Las direcciones de email no coinciden."));
function str_replace(cadena, cambia_esto, por_esto) {
    return cadena.split(cambia_esto).join(por_esto);
}
function formatNumber(nNmb) {
    var sRes = "";
    nNmb = parseInt(nNmb, 10) + "";
    if (isNaN(nNmb)) {
        return "";
    }
    for (var j, i = nNmb.length - 1, j = 0; i >= 0; i--, j++) {
        sRes = nNmb.charAt(i) + ((j > 0) && (j % 3 == 0) ? "." : "") + sRes;
    }
    return sRes;
}
function checkCDVPersona(dvr) {
    dv = dvr + "";
    if (dv != "0" && dv != "1" && dv != "2" && dv != "3" && dv != "4" && dv != "5" && dv != "6" && dv != "7" && dv != "8" && dv != "9" && dv != "k" && dv != "K") {
        return false;
    }
    return true;
}
function checkDVPersona(crut) {
    largo = crut.length;
    if (largo < 2) {
        return false;
    }
    if (largo > 2) {
        rut = crut.substring(0, largo - 1);
    } else {
        rut = crut.charAt(0);
    }
    dv = crut.charAt(largo - 1);
    if (!checkCDVPersona(dv)) {
        return false;
    }
    if (rut == null || dv == null) {
        return false;
    }
    var dvr = "0";
    suma = 0;
    mul = 2;
    for (i = rut.length - 1; i >= 0; i--) {
        suma = suma + rut.charAt(i) * mul;
        if (mul == 7) {
            mul = 2;
        } else {
            mul++;
        }
    }
    res = suma % 11;
    if (res == 1) {
        dvr = "k";
    } else {
        if (res == 0) {
            dvr = "0";
        } else {
            dvi = 11 - res;
            dvr = dvi + "";
        }
    }
    if (dvr != dv.toLowerCase()) {
        return false;
    }
    return true;
}
function checkCedulaPersona(cedula) {
    if (isNormalInteger(cedula)) {
        return true;
    }
}
function isNormalInteger(str) {
    return /^\+?(0|[1-9]\d*)$/.test(str);
}
function isValidClave(str) {
    return /(?=.*[0-9]{2,})[a-zA-Z0-9]{8,}/g.test(str);
}
function checkClaveDigital(clave) {
    if (isNormalInteger(clave)) {
        return true;
    }
}
function checkClaveAcceso(clave) {
    if (isValidClave(clave)) {
        return true;
    }
}
function checkClaveA(clave) {
    return true;
}
function checkClaveARec(clave) {
    return true;
}
function checkClaveB(clave) {
    var claveA = $("#claveA")[0].value;
    if (clave == claveA) {
        return true;
    }
}
function checkClaveBRec(clave) {
    var claveA = $("#claveARec")[0].value;
    if (clave == claveA) {
        return true;
    }
}
function checkEmail(email) {
    if (validateEmail(email)) {
        return true;
    }
}
function checkEmailB(email) {
    var emailA = $("#email")[0].value;
    if (email == emailA) {
        return true;
    }
}
function validateEmail(email) {
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}
function checkRutPersona(rut) {
    var tmpstr = "";
    for (i = 0; i < rut.length; i++) {
        if (rut.charAt(i) != " " && rut.charAt(i) != "." && rut.charAt(i) != "-") {
            tmpstr = tmpstr + rut.charAt(i);
        }
    }
    rut = tmpstr;
    largo = rut.length;
    tmpstr = "";
    for (i = 0; rut.charAt(i) == "0"; i++) {
    }
    for (; i < rut.length; i++) {
        tmpstr = tmpstr + rut.charAt(i);
    }
    rut = tmpstr;
    largo = rut.length;
    if (largo < 2) {
        return false;
    }
    for (i = 0; i < largo; i++) {
        if ((rut.charAt(i) != "0") && (rut.charAt(i) != "1") && (rut.charAt(i) != "2") && (rut.charAt(i) != "3") && (rut.charAt(i) != "4") && (rut.charAt(i) != "5") && (rut.charAt(i) != "6") && (rut.charAt(i) != "7") && (rut.charAt(i) != "8") && (rut.charAt(i) != "9") && (rut.charAt(i) != "k") && (rut.charAt(i) != "K")) {
            return false;
        }
    }
    rutMax = rut;
    tmpstr = "";
    for (i = 0; i < rutMax.length; i++) {
        if (rutMax.charAt(i) != " " && rutMax.charAt(i) != "." && rutMax.charAt(i) != "-") {
            tmpstr = tmpstr + rutMax.charAt(i);
        }
    }
    tmpstr = tmpstr.substring(0, tmpstr.length - 1);
    if (!(tmpstr < 50000000)) {
        return false;
    }
    var invertido = "";
    for (i = (largo - 1), j = 0; i >= 0; i--, j++) {
        invertido = invertido + rut.charAt(i);
    }
    var drut = "";
    drut = drut + invertido.charAt(0);
    cnt = 0;
    for (i = 1, j = 2; i < largo; i++, j++) {
        if (cnt == 3) {
            j++;
            drut = drut + invertido.charAt(i);
            cnt = 1;
        } else {
            drut = drut + invertido.charAt(i);
            cnt++;
        }
    }
    invertido = "";
    for (i = (drut.length - 1), j = 0; i >= 0; i--, j++) {
        if (drut.charAt(i) == "k") {
            invertido = invertido + "K";
        } else {
            invertido = invertido + drut.charAt(i);
        }
    }
    if (!checkDVPersona(rut)) {
        return false;
    }
    return true;
}
(function($) {
    $.extend($.validator.messages, {required: "Este campo es obligatorio.",remote: "Por favor, rellena este campo.",email: "Por favor, escribe una dirección de correo válida",url: "Por favor, escribe una URL válida.",date: "Por favor, escribe una fecha válida.",dateISO: "Por favor, escribe una fecha (ISO) válida.",number: "Por favor, escribe un número entero válido.",digits: "Por favor, escribe sólo dígitos.",creditcard: "Por favor, escribe un número de tarjeta válido.",equalTo: "Por favor, escribe el mismo valor de nuevo.",accept: "Por favor, escribe un valor con una extensión aceptada.",maxlength: $.validator.format("Por favor, no escribas más de {0} caracteres."),minlength: $.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength: $.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range: $.validator.format("Por favor, escribe un valor entre {0} y {1}."),max: $.validator.format("Por favor, escribe un valor menor o igual a {0}."),min: $.validator.format("Por favor, escribe un valor mayor o igual a {0}."),dategreater: "Por favor, escribe una fecha mayor o igual a {0}.",datesmaller: "Por favor, escribe una fecha menor o igual a {0}.",datefuture: "Por favor, escribe una fecha futura.",datepast: "Por favor, escribe una fecha anterior a la actual.",greater: "El valor debe ser mayor de {0}.",smaller: "El valor debe ser menor de {0}."});
}(jQuery));
var niceScroll = function($element) {
    $element.niceScroll({cursorcolor: "#ccc",cursorwidth: "5px",cursoropacitymin: 0.3,railpadding: {top: 10,left: 10,bottom: 10,right: 10}});
};
$(function() {
    $(document).on("capgemini.ajax.load", function(event, element) {
        niceScroll($(element).find(".nicescroll"));
    });
    niceScroll($(".nicescroll"));
});
$(function() {
    var initDatepickers = function($context) {
        $(".datepicker").each(function(i, el) {
            var _this = $(el);
            var format;
            if (_this.data("format") !== undefined) {
                format = _this.data("format");
            } else {
                format = "dd/mm/yy";
            }
            _this.datepicker({dateFormat: format});
        });
    };
    $(document).ready(function() {
        initDatepickers($(this));
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        initDatepickers($(element));
    });
});
$(function() {
    $.fn.googleMaps = function(options) {
        if (options === "initMapSucursal") {
            return initMapSucursal.apply(this, Array.prototype.splice.call(arguments, 1));
        }
    };
    var createMap = function(canvas, options) {
        var defaultOptions = {mapTypeId: google.maps.MapTypeId.ROADMAP};
        options = $.extend(defaultOptions, options);
        return new google.maps.Map(canvas, options);
    };
    var eventFlag = false;
    var initMapSucursal = function($map) {
        var canvas = $map.get(0);
        var latitude = $map.data("latitude");
        var longitude = $map.data("longitude");
        var address = $map.data("address");
        var zoom = $map.data("zoom");
        var panx = $map.data("pan-x");
        var pany = $map.data("pan-y");
        var refresh = $map.data("refresh");
        if (refresh != undefined) {
            $(refresh).bind("touchstart click", function(event) {
                if (!eventFlag) {
                    eventFlag = true;
                    setTimeout(function() {
                        eventFlag = false;
                    }, 1000);
                    $(refresh).unbind("touchstart");
                    $(refresh).unbind("click");
                    clearMap($map);
                    setTimeout(function() {
                        initMapSucursal($map);
                    }, 350);
                }
            });
        }
        var height = $map.data("height");
        var width = $map.data("width");
        if (width === undefined) {
            width = "100%";
        }
        $map.css({width: width,height: height});
        if (latitude !== undefined && longitude !== undefined) {
            var myLatlng = new google.maps.LatLng(latitude, longitude);
            var map = createMap(canvas, {center: myLatlng,zoom: zoom === undefined ? 8 : zoom});
            var iconBase = "img/icons/";
            var icono = getIconSucursalByType($map);
            var image = new google.maps.MarkerImage(iconBase + icono, new google.maps.Size(49, 58), new google.maps.Point(0, 0), new google.maps.Point(0, 0));
            var marker1 = new google.maps.Marker({position: new google.maps.LatLng(latitude, longitude),map: map,icon: image});
            var contentString = getTooltipSucursalByType($map);
            var infowindow = new google.maps.InfoWindow({content: ""});
            google.maps.event.addListener(marker1, "click", function() {
                infowindow.setContent(contentString);
                infowindow.open(map, marker1);
            });
            infowindow.setContent(contentString);
            if (openAutoByType($map) == true) {
                infowindow.open(map, marker1);
            }
            if ((panx !== undefined) && (pany !== undefined)) {
                map.panBy(parseInt(panx, 10), parseInt(pany, 10));
            }
        } else {
            $map.append('<div class="block-error">Google maps port was not properly initialized, review your HTML</div>');
        }
    };
    var initMapsSucursal = function($context) {
        if ($context === undefined) {
            $context = $(document);
        }
        $(".google-maps.sucursal", $context).each(function() {
            var $map = $(this);
            clearMap($map);
            initMapSucursal($map);
        });
    };
    var clearMap = function($map) {
        $map.removeAttr("style");
        $map.html("");
    };
    var openAutoByType = function($map) {
        var type = $map.data("type");
        return true;
    };
    var getIconSucursalByType = function($map) {
        var type = $map.data("type");
        if (type == "sucursal-bbva") {
            return "IconoGMap.png";
        } else {
            if (type == "domicilio") {
                return "IconoHomeGMap.png";
            } else {
                if (type == "select") {
                    return "IconoSelectGMap.png";
                }
            }
        }
        return "";
    };
    var getTooltipSucursalByType = function($map) {
        var type = $map.data("type");
        var title = $map.data("title");
        var subtitle = $map.data("subtitle");
        var horario1 = $map.data("horario1");
        var horario2 = $map.data("horario2");
        var telefono = $map.data("telefono");
        var href = $map.data("href");
        var info = $map.data("info");
        var contentString;
        if (type == "sucursal-bbva") {
            contentString = $('<div class="marker-info-win"><div class="marker-inner-win"><div class="title">' + title + '</div><div class="subtitle">' + subtitle + '</div><div class="separator"></div><div class="left">Horario:<div>' + horario1 + "</div><div>" + horario2 + '</div></div><div class="right">Teléfono:<div>' + telefono + '</div></div><div class="clear"></div><button type="button" class="btn modal-trigger" data-dismiss="modal" data-href="' + href + '">Selecionar otra sucursal</button></div></div>');
            return contentString[0];
        } else {
            if (type == "domicilio") {
                contentString = $('<div class="marker-info-win"><div class="marker-inner-win"><div class="title">' + title + '</div><div class="subtitle">' + subtitle + '</div><div class="separator"></div><div class="left-icon"><i class="icon-24 m03-aviso"></i></div><div class="right-info">' + info + '</div><div class="clear"></div></div></div>');
                return contentString[0];
            } else {
                if (type == "select") {
                    contentString = $('<div class="marker-info-win"><div class="marker-inner-win"><div class="title">' + title + '</div><div class="subtitle">' + subtitle + '</div><div class="separator"></div><div class="left">Horario:<div>' + horario1 + "</div><div>" + horario2 + '</div></div><div class="right">Teléfono:<div>' + telefono + '</div></div><div class="clear"></div></div></div>');
                    return contentString[0];
                }
            }
        }
        return null;
    };
    var getTooltipInfo = function($map) {
        var title = $map.data("title");
        var subtitle = $map.data("subtitle");
        var info = $map.data("info");
        var contentString;
        contentString = $('<div class="marker-info-win"><div class="marker-inner-win"><div class="title">' + title + '</div><div class="subtitle">' + subtitle + '</div><div class="separator"></div><div class="right-info-small">' + info + '</div><div class="clear"></div></div></div>');
        return contentString[0];
        return null;
    };
    var initMapInfo = function($map) {
        var canvas = $map.get(0);
        var latitude = $map.data("latitude");
        var longitude = $map.data("longitude");
        var address = $map.data("address");
        var zoom = $map.data("zoom");
        var height = $map.data("height");
        var width = $map.data("width");
        if (width === undefined) {
            width = "100%";
        }
        $map.css({width: width,height: height});
        if (latitude !== undefined && longitude !== undefined) {
            var myLatlng = new google.maps.LatLng(latitude, longitude);
            var map = createMap(canvas, {center: myLatlng,zoom: zoom === undefined ? 8 : zoom});
            var iconBase = "img/icons/IconoGMap.png";
            var image = new google.maps.MarkerImage(iconBase, new google.maps.Size(49, 58), new google.maps.Point(0, 0), new google.maps.Point(0, 0));
            var marker1 = new google.maps.Marker({position: new google.maps.LatLng(latitude, longitude),map: map,icon: image});
            var contentString = getTooltipInfo($map);
            var infowindow = new google.maps.InfoWindow({content: ""});
            google.maps.event.addListener(marker1, "click", function() {
                infowindow.setContent(contentString);
                infowindow.open(map, marker1);
            });
            infowindow.setContent(contentString);
        } else {
            $map.append('<div class="block-error">Google maps port was not properly initialized, review your HTML</div>');
        }
    };
    var initMapsInfo = function($context) {
        if ($context === undefined) {
            $context = $(document);
        }
        $(".google-maps.info", $context).each(function() {
            var $map = $(this);
            clearMap($map);
            initMapInfo($map);
        });
    };
    $(document).ready(function() {
        initMapsSucursal();
        $(document).on("capgemini.ajax.load", function(event, element) {
            initMapsSucursal(element);
            initMapsInfo(element);
        });
    });
});
$(document).ready(function() {

    $(document).on("vclick", "a.close-icon[data-window]", function() {

        var $this = $(this);
        var $window = $this.closest($this.data("window"));
        $window.fadeOut("200", function() {
            $window.remove();
        });
    });


});
$(document).ready(function() {
    var loaderCounter = 0;
    var initLoader = function($element) {
        loaderCounter++;
        var loader = '<div id="loader" class="loader-' + loaderCounter + '"><div class="cover">&nbsp;</div><div class="spinner"><img src="data:image/gif;base64,R0lGODlhHwAfAPUAAP///wBzyejx+dLl9LzZ8K7S7aLL6tzr9rjX75rH6eTv+Njp9qrQ7KDK6rDT7czi8/b5/KjO7NTn9ebw+DaQ1CaH0FCe2cTe8XCw4JLC51ai2vr7/Wir3kaZ18bf8vj6/Eia2DKO0wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEgUDAgFA4BiwSQexKh0eEAkrldAZbvlOD5TqYKALWu5XIwnPFwwymY0GsRgAxrwuJwbCi8aAHlYZ3sVdwtRCm8JgVgODwoQAAIXGRpojQwKRGSDCRESYRsGHYZlBFR5AJt2a3kHQlZlERN2QxMRcAiTeaG2QxJ5RnAOv1EOcEdwUMZDD3BIcKzNq3BJcJLUABBwStrNBtjf3GUGBdLfCtadWMzUz6cDxN/IZQMCvdTBcAIAsli0jOHSJeSAqmlhNr0awo7RJ19TJORqdAXVEEVZyjyKtE3Bg3oZE2iK8oeiKkFZGiCaggelSTiA2LhxiZLBSjZjBL2siNBOFQ84LxHA+mYEiRJzBO7ZCQIAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfju9jf82YAIQxRCm14Ww4PChAAEAoPDlsAFRUgHkRiZAkREmoSEXiVlRgfQgeBaXRpo6MOQlZbERN0Qx4drRUcAAJmnrVDBrkVDwNjr8BDGxq5Z2MPyUQZuRgFY6rRABe5FgZjjdm8uRTh2d5b4NkQY0zX5QpjTc/lD2NOx+WSW0++2RJmUGJhmZVsQqgtCE6lqpXGjBchmt50+hQKEAEiht5gUcTIESR9GhlgE9IH0BiTkxrMmWIHDkose9SwcQlHDsOIk9ygiVbl5JgMLuV4HUmypMkTOkEAACH5BAkKAAAALAAAAAAfAB8AAAb/QIBwSBQMCAUDwFAgDATEqHR4QCSuVwD2ijhMpwrCFqsdJwiK73DBMGfdCcZCDWjAE2V347vY3/NmdXNECm14Ww4PChAAEAoPDltlDGlDYmQJERJqEhGHWARUgZVqaWZeAFZbERN0QxOeWwgAAmabrkMSZkZjDrhRkVtHYw+/RA9jSGOkxgpjSWOMxkIQY0rT0wbR2LQV3t4UBcvcF9/eFpdYxdgZ5hUYA73YGxruCbVjt78G7hXFqlhY/fLQwR0HIQdGuUrTz5eQdIc0cfIEwByGD0MKvcGSaFGjR8GyeAPhIUofQGNQSgrB4IsdOCqx7FHDBiYcOQshYjKDxliVDpRjunCjdSTJkiZP6AQBACH5BAkKAAAALAAAAAAfAB8AAAb/QIBwSBQMCAUDwFAgDATEqHR4QCSuVwD2ijhMpwrCFqsdJwiK73DBMGfdCcZCDWjAE2V347vY3/NmdXNECm14Ww4PChAAEAoPDltlDGlDYmQJERJqEhGHWARUgZVqaWZeAFZbERN0QxOeWwgAAmabrkMSZkZjDrhRkVtHYw+/RA9jSGOkxgpjSWOMxkIQY0rT0wbR2I3WBcvczltNxNzIW0693MFYT7bTumNQqlisv7BjswAHo64egFdQAbj0RtOXDQY6VAAUakihN1gSLaJ1IYOGChgXXqEUpQ9ASRlDYhT0xQ4cACJDhqDD5mRKjCAYuArjBmVKDP9+VRljMyMHDwcfuBlBooSCBQwJiqkJAgAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEgUDAgFA8BQIAwExKh0eEAkrlcA9oo4TKcKwharHScIiu9wwTBn3QnGQg1owBNld+O72N/zZnVzRApteFsODwoQABAKDw5bZQxpQ2JkCRESahIRh1gEVIGVamlmXgBWWxETdEMTnlsIAAJmm65DEmZGYw64UZFbR2MPv0QPY0hjpMYKY0ljjMZCEGNK09MG0diN1gXL3M5bTcTcyFtOvdzBWE+207pjUKpYrL+wY7MAB4EerqZjUAG4lKVCBwMbvnT6dCXUkEIFK0jUkOECFEeQJF2hFKUPAIkgQwIaI+hLiJAoR27Zo4YBCJQgVW4cpMYDBpgVZKL59cEBhw+U+QROQ4bBAoUlTZ7QCQIAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfju9jf82Z1c0QKbXhbDg8KEAAQCg8OW2UMaUNiZAkREmoSEYdYBFSBlWppZl4AVlsRE3RDE55bCAACZpuuQxJmRmMOuFGRW0djD79ED2NIY6TGCmNJY4zGQhBjStPTFBXb21DY1VsGFtzbF9gAzlsFGOQVGefIW2LtGhvYwVgDD+0V17+6Y6BwaNfBwy9YY2YBcMAPnStTY1B9YMdNiyZOngCFGuIBxDZAiRY1eoTvE6UoDEIAGrNSUoNBUuzAaYlljxo2M+HIeXiJpRsRNMaq+JSFCpsRJEqYOPH2JQgAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfjywjlzX9jdXNEHiAVFX8ODwoQABAKDw5bZQxpQh8YiIhaERJqEhF4WwRDDpubAJdqaWZeAByoFR0edEMTolsIAA+yFUq2QxJmAgmyGhvBRJNbA5qoGcpED2MEFrIX0kMKYwUUslDaj2PA4soGY47iEOQFY6vS3FtNYw/m1KQDYw7mzFhPZj5JGzYGipUtESYowzVmF4ADgOCBCZTgFQAxZBJ4AiXqT6ltbUZhWdToUSR/Ii1FWbDnDkUyDQhJsQPn5ZU9atjUhCPHVhgTNy/RSKsiqKFFbUaQKGHiJNyXIAAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEh8JDAWCsBQIAwExKhU+HFwKlgsIMHlIg7TqQeTLW+7XYIiPGSAymY0mrFgA0LwuLzbCC/6eVlnewkADXVECgxcAGUaGRdQEAoPDmhnDGtDBJcVHQYbYRIRhWgEQwd7AB52AGt7YAAIchETrUITpGgIAAJ7ErdDEnsCA3IOwUSWaAOcaA/JQ0amBXKa0QpyBQZyENFCEHIG39HcaN7f4WhM1uTZaE1y0N/TacZoyN/LXU+/0cNyoMxCUytYLjm8AKSS46rVKzmxADhjlCACMFGkBiU4NUQRxS4OHijwNqnSJS6ZovzRyJAQo0NhGrgs5bIPmwWLCLHsQsfhxBWTe9QkOzCwC8sv5Ho127akyRM7QQAAOwAAAAAAAAAAAA==" alt="loader"/></div></div>';
        $element.append(loader);
        $(document).on("ajaxComplete", function() {
            setTimeout(function() {
                if ($("#loader.loader-" + loaderCounter).length > 0) {
                    $("#loader.loader-" + loaderCounter).remove();
                }
            }, 750);
        });
    };
    $(document).on("capgemini.ajax.start", function(event, element) {
        initLoader($(element));
    });
});
var defaultOptionsChartMini = {chart: {borderColor: "transparent",borderWidth: 1,borderRadius: 0},title: {text: false},plotOptions: {series: {marker: {fillColor: "#44A718",lineWidth: 2,lineColor: "white"}}},xAxis: {labels: {enabled: false}},yAxis: {title: false,tickPixelInterval: 20,labels: {enabled: false}},legend: false,exporting: {enabled: false},series: undefined,tooltip: {}};
var defaultOptionsLineBars = {chart: {borderColor: "transparent",borderWidth: 1,borderRadius: 0},title: {text: ""},xAxis: {categories: undefined},yAxis: {title: {text: ""},tickWidth: 5},series: undefined,exporting: {enabled: false},legend: {borderColor: "none",verticalAlign: "top"},tooltip: {}};
var defaultOptionsBars = {chart: {borderColor: "transparent",borderWidth: 1,borderRadius: 0,type: "column"},title: {text: ""},xAxis: {categories: undefined},yAxis: {title: {text: ""}},series: undefined,exporting: {enabled: false},legend: {borderColor: "none",verticalAlign: "top"},tooltip: {}};
var defaultOptionsCheese = {chart: {borderColor: "transparent",borderWidth: 1,borderRadius: 0,plotBackgroundColor: null,plotBorderWidth: null,plotShadow: false},title: {text: ""},plotOptions: {pie: {borderWidth: 1,allowPointSelect: true,cursor: "pointer",dataLabels: {enabled: false},showInLegend: true}},series: [{type: "pie",name: undefined,data: undefined}],exporting: {enabled: false},legend: {borderColor: "none",verticalAlign: "top"},tooltip: {}};
var defaultOptionsLines = {chart: {borderColor: "transparent",borderWidth: 1,borderRadius: 0},title: {text: "",x: -20},xAxis: {categories: undefined},yAxis: {title: {text: ""}},series: undefined,exporting: {enabled: false},legend: {borderColor: "none",verticalAlign: "top"},tooltip: {}};
$(document).ready(function() {
    Highcharts.getOptions().colors = Highcharts.map(Highcharts.getOptions().colors, function(color) {
        return {linearGradient: {x1: 0,x2: 0,y1: 0,y1: 1},stops: [[0, color], [1, Highcharts.Color(color).brighten(-0.3).get("rgb")]]};
    });
    $.chartMini = function($element, json) {
        var options = $.extend(defaultOptionsChartMini, json);
        $element.highcharts(options);
    };
    $.chartLineBars = function($element, json) {
        var options = $.extend(defaultOptionsLineBars, json);
        $element.highcharts(options);
    };
    $.chartBars = function($element, json) {
        var options = $.extend(defaultOptionsBars, json);
        $element.highcharts(options);
    };
    $.chartCheese = function($element, json) {
        var options = $.extend(defaultOptionsCheese, json);
        $element.highcharts(options);
    };
    $.chartLines = function($element, json) {
        var options = $.extend(defaultOptionsLines, json);
        $element.highcharts(options);
    };
    $.loadChartStart = function($chart) {
        var $chartBars = $chart.find(".chart-bars:visible"), $chartMini = $chart.find(".chart-mini:visible"), $chartLineBars = $chart.find(".chart-lineBars:visible"), $chartCheese = $chart.find(".chart-cheese:visible"), $chartLines = $chart.find(".chart-lines:visible");
        $chartMini.each(function() {
            var $this = $(this), json = $this.data("json");
            $.getJSON(json, function(values) {
                $.chartMini($this, values);
            });
        });
        $chartBars.each(function() {
            var $this = $(this), json = $this.data("json");
            $.getJSON(json, function(values) {
                $.chartBars($this, values);
            });
        });
        $chartLineBars.each(function() {
            var $this = $(this), json = $this.data("json");
            $.getJSON(json, function(values) {
                $.chartLineBars($this, values);
            });
        });
        $chartCheese.each(function() {
            var $this = $(this), json = $this.data("json");
            $.getJSON(json, function(values) {
                $.chartCheese($this, values);
            });
        });
        $chartLines.each(function() {
            var $this = $(this), json = $this.data("json");
            $.getJSON(json, function(values) {
                $.chartLines($this, values);
            });
        });
    };
    $.loadChart = function($chart, json) {
        if ($chart.hasClass("chart-bars")) {
            $.getJSON(json, function(values) {
                $.chartBars($chart, values);
            });
        } else {
            if ($chart.hasClass("chart-mini")) {
                $.getJSON(json, function(values) {
                    $.chartMini($chart, values);
                });
            } else {
                if ($chart.hasClass("chart-lineBars")) {
                    $.getJSON(json, function(values) {
                        $.chartLineBars($chart, values);
                    });
                } else {
                    if ($chart.hasClass("chart-cheese")) {
                        $.getJSON(json, function(values) {
                            $.chartCheese($chart, values);
                        });
                    } else {
                        if ($chart.hasClass("chart-lines")) {
                            $.getJSON(json, function(values) {
                                $.chartLines($chart, values);
                            });
                        }
                    }
                }
            }
        }
    };
    $.loadCharts = function($chart, json) {
        var $chartBars = $chart.find(".chart-bars"), $chartMini = $chart.find(".chart-mini"), $chartLineBars = $chart.find(".chart-lineBars"), $chartCheese = $chart.find(".chart-cheese"), $chartLines = $chart.find(".chart-lines");
        $chartBars.each(function() {
            var $this = $(this);
            $.getJSON(json, function(values) {
                $.chartBars($this, values);
            });
        });
        $chartLineBars.each(function() {
            var $this = $(this);
            $.getJSON(json, function(values) {
                $.chartLineBars($this, values);
            });
        });
        $chartCheese.each(function() {
            var $this = $(this);
            $.getJSON(json, function(values) {
                $.chartCheese($this, values);
            });
        });
        $chartLines.each(function() {
            var $this = $(this);
            $.getJSON(json, function(values) {
                $.chartLines($this, values);
            });
        });
    };
    $.loadChartStart($(document));
    var $buttonCharts = $(".chart-options .btn-group:not(.bootstrap-select)").find(".btn");
    $buttonCharts.click(function() {
        var $this = $(this), $chart = $this.closest(".capgemini-chart"), json = $this.data("json");
        if (!$this.hasClass("active")) {
            $this.addClass("active");
            $this.siblings().removeClass("active");
            $.loadCharts($chart, json);
        }
    });
    var $optionCharts = $(".chart-selection-account");
    $optionCharts.on("change", function() {
        var $this = $(this), $chart = $this.closest(".capgemini-chart"), value = $this.val();
        if (value !== "") {
            try {
                var data = JSON.parse(value);
                for (var i = 0; i < data.length; i++) {
                    var chart = data[i];
                    $.loadChart($chart.find($chart.find(chart.target)), chart.json);
                }
            } catch (error) {
                $.loadCharts($chart, value);
            }
        }
    });
});

Highcharts.theme = {colors: ["#058DC7", "#50B432", "#ED561B", "#DDDF00", "#24CBE5", "#64E572", "#FF9655", "#FFF263", "#6AF9C4"],title: {style: {font: "bold 16px Trebuchet MS, Arial, sans-serif"}},subtitle: {style: {font: "bold 12px Trebuchet MS, Arial, sans-serif"}},xAxis: {labels: {style: {font: "11px Trebuchet MS, Arial, sans-serif"}},title: {style: {font: "bold 12px Trebuchet MS, Arial, sans-serif"}}},yAxis: {labels: {style: {font: "11px Trebuchet MS, Arial, sans-serif"}},title: {style: {font: "bold 12px Trebuchet MS, Arial, sans-serif"}}},legend: {itemStyle: {font: "11px Trebuchet MS, Arial, sans-serif"}}};
var highchartsOptions = Highcharts.setOptions(Highcharts.theme);

$(function() {
    var quieroClick = function($btn) {
        var $this = $btn;
        $arrow = $this.find("span");
        $list = $this.parent().find(".list");
        if (!$this.hasClass("active")) {
            $this.closest(".content-column").find(".tables-button").each(function() {
                if ($(this).find(".active").length > 0) {
                    $(this).find(".list").css("display", "none");
                    $(this).find(".active").removeClass("active");
                    $(this).find("span").removeClass("f08-plegar");
                    $(this).find("span").addClass("f07-desplegar");
                }
            });
            $this.addClass("active");
            $arrow.removeClass("f07-desplegar");
            $arrow.addClass("f08-plegar");
            $list.slideDown(100);
        } else {
            $list.slideUp(100,function() {
                $this.removeClass("active");
                $arrow.removeClass("f08-plegar");
                $arrow.addClass("f07-desplegar");
            });
        }
    };

    var generateTables = function($context) {
        $(".capgemini-tables", $context).each(function() {
            var $table = $(this);
            $table.data("current", $(".tables-header .btn-group [data-target].active", $table).data("target"));
            $(".tables-header .btn-group [data-target]", $table).click(function() {
                var target = $(this).data("target");
                var $target = $(target, $table);
                if (!$(this).hasClass("active")) {
                    $table.find("> div:visible").slideUp();
                    $(this).siblings().removeClass("active");
                    $(this).addClass("active");
                    $target.slideDown(function() {
                        $table.data("current", target);
                        if ($(this).hasClass("capgemini-chart")) {
                            if ($(this).find(".highcharts-container").length == 0) {
                                $.loadChartStart($(this));
                            }
                        }
                    });
                }
            });
            $(".tables-header .btn-group .sprite-arrow", $table).click(function() {
                if ($(this).hasClass("active")) {
                    var current = $table.data("current");
                    if (current === undefined) {
                        $table.find("> div").slideDown();
                    } else {
                        $('.tables-header .btn-group [data-target="' + current + '"]', $table).addClass("active");
                        $(current, $table).slideDown();
                    }
                    $(this).removeClass("active");
                } else {
                    $(this).siblings().removeClass("active");
                    $(this).addClass("active");
                    $table.find("> div:visible").slideUp();
                }
            });
            if (!Modernizr.touch) {
                var $tr = $(".tables-body", $table).find("tr");
                $tr.mouseenter(function() {
                    $(this).find(".tables-button .button").show();
                    return false;
                });
                $tr.mouseleave(function() {
                    var $this = $(this), $quieroButton = $this.find(".tables-button").find(".button"), $arrow = $quieroButton.find("span"), $list = $this.find(".tables-button").find(".list");
                    $quieroButton.hide().removeClass("active");
                    $arrow.removeClass("f08-plegar").addClass("f07-desplegar");
                    $list.hide();
                });
            } else {
                var $quieroButton = $(".tables-button").find(".button");
                $quieroButton.show();
            }

            var $quieroButton = $(".tables-button", $table).find(".button");
            $quieroButton.click(function() {
                var $this = $(this);
                quieroClick($this);
            });
            var $quieroArrow = $(".tables-button", $table).find(".button").find("span");
            $quieroArrow.click(function() {
                quieroClick($(this).parent());
                return false;
            });
            $("[data-url]", $table).on("vclick", function(event) {
                if (!$(event.target).is(":button, a")) {
                    var $row = $(this);
                    var $url = $row.data("url");
                    window.location = $url;
                }
            });
            $("[data-detail]", $table).on("vclick", function(event) {
                if (!$(event.target).is(":button, a")) {
                    var $row = $(this);

                    var detailUrl = $row.data('detail');
                    /*if ($row.is("td")) {
                        $row = $row.closest("tr");
                    }*/

                    event.preventDefault();
                    $.ajax({url: $row.data("detail"),beforeSend: function(data) {
                            $(document).trigger("capgemini.ajax.start", $row.closest("table"));
                        },success: function(data) {
                            var $detail = $(data);
                            $detail.css({width: $row.width()});
                            if ($row.data("class") !== undefined) {
                                $detail.addClass($row.data("class"));
                            }
                            $detail.on("vclick", ".table-detail-close a, .table-detail-header > table", function(event) {
                                event.preventDefault();
                                $(this).closest(".capgemini-tables").find("#inner-detail-tr").remove();
                                $row.show();
                                return false;
                            });
                            $detail.on("vclick", function(event) {
                                if (!$(event.target).is(":button, a, span, input#fileupload")) {
                                    event.preventDefault();
                                    return false;
                                } else {
                                    if ($(event.target).hasClass("table-button")) {
                                        return true;
                                    }
                                    var $href = $(event.target).attr("href");
                                    if (($href == "#") || ($href == "") || ($href == undefined)) {
                                        event.preventDefault();
                                        return false;
                                    }
                                }
                                return true;
                            });
                            $(window).on("throttledresize", function() {
                                var $detailTr = $row.closest("table").find("#inner-detail-tr");
                                var $detailTd = $detailTr.find(".td-detail");
                                var $tableDetail = $detailTd.find(".table-detail");
                                $detailTr.hide();
                                var $tableWidth = $row.closest("table").width();
                                $detailTr.show();
                                $detailTr.css({width: $tableWidth});
                                $detailTd.css({width: $tableWidth});
                                $tableDetail.css({width: $tableWidth});
                            });
                            $row.closest("table").find("#inner-detail-tr").remove();
                            $row.siblings().each(function() {
                                if ($(this).is(":hidden")) {
                                    $(this).show();
                                }
                            });
                            $row.hide();
                            var $colspan = $row.find("td").length - 1;
                            var $trDetail = '<tr id="inner-detail-tr"><td class="td-detail" colspan="' + $colspan + '"></td></tr>';
                            if (Modernizr.mq("(max-width:768px)")) {
                                $trDetail = '<tr id="inner-detail-tr"><td class="td-detail xs-view"></td></tr>';
                            }
                            $row.closest("tr").after($trDetail);
                            $row.closest("tr").next().find(".td-detail").append($detail);
                            var $detail = $row.closest("table").find("#inner-detail-tr");
                            $(document).trigger("capgemini.ajax.load", $detail);
                        }});
                }
            });
            $("[data-detail-external]", $table).on("vclick", function(event) {
                if (!$(event.target).is(":button, a")) {
                    var $row = $(this);
                    event.preventDefault();
                    $row.closest(".tables-body").find(".table-detail").remove();
                    var $rowWidth = 0;
                    var $marginLeft = 0;
                    if ($row.closest(".tables-body").hasClass("scrollable")) {
                        if (Modernizr.mq("(max-width:768px)")) {
                            $rowWidth = $(window).width();
                            $marginLeft = -13;
                        } else {
                            $rowWidth = $row.width() + 15;
                        }
                    }
                    $.ajax({url: $row.data("detail-external"),beforeSend: function(data) {
                            $(document).trigger("capgemini.ajax.start", $row.closest("table"));
                        },success: function(data) {
                            var $detail = $(data);
                            $detail.css({width: $rowWidth,"margin-left": $marginLeft});
                            if ($row.data("class") !== undefined) {
                                $detail.addClass($row.data("class"));
                            }
                            $detail.on("vclick", ".table-detail-close a, .table-detail-header > table", function(event) {
                                event.preventDefault();
                                var $tablesBody = $row.closest(".tables-body");
                                $tablesBody.show();
                                $detail.remove();
                                var api = $tablesBody.data("jsp");
                                api.reinitialise();
                                return false;
                            });
                            $detail.on("vclick", function(event) {
                                if (!$(event.target).is(":button, a")) {
                                    event.preventDefault();
                                    return false;
                                } else {
                                    var $href = $(event.target).attr("href");
                                    if (($href == "#") || ($href == "") || ($href == undefined)) {
                                        event.preventDefault();
                                        return false;
                                    }
                                }
                                return true;
                            });
                            $(window).on("throttledresize", function() {
                                var $width = 0;
                                var $marginLeft = 0;
                                if (Modernizr.mq("(max-width:768px)")) {
                                    $width = $(window).width();
                                    $marginLeft = -13;
                                } else {
                                    $width = $row.width() + 15;
                                }
                                $detail.css({width: $width,"margin-left": $marginLeft});
                            });
                            var $tablesBody = $row.closest(".tables-body");
                            $tablesBody.hide();
                            var $article = $row.closest(".capgemini-tables");
                            $article.append($detail);
                            $(document).trigger("capgemini.ajax.load", $article);
                        }});
                }
            });
            $("[data-select-radio]", $table).on("vclick", function(event) {
                if (!$(event.target).is(":button, a")) {
                    $($(this).find("input")[0]).prop("checked", true);
                    $($(this).parent().find("label.on")[0]).removeClass("on");
                    $($(this).find("label")[0]).addClass("on");
                }
            });
            var loadResults = function($table, url, text) {
                $.ajax({url: url,data: {q: text},beforeSend: function(data) {
                        $(document).trigger("capgemini.ajax.start", $table);
                    },success: function(data) {
                        $table.find(".tables-search").next().remove();
                        $table.find(".tables-search").after(data);
                        $(document).trigger("capgemini.ajax.load", $(document));
                    }});
            };
            var loadUrl = $(".load", $table).attr("href");
            $(".search input", $table).on("keyup", function() {
                var $text = $(this);
                loadResults($table, loadUrl, $text.val());
            });
            $(".search button", $table).on("vclick", function() {
                var $text = $(this).closest(".search").find("input");
                loadResults($table, loadUrl, $text.val());
            });
            $(".load", $table).on("vclick", function() {
                loadResults($table, loadUrl);
                return false;
            });
            $("th", $table).click(function() {
                if ($(this).hasClass("sorted")) {
                    if ($(this).hasClass("desc")) {
                        $(this).removeClass("desc");
                        $(this).addClass("asc");
                    } else {
                        $(this).removeClass("asc");
                        $(this).addClass("desc");
                    }
                } else {
                    $(this).addClass("sorted desc");
                    $(this).siblings().removeClass("sorted desc asc");
                }
                return false;
            });
        });
    };

    $(document).ready(function() {
        generateTables($(this));
    });

    $(document).on("capgemini.ajax.load", function(event, element) {
        generateTables($(element));
    });
});
$(document).ready(function() {
    $(document).on("vclick", ".operation-tabs .close-tab", function() {
        var $context = $(this).closest(".operation-tabs");
        var $tab = $(this).closest(".tab-pane");
        $tab.slideUp(function() {
            $("a[href=#" + $tab.attr("id") + "]", $context).closest("li").removeClass("active").closest("ul").find("> li.inactive").removeClass("inactive");
            $(this).removeAttr("style").removeClass("active");
        });
        return false;
    });
    $(document).on("vclick", ".section-tabs > ul.nav.nav-tabs > li > a", function() {
        var $context = $(this).closest(".section-tabs");
        $("> .tab-content > .tab-pane", $context).removeClass("active");
        $(this).closest(".nav.nav-tabs").find("> li.active").removeClass("active");
        $(this).closest("li").addClass("active");
        $("> .tab-content > .tab-pane" + $(this).attr("href"), $context).addClass("active");
        return false;
    });
    $(document).on("vclick", ".operation-tabs ul.nav.nav-pills > li > a", function() {
        var $this = $(this);
        var $context = $this.closest(".operation-tabs");
        var $tabpane = $this.next(".tab-pane");
        var tabPaneClose = function() {
            if ($tabpane.is(":hidden")) {
                $tabpane.addClass("active").closest("li").addClass("active").closest("ul").find("> li:not(.active)").addClass("inactive");
        $tabpane.closest("ul").find("> li:first").removeClass("inactive");
                $tabpane.slideDown(function() {
                    $(this).removeAttr("style");
                });
            } else {
                $tabpane.slideUp(function() {
                    $tabpane.removeClass("active").closest("li").removeClass("active");
                    $(this).removeAttr("style");
                });
            }
        };
        if ($tabpane.length > 0 && !$this.hasClass("return") && !$this.hasClass("return2")) {
            tabPaneClose();
        } else {
            if ($(this).closest("ul.nav.nav-pills").find("> li.active").length == 0) {
                $("> .tab-content > .tab-pane", $context).removeClass("active");
                $(this).closest(".nav.nav-pills").find("> li.active").removeClass("active");
                $(this).closest("li").addClass("active").closest("ul").find("> li:not(.active)").addClass("inactive");
                $("> .tab-content > .tab-pane" + $(this).attr("href"), $context).addClass("active");
            } else {
                if ($(this).closest("li").hasClass("active")) {
                    $(this).closest("ul").find("li.inactive").removeClass("inactive");
                    var $tab = $(this).closest("li");
                    if (isIE8()) {
                        var $tabPane = $("> .tab-content > .tab-pane" + $(this).attr("href"), $context);
                        $tab.removeClass("active");
                        $tabPane.removeClass("active");
                        if (Modernizr.mq("(max-width:768px)")) {
                            $("#content-container").addClass("hidden");
                            $("#options-container").removeClass("hidden");
                            $("#option-content").empty();
                        } else {
                            $("#operacion-container").removeClass("active");
                            $("#operacion-container").empty();
                            $("#operaciones-list-container").addClass("active");
                            $(".tabmain-operaciones").removeClass("hidden").addClass("active");
                        }
                    } else {
                        $("> .tab-content > .tab-pane" + $(this).attr("href"), $context).slideUp(function() {
                            $tab.removeClass("active");
                            $(this).removeClass("active");
                            if (Modernizr.mq("(max-width:768px)")) {
                                $("#content-container").addClass("hidden");
                                $("#options-container").removeClass("hidden");
                                $("#option-content").empty();
                            } else {
                                $("#operacion-container").removeClass("active");
                                $("#operacion-container").empty();
                                $("#operaciones-list-container").addClass("active");
                                $(".tabmain-operaciones").removeClass("hidden").addClass("active");
                            }
                            $(this).removeAttr("style");
                        });
                    }
                } else {
                    $("> .tab-content > .tab-pane", $context).removeClass("active");
                    $(this).closest(".nav.nav-pills").find("> li.active").removeClass("active");
                    $(this).closest("li").addClass("active").removeClass("inactive").closest("ul").find("> li:not(.active)").addClass("inactive");
          $(this).closest("ul").find("li.inactive").removeClass("inactive");
                    $("> .tab-content > .tab-pane" + $(this).attr("href"), $context).addClass("active");
                }
            }
        }
        if ($this.hasClass("tab-head") && Modernizr.mq("(max-width:768px)")) {
            var $wantButton = $context.find(".want");
            $wantButton.addClass("return");
            $wantButton.removeClass("want");
            $wantButton.text("Volver");

        } else {
            if ($this.hasClass("return") && Modernizr.mq("(max-width:768px)")) {
                var $returnButton = $context.find(".return");
                $returnButton.removeClass("return");
                $returnButton.addClass("want");
                $returnButton.text("Quiero");
                $returnButton.next().find("> ul > li").removeClass("active inactive");
                $(".tab-mobile").removeClass("active");
                $context.find(".tab-head").addClass("active");
            } else {
                if ($this.hasClass("return2") && Modernizr.mq("(max-width:768px)")) {
                    var $returnButton2 = $context.find(".return2");
                    $returnButton2.removeClass("return2");
                    $returnButton2.addClass("return");
                    $(".tabmain-operaciones").removeClass("hidden").addClass("active").closest("ul").find("> li:not(.active)").addClass("inactive");
                    $("#option-content").empty();
                    $("#operacion-container").removeClass("active").empty();
                    $("#operaciones-list-container").addClass("active");
                }
            }
        }
        return false;
    });
    $(".operation-tabs").each(function() {
        var $context = $(this);
        var id = "holder-" + $.uuid();
        var $holder = $('<ul class="nav nav-pills holder"><li><a class="want" href="#' + id + '">Quiero</a><div id="' + id + '" class="tab-pane"></div></li>');
        var createMobile = function() {
            if ($("> .tab-content", $context).length > 0) {
                var hasActivePane = false;
                $("ul.nav.nav-pills > li.tab-left > a", $context).each(function() {
                    if ($(this).parent().hasClass("active")) {
                        hasActivePane = true;


                    }


                    var $tabpane = $("> .tab-content > .tab-pane" + $(this).attr("href"), $context);
                    $(this).after($tabpane);
                });
                $($("ul.nav.nav-pills > li.tab-right > a", $context).get().reverse()).each(function() {
                    if ($(this).parent().hasClass("active")) {
                        hasActivePane = true;
                    }
                    var $tabpane = $("> .tab-content > .tab-pane" + $(this).attr("href"), $context);
                    $(this).after($tabpane);
                    $(this).closest(".nav.nav-pills").append($(this).closest("li"));
                });
                $holder.find("#" + id).append($context.children());
                $context.append($holder);
                var $quiero = $holder.find("#" + id).siblings("a");
                if (hasActivePane) {
                    $holder.find("#" + id).closest("li").addClass("active");
                    if ($("#operacion-container.active").length) {
                        $quiero.text("Volver").removeClass("want return").addClass("return2");
                    } else {
                        $quiero.text("Volver").removeClass("want return2").addClass("return");
                    }
                } else {
                    $holder.find("#" + id).closest("li").removeClass("active");
                    $quiero.text("Quiero").removeClass("return return2").addClass("want");
                    $("#content-container").removeClass("active");
                    $(".tabmain-operaciones").addClass("active").removeClass("hidden");
                    $(".tabmain-operaciones").prev().removeClass("hidden").addClass("hidden-xs");
                }
                $(".tab-content", $context).remove();
            }
        };
        var createDesktop = function() {
            if ($(".tab-content", $context).length == 0) {
                var hasActivePane = false;
                $(".tab-head").addClass("active");
                $context.append($holder.find("#" + id).children());
                $holder.detach();
                $($("ul.nav.nav-pills > li.tab-right > a", $context).get().reverse()).each(function() {
                    $(this).closest(".nav.nav-pills").append($(this).closest("li"));
                });
                var $tabcontent = $('<div class="tab-content"></div>');
                $(".tab-pane", $context).each(function() {
                    $tabcontent.append($(this));
                });
                $context.append($tabcontent);
            }
        };
        var tabDisposition = function() {
            if (Modernizr.mq("(max-width:768px)")) {
                createMobile();
            } else {
                createDesktop();
            }
        };
        tabDisposition();
        $(window).on("throttledresize", function() {
            tabDisposition();
        });
    });
    var initShowOperation = function($context) {
        $(".show-operation", $context).each(function() {
            $(this).on("vclick", function() {
                var url = $(this).attr("href");
                if (url === undefined) {
                    url = $(this).data("href");
                }
                var target = $(this).closest("#tab-operaciones");
                openOperation(url, target);
                return false;
            });
        });
    };
    var openOperation = function(url, target) {
        console.log('ddd');
         //console.log("target "+target);
         if(typeof target === 'undefined'){

           // target = $("#tab-operaciones");
           //console.log($('.show-operation[href="'+url+'"]').length);
           $('.show-operation[href="'+url+'"]').trigger("vclick");
           return false;

         }

        //console.log("target "+$(target).attr("id"));

        $.ajax({url: url,beforeSend: function(data) {
                $(document).trigger("capgemini.ajax.start", $(target));
            },success: function(data) {
                if (Modernizr.mq("(max-width:768px)")) {
        
          if($("#tab-operaciones-link-virtual").length == 0)
            {
              $( "<a href='#' class='closeTab' id='tab-operaciones-link-virtual'>Volver</a>" ).insertBefore( "#tab-operaciones-link" );
              $("#tab-operaciones-link").hide();
              
              $("#tab-operaciones-link-virtual").click(function(){
                //alert('click')
                //console.log("Click en #tab-operaciones-link");
                $(".close-operation-tab").trigger("vclick");
                //$(".close-operation-tab").trigger("click");
                $(".close-operation-tab").click();
                $(this).remove();
                $("#tab-operaciones-link").show();
              });
            } 
                    $(".operation-tabs > ul > li").addClass("active");
           $(".operation-tabs > ul > li").find("> div.tab-pane").addClass("active");
           //$(".operation-tabs > ul > li").find("> div.tab-pane").find("ul li:nth-child(2)").removeClass("inactive").addClass("active");
                    $("#tab-operaciones").addClass("active");
                    $(".want").removeClass("want").addClass("return2").text("Volver");
                    $(".tabmain-operaciones.active").removeClass("active").addClass("hidden");
                    var $target = $("#option-content");
                    $target.removeClass().html($(data)).show();
                    $target.closest("#operaciones-list-container").removeClass("hidden").addClass("active");
                    // console.log("Tabs1 :"+$target.find(".tab-content").lenght);
                    $("#options-container").addClass("hidden");
                    $("#content-container").removeClass("hidden");
                    $(".operation-tabs").find(".return").removeClass("return").addClass("return2");
                    $(".tabmain-operaciones").removeClass("active").addClass("hidden").closest("ul").find("> li:not(.active)").addClass("inactive");
                    $(".tabmain-operaciones").prev().addClass("hidden").removeClass("hidden-xs");
                } else {
                    var $target = $("#operacion-container");
                    $target.html($(data)).addClass("active");
                    $("#operaciones-list-container").removeClass("active");
                    $(".tabmain-operaciones").removeClass("active").addClass("hidden").prev().addClass("hidden");
                    if ($("#tab-operaciones").is(":hidden")) {
                        $("#tab-operaciones-link").trigger("vclick");
                    }
                }
                $(document).trigger("capgemini.ajax.load", $target);
            }});
    };

    var openOperation2 = function(url, target) { 
         if(typeof target === 'undefined'){
 
           $('.show-operation[href="'+url+'"]').trigger("vclick");
           

         }

        //console.log("target "+$(target).attr("id"));

        $.ajax({url: url,beforeSend: function(data) {
                $(document).trigger("capgemini.ajax.start", $(target));
            },success: function(data) {
                if (Modernizr.mq("(max-width:768px)")) {
                
                    if($("#tab-operaciones-link-virtual").length == 0)
                        {
                            $( "<a href='#' class='closeTab' id='tab-operaciones-link-virtual'>Volver</a>" ).insertBefore( "#tab-operaciones-link" );
                            $("#tab-operaciones-link").hide();
                            
                            $("#tab-operaciones-link-virtual").click(function(){
                                //alert('click')
                                //console.log("Click en #tab-operaciones-link");
                                $(".close-operation-tab").trigger("vclick");
                                //$(".close-operation-tab").trigger("click");
                                $(".close-operation-tab").click();
                                $(this).remove();
                                $("#tab-operaciones-link").show();
                            });
                        }   
                    $(".operation-tabs > ul > li").addClass("active");
                     $(".operation-tabs > ul > li").find("> div.tab-pane").addClass("active");
                     //$(".operation-tabs > ul > li").find("> div.tab-pane").find("ul li:nth-child(2)").removeClass("inactive").addClass("active");
                    $("#tab-operaciones").addClass("active");
                    $(".want").removeClass("want").addClass("return2").text("Volver");
                    $(".tabmain-operaciones.active").removeClass("active").addClass("hidden");
                    var $target = $("#option-content");
                    $target.removeClass().html($(data)).show();
                    $target.closest("#operaciones-list-container").removeClass("hidden").addClass("active");
                    // console.log("Tabs1 :"+$target.find(".tab-content").lenght);
                    $("#options-container").addClass("hidden");
                    $("#content-container").removeClass("hidden");
                    $(".operation-tabs").find(".return").removeClass("return").addClass("return2");
                    $(".tabmain-operaciones").removeClass("active").addClass("hidden").closest("ul").find("> li:not(.active)").addClass("inactive");
                    $(".tabmain-operaciones").prev().addClass("hidden").removeClass("hidden-xs");
                } else {
                    var $target = $("#operacion-container");
                    $target.html($(data)).addClass("active");
                    $("#operaciones-list-container").removeClass("active");
                    $(".tabmain-operaciones").removeClass("active").addClass("hidden").prev().addClass("hidden");
                    if ($("#tab-operaciones").is(":hidden")) {
                        $("#tab-operaciones-link").trigger("vclick");
                    }
                }
                $(document).trigger("capgemini.ajax.load", $target);
            }});
    };
    var initOperationTabsXs = function($context) {
        $("#main-quiero-header", $context).on("vclick", function() {
            var $quieroOptions = $("#main-quiero-options");
            if ($quieroOptions.hasClass("active")) {
                $quieroOptions.slideUp(function() {
                    $quieroOptions.removeClass("active");
                    $(this).removeAttr("style");
                });
                $("#main-quiero-link").removeClass("active");
            } else {
                $quieroOptions.addClass("active");
                $quieroOptions.slideDown(function() {
                    $(this).removeAttr("style");
                });
                $("#main-quiero-link").addClass("active");
            }
            return false;
        });
        $(".option-xs", $context).each(function() {
            $(this).on("vclick", function() {
                var url = $(this).data("option");
                var styleClass = $(this).data("class");
                var $target = $("#option-content");
                $.ajax({url: url,beforeSend: function(data) {
                        $(document).trigger("capgemini.ajax.start", $target);
                    },success: function(data) {
                        $target.removeClass().addClass("tab-pane").addClass(styleClass).html($(data)).show();
                        $("#options-container").addClass("hidden");
                        $("#content-container").removeClass("hidden");
                        $(document).trigger("capgemini.ajax.load", $target);
                    }});
                return false;
            });
        });
    };

    // operaciones externas
    var initOperationRequest = function($context){
    var $operation = getURLParameter('operation');

    if($operation == 'transferencia'){
      openOperation('includes/components/movements/cuentas/operations/transferencia.php');
    }
    else if($operation == 'gest-transferencias'){
      openOperation('includes/components/movements/cuentas/operations/gest-transferencias.html');
    }
    else if($operation == 'aporte'){
      openOperation2('includes/components/movements/cuentas/operations/aporte.php');
    }
    else if($operation == 'linea'){
      openOperation('includes/components/movements/cuentas/operations/linea-credito.php');
    }
    else if($operation == 'talonarios'){
      openOperation('includes/components/movements/cuentas/operations/solicitar-talonarios.php');
    }

    //CUENTAS

    else if($operation == 'cartolahistorica'){
      openOperation('includes/components/movements/cuentas/operations/consulta-cartola-historica.php');
    }

    else if($operation == 'VerMovimientosHistoricos'){
      openOperation('includes/components/movements/cuentas/operations/consulta-movimientos-historicos.php');
    }

    else if($operation == 'transferirdinero'){
      openOperation('includes/components/movements/cuentas/operations/transferencia-otros-titulares.php');
    }

    else if($operation == 'consultarTransferenciasHistoricas'){
      openOperation('includes/components/movements/cuentas/operations/consulta-transferencias.php');
    }

    else if($operation == 'bloquearCheques'){
      openOperation('includes/components/movements/cuentas/operations/anular-cheques.php');
    }

    else if($operation == 'consultarChequesTalonarios'){
      openOperation('includes/components/movements/cuentas/operations/consulta-cheques-talonarios.php');
    }

    else if($operation == 'solicitarTalonarioCheques'){
      openOperation('includes/components/movements/cuentas/operations/solicitar-talonarios.php');
    }

  else if($operation == 'pruebaEECC'){
      openOperation('includes/components/movements/cuentas/operations/pruebaEECC.php');
    }

    else if($operation == 'gestionarTransferenciasPeriodicas'){
      openOperation('includes/components/movements/cuentas/operations/gest-transferencias.html');
    }

    else if($operation == 'programarTransferenciasPeriodicas'){
      openOperation('includes/components/movements/cuentas/operations/programar-transferencias.php');
    }

    else if($operation == 'consultarOinscribirPac'){
      openOperation('includes/components/movements/cuentas/operations/suscribir-pac.php');
    }

    else if($operation == 'pagarLineaDeCredito'){
      openOperation('includes/components/movements/cuentas/operations/pagar-deuda.php');
    }

    else if($operation == 'cobrarValesVista'){
      openOperation('includes/components/movements/cuentas/operations/vales-vista.php');
    }

    
    // nuevo para maqueta en BBVA
    else if($operation == 'pagardeuda'){
      openOperation('includes/components/movements/tarjetas/operations/pagar-deuda.php');
    }

    else if($operation == 'apagar-tarjeta'){
      openOperation('includes/components/movements/tarjetas/operations/apagar-tarjeta.php');
    }
    

    else if($operation == 'consultacartola'){
      openOperation('includes/components/movements/cuentas/operations/tab-consultas.html');
    }

    else if($operation == 'aportesolidario'){
      openOperation('includes/components/movements/cuentas/operations/aporte.php');
    }
    else if($operation == 'avance-linea'){
      openOperation('includes/components/movements/tarjetas/operations/avance-linea.php');
    }

    else if($operation == 'pat'){
      openOperation('includes/components/movements/tarjetas/operations/pat.php');
    }

    else if($operation == 'suscribir-pac'){
      openOperation('includes/components/movements/cuentas/operations/suscribir-pac.php');
    }

    //transferencias

    else if($operation == 'transferencia-mis-cuentas'){
      openOperation('includes/components/movements/cuentas/operations/transferencia-mis-cuentas.php');
    }
    else if($operation == 'transferencia-otros-bancos'){
      openOperation('includes/components/movements/cuentas/operations/transferencia-otros-bancos.php');
    }
    else if($operation == 'transferencia-otros-titulares'){
      openOperation('includes/components/movements/cuentas/operations/transferencia-otros-titulares.php');
    }
    else if($operation == 'recarga'){
      openOperation2('includes/components/movements/cuentas/operations/recarga-celulares.php');
    }
    else if($operation == 'aporte'){
      openOperation('includes/components/movements/cuentas/operations/aporte.php');
    }
     else if($operation == 'cotizaciones'){
      openOperation2('includes/components/movements/cuentas/operations/pagar-cotizaciones.php');
    }
     

    //
    else if($operation == 'pagar-cuenta-inscrita'){
      openOperation('includes/components/movements/cuentas/operations-pagar-servicios/pagar-cuenta-inscrita.html');
    }

    //
    else if($operation == 'rescatar'){
      openOperation('includes/components/movements/deposito-a-plazo/operations/rescatar-deposito.php');
    }
    
    else if($operation == 'rescatarDap'){
      openOperation('includes/components/movements/deposito-a-plazo/operations/rescatar-deposito-dap.php');
    }


    //

    else if($operation == 'mas-consultas-movimientos'){
      openOperation('includes/components/movements/cuentas/operations/consulta-movimientos.php');
    }

    else if($operation == 'mas-consultas-movimientos-tarjetas'){
      openOperation('includes/components/movements/tarjetas/operations/consulta-historico-estado-cuentas.php');
    }


    else if($operation == 'acciones-realizar-abono'){
      openOperation('includes/components/movements/inversiones/operations/realizar-abono.php');
    }

    else if($operation == 'acciones-realizar-transferencia'){
      openOperation('includes/components/movements/inversiones/operations/realizar-transferencia.php');
    }

    else if($operation == 'acciones-comprar-vender-acciones'){
      openOperation('includes/components/movements/inversiones/operations/compra-venta-acciones.php');
    }

    else if($operation == 'acciones-comprar-vender-acciones'){
      openOperation('includes/components/movements/inversiones/operations/compra-venta-acciones.php');
    }

    //

    else if($operation == 'busqueda-linea'){
        openOperation('includes/components/movements/cuentas/operations/realizar-busqueda-linea.php');
    }

    else if($operation == 'busqueda-credito'){
        openOperation('includes/components/movements/creditos/operations/consulta-busqueda.php');
    }

    //

    else if($operation == 'bloquear-tarjeta'){
      openOperation('includes/components/movements/tarjetas-debito/operations/bloquear-tarjeta.php');
    }

    else if($operation == 'anular-cheques'){
      openOperation('includes/components/movements/cuentas/operations/anular-cheques.php');
    }

    //

    else if($operation == 'anular-cheques'){
      openOperation('includes/components/movements/cuentas/operations/anular-cheques.php');
    }

    //

    else if($operation == 'pagar-cuota-consumo'){
      openOperation('includes/components/movements/creditos/operations/pagar-cuota.php');
    }

    else if($operation == 'pagar-cuota-hipotecario'){
      openOperation('includes/components/movements/creditos/operations/pagar-dividendo.php');
    }

    //
    else if($operation == 'invertir-fondo'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/invertir.php');
    }

     else if($operation == 'rescatar-fondo'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/rescatar.php');
    }

    else if($operation == 'traspaso-fondo'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/traspaso.php');
    }

    //tarjeta de crédito
    else if($operation == 'tarjetaMovimientoPorFacturar'){
      openOperation('includes/components/movements/tarjetas/operations/consultar-movimientos-por-facturar.php');
    }

    else if($operation == 'ver-historial-movimientos'){
      openOperation('includes/components/movements/tarjetas/operations/ver-historial.php');
    }

    else if($operation == 'tarjetaConsultarEstadoCuenta'){
      openOperation('includes/components/movements/tarjetas/operations/consulta-historico-estado-cuentas.php');
    }

    else if($operation == 'tarjetaPagarDeuda'){
      openOperation('includes/components/movements/tarjetas/operations/pagar-deuda.php');
    }

    else if($operation == 'tarjetaCanjearPuntos'){
      openOperation('includes/components/dialogs/canjear-puntos.html');
    }

    else if($operation == 'tarjetaGestionarPinpass'){
      openOperation('includes/components/movements/tarjetas/operations/pinpass.php');
    }

    else if($operation == 'tarjetaAvanceEnLinea'){
      openOperation('includes/components/movements/tarjetas/operations/avance-linea.php');
    }

    else if($operation == 'tarjetaConsultarOinscribirPat'){
      openOperation('includes/components/movements/tarjetas/operations/pat.php');
    }

   

    // tarjeta debito

    else if($operation == 'tarjeta-adicional'){
      openOperation('includes/components/movements/tarjetas/operations/tarjeta-adicional.php');
    }

    else if($operation == 'tarjeta-deb-clave-pinpas'){
      openOperation('includes/components/movements/tarjetas-debito/operations/clave-pinpass.php');
    }

    else if($operation == 'tarjeta-deb-montos-horarios'){
      openOperation('includes/components/movements/tarjetas-debito/operations/definir-montos-horarios.php');
    }

    else if($operation == 'tarjeta-deb-bloquear-tarjeta'){
      openOperation('includes/components/movements/tarjetas-debito/operations/bloquear-tarjeta.php');
    }

    else if($operation == 'tarjeta-deb-apagar-tarjeta'){
      openOperation('includes/components/movements/tarjetas-debito/operations/apagar-tarjeta.php');
    }

    else if($operation == 'tarjeta-deb-zona'){
      openOperation('includes/components/movements/tarjetas-debito/operations/cambiar-zona-geografica.php');
    }

    //CREDITO DE CONSUMO
    else if($operation == 'creditoConsultar'){
      openOperation('includes/components/movements/creditos/operations/consulta-busqueda.php');
    }

    else if($operation == 'creditoPagarCuota'){
      openOperation('includes/components/movements/creditos/operations/pagar-cuota.php');
    }

    //credito hipotecario
    else if($operation == 'creditoGastosOperacionales'){
      openOperation('includes/components/movements/creditos/operations/consulta-detalle-gastos.php');
    }

    else if($operation == 'creditoPagarDividendo'){
      openOperation('includes/components/movements/creditos/operations/pagar-dividendo.php');
    }

    else if($operation == 'creditoConsultarPagoDividendo'){
      openOperation('includes/components/movements/creditos/operations/consulta-busqueda-personalizada.php');
    }

    //FFMM
    else if($operation == 'ffmmTraspasarEntreFondos'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/traspaso.php');
    }

    else if($operation == 'ffmmConsultarCartolaHistorica'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/consulta-cartola-historica.php');
    }


    else if($operation == 'gestionarPac'){
      openOperation('includes/components/movements/ahorro-inversiones/operations/gestionar-pac.php');
    }

    // Pagar cuentas 
     else if($operation == 'pagarCuentas'){
      openOperation('includes/components/movements/cuentas/operations/pago-cuentas.php');
    }

  



  }
    initShowOperation($(document));
    initOperationTabsXs($(document));
    initOperationRequest($(document));
    $(document).on("capgemini.ajax.load", function(event, element) {
        initShowOperation($(element));
    });
});
$(document).ready(function() {
    var $aOfAcordeon = $(".accordeon").find("li > a");
    $aOfAcordeon.on("vclick", function() {
        var $this = $(this);
        var $li = $this.closest("li");
        var $dropContent = $this.siblings(".drop-content");
        if ($li.hasClass("active")) {
            $li.removeClass("active");
            $dropContent.slideUp(function() {
                $dropContent.removeClass("opened");
            });
            if ($li.hasClass("filtered")) {
                $.clearFilters($li);
            }
        } else {
            $li.addClass("active");
            $dropContent.slideDown(function() {
                $(this).addClass("opened");
            });
        }
        return false;
    });
});
$(document).ready(function() {
    var initFilters = function($cntxt) {
        $(".filters", $cntxt).each(function() {
            var $context = $(this);
            var setFilterValue = function($element, text) {
                $element.addClass("filtered");
                $element.find(".drop-content").slideUp(function() {
                    var $span = $element.find("> a .span-info");
                    if ($span.length == 0) {
                        $element.find("> a > span").append('<span class="span-info">' + text + "</span>");
                    } else {
                        $span.text(text);
                    }
                });
            };
            $(".cheque-filter", $context).each(function() {
                var $subcontext = $(this);
                var $confirm = $(".confirm-button", $subcontext);
                var $numCheck = $(".num-cheque", $subcontext);
                var $numTalon = $("select.selectpicker", $subcontext);
                $("input:radio", $subcontext).click(function() {
                    $confirm.attr("disabled", false);
                    $numCheck.removeClass("tooltip-validation-invalid");
                    $numCheck.tooltip("destroy");
                    $numTalon.removeClass("tooltip-validation-invalid");
                    var $selectBtn = $(".bootstrap-select", $subcontext);
                    $selectBtn.removeClass("tooltip-validation-invalid");
                    $selectBtn.tooltip("destroy");
                    if ($(".check-numbered", $subcontext).checkbox("checked")) {
                        $numCheck.removeAttr("disabled");
                        $numTalon.prop("disabled", true);
                        $numTalon.selectpicker("refresh");
                    } else {
                        $numTalon.prop("disabled", false);
                        $numTalon.selectpicker("refresh");
                        $numCheck.attr("disabled", true);
                    }
                });
                $numTalon.on("change", function() {
                    $numTalon.removeClass("tooltip-validation-invalid");
                    var $selectBtn = $(".bootstrap-select", $subcontext);
                    $selectBtn.removeClass("tooltip-validation-invalid");
                    $selectBtn.tooltip("destroy");
                });
                $confirm.click(function() {
                    var $form = $(this).closest("form");
                    if ($form.valid()) {
                        var text = "";
                        if ($(".check-numbered", $subcontext).checkbox("checked")) {
                            text += $numCheck.val();
                        } else {
                            if ($(".talon-numbered", $subcontext).checkbox("checked")) {
                                text += $(".selectpicker.talon option:selected").text();
                            }
                        }
                        setFilterValue($subcontext, text);
                    }
                    return false;
                });
            });
            $(".date-filter", $context).each(function() {
                var $subcontext = $(this);
                var $confirm = $(".confirm-button", $subcontext);
                var $datepickers = $(".datepicker", $subcontext);
                var $dateFrom = $(".dateFieldFrom", $subcontext);
                var $dateTo = $(".dateFieldTo", $subcontext);
                $datepickers.change(function() {
                    var dateFromDate = $dateFrom.datepicker("getDate");
                    var dateToDate = $dateTo.datepicker("getDate");
                    if (Date.parse(dateFromDate) <= Date.parse(dateToDate)) {
                        $confirm.removeAttr("disabled");
                    } else {
                        $confirm.attr("disabled", true);
                    }
                    $dateTo.datepicker("option", "minDate", dateFromDate);
                });
                $("input:radio", $subcontext).click(function() {
                    if ($(".filter-period", $subcontext).checkbox("checked")) {
                        $datepickers.removeAttr("disabled");
                        $confirm.attr("disabled", true);
                    } else {
                        $datepickers.attr("disabled", true);
                        $confirm.removeAttr("disabled");
                    }
                });
                $confirm.click(function() {
                    var dateFromDate = $dateFrom.datepicker("getDate");
                    var dateToDate = $dateTo.datepicker("getDate");
                    var text = "";
                    if ($(".filter-period", $subcontext).checkbox("checked")) {
                        text = "Desde: " + $dateFrom.val() + " Hasta: " + $dateTo.val();
                    } else {
                        text = $("input:radio:checked", $subcontext).val();
                    }
                    setFilterValue($subcontext, text);
                    return false;
                });
            });
            $(".amount-filter", $context).each(function() {
                var $subcontext = $(this);
                var $confirm = $(".confirm-button", $subcontext);
                var $from = $("input.from", $subcontext);
                var $to = $("input.to", $subcontext);
                var $description = $(".filter-description", $subcontext);
                var fromMin = $from.data("min") === undefined ? Number.MIN_VALUE : $from.data("min");
                var fromMax = $from.data("max") === undefined ? Number.MAX_VALUE : $from.data("max");
                var toMin = $to.data("min") === undefined ? Number.MIN_VALUE : $to.data("min");
                var toMax = $to.data("max") === undefined ? Number.MAX_VALUE : $to.data("max");
                var showDescription = function(numberFrom, numberTo) {
                    var text = "";
                    if (!isNaN(numberFrom) && isNaN(numberTo)) {
                        text += "Se mostrarán los resultados mayores de $" + numberFrom;
                    } else {
                        if (isNaN(numberFrom) && !isNaN(numberTo)) {
                            text += "Se mostrarán los resultados menores de $" + numberTo;
                        } else {
                            if (!isNaN(numberFrom) && !isNaN(numberTo)) {
                                text += "Se mostrarán los resultados mayores de $" + numberFrom + " y menores de $" + numberTo;
                            }
                        }
                    }
                    $description.text(text);
                };
                var clearDescription = function() {
                    $description.text("");
                };
                $("input:text", $subcontext).on("keyup change", function() {
                    var valid = false;
                    if ($from.val() != "" && !jQuery.isNumeric($from.val())) {
                        valid = false;
                    } else {
                        if ($to.val() != "" && !jQuery.isNumeric($to.val())) {
                            valid = false;
                        } else {
                            var numberFrom = parseFloat($from.val());
                            var numberTo = parseFloat($to.val());
                            if ($from.val() != "" && $to.val() == "" && numberFrom >= fromMin && numberFrom <= fromMax) {
                                valid = true;
                            } else {
                                if ($from.val() == "" && $to.val() != "" && numberTo >= toMin && numberTo <= toMax) {
                                    valid = true;
                                } else {
                                    if ($from.val() != "" && $to.val() != "" && numberFrom >= fromMin && numberFrom <= fromMax && numberTo >= toMin && numberTo <= toMax && numberFrom < numberTo) {
                                        valid = true;
                                    }
                                }
                            }
                        }
                    }
                    if (valid) {
                        showDescription(numberFrom, numberTo);
                        $confirm.removeAttr("disabled");
                    } else {
                        clearDescription();
                        $confirm.attr("disabled", true);
                    }
                });
                $confirm.click(function() {
                    var numberFrom = $from.val();
                    var numberTo = $to.val();
                    var text = "";
                    if (numberFrom !== "") {
                        text += "Desde: " + (numberFrom.replace(/^0+/, ""));
                    }
                    if (numberTo !== "") {
                        text += (text === "" ? "" : " - ") + (" Hasta: " + (numberTo.replace(/^0+/, "")));
                    }
                    setFilterValue($subcontext, text);
                    return false;
                });
            });
            $(".radio-filter", $context).each(function() {
                var $subcontext = $(this);
                var $confirm = $(".confirm-button", $subcontext);
                $("input:radio", $subcontext).click(function() {
                    $confirm.removeAttr("disabled");
                });
                $confirm.click(function() {
                    setFilterValue($subcontext, $("input:radio:checked", $subcontext).val());
                    return false;
                });
            });
            $(".autocomplete-filter", $context).each(function() {
                var $subcontext = $(this);
                var $autocomplete = $(".autocomplete", $subcontext);
                $autocomplete.on("autocompleteselect", function(event, ui) {
                    setFilterValue($subcontext, ui.item.label);
                });
            });
            $(".selector").on("autocompleteselect", function(event, ui) {
            });
            $(".clear-filters", $context).click(function() {
                $.clearFilters($("> .accordeon > li", $context));
            });
        });
    };
    var initRadioSelectFilters = function($context) {
        var $radioButtons = $("input:radio.filter", $context);
        $radioButtons.on("click", function() {
            var targetName = $(this).attr("name");
            var filterType = $(this).data("filter-type");
            $radioButtons.each(function() {
                if ($(this).attr("name") == targetName) {
                    switch (filterType) {
                        case "enabler":
                            var $targetTextInputs = $(this).parent().parent().find("input:text");
                            if ($(this).prop("checked")) {
                                $targetTextInputs.removeAttr("disabled");
                            } else {
                                $targetTextInputs.attr("disabled", "disabled").val("");
                                $targetTextInputs.removeClass("tooltip-validation-invalid");
                                $targetTextInputs.tooltip("destroy");
                            }
                            break;
                        case "disabler":
                            var $target = $(this).parent().next();
                            if ($(this).prop("checked")) {
                                $target.find("input:text").removeAttr("disabled");
                            } else {
                                $target.find("input:text").attr("disabled", "disabled").val("").next().addClass("hidden");
                            }
                            break;
                        case "visibility":
                            var $target = $(this).parent().next();
                            if ($(this).prop("checked")) {
                                $target.removeClass("hidden");
                            } else {
                                $target.addClass("hidden");
                                $target.find("input:text", $(this)).val("");
                            }
                            break;
                        default:
                            break;
                    }
                }
            });
        });
    };
    initFilters($(document));
    initRadioSelectFilters($(document));
    $(document).on("capgemini.ajax.load", function(event, element) {
        initFilters($(element));
        initRadioSelectFilters($(element));
    });
});
$.clearFilters = function($li) {
    var $spanInfo = $li.find(".span-info");
    var $dropContent = $li.find(".drop-content");
    var $radios = $dropContent.find(':input[type="radio"]');
    var $texts = $dropContent.find(':input[type="text"]');
    var $datepickers = $dropContent.find(".datepicker");
    var $btns = $dropContent.find(".confirm-button");
    var $description = $li.find(".filter-description");
    $("#search-num-input").attr("disabled", true);
    $("#talon-picker").prop("disabled", true);
    $("#talon-picker").selectpicker("refresh");
    $("#talon-picker").val(1);
    $(".bootstrap-select .filter-option").text("Seleccionar");
    $li.removeClass("filtered").removeClass("active");
    $spanInfo.remove();
    $radios.checkbox("uncheckAll");
    $texts.val("");
    $description.text("");
    $datepickers.attr("disabled", true);
    $btns.attr("disabled", true);
};
$(function() {
    var split = function(val) {
        return val.split(/,\s*/);
    };
    var extractLast = function(term) {
        return split(term).pop();
    };
    var initialize = function($context) {
        if ($context === undefined) {
            $context = $(document);
        }
        $("input.autocomplete", $context).each(function() {
            var $autocomplete = $(this);
            var options = $autocomplete.data("options");
            var json = $autocomplete.data("json");
            var autofocus = $autocomplete.data("autofocus");
            var minlength = $autocomplete.data("minlength");
            if (options !== undefined) {
                $autocomplete.autocomplete({source: options.split(","),autoFocus: autofocus,minLength: minlength,create: function() {
                        if ($autocomplete.hasClass("scrollable")) {
                            $(this).data("ui-autocomplete").menu.element.addClass("scrollable");
                        }
                    }});
            } else {
                if (json !== undefined) {
                    var config = {};
                    if ($autocomplete.hasClass("multiple")) {
                        config.source = function(request, response) {
                            $.getJSON(json, {term: extractLast(request.term)}, response);
                        };
                        config.select = function(event, ui) {
                            var terms = split(this.value);
                            terms.pop();
                            terms.push(ui.item.value);
                            this.value = terms.join(", ");
                            return false;
                        };
                        config.focus = function() {
                            return false;
                        };
                    } else {
                        config.source = json;
                    }
                    config.autoFocus = autofocus;
                    config.minLength = minlength;
                    $autocomplete.autocomplete(config);
                } else {
                    $autocomplete.val("no data source provided").css("color", "red");
                }
            }
        });
    };
    $(document).ready(function() {
        initialize();
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        initialize($(element));
    });
});
$(function() {
    var initFileUpload = function($context) {
        var url = window.location.hostname === "blueimp.github.io" ? "//jquery-file-upload.appspot.com/" : "fileupload/", uploadButton = $("<button/>").addClass("btn btn-primary").prop("disabled", true).text("Processing...").on("click", function() {
            var $this = $(this), data = $this.data();
            $this.off("click").text("Abortar").on("click", function() {
                $this.remove();
                data.abort();
            });
            data.submit().always(function() {
                $this.remove();
            });
        });
        $("#fileupload").fileupload({url: url,dataType: "json",autoUpload: true,acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,maxFileSize: 5000000,disableImageResize: /Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),disableImagePreview: true,previewMaxWidth: 100,previewMaxHeight: 100,previewCrop: true}).on("fileuploadadd", function(e, data) {
            data.context = $('<div class="file"/>').appendTo("#files");
            $.each(data.files, function(index, file) {
                var fileName = file.name;
                if (fileName.length > 40) {
                    console.log(fileName.length);
                    fileName = fileName.substring(0, 40) + " ...";
                }
                var node = $("<p/>").append($('<span class="name table-button"/>').text(fileName));
                if (!index) {
                    node.append(uploadButton.clone(true).data(data));
                }
                node.appendTo(data.context);
            });
        }).on("fileuploadprocessalways", function(e, data) {
            var index = data.index, file = data.files[index], node = $(data.context.children()[index]);
            if (file.preview) {
                node.prepend("<br>").prepend(file.preview);
            }
            if (file.error) {
                node.append("<br>").append($('<span class="text-danger"/>').text(file.error));
            }
            if (index + 1 === data.files.length) {
                data.context.find("button").text("Subir").hide();
            }
        }).on("fileuploadprogressall", function(e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $("#progress .progress-bar").css("width", progress + "%");
        }).on("fileuploaddone", function(e, data) {
            $.each(data.result.files, function(index, file) {
                if (file.url) {
                    var link = $("<a>").attr("target", "_blank").prop("href", file.url);
                    $(data.context.children()[index]).find(".name").wrap(link);
                    var fileSize = Math.round(file.size / 1024);
                    $(data.context.children()[index]).append($('<span class="size"/>').text(fileSize + " Kb"));
                    var deleteButton = $('<a title="Anular" class="btn white trans table-button"><span class="icon-16 blue n05-eliminar table-button"></span></a>').on("vclick", function() {
                        $(this).parent().parent().remove();
                    });
                    $(data.context.children()[index]).append(deleteButton);
                    var downloadButton = $('<a title="Descargar" class="btn white trans table-button"><span class="icon-16 blue n02-guardar table-button"></span></a>').attr("target", "_blank").prop("href", file.url);
                    $(data.context.children()[index]).append(downloadButton);
                } else {
                    if (file.error) {
                        var error = $('<span class="text-danger"/>').text(file.error);
                        $(data.context.children()[index]).append("<br>").append(error);
                    }
                }
            });
        }).on("fileuploadfail", function(e, data) {
            $.each(data.files, function(index, file) {
                var error = $('<span class="text-danger"/>').text("File upload failed.");
                $(data.context.children()[index]).append("<br>").append(error);
            });
        }).prop("disabled", !$.support.fileInput).parent().addClass($.support.fileInput ? undefined : "disabled");
    };
    $(document).ready(function() {
        initFileUpload($(this));
        x=0;
        $("#content-posicion-global .sprite-arrow").each(function(){
            if (x!=0)
                $(this).click();
            x++;
        })
         //$("#content-posicion-global .sprite-arrow").click();
         //$("#content-posicion-global .sprite-arrow:first").click();
    });
    $(document).on("capgemini.ajax.load", function(event, element) {
        initFileUpload($(element));
    });
});


/*$(window).resize(function(){
    if ($(window).width() <= 768){
        $('.tab-left').removeClass('active');
        $('#tab-operaciones').removeClass('active');
    } else {
        $('.tab-left').addClass('active');
        $('#tab-operaciones').addClass('active');

        //CLICK

    }
});*/



//MODIFICACIONES QUIERO + VOLVER
    $(document).ready(function() {
        $('.abrir-personalizar').click(function(e) {
            e.preventDefault();
            $(".tab-personalizar, #tab-personalizar").addClass('active');
            $('#tab-operaciones, .tab-left').removeClass('active')
        });


        /*$('.quiero-mobile').click(function(e) {
            $(this).toggleClass('active');

            if(!$('.tabmain-operaciones').hasClass("cerrar-tabmain hidden")){
                $('.tabmain-operaciones').addClass("cerrar-tabmain hidden");

            }else{
                $('.tabmain-operaciones').removeClass("cerrar-tabmain hidden");
            }
        });

        $('.col-operaciones a').click(function(e) {
            e.preventDefault();
            $('.quiero-mobile').css('display', 'none').removeClass('visible-xs');
            $('.quiero-volver').css('display', 'block').removeClass('visible-xs hidden');
        });

        $('.quiero-volver').click(function(e) {
            e.preventDefault();
            $(this).css('display', 'none').removeClass('visible-xs hidden');
            $('.quiero-mobile').css('display', 'block');
            $('#operacion-consulta').css('display', 'none').addClass('hidden');
            $('.tab-right').addClass('mostrar-opciones');
            $('.tabmain-operaciones').removeClass("cerrar-tabmain hidden");
        });
    });

    $(window).resize(function(){
        if ($(window).width() <= 768){
        $('#tab-operaciones').addClass('active');
        $('.tab-head').addClass('active');
    } else {
        $('#tab-operaciones').removeClass('active');
        $('.tab-head').removeClass('active');
        $('.tab-left').removeClass('active');
        $('.tabmain-operaciones').removeClass('cerrar-tabmain');
    } */
    });




    $(document).on('click', '.date-filter.active.filtered', function(e) {
        e.preventDefault();
        $('.date-filter').removeClass('filtered');
        $('.span-info').fadeOut();
       //$('.drop-content').addClass('opened').css('display', 'block');
       $('.drop-content').slideDown().addClass('opened');
       $('.confirm-button').attr('disabled', 'disabled');
       $('.filtro-anos label').removeClass('on');
    });

    $(document).on('click', '.confirm-button', function(e) {
        e.preventDefault();
        $('.span-info').css('display', 'inline-block');
    });


